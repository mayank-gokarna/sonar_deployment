var Prototype={Version:"1.7",Browser:function(){var a=navigator.userAgent,b="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!b,Opera:b,WebKit:-1<a.indexOf("AppleWebKit/"),Gecko:-1<a.indexOf("Gecko")&&-1===a.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(a)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var a=window.Element||window.HTMLElement;return!(!a||!a.prototype)}(),SpecificElementExtensions:function(){if("undefined"!==
typeof window.HTMLDivElement)return!0;var a=document.createElement("div"),b=document.createElement("form"),c=!1;a.__proto__&&a.__proto__!==b.__proto__&&(c=!0);return c}()},ScriptFragment:"\x3cscript[^\x3e]*\x3e([\\S\\s]*?)\x3c/script\x3e",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(a){return a}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);
var Class=function(){function a(){}var b=function(){for(var a in{toString:1})if("toString"===a)return!1;return!0}();return{create:function(){function b(){this.initialize.apply(this,arguments)}var d=null,g=$A(arguments);Object.isFunction(g[0])&&(d=g.shift());Object.extend(b,Class.Methods);b.superclass=d;b.subclasses=[];d&&(a.prototype=d.prototype,b.prototype=new a,d.subclasses.push(b));for(var d=0,f=g.length;d<f;d++)b.addMethods(g[d]);b.prototype.initialize||(b.prototype.initialize=Prototype.emptyFunction);
return b.prototype.constructor=b},Methods:{addMethods:function(a){var d=this.superclass&&this.superclass.prototype,g=Object.keys(a);b&&(a.toString!=Object.prototype.toString&&g.push("toString"),a.valueOf!=Object.prototype.valueOf&&g.push("valueOf"));for(var f=0,e=g.length;f<e;f++){var k=g[f],h=a[k];if(d&&Object.isFunction(h)&&"$super"==h.argumentNames()[0]){var n=h,h=function(a){return function(){return d[a].apply(this,arguments)}}(k).wrap(n);h.valueOf=n.valueOf.bind(n);h.toString=n.toString.bind(n)}this.prototype[k]=
h}return this}}}}();
(function(){function a(a){switch(a){case null:return n;case void 0:return q}switch(typeof a){case "boolean":return m;case "number":return z;case "string":return s}return t}function b(a,b){for(var e in b)a[e]=b[e];return a}function c(a){return d("",{"":a},[])}function d(b,e,c){e=e[b];a(e)===t&&"function"===typeof e.toJSON&&(e=e.toJSON(b));b=h.call(e);switch(b){case y:case u:case A:e=e.valueOf()}switch(e){case null:return"null";case !0:return"true";case !1:return"false"}switch(typeof e){case "string":return e.inspect(!0);case "number":return isFinite(e)?
String(e):"null";case "object":for(var k=0,n=c.length;k<n;k++)if(c[k]===e)throw new TypeError;c.push(e);var f=[];if(b===C){k=0;for(n=e.length;k<n;k++){var g=d(k,e,c);f.push("undefined"===typeof g?"null":g)}f="["+f.join(",")+"]"}else{for(var q=Object.keys(e),k=0,n=q.length;k<n;k++)b=q[k],g=d(b,e,c),"undefined"!==typeof g&&f.push(b.inspect(!0)+":"+g);f="{"+f.join(",")+"}"}c.pop();return f}}function g(a){return JSON.stringify(a)}function f(b){if(a(b)!==t)throw new TypeError;var e=[],c;for(c in b)b.hasOwnProperty(c)&&
e.push(c);return e}function e(a){return h.call(a)===C}function k(a){return"undefined"===typeof a}var h=Object.prototype.toString,n="Null",q="Undefined",m="Boolean",z="Number",s="String",t="Object",u="[object Boolean]",y="[object Number]",A="[object String]",C="[object Array]",F=window.JSON&&"function"===typeof JSON.stringify&&"0"===JSON.stringify(0)&&"undefined"===typeof JSON.stringify(Prototype.K);"function"==typeof Array.isArray&&(Array.isArray([])&&!Array.isArray({}))&&(e=Array.isArray);b(Object,
{extend:b,inspect:function(a){try{return k(a)?"undefined":null===a?"null":a.inspect?a.inspect():String(a)}catch(b){if(b instanceof RangeError)return"...";throw b;}},toJSON:F?g:c,toQueryString:function(a){return $H(a).toQueryString()},toHTML:function(a){return a&&a.toHTML?a.toHTML():String.interpret(a)},keys:Object.keys||f,values:function(a){var b=[],e;for(e in a)b.push(a[e]);return b},clone:function(a){return b({},a)},isElement:function(a){return!!(a&&1==a.nodeType)},isArray:e,isHash:function(a){return a instanceof
Hash},isFunction:function(a){return"[object Function]"===h.call(a)},isString:function(a){return h.call(a)===A},isNumber:function(a){return h.call(a)===y},isDate:function(a){return"[object Date]"===h.call(a)},isUndefined:k})})();
Object.extend(Function.prototype,function(){function a(a,b){for(var c=a.length,e=b.length;e--;)a[c+e]=b[e];return a}function b(b,g){b=c.call(b,0);return a(b,g)}var c=Array.prototype.slice;return{argumentNames:function(){var a=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1==a.length&&!a[0]?[]:a},bind:function(a){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;var g=this,f=c.call(arguments,
1);return function(){var e=b(f,arguments);return g.apply(a,e)}},bindAsEventListener:function(b){var g=this,f=c.call(arguments,1);return function(e){e=a([e||window.event],f);return g.apply(b,e)}},curry:function(){if(!arguments.length)return this;var a=this,g=c.call(arguments,0);return function(){var c=b(g,arguments);return a.apply(this,c)}},delay:function(a){var b=this,f=c.call(arguments,1);return window.setTimeout(function(){return b.apply(b,f)},1E3*a)},defer:function(){var b=a([0.01],arguments);
return this.delay.apply(this,b)},wrap:function(b){var c=this;return function(){var f=a([c.bind(this)],arguments);return b.apply(this,f)}},methodize:function(){if(this._methodized)return this._methodized;var b=this;return this._methodized=function(){var c=a([this],arguments);return b.apply(null,c)}}}}());
(function(a){function b(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function c(){return this.toISOString()}a.toISOString||(a.toISOString=b);a.toJSON||(a.toJSON=c)})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(a){return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(a,b){this.callback=a;this.frequency=b;this.currentlyExecuting=!1;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1E3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(a){throw this.currentlyExecuting=
!1,a;}}});Object.extend(String,{interpret:function(a){return null==a?"":String(a)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){function a(a){if(Object.isFunction(a))return a;var b=new Template(a);return function(a){return b.evaluate(a)}}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(a){var b=this.strip().match(/([^?#]*)(#.*)?$/);return!b?{}:b[1].split(a||"\x26").inject({},function(a,b){if((b=b.split("\x3d"))[0]){var e=decodeURIComponent(b.shift()),c=1<b.length?b.join("\x3d"):b[0];void 0!=c&&(c=decodeURIComponent(c));e in a?(Object.isArray(a[e])||(a[e]=[a[e]]),
a[e].push(c)):a[e]=c}return a})}function d(a){var b=this.unfilterJSON(),c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;c.test(b)&&(b=b.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));try{if(!a||b.isJSON())return eval("("+b+")")}catch(d){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function g(){var a=this.unfilterJSON();return JSON.parse(a)}var f=window.JSON&&"function"===typeof JSON.parse&&
JSON.parse('{"test": true}').test;return{gsub:function(b,c){var h="",d=this,f;c=a(c);Object.isString(b)&&(b=RegExp.escape(b));if(!b.length&&!b.source)return c=c(""),c+d.split("").join(c)+c;for(;0<d.length;)(f=d.match(b))?(h+=d.slice(0,f.index),h+=String.interpret(c(f)),d=d.slice(f.index+f[0].length)):(h+=d,d="");return h},sub:function(b,c,h){c=a(c);h=Object.isUndefined(h)?1:h;return this.gsub(b,function(a){return 0>--h?a[0]:c(a)})},scan:function(a,b){this.gsub(a,b);return String(this)},truncate:function(a,
b){a=a||30;b=Object.isUndefined(b)?"...":b;return this.length>a?this.slice(0,a-b.length)+b:String(this)},strip:String.prototype.trim||b,stripTags:function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},stripScripts:function(){return this.replace(RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var a=RegExp(Prototype.ScriptFragment,"im");return(this.match(RegExp(Prototype.ScriptFragment,"img"))||[]).map(function(b){return(b.match(a)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},
escapeHTML:function(){return this.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")},unescapeHTML:function(){return this.stripTags().replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&amp;/g,"\x26")},toQueryParams:c,parseQuery:c,toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){return 1>a?"":Array(a+1).join(this)},camelize:function(){return this.replace(/-+(.)?/g,
function(a,b){return b?b.toUpperCase():""})},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},dasherize:function(){return this.replace(/_/g,"-")},inspect:function(a){var b=this.replace(/[\x00-\x1f\\]/g,function(a){return a in String.specialChar?String.specialChar[a]:"\\u00"+a.charCodeAt().toPaddedString(2,
16)});return a?'"'+b.replace(/"/g,'\\"')+'"':"'"+b.replace(/'/g,"\\'")+"'"},unfilterJSON:function(a){return this.replace(a||Prototype.JSONFilter,"$1")},isJSON:function(){var a=this;if(a.blank())return!1;a=a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");a=a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");a=a.replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(a)},evalJSON:f?g:d,include:function(a){return-1<this.indexOf(a)},startsWith:function(a){return 0===
this.lastIndexOf(a,0)},endsWith:function(a){var b=this.length-a.length;return 0<=b&&this.indexOf(a,b)===b},empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(a,b){return(new Template(this,b)).evaluate(a)}}}());
var Template=Class.create({initialize:function(a,b){this.template=a.toString();this.pattern=b||Template.Pattern},evaluate:function(a){a&&Object.isFunction(a.toTemplateReplacements)&&(a=a.toTemplateReplacements());return this.template.gsub(this.pattern,function(b){if(null==a)return b[1]+"";var c=b[1]||"";if("\\"==c)return b[2];var d=a,g=b[3],f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;b=f.exec(g);if(null==b)return c;for(;null!=b;){var e=b[1].startsWith("[")?b[2].replace(/\\\\]/g,"]"):b[1],d=d[e];if(null==
d||""==b[3])break;g=g.substring("["==b[3]?b[1].length:b[0].length);b=f.exec(g)}return c+String.interpret(d)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
var $break={},Enumerable=function(){function a(a,b){a=a||Prototype.K;var e=!0;this.each(function(c,d){e=e&&!!a.call(b,c,d);if(!e)throw $break;});return e}function b(a,b){a=a||Prototype.K;var e=!1;this.each(function(c,d){if(e=!!a.call(b,c,d))throw $break;});return e}function c(a,b){a=a||Prototype.K;var e=[];this.each(function(c,d){e.push(a.call(b,c,d))});return e}function d(a,b){var e;this.each(function(c,d){if(a.call(b,c,d))throw e=c,$break;});return e}function g(a,b){var e=[];this.each(function(c,
d){a.call(b,c,d)&&e.push(c)});return e}function f(a){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(a))return!0;var b=!1;this.each(function(e){if(e==a)throw b=!0,$break;});return b}function e(){return this.map()}return{each:function(a,b){var e=0;try{this._each(function(c){a.call(b,c,e++)})}catch(c){if(c!=$break)throw c;}return this},eachSlice:function(a,b,e){var c=-a,d=[],f=this.toArray();if(1>a)return f;for(;(c+=a)<f.length;)d.push(f.slice(c,c+a));return d.collect(b,e)},all:a,every:a,any:b,
some:b,collect:c,map:c,detect:d,findAll:g,select:g,filter:g,grep:function(a,b,e){b=b||Prototype.K;var c=[];Object.isString(a)&&(a=RegExp(RegExp.escape(a)));this.each(function(d,f){a.match(d)&&c.push(b.call(e,d,f))});return c},include:f,member:f,inGroupsOf:function(a,b){b=Object.isUndefined(b)?null:b;return this.eachSlice(a,function(e){for(;e.length<a;)e.push(b);return e})},inject:function(a,b,e){this.each(function(c,d){a=b.call(e,a,c,d)});return a},invoke:function(a){var b=$A(arguments).slice(1);
return this.map(function(e){return e[a].apply(e,b)})},max:function(a,b){a=a||Prototype.K;var e;this.each(function(c,d){c=a.call(b,c,d);if(null==e||c>=e)e=c});return e},min:function(a,b){a=a||Prototype.K;var e;this.each(function(c,d){c=a.call(b,c,d);if(null==e||c<e)e=c});return e},partition:function(a,b){a=a||Prototype.K;var e=[],c=[];this.each(function(d,f){(a.call(b,d,f)?e:c).push(d)});return[e,c]},pluck:function(a){var b=[];this.each(function(e){b.push(e[a])});return b},reject:function(a,b){var e=
[];this.each(function(c,d){a.call(b,c,d)||e.push(c)});return e},sortBy:function(a,b){return this.map(function(e,c){return{value:e,criteria:a.call(b,e,c)}}).sort(function(a,b){var e=a.criteria,c=b.criteria;return e<c?-1:e>c?1:0}).pluck("value")},toArray:e,entries:e,zip:function(){var a=Prototype.K,b=$A(arguments);Object.isFunction(b.last())&&(a=b.pop());var e=[this].concat(b).map($A);return this.map(function(b,c){return a(e.pluck(c))})},size:function(){return this.toArray().length},inspect:function(){return"#\x3cEnumerable:"+
this.toArray().inspect()+"\x3e"},find:d}}();function $A(a){if(!a)return[];if("toArray"in Object(a))return a.toArray();for(var b=a.length||0,c=Array(b);b--;)c[b]=a[b];return c}function $w(a){return!Object.isString(a)?[]:(a=a.strip())?a.split(/\s+/):[]}Array.from=$A;
(function(){function a(a,b){for(var e=0,c=this.length>>>0;e<c;e++)e in this&&a.call(b,this[e],e,this)}function b(){return e.call(this,0)}function c(a,b){b||(b=0);var e=this.length;for(0>b&&(b=e+b);b<e;b++)if(this[b]===a)return b;return-1}function d(a,b){b=isNaN(b)?this.length:(0>b?this.length+b:b)+1;var e=this.slice(0,b).reverse().indexOf(a);return 0>e?e:b-e-1}function g(){for(var a=e.call(this,0),b,c=0,d=arguments.length;c<d;c++)if(b=arguments[c],Object.isArray(b)&&!("callee"in b))for(var f=0,k=
b.length;f<k;f++)a.push(b[f]);else a.push(b);return a}var f=Array.prototype,e=f.slice,k=f.forEach;k||(k=a);Object.extend(f,Enumerable);f._reverse||(f._reverse=f.reverse);Object.extend(f,{_each:k,clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return null!=a})},flatten:function(){return this.inject([],function(a,b){if(Object.isArray(b))return a.concat(b.flatten());a.push(b);return a})},
without:function(){var a=e.call(arguments,0);return this.select(function(b){return!a.include(b)})},reverse:function(a){return(!1===a?this.toArray():this)._reverse()},uniq:function(a){return this.inject([],function(b,e,c){(0==c||(a?b.last()!=e:!b.include(e)))&&b.push(e);return b})},intersect:function(a){return this.uniq().findAll(function(b){return a.detect(function(a){return b===a})})},clone:b,toArray:b,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+
"]"}});(function(){return 1!==[].concat(arguments)[0][0]})(1,2)&&(f.concat=g);f.indexOf||(f.indexOf=c);f.lastIndexOf||(f.lastIndexOf=d)})();function $H(a){return new Hash(a)}
var Hash=Class.create(Enumerable,function(){function a(){return Object.clone(this._object)}return{initialize:function(a){this._object=Object.isHash(a)?a.toObject():Object.clone(a)},_each:function(a){for(var c in this._object){var d=this._object[c],g=[c,d];g.key=c;g.value=d;a(g)}},set:function(a,c){return this._object[a]=c},get:function(a){if(this._object[a]!==Object.prototype[a])return this._object[a]},unset:function(a){var c=this._object[a];delete this._object[a];return c},toObject:a,toTemplateReplacements:a,
keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(a){var c=this.detect(function(c){return c.value===a});return c&&c.key},merge:function(a){return this.clone().update(a)},update:function(a){return(new Hash(a)).inject(this,function(a,b){a.set(b.key,b.value);return a})},toQueryString:function(){return this.inject([],function(a,c){var d=encodeURIComponent(c.key),g=c.value;if(g&&"object"==typeof g){if(Object.isArray(g)){for(var f=[],e=0,k=g.length,h;e<
k;e++)h=g[e],f.push(Object.isUndefined(h)?d:d+"\x3d"+encodeURIComponent(String.interpret(h)));return a.concat(f)}}else a.push(Object.isUndefined(g)?d:d+"\x3d"+encodeURIComponent(String.interpret(g)));return a}).join("\x26")},inspect:function(){return"#\x3cHash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}\x3e"},toJSON:a,clone:function(){return new Hash(this)}}}());Hash.from=$H;
Object.extend(Number.prototype,function(){return{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(a,b){$R(0,this,!0).each(a,b);return this},toPaddedString:function(a,b){var c=this.toString(b||10);return"0".times(a-c.length)+c},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}}}());function $R(a,b,c){return new ObjectRange(a,b,c)}
var ObjectRange=Class.create(Enumerable,function(){return{initialize:function(a,b,c){this.start=a;this.end=b;this.exclusive=c},_each:function(a){for(var b=this.start;this.include(b);)a(b),b=b.succ()},include:function(a){return a<this.start?!1:this.exclusive?a<this.end:a<=this.end}}}()),Abstract={},Try={these:function(){for(var a,b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(g){}}return a}},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},
function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||!1},activeRequestCount:0,Responders:{responders:[],_each:function(a){this.responders._each(a)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,b,c,d){this.each(function(g){if(Object.isFunction(g[a]))try{g[a].apply(g,[b,c,d])}catch(f){}})}}};Object.extend(Ajax.Responders,Enumerable);
Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=Class.create({initialize:function(a){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}});
Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function($super,b,c){$super(c);this.transport=Ajax.getTransport();this.request(b)},request:function(a){this.url=a;this.method=this.options.method;a=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(a+=(a?"\x26":"")+"_method\x3d"+this.method,this.method="post");a&&"get"===this.method&&(this.url+=(this.url.include("?")?"\x26":"?")+a);this.parameters=
a.toQueryParams();try{var b=new Ajax.Response(this);if(this.options.onCreate)this.options.onCreate(b);Ajax.Responders.dispatch("onCreate",this,b);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body="post"==this.method?this.options.postBody||a:null;this.transport.send(this.body);if(!this.options.asynchronous&&
this.transport.overrideMimeType)this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;1<a&&!(4==a&&this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if("post"==this.method&&(a["Content-type"]=this.options.contentType+(this.options.encoding?
"; charset\x3d"+this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]))a.Connection="close";if("object"==typeof this.options.requestHeaders){var b=this.options.requestHeaders;if(Object.isFunction(b.push))for(var c=0,d=b.length;c<d;c+=2)a[b[c]]=b[c+1];else $H(b).each(function(b){a[b.key]=b.value})}for(var g in a)this.transport.setRequestHeader(g,a[g])},success:function(){var a=this.getStatus();return!a||200<=a&&300>a||304==a},getStatus:function(){try{return 1223===
this.transport.status?204:this.transport.status||0}catch(a){return 0}},respondToReadyState:function(a){a=Ajax.Request.Events[a];var b=new Ajax.Response(this);if("Complete"==a){try{this._complete=!0,(this.options["on"+b.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(b,b.headerJSON)}catch(c){this.dispatchException(c)}var d=b.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&d&&d.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&
this.evalResponse()}try{(this.options["on"+a]||Prototype.emptyFunction)(b,b.headerJSON),Ajax.Responders.dispatch("on"+a,this,b,b.headerJSON)}catch(g){this.dispatchException(g)}"Complete"==a&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var a=this.url.match(/^\s*https?:\/\/[^\/]*/);return!a||a[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(a){try{return this.transport.getResponseHeader(a)||
null}catch(b){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(a){this.request=a;a=this.transport=a.transport;var b=this.readyState=a.readyState;if(2<b&&!Prototype.Browser.IE||4==b)this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(a.responseText),this.headerJSON=this._getHeaderJSON();4==b&&(a=a.responseXML,this.responseXML=Object.isUndefined(a)?null:a,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||
""}catch(a){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(a){return null}},getResponseHeader:function(a){return this.transport.getResponseHeader(a)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var a=this.getHeader("X-JSON");if(!a)return null;a=decodeURIComponent(escape(a));try{return a.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}},
_getResponseJSON:function(){var a=this.request.options;if(!a.evalJSON||"force"!=a.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(a.sanitizeJSON||!this.request.isSameOrigin())}catch(b){this.request.dispatchException(b)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,b,c,d){this.container={success:b.success||b,failure:b.failure||(b.success?null:b)};d=Object.clone(d);var g=d.onComplete;d.onComplete=function(b,e){this.updateContent(b.responseText);Object.isFunction(g)&&g(b,e)}.bind(this);$super(c,d)},updateContent:function(a){var b=this.container[this.success()?"success":"failure"],c=this.options;c.evalScripts||(a=a.stripScripts());if(b=$(b))if(c.insertion)if(Object.isString(c.insertion)){var d=
{};d[c.insertion]=a;b.insert(d)}else c.insertion(b,a);else b.update(a)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,b,c,d){$super(d);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=b;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},
updateComplete:function(a){this.options.decay&&(this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=a.responseText);this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
function $(a){if(1<arguments.length){for(var b=0,c=[],d=arguments.length;b<d;b++)c.push($(arguments[b]));return c}Object.isString(a)&&(a=document.getElementById(a));return Element.extend(a)}Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(a,b){for(var c=[],d=document.evaluate(a,$(b)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),g=0,f=d.snapshotLength;g<f;g++)c.push(Element.extend(d.snapshotItem(g)));return c});if(!Node)var Node={};
Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});
(function(a){var b=function(){try{var a=document.createElement('\x3cinput name\x3d"x"\x3e');return"input"===a.tagName.toLowerCase()&&"x"===a.name}catch(b){return!1}}(),c=a.Element;a.Element=function(a,c){c=c||{};a=a.toLowerCase();var f=Element.cache;if(b&&c.name)return a="\x3c"+a+' name\x3d"'+c.name+'"\x3e',delete c.name,Element.writeAttribute(document.createElement(a),c);f[a]||(f[a]=Element.extend(document.createElement(a)));f=("select"===a?0:!("type"in c))?f[a].cloneNode(!1):document.createElement(a);
return Element.writeAttribute(f,c)};Object.extend(a.Element,c||{});c&&(a.Element.prototype=c.prototype)})(this);Element.idCounter=1;Element.cache={};Element._purgeElement=function(a){var b=a._prototypeUID;b&&(Element.stopObserving(a),a._prototypeUID=void 0,delete Element.Storage[b])};
Element.Methods={visible:function(a){return"none"!=$(a).style.display},toggle:function(a){a=$(a);Element[Element.visible(a)?"hide":"show"](a);return a},hide:function(a){a=$(a);a.style.display="none";return a},show:function(a){a=$(a);a.style.display="";return a},remove:function(a){a=$(a);a.parentNode.removeChild(a);return a},update:function(){var a=function(){var a=document.createElement("select"),b=!0;a.innerHTML='\x3coption value\x3d"test"\x3etest\x3c/option\x3e';a.options&&a.options[0]&&(b="OPTION"!==
a.options[0].nodeName.toUpperCase());return b}(),b=function(){try{var a=document.createElement("table");if(a&&a.tBodies)return a.innerHTML="\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3etest\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e","undefined"==typeof a.tBodies[0]}catch(b){return!0}}(),c=function(){try{var a=document.createElement("div");a.innerHTML="\x3clink\x3e";return 0===a.childNodes.length}catch(b){return!0}}(),d=a||b||c,g=function(){var a=document.createElement("script"),b=!1;try{a.appendChild(document.createTextNode("")),
b=!a.firstChild||a.firstChild&&3!==a.firstChild.nodeType}catch(c){b=!0}return b}();return function(a,b){a=$(a);for(var k=Element._purgeElement,h=a.getElementsByTagName("*"),n=h.length;n--;)k(h[n]);b&&b.toElement&&(b=b.toElement());if(Object.isElement(b))return a.update().insert(b);b=Object.toHTML(b);k=a.tagName.toUpperCase();if("SCRIPT"===k&&g)return a.text=b,a;if(d)if(k in Element._insertionTranslations.tags){for(;a.firstChild;)a.removeChild(a.firstChild);Element._getContentFromAnonymousElement(k,
b.stripScripts()).each(function(b){a.appendChild(b)})}else if(c&&Object.isString(b)&&-1<b.indexOf("\x3clink")){for(;a.firstChild;)a.removeChild(a.firstChild);Element._getContentFromAnonymousElement(k,b.stripScripts(),!0).each(function(b){a.appendChild(b)})}else a.innerHTML=b.stripScripts();else a.innerHTML=b.stripScripts();b.evalScripts.bind(b).defer();return a}}(),replace:function(a,b){a=$(a);if(b&&b.toElement)b=b.toElement();else if(!Object.isElement(b)){b=Object.toHTML(b);var c=a.ownerDocument.createRange();
c.selectNode(a);b.evalScripts.bind(b).defer();b=c.createContextualFragment(b.stripScripts())}a.parentNode.replaceChild(b,a);return a},insert:function(a,b){a=$(a);if(Object.isString(b)||Object.isNumber(b)||Object.isElement(b)||b&&(b.toElement||b.toHTML))b={bottom:b};var c,d,g,f;for(f in b)c=b[f],f=f.toLowerCase(),d=Element._insertionTranslations[f],c&&c.toElement&&(c=c.toElement()),Object.isElement(c)?d(a,c):(c=Object.toHTML(c),g=("before"==f||"after"==f?a.parentNode:a).tagName.toUpperCase(),g=Element._getContentFromAnonymousElement(g,
c.stripScripts()),("top"==f||"after"==f)&&g.reverse(),g.each(d.curry(a)),c.evalScripts.bind(c).defer());return a},wrap:function(a,b,c){a=$(a);Object.isElement(b)?$(b).writeAttribute(c||{}):b=Object.isString(b)?new Element(b,c):new Element("div",b);a.parentNode&&a.parentNode.replaceChild(b,a);b.appendChild(a);return b},inspect:function(a){a=$(a);var b="\x3c"+a.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(c){var d=c.first();c=c.last();(d=(a[d]||"").toString())&&(b+=" "+c+"\x3d"+
d.inspect(!0))});return b+"\x3e"},recursivelyCollect:function(a,b,c){a=$(a);c=c||-1;for(var d=[];(a=a[b])&&!(1==a.nodeType&&d.push(Element.extend(a)),d.length==c););return d},ancestors:function(a){return Element.recursivelyCollect(a,"parentNode")},descendants:function(a){return Element.select(a,"*")},firstDescendant:function(a){for(a=$(a).firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return $(a)},immediateDescendants:function(a){var b=[];for(a=$(a).firstChild;a;)1===a.nodeType&&b.push(Element.extend(a)),
a=a.nextSibling;return b},previousSiblings:function(a,b){return Element.recursivelyCollect(a,"previousSibling")},nextSiblings:function(a){return Element.recursivelyCollect(a,"nextSibling")},siblings:function(a){a=$(a);return Element.previousSiblings(a).reverse().concat(Element.nextSiblings(a))},match:function(a,b){a=$(a);return Object.isString(b)?Prototype.Selector.match(a,b):b.match(a)},up:function(a,b,c){a=$(a);if(1==arguments.length)return $(a.parentNode);var d=Element.ancestors(a);return Object.isNumber(b)?
d[b]:Prototype.Selector.find(d,b,c)},down:function(a,b,c){a=$(a);return 1==arguments.length?Element.firstDescendant(a):Object.isNumber(b)?Element.descendants(a)[b]:Element.select(a,b)[c||0]},previous:function(a,b,c){a=$(a);Object.isNumber(b)&&(c=b,b=!1);Object.isNumber(c)||(c=0);return b?Prototype.Selector.find(a.previousSiblings(),b,c):a.recursivelyCollect("previousSibling",c+1)[c]},next:function(a,b,c){a=$(a);Object.isNumber(b)&&(c=b,b=!1);Object.isNumber(c)||(c=0);if(b)return Prototype.Selector.find(a.nextSiblings(),
b,c);Object.isNumber(c);return a.recursivelyCollect("nextSibling",c+1)[c]},select:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a)},adjacent:function(a){a=$(a);var b=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(b,a.parentNode).without(a)},identify:function(a){a=$(a);var b=Element.readAttribute(a,"id");if(b)return b;do b="anonymous_element_"+Element.idCounter++;while($(b));Element.writeAttribute(a,
"id",b);return b},readAttribute:function(a,b){a=$(a);if(Prototype.Browser.IE){var c=Element._attributeTranslations.read;if(c.values[b])return c.values[b](a,b);c.names[b]&&(b=c.names[b]);if(b.include(":"))return!a.attributes||!a.attributes[b]?null:a.attributes[b].value}return a.getAttribute(b)},writeAttribute:function(a,b,c){a=$(a);var d={},g=Element._attributeTranslations.write;"object"==typeof b?d=b:d[b]=Object.isUndefined(c)?!0:c;for(var f in d)b=g.names[f]||f,c=d[f],g.values[f]&&(b=g.values[f](a,
c)),!1===c||null===c?a.removeAttribute(b):!0===c?a.setAttribute(b,b):a.setAttribute(b,c);return a},getHeight:function(a){return Element.getDimensions(a).height},getWidth:function(a){return Element.getDimensions(a).width},classNames:function(a){return new Element.ClassNames(a)},hasClassName:function(a,b){if(a=$(a)){var c=a.className;return 0<c.length&&(c==b||RegExp("(^|\\s)"+b+"(\\s|$)").test(c))}},addClassName:function(a,b){if(a=$(a))return Element.hasClassName(a,b)||(a.className+=(a.className?" ":
"")+b),a},removeClassName:function(a,b){if(a=$(a))return a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").strip(),a},toggleClassName:function(a,b){if(a=$(a))return Element[Element.hasClassName(a,b)?"removeClassName":"addClassName"](a,b)},cleanWhitespace:function(a){a=$(a);for(var b=a.firstChild;b;){var c=b.nextSibling;3==b.nodeType&&!/\S/.test(b.nodeValue)&&a.removeChild(b);b=c}return a},empty:function(a){return $(a).innerHTML.blank()},descendantOf:function(a,b){a=$(a);b=$(b);
if(a.compareDocumentPosition)return 8===(a.compareDocumentPosition(b)&8);if(b.contains)return b.contains(a)&&b!==a;for(;a=a.parentNode;)if(a==b)return!0;return!1},scrollTo:function(a){a=$(a);var b=Element.cumulativeOffset(a);window.scrollTo(b[0],b[1]);return a},getStyle:function(a,b){a=$(a);b="float"==b?"cssFloat":b.camelize();var c=a.style[b];if(!c||"auto"==c)c=(c=document.defaultView.getComputedStyle(a,null))?c[b]:null;return"opacity"==b?c?parseFloat(c):1:"auto"==c?null:c},getOpacity:function(a){return $(a).getStyle("opacity")},
setStyle:function(a,b){a=$(a);var c=a.style;if(Object.isString(b))return a.style.cssText+=";"+b,b.include("opacity")?a.setOpacity(b.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var d in b)"opacity"==d?a.setOpacity(b[d]):c["float"==d||"cssFloat"==d?Object.isUndefined(c.styleFloat)?"cssFloat":"styleFloat":d]=b[d];return a},setOpacity:function(a,b){a=$(a);a.style.opacity=1==b||""===b?"":1E-5>b?0:b;return a},makePositioned:function(a){a=$(a);var b=Element.getStyle(a,"position");if("static"==b||!b)a._madePositioned=
!0,a.style.position="relative",Prototype.Browser.Opera&&(a.style.top=0,a.style.left=0);return a},undoPositioned:function(a){a=$(a);a._madePositioned&&(a._madePositioned=void 0,a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right="");return a},makeClipping:function(a){a=$(a);if(a._overflow)return a;a._overflow=Element.getStyle(a,"overflow")||"auto";"hidden"!==a._overflow&&(a.style.overflow="hidden");return a},undoClipping:function(a){a=$(a);if(!a._overflow)return a;a.style.overflow=
"auto"==a._overflow?"":a._overflow;a._overflow=null;return a},clonePosition:function(a,b,c){c=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},c||{});b=$(b);var d=Element.viewportOffset(b),g=[0,0],f=null;a=$(a);"absolute"==Element.getStyle(a,"position")&&(f=Element.getOffsetParent(a),g=Element.viewportOffset(f));f==document.body&&(g[0]-=document.body.offsetLeft,g[1]-=document.body.offsetTop);c.setLeft&&(a.style.left=d[0]-g[0]+c.offsetLeft+"px");c.setTop&&(a.style.top=
d[1]-g[1]+c.offsetTop+"px");c.setWidth&&(a.style.width=b.offsetWidth+"px");c.setHeight&&(a.style.height=b.offsetHeight+"px");return a}};Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants});Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}};
Prototype.Browser.Opera?(Element.Methods.getStyle=Element.Methods.getStyle.wrap(function(a,b,c){switch(c){case "height":case "width":if(!Element.visible(b))return null;var d=parseInt(a(b,c),10);return d!==b["offset"+c.capitalize()]?d+"px":("height"===c?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"]).inject(d,function(c,d){var e=a(b,d);return null===e?c:c-parseInt(e,10)})+"px";default:return a(b,c)}}),
Element.Methods.readAttribute=Element.Methods.readAttribute.wrap(function(a,b,c){return"title"===c?b.title:a(b,c)})):Prototype.Browser.IE?(Element.Methods.getStyle=function(a,b){a=$(a);b="float"==b||"cssFloat"==b?"styleFloat":b.camelize();var c=a.style[b];!c&&a.currentStyle&&(c=a.currentStyle[b]);return"opacity"==b?(c=(a.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&c[1]?parseFloat(c[1])/100:1:"auto"==c?("width"==b||"height"==b)&&"none"!=a.getStyle("display")?a["offset"+b.capitalize()]+
"px":null:c},Element.Methods.setOpacity=function(a,b){a=$(a);var c=a.currentStyle;if(c&&!c.hasLayout||!c&&"normal"==a.style.zoom)a.style.zoom=1;var c=a.getStyle("filter"),d=a.style;if(1==b||""===b)return(c=c.replace(/alpha\([^\)]*\)/gi,""))?d.filter=c:d.removeAttribute("filter"),a;1E-5>b&&(b=0);d.filter=c.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity\x3d"+100*b+")";return a},Element._attributeTranslations=function(){var a="className",b="for",c=document.createElement("div");c.setAttribute(a,"x");
"x"!==c.className&&(c.setAttribute("class","x"),"x"===c.className&&(a="class"));c=null;c=document.createElement("label");c.setAttribute(b,"x");"x"!==c.htmlFor&&(c.setAttribute("htmlFor","x"),"x"===c.htmlFor&&(b="htmlFor"));c=null;return{read:{names:{"class":a,className:a,"for":b,htmlFor:b},values:{_getAttr:function(a,b){return a.getAttribute(b)},_getAttr2:function(a,b){return a.getAttribute(b,2)},_getAttrNode:function(a,b){var c=a.getAttributeNode(b);return c?c.value:""},_getEv:function(){var a=document.createElement("div"),
b;a.onclick=Prototype.emptyFunction;a=a.getAttribute("onclick");-1<String(a).indexOf("{")?b=function(a,b){b=a.getAttribute(b);if(!b)return null;b=b.toString();b=b.split("{")[1];b=b.split("}")[0];return b.strip()}:""===a&&(b=function(a,b){b=a.getAttribute(b);return!b?null:b.strip()});a=null;return b}(),_flag:function(a,b){return $(a).hasAttribute(b)?b:null},style:function(a){return a.style.cssText.toLowerCase()},title:function(a){return a.title}}}}}(),Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",
cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(a,b){a.checked=!!b},style:function(a,b){a.style.cssText=b?b:""}}},Element._attributeTranslations.has={},$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each(function(a){Element._attributeTranslations.write.names[a.toLowerCase()]=a;Element._attributeTranslations.has[a.toLowerCase()]=a}),function(a){Object.extend(a,{href:a._getAttr2,src:a._getAttr2,
type:a._getAttr,action:a._getAttrNode,disabled:a._flag,checked:a._flag,readonly:a._flag,multiple:a._flag,onload:a._getEv,onunload:a._getEv,onclick:a._getEv,ondblclick:a._getEv,onmousedown:a._getEv,onmouseup:a._getEv,onmouseover:a._getEv,onmousemove:a._getEv,onmouseout:a._getEv,onfocus:a._getEv,onblur:a._getEv,onkeypress:a._getEv,onkeydown:a._getEv,onkeyup:a._getEv,onsubmit:a._getEv,onreset:a._getEv,onselect:a._getEv,onchange:a._getEv})}(Element._attributeTranslations.read.values),Prototype.BrowserFeatures.ElementExtensions&&
function(){Element.Methods.down=function(a,b,c){a=$(a);if(1==arguments.length)return a.firstDescendant();var d;if(Object.isNumber(b)){d=a.getElementsByTagName("*");for(var g=[],f=0,e;e=d[f];f++)"!"!==e.tagName&&g.push(e);d=g[b]}else d=Element.select(a,b)[c||0];return d}}()):Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)?Element.Methods.setOpacity=function(a,b){a=$(a);a.style.opacity=1==b?0.999999:""===b?"":1E-5>b?0:b;return a}:Prototype.Browser.WebKit&&(Element.Methods.setOpacity=
function(a,b){a=$(a);a.style.opacity=1==b||""===b?"":1E-5>b?0:b;if(1==b)if("IMG"==a.tagName.toUpperCase()&&a.width)a.width++,a.width--;else try{var c=document.createTextNode(" ");a.appendChild(c);a.removeChild(c)}catch(d){}return a});
"outerHTML"in document.documentElement&&(Element.Methods.replace=function(a,b){a=$(a);b&&b.toElement&&(b=b.toElement());if(Object.isElement(b))return a.parentNode.replaceChild(b,a),a;b=Object.toHTML(b);var c=a.parentNode,d=c.tagName.toUpperCase();if(Element._insertionTranslations.tags[d]){var g=a.next(),d=Element._getContentFromAnonymousElement(d,b.stripScripts());c.removeChild(a);g?d.each(function(a){c.insertBefore(a,g)}):d.each(function(a){c.appendChild(a)})}else a.outerHTML=b.stripScripts();b.evalScripts.bind(b).defer();
return a});Element._returnOffset=function(a,b){var c=[a,b];c.left=a;c.top=b;return c};Element._getContentFromAnonymousElement=function(a,b,c){var d=new Element("div");a=Element._insertionTranslations.tags[a];var g=!1;a?g=!0:c&&(g=!0,a=["","",0]);if(g){d.innerHTML="\x26nbsp;"+a[0]+b+a[1];d.removeChild(d.firstChild);for(b=a[2];b--;)d=d.firstChild}else d.innerHTML=b;return $A(d.childNodes)};
Element._insertionTranslations={before:function(a,b){a.parentNode.insertBefore(b,a)},top:function(a,b){a.insertBefore(b,a.firstChild)},bottom:function(a,b){a.appendChild(b)},after:function(a,b){a.parentNode.insertBefore(b,a.nextSibling)},tags:{TABLE:["\x3ctable\x3e","\x3c/table\x3e",1],TBODY:["\x3ctable\x3e\x3ctbody\x3e","\x3c/tbody\x3e\x3c/table\x3e",2],TR:["\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e","\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e",3],TD:["\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e","\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e",
4],SELECT:["\x3cselect\x3e","\x3c/select\x3e",1]}};(function(){var a=Element._insertionTranslations.tags;Object.extend(a,{THEAD:a.TBODY,TFOOT:a.TBODY,TH:a.TD})})();Element.Methods.Simulated={hasAttribute:function(a,b){b=Element._attributeTranslations.has[b]||b;var c=$(a).getAttributeNode(b);return!(!c||!c.specified)}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);
(function(a){!Prototype.BrowserFeatures.ElementExtensions&&a.__proto__&&(window.HTMLElement={},window.HTMLElement.prototype=a.__proto__,Prototype.BrowserFeatures.ElementExtensions=!0)})(document.createElement("div"));
Element.extend=function(){function a(a,b){for(var e in b){var c=b[e];Object.isFunction(c)&&!(e in a)&&(a[e]=c.methodize())}}var b=function(a){if("undefined"!=typeof window.Element){var b=window.Element.prototype;if(b){var e="_"+(Math.random()+"").slice(2);a=document.createElement(a);b[e]="x";a="x"!==a[e];delete b[e];return a}}return!1}("object");if(Prototype.BrowserFeatures.SpecificElementExtensions)return b?function(b){if(b&&"undefined"==typeof b._extendedByPrototype){var c=b.tagName;c&&/^(?:object|applet|embed)$/i.test(c)&&
(a(b,Element.Methods),a(b,Element.Methods.Simulated),a(b,Element.Methods.ByTag[c.toUpperCase()]))}return b}:Prototype.K;var c={},d=Element.Methods.ByTag,b=Object.extend(function(b){if(!b||"undefined"!=typeof b._extendedByPrototype||1!=b.nodeType||b==window)return b;var f=Object.clone(c),e=b.tagName.toUpperCase();d[e]&&Object.extend(f,d[e]);a(b,f);b._extendedByPrototype=Prototype.emptyFunction;return b},{refresh:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(c,Element.Methods),
Object.extend(c,Element.Methods.Simulated))}});b.refresh();return b}();Element.hasAttribute=document.documentElement.hasAttribute?function(a,b){return a.hasAttribute(b)}:Element.Methods.Simulated.hasAttribute;
Element.addMethods=function(a){function b(b){b=b.toUpperCase();Element.Methods.ByTag[b]||(Element.Methods.ByTag[b]={});Object.extend(Element.Methods.ByTag[b],a)}function c(a,b,e){e=e||!1;for(var c in a){var d=a[c];if(Object.isFunction(d)&&(!e||!(c in b)))b[c]=d.methodize()}}function d(a){var b,e={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",
INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};e[a]&&(b="HTML"+e[a]+"Element");if(window[b])return window[b];b="HTML"+a+"Element";if(window[b])return window[b];b="HTML"+a.capitalize()+"Element";if(window[b])return window[b];a=document.createElement(a);return a.__proto__||a.constructor.prototype}var g=Prototype.BrowserFeatures,
f=Element.Methods.ByTag;a||(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods),BUTTON:Object.clone(Form.Element.Methods)}));if(2==arguments.length){var e=a;a=arguments[1]}e?Object.isArray(e)?e.each(b):b(e):Object.extend(Element.Methods,a||{});e=window.HTMLElement?HTMLElement.prototype:
Element.prototype;g.ElementExtensions&&(c(Element.Methods,e),c(Element.Methods.Simulated,e,!0));if(g.SpecificElementExtensions)for(var k in Element.Methods.ByTag)g=d(k),Object.isUndefined(g)||c(f[k],g.prototype);Object.extend(Element,Element.Methods);delete Element.ByTag;Element.extend.refresh&&Element.extend.refresh();Element.cache={}};
document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}};
(function(a){function b(b){g||(g=c.WebKit&&!d.evaluate?document:c.Opera&&9.5>window.parseFloat(window.opera.version())?document.body:document.documentElement);f[b]="client"+b;a["get"+b]=function(){return g[f[b]]};return a["get"+b]()}var c=Prototype.Browser,d=document,g,f={};a.getWidth=b.curry("Width");a.getHeight=b.curry("Height")})(document.viewport);Element.Storage={UID:1};
Element.addMethods({getStorage:function(a){if(a=$(a))return a===window?a=0:("undefined"===typeof a._prototypeUID&&(a._prototypeUID=Element.Storage.UID++),a=a._prototypeUID),Element.Storage[a]||(Element.Storage[a]=$H()),Element.Storage[a]},store:function(a,b,c){if(a=$(a))return 2===arguments.length?Element.getStorage(a).update(b):Element.getStorage(a).set(b,c),a},retrieve:function(a,b,c){if(a=$(a)){a=Element.getStorage(a);var d=a.get(b);Object.isUndefined(d)&&(a.set(b,c),d=c);return d}},clone:function(a,
b){if(a=$(a)){var c=a.cloneNode(b);c._prototypeUID=void 0;if(b)for(var d=Element.select(c,"*"),g=d.length;g--;)d[g]._prototypeUID=void 0;return Element.extend(c)}},purge:function(a){if(a=$(a)){var b=Element._purgeElement;b(a);a=a.getElementsByTagName("*");for(var c=a.length;c--;)b(a[c]);return null}}});
(function(){function a(a,b,c){var d=null;Object.isElement(a)&&(d=a,a=d.getStyle(b));if(null===a)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(a))return window.parseFloat(a);var f=a.include("%"),g=c===document.viewport;return/\d/.test(a)&&d&&d.runtimeStyle&&(!f||!g)?(c=d.style.left,b=d.runtimeStyle.left,d.runtimeStyle.left=d.currentStyle.left,d.style.left=a||0,a=d.style.pixelLeft,d.style.left=c,d.runtimeStyle.left=b,a):d&&f?(c=c||d.parentNode,a=(a=a.match(/^(\d+)%?$/i))?Number(a[1])/100:null,f=null,
d.getStyle("position"),d=b.include("left")||b.include("right")||b.include("width"),b=b.include("top")||b.include("bottom")||b.include("height"),c===document.viewport?d?f=document.viewport.getWidth():b&&(f=document.viewport.getHeight()):d?f=$(c).measure("width"):b&&(f=$(c).measure("height")),null===f?0:f*a):0}function b(a){a=$(a);if(a.nodeType===Node.DOCUMENT_NODE||g(a)||"BODY"===a.nodeName.toUpperCase()||"HTML"===a.nodeName.toUpperCase())return $(document.body);if("inline"!==Element.getStyle(a,"display")&&
a.offsetParent)return $(a.offsetParent);for(;(a=a.parentNode)&&a!==document.body;)if("static"!==Element.getStyle(a,"position"))return"HTML"===a.nodeName.toUpperCase()?$(document.body):$(a);return $(document.body)}function c(a){a=$(a);var b=0,c=0;if(a.parentNode){do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a)}return new Element.Offset(c,b)}function d(a){a=$(a);var b=a.getLayout(),c=0,d=0;do if(c+=a.offsetTop||0,d+=a.offsetLeft||0,a=a.offsetParent){if("BODY"===a.nodeName.toUpperCase())break;
if("static"!==Element.getStyle(a,"position"))break}while(a);d-=b.get("margin-top");c-=b.get("margin-left");return new Element.Offset(d,c)}function g(a){return a!==document.body&&!Element.descendantOf(a,document.body)}var f=Prototype.K;"currentStyle"in document.documentElement&&(f=function(a){a.currentStyle.hasLayout||(a.style.zoom=1);return a});Element.Layout=Class.create(Hash,{initialize:function($super,a,b){$super();this.element=$(a);Element.Layout.PROPERTIES.each(function(a){this._set(a,null)},
this);b&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(a,b){return Hash.prototype.set.call(this,a,b)},set:function(a,b){throw"Properties of Element.Layout are read-only.";},get:function($super,a){var b=$super(a);return null===b?this._compute(a):b},_begin:function(){if(!this._prepared){var b=this.element,c;a:{for(c=b;c&&c.parentNode;){if("none"===c.getStyle("display")){c=!1;break a}c=$(c.parentNode)}c=!0}if(!c){b.store("prototype_original_styles",
{position:b.style.position||"",width:b.style.width||"",visibility:b.style.visibility||"",display:b.style.display||""});c=b.getStyle("position");var d=b.getStyle("width");if("0px"===d||null===d)b.style.display="block",d=b.getStyle("width");var f="fixed"===c?document.viewport:b.parentNode;b.setStyle({position:"absolute",visibility:"hidden",display:"block"});var g=b.getStyle("width");c=d&&g===d?a(b,"width",f):"absolute"===c||"fixed"===c?a(b,"width",f):$(b.parentNode).getLayout().get("width")-this.get("margin-left")-
this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right");b.setStyle({width:c+"px"})}this._prepared=!0}},_end:function(){var a=this.element,b=a.retrieve("prototype_original_styles");a.store("prototype_original_styles",null);a.setStyle(b);this._prepared=!1},_compute:function(a){var b=Element.Layout.COMPUTATIONS;if(!(a in b))throw"Property not found.";return this._set(a,b[a].call(this,this.element))},toObject:function(){var a=$A(arguments),
b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)){var c=this.get(a);null!=c&&(b[a]=c)}},this);return b},toHash:function(){var a=this.toObject.apply(this,arguments);return new Hash(a)},toCSS:function(){var a=$A(arguments),b={};(0===a.length?Element.Layout.PROPERTIES:a.join(" ").split(" ")).each(function(a){if(Element.Layout.PROPERTIES.include(a)&&!Element.Layout.COMPOSITE_PROPERTIES.include(a)){var c=this.get(a);if(null!=
c){var e=b;a.include("border")&&(a+="-width");a=a.camelize();e[a]=c+"px"}}},this);return b},inspect:function(){return"#\x3cElement.Layout\x3e"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),
COMPUTATIONS:{height:function(a){this._preComputing||this._begin();a=this.get("border-box-height");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-top"),c=this.get("border-bottom"),d=this.get("padding-top"),f=this.get("padding-bottom");this._preComputing||this._end();return a-b-c-d-f},width:function(a){this._preComputing||this._begin();a=this.get("border-box-width");if(0>=a)return this._preComputing||this._end(),0;var b=this.get("border-left"),c=this.get("border-right"),d=
this.get("padding-left"),f=this.get("padding-right");this._preComputing||this._end();return a-b-c-d-f},"padding-box-height":function(a){a=this.get("height");var b=this.get("padding-top"),c=this.get("padding-bottom");return a+b+c},"padding-box-width":function(a){a=this.get("width");var b=this.get("padding-left"),c=this.get("padding-right");return a+b+c},"border-box-height":function(a){this._preComputing||this._begin();a=a.offsetHeight;this._preComputing||this._end();return a},"border-box-width":function(a){this._preComputing||
this._begin();a=a.offsetWidth;this._preComputing||this._end();return a},"margin-box-height":function(a){a=this.get("border-box-height");var b=this.get("margin-top"),c=this.get("margin-bottom");return 0>=a?0:a+b+c},"margin-box-width":function(a){a=this.get("border-box-width");var b=this.get("margin-left"),c=this.get("margin-right");return 0>=a?0:a+b+c},top:function(a){return a.positionedOffset().top},bottom:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("height");var c=this.get("border-box-height");
return a-c-b.top},left:function(a){return a.positionedOffset().left},right:function(a){var b=a.positionedOffset();a=a.getOffsetParent().measure("width");var c=this.get("border-box-width");return a-c-b.left},"padding-top":function(b){return a(b,"paddingTop")},"padding-bottom":function(b){return a(b,"paddingBottom")},"padding-left":function(b){return a(b,"paddingLeft")},"padding-right":function(b){return a(b,"paddingRight")},"border-top":function(b){return a(b,"borderTopWidth")},"border-bottom":function(b){return a(b,
"borderBottomWidth")},"border-left":function(b){return a(b,"borderLeftWidth")},"border-right":function(b){return a(b,"borderRightWidth")},"margin-top":function(b){return a(b,"marginTop")},"margin-bottom":function(b){return a(b,"marginBottom")},"margin-left":function(b){return a(b,"marginLeft")},"margin-right":function(b){return a(b,"marginRight")}}});"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(a){var b=f(a.getOffsetParent());a=a.getBoundingClientRect();
return(b.getBoundingClientRect().right-a.right).round()},bottom:function(a){var b=f(a.getOffsetParent());a=a.getBoundingClientRect();return(b.getBoundingClientRect().bottom-a.bottom).round()}});Element.Offset=Class.create({initialize:function(a,b){this.left=a.round();this.top=b.round();this[0]=this.left;this[1]=this.top},relativeTo:function(a){return new Element.Offset(this.left-a.left,this.top-a.top)},inspect:function(){return"#\x3cElement.Offset left: #{left} top: #{top}\x3e".interpolate(this)},
toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});Prototype.Browser.IE?(b=b.wrap(function(a,b){b=$(b);if(b.nodeType===Node.DOCUMENT_NODE||g(b)||"BODY"===b.nodeName.toUpperCase()||"HTML"===b.nodeName.toUpperCase())return $(document.body);var c=b.getStyle("position");if("static"!==c)return a(b);b.setStyle({position:"relative"});var d=a(b);b.setStyle({position:c});return d}),d=d.wrap(function(a,b){b=$(b);if(!b.parentNode)return new Element.Offset(0,
0);var c=b.getStyle("position");if("static"!==c)return a(b);var d=b.getOffsetParent();d&&"fixed"===d.getStyle("position")&&f(d);b.setStyle({position:"relative"});d=a(b);b.setStyle({position:c});return d})):Prototype.Browser.Webkit&&(c=function(a){a=$(a);var b=0,c=0;do{b+=a.offsetTop||0;c+=a.offsetLeft||0;if(a.offsetParent==document.body&&"absolute"==Element.getStyle(a,"position"))break;a=a.offsetParent}while(a);return new Element.Offset(c,b)});Element.addMethods({getLayout:function(a,b){return new Element.Layout(a,
b)},measure:function(a,b){return $(a).getLayout().get(b)},getDimensions:function(a){a=$(a);var b=Element.getStyle(a,"display");if(b&&"none"!==b)return{width:a.offsetWidth,height:a.offsetHeight};var b=a.style,b={visibility:b.visibility,position:b.position,display:b.display},c={visibility:"hidden",display:"block"};"fixed"!==b.position&&(c.position="absolute");Element.setStyle(a,c);c={width:a.offsetWidth,height:a.offsetHeight};Element.setStyle(a,b);return c},getOffsetParent:b,cumulativeOffset:c,positionedOffset:d,
cumulativeScrollOffset:function(a){var b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return new Element.Offset(c,b)},viewportOffset:function(a){$(f);var b=0,c=0,d=document.body,f=a;do if(b+=f.offsetTop||0,c+=f.offsetLeft||0,f.offsetParent==d&&"absolute"==Element.getStyle(f,"position"))break;while(f=f.offsetParent);f=a;do f!=d&&(b-=f.scrollTop||0,c-=f.scrollLeft||0);while(f=f.parentNode);return new Element.Offset(c,b)},absolutize:function(a){a=$(a);if("absolute"===Element.getStyle(a,
"position"))return a;var c=b(a),d=a.viewportOffset(),c=c.viewportOffset(),d=d.relativeTo(c),c=a.getLayout();a.store("prototype_absolutize_original_styles",{left:a.getStyle("left"),top:a.getStyle("top"),width:a.getStyle("width"),height:a.getStyle("height")});a.setStyle({position:"absolute",top:d.top+"px",left:d.left+"px",width:c.get("width")+"px",height:c.get("height")+"px"});return a},relativize:function(a){a=$(a);if("relative"===Element.getStyle(a,"position"))return a;var b=a.retrieve("prototype_absolutize_original_styles");
b&&a.setStyle(b);return a}});"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(a){a=$(a);if(g(a))return new Element.Offset(0,0);a=a.getBoundingClientRect();var b=document.documentElement;return new Element.Offset(a.left-b.clientLeft,a.top-b.clientTop)}})})();window.$$=function(){var a=$A(arguments).join(", ");return Prototype.Selector.select(a,document)};
Prototype.Selector=function(){function a(a){for(var b=0,g=a.length;b<g;b++)Element.extend(a[b]);return a}var b=Prototype.K;return{select:function(){throw Error('Method "Prototype.Selector.select" must be defined.');},match:function(){throw Error('Method "Prototype.Selector.match" must be defined.');},find:function(a,b,g){g=g||0;var f=Prototype.Selector.match,e=a.length,k=0,h;for(h=0;h<e;h++)if(f(a[h],b)&&g==k++)return Element.extend(a[h])},extendElements:Element.extend===b?b:a,extendElement:Element.extend}}();
(function(){function a(a,b,c,d,e,f){e="previousSibling"==a&&!f;for(var l=0,g=d.length;l<g;l++){var h=d[l];if(h){e&&1===h.nodeType&&(h.sizcache=c,h.sizset=l);for(var h=h[a],k=!1;h;){if(h.sizcache===c){k=d[h.sizset];break}1===h.nodeType&&!f&&(h.sizcache=c,h.sizset=l);if(h.nodeName===b){k=h;break}h=h[a]}d[l]=k}}}function b(a,b,c,d,e,f){e="previousSibling"==a&&!f;for(var l=0,g=d.length;l<g;l++){var h=d[l];if(h){e&&1===h.nodeType&&(h.sizcache=c,h.sizset=l);for(var h=h[a],n=!1;h;){if(h.sizcache===c){n=
d[h.sizset];break}if(1===h.nodeType)if(f||(h.sizcache=c,h.sizset=l),"string"!==typeof b){if(h===b){n=!0;break}}else if(0<k.filter(b,[h]).length){n=h;break}h=h[a]}d[l]=n}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,g=Object.prototype.toString,f=!1,e=!0;[0,0].sort(function(){e=!1;return 0});var k=function(a,b,d,e){d=d||[];var f=b=b||document;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!==
typeof a)return d;for(var p=[],l,w,r,q,G=!0,D=u(b),x=a;null!==(c.exec(""),l=c.exec(x));)if(x=l[3],p.push(l[1]),l[2]){q=l[3];break}if(1<p.length&&n.exec(a))if(2===p.length&&h.relative[p[0]])w=y(p[0]+p[1],b);else for(w=h.relative[p[0]]?[b]:k(p.shift(),b);p.length;)a=p.shift(),h.relative[a]&&(a+=p.shift()),w=y(a,w);else if(!e&&(1<p.length&&9===b.nodeType&&!D&&h.match.ID.test(p[0])&&!h.match.ID.test(p[p.length-1]))&&(l=k.find(p.shift(),b,D),b=l.expr?k.filter(l.expr,l.set)[0]:l.set[0]),b){l=e?{expr:p.pop(),
set:m(e)}:k.find(p.pop(),1===p.length&&("~"===p[0]||"+"===p[0])&&b.parentNode?b.parentNode:b,D);w=l.expr?k.filter(l.expr,l.set):l.set;for(0<p.length?r=m(w):G=!1;p.length;){var v=p.pop();l=v;h.relative[v]?l=p.pop():v="";null==l&&(l=b);h.relative[v](r,l,D)}}else r=[];r||(r=w);if(!r)throw"Syntax error, unrecognized expression: "+(v||a);if("[object Array]"===g.call(r))if(G)if(b&&1===b.nodeType)for(a=0;null!=r[a];a++)r[a]&&(!0===r[a]||1===r[a].nodeType&&t(b,r[a]))&&d.push(w[a]);else for(a=0;null!=r[a];a++)r[a]&&
1===r[a].nodeType&&d.push(w[a]);else d.push.apply(d,r);else m(r,d);q&&(k(q,f,d,e),k.uniqueSort(d));return d};k.uniqueSort=function(a){if(s&&(f=e,a.sort(s),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};k.matches=function(a,b){return k(a,null,null,b)};k.find=function(a,b,c){var d,e;if(!a)return[];for(var f=0,l=h.order.length;f<l;f++){var g=h.order[f];if(e=h.leftMatch[g].exec(a)){var k=e[1];e.splice(1,1);if("\\"!==k.substr(k.length-1)&&(e[1]=(e[1]||"").replace(/\\/g,""),d=h.find[g](e,
b,c),null!=d)){a=a.replace(h.match[g],"");break}}}d||(d=b.getElementsByTagName("*"));return{set:d,expr:a}};k.filter=function(a,b,c,d){for(var e=a,f=[],l=b,g,k,n=b&&b[0]&&u(b[0]);a&&b.length;){for(var m in h.filter)if(null!=(g=h.match[m].exec(a))){var q=h.filter[m],x,v;k=!1;l==f&&(f=[]);if(h.preFilter[m])if(g=h.preFilter[m](g,l,c,f,d,n)){if(!0===g)continue}else k=x=!0;if(g)for(var s=0;null!=(v=l[s]);s++)if(v){x=q(v,g,s,l);var t=d^!!x;c&&null!=x?t?k=!0:l[s]=!1:t&&(f.push(v),k=!0)}if(void 0!==x){c||
(l=f);a=a.replace(h.match[m],"");if(!k)return[];break}}if(a==e){if(null==k)throw"Syntax error, unrecognized expression: "+a;break}e=a}return l};var h=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b,c){var d="string"===typeof b,e=d&&!/\W/.test(b),d=d&&!e;e&&!c&&(b=b.toUpperCase());c=0;for(var e=a.length,f;c<e;c++)if(f=a[c]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[c]=d||f&&f.nodeName===b?f||
!1:f===b}d&&k.filter(b,a,!0)},"\x3e":function(a,b,c){var d="string"===typeof b;if(d&&!/\W/.test(b)){b=c?b:b.toUpperCase();c=0;for(var e=a.length;c<e;c++){var f=a[c];f&&(d=f.parentNode,a[c]=d.nodeName===b?d:!1)}}else{c=0;for(e=a.length;c<e;c++)(f=a[c])&&(a[c]=d?f.parentNode:f.parentNode===b);d&&k.filter(b,a,!0)}},"":function(c,e,f){var g=d++,h=b;if(!/\W/.test(e))var k=e=f?e:e.toUpperCase(),h=a;h("parentNode",e,g,c,k,f)},"~":function(c,e,f){var g=d++,h=b;if("string"===typeof e&&!/\W/.test(e))var k=
e=f?e:e.toUpperCase(),h=a;h("previousSibling",e,g,c,k,f)}},find:{ID:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b,c){if("undefined"!==typeof b.getElementsByName){c=[];b=b.getElementsByName(a[1]);for(var d=0,e=b.length;d<e;d++)b[d].getAttribute("name")===a[1]&&c.push(b[d]);return 0===c.length?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";
if(f)return a;f=0;for(var l;null!=(l=b[f]);f++)l&&(e^(l.className&&0<=(" "+l.className+" ").indexOf(a))?c||d.push(l):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){for(var c=0;!1===b[c];c++);return b[c]&&u(b[c])?a[1]:a[1].toUpperCase()},CHILD:function(a){if("nth"==a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"==a[2]&&"2n"||"odd"==a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=d++;return a},ATTR:function(a,b,c,d,
e,f){b=a[1].replace(/\\/g,"");!f&&h.attrMap[b]&&(a[1]=h.attrMap[b]);"~\x3d"===a[2]&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(a,b,d,e,f){if("not"===a[1])if(1<(c.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=k(a[3],null,null,b);else return a=k.filter(a[3],b,d,1^f),d||e.push.apply(e,a),!1;else if(h.match.POS.test(a[0])||h.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===
a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!k(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===
a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||"BUTTON"===a.nodeName.toUpperCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,
b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0==b},eq:function(a,b,c){return c[3]-0==b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=h.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}},CHILD:function(a,b){var c=b[1],d=a;switch(c){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"==c)return!0;d=a;case "last":for(;d=
d.nextSibling;)if(1===d.nodeType)return!1;return!0;case "nth":var c=b[2],e=b[3];if(1==c&&0==e)return!0;var f=b[0],l=a.parentNode;if(l&&(l.sizcache!==f||!a.nodeIndex)){for(var g=0,d=l.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++g);l.sizcache=f}d=a.nodeIndex-e;return 0==c?0==d:0==d%c&&0<=d/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+
" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=h.attrHandle[c]?h.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!\x3d"===e:"\x3d"===e?d===f:"*\x3d"===e?0<=d.indexOf(f):"~\x3d"===e?0<=(" "+d+" ").indexOf(f):!f?d&&!1!==c:"!\x3d"===e?d!=f:"^\x3d"===e?0===d.indexOf(f):"$\x3d"===e?d.substr(d.length-f.length)===f:"|\x3d"===e?d===f||d.substr(0,f.length+1)===f+"-":!1},POS:function(a,b,c,d){var e=h.setFilters[b[2]];if(e)return e(a,c,b,d)}}},n=h.match.POS,q;for(q in h.match)h.match[q]=
RegExp(h.match[q].source+/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[q]=RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[q].source);var m=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(z){m=function(a,b){var c=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(c,a);else if("number"===typeof a.length)for(var d=0,e=a.length;d<e;d++)c.push(a[d]);else for(d=0;a[d];d++)c.push(a[d]);return c}}var s;
document.documentElement.compareDocumentPosition?s=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(f=!0),0;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;0===c&&(f=!0);return c}:"sourceIndex"in document.documentElement?s=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(f=!0),0;var c=a.sourceIndex-b.sourceIndex;0===c&&(f=!0);return c}:document.createRange&&(s=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(f=!0),0;var c=a.ownerDocument.createRange(),
d=b.ownerDocument.createRange();c.setStart(a,0);c.setEnd(a,0);d.setStart(b,0);d.setEnd(b,0);c=c.compareBoundaryPoints(Range.START_TO_END,d);0===c&&(f=!0);return c});(function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="\x3ca name\x3d'"+b+"'/\x3e";var c=document.documentElement;c.insertBefore(a,c.firstChild);document.getElementById(b)&&(h.find.ID=function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==
typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},h.filter.ID=function(a,b){var c="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});c.removeChild(a);c=a=null})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));0<a.getElementsByTagName("*").length&&(h.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&
d.push(c[e]);c=d}return c});a.innerHTML="\x3ca href\x3d'#'\x3e\x3c/a\x3e";a.firstChild&&("undefined"!==typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href"))&&(h.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();document.querySelectorAll&&function(){var a=k,b=document.createElement("div");b.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e";if(!(b.querySelectorAll&&0===b.querySelectorAll(".TEST").length)){k=function(b,c,d,e){c=c||document;if(!e&&9===c.nodeType&&
!u(c))try{return m(c.querySelectorAll(b),d)}catch(f){}return a(b,c,d,e)};for(var c in a)k[c]=a[c];b=null}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var a=document.createElement("div");a.innerHTML="\x3cdiv class\x3d'test e'\x3e\x3c/div\x3e\x3cdiv class\x3d'test'\x3e\x3c/div\x3e";0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(h.order.splice(1,0,"CLASS"),h.find.CLASS=function(a,b,c){if("undefined"!==
typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))}();var t=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},u=function(a){return 9===a.nodeType&&"HTML"!==a.documentElement.nodeName||!!a.ownerDocument&&"HTML"!==a.ownerDocument.documentElement.nodeName},y=function(a,b){for(var c=[],d="",e,f=b.nodeType?[b]:b;e=h.match.PSEUDO.exec(a);)d+=e[0],a=a.replace(h.match.PSEUDO,"");
a=h.relative[a]?a+"*":a;e=0;for(var l=f.length;e<l;e++)k(a,f[e],c);return k.filter(d,c)};window.Sizzle=k})();Prototype._original_property=window.Sizzle;(function(a){var b=Prototype.Selector.extendElements;Prototype.Selector.engine=a;Prototype.Selector.select=function(c,d){return b(a(c,d||document))};Prototype.Selector.match=function(b,d){return 1==a.matches(d,[b]).length}})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(a){a=$(a);a.reset();return a},serializeElements:function(a,b){"object"!=typeof b?b={hash:!!b}:Object.isUndefined(b.hash)&&(b.hash=!0);var c,d,g=!1,f=b.submit,e,k;b.hash?(k={},e=function(a,b,c){b in a?(Object.isArray(a[b])||(a[b]=[a[b]]),a[b].push(c)):a[b]=c;return a}):(k="",e=function(a,b,c){return a+(a?"\x26":"")+encodeURIComponent(b)+"\x3d"+encodeURIComponent(c)});return a.inject(k,function(a,b){if(!b.disabled&&b.name&&(c=b.name,d=$(b).getValue(),null!=d&&"file"!=b.type&&
("submit"!=b.type||!g&&!1!==f&&(!f||c==f)&&(g=!0))))a=e(a,c,d);return a})},Methods:{serialize:function(a,b){return Form.serializeElements(Form.getElements(a),b)},getElements:function(a){a=$(a).getElementsByTagName("*");for(var b,c=[],d=Form.Element.Serializers,g=0;b=a[g];g++)c.push(b);return c.inject([],function(a,b){d[b.tagName.toLowerCase()]&&a.push(Element.extend(b));return a})},getInputs:function(a,b,c){a=$(a);a=a.getElementsByTagName("input");if(!b&&!c)return $A(a).map(Element.extend);for(var d=
0,g=[],f=a.length;d<f;d++){var e=a[d];b&&e.type!=b||c&&e.name!=c||g.push(Element.extend(e))}return g},disable:function(a){a=$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){a=$(a).getElements().findAll(function(a){return"hidden"!=a.type&&!a.disabled});var b=a.findAll(function(a){return a.hasAttribute("tabIndex")&&0<=a.tabIndex}).sortBy(function(a){return a.tabIndex}).first();return b?b:a.find(function(a){return/^(?:input|select|textarea)$/i.test(a.tagName)})},
focusFirstElement:function(a){a=$(a);var b=a.findFirstElement();b&&b.activate();return a},request:function(a,b){a=$(a);b=Object.clone(b||{});var c=b.parameters,d=a.readAttribute("action")||"";d.blank()&&(d=window.location.href);b.parameters=a.serialize(!0);c&&(Object.isString(c)&&(c=c.toQueryParams()),Object.extend(b.parameters,c));a.hasAttribute("method")&&!b.method&&(b.method=a.method);return new Ajax.Request(d,b)}},Element:{focus:function(a){$(a).focus();return a},select:function(a){$(a).select();
return a}}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var b=a.getValue();if(void 0!=b){var c={};c[a.name]=b;return Object.toQueryString(c)}}return""},getValue:function(a){a=$(a);var b=a.tagName.toLowerCase();return Form.Element.Serializers[b](a)},setValue:function(a,b){a=$(a);var c=a.tagName.toLowerCase();Form.Element.Serializers[c](a,b);return a},clear:function(a){$(a).value="";return a},present:function(a){return""!=$(a).value},activate:function(a){a=$(a);try{a.focus(),a.select&&
("input"!=a.tagName.toLowerCase()||!/^(?:button|reset|submit)$/i.test(a.type))&&a.select()}catch(b){}return a},disable:function(a){a=$(a);a.disabled=!0;return a},enable:function(a){a=$(a);a.disabled=!1;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers=function(){function a(a,b){if(Object.isUndefined(b))return a.checked?a.value:null;a.checked=!!b}function b(a,b){if(Object.isUndefined(b))return a.value;a.value=b}function c(a){var b=a.selectedIndex;return 0<=b?g(a.options[b]):null}function d(a){var b,c=a.length;if(!c)return null;var d=0;for(b=[];d<c;d++){var n=a.options[d];n.selected&&b.push(g(n))}return b}function g(a){return Element.hasAttribute(a,"value")?a.value:a.text}return{input:function(c,d){switch(c.type.toLowerCase()){case "checkbox":case "radio":return a(c,
d);default:return b(c,d)}},inputSelector:a,textarea:b,select:function(a,b){if(Object.isUndefined(b))return("select-one"===a.type?c:d)(a);for(var g,h,n=!Object.isArray(b),q=0,m=a.length;q<m;q++)if(g=a.options[q],h=this.optionValue(g),n){if(h==b){g.selected=!0;break}}else g.selected=b.include(h)},selectOne:c,selectMany:d,optionValue:g,button:b}}();
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,b,c,d){$super(d,c);this.element=$(b);this.lastValue=this.getValue()},execute:function(){var a=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(a)?this.lastValue!=a:String(this.lastValue)!=String(a))this.callback(this.element,a),this.lastValue=a}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(a,b){this.element=$(a);this.callback=b;this.lastValue=this.getValue();"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();this.lastValue!=a&&(this.callback(this.element,a),this.lastValue=a)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this))}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(){function a(a,b){return a.which?a.which===b+1:a.button===b}function b(a,b){return a.button===y[b]}function c(a,b){switch(b){case 0:return 1==a.which&&!a.metaKey;case 1:return 2==a.which||1==a.which&&a.metaKey;case 2:return 3==a.which;default:return!1}}function d(a){var b=document.documentElement,c=document.body||{scrollLeft:0};return a.pageX||a.clientX+(b.scrollLeft||c.scrollLeft)-(b.clientLeft||0)}function g(a){var b=document.documentElement,c=document.body||{scrollTop:0};return a.pageY||
a.clientY+(b.scrollTop||c.scrollTop)-(b.clientTop||0)}function f(a,b,c){var d=Element.retrieve(a,"prototype_event_registry");Object.isUndefined(d)&&(B.push(a),d=Element.retrieve(a,"prototype_event_registry",$H()));var e=d.get(b);Object.isUndefined(e)&&(e=[],d.set(b,e));if(e.pluck("handler").include(c))return!1;var f;if(b.include(":"))f=function(d){if(Object.isUndefined(d.eventName)||d.eventName!==b)return!1;m.extend(d,a);c.call(a,d)};else if(!s&&("mouseenter"===b||"mouseleave"===b)){if("mouseenter"===
b||"mouseleave"===b)f=function(b){m.extend(b,a);for(var d=b.relatedTarget;d&&d!==a;)try{d=d.parentNode}catch(e){d=a}d!==a&&c.call(a,b)}}else f=function(b){m.extend(b,a);c.call(a,b)};f.handler=c;e.push(f);return f}function e(){for(var a=0,b=B.length;a<b;a++)m.stopObserving(B[a]),B[a]=null}function k(a,b,c){a=$(a);c=f(a,b,c);if(!c)return a;b.include(":")?a.addEventListener?a.addEventListener("dataavailable",c,!1):(a.attachEvent("ondataavailable",c),a.attachEvent("onlosecapture",c)):(b=E(b),a.addEventListener?
a.addEventListener(b,c,!1):a.attachEvent("on"+b,c));return a}function h(a,b,c){a=$(a);var d=Element.retrieve(a,"prototype_event_registry");if(!d)return a;if(!b)return d.each(function(b){h(a,b.key)}),a;var e=d.get(b);if(!e)return a;if(!c)return e.each(function(c){h(a,b,c.handler)}),a;for(var f=e.length,g;f--;)if(e[f].handler===c){g=e[f];break}if(!g)return a;b.include(":")?a.removeEventListener?a.removeEventListener("dataavailable",g,!1):(a.detachEvent("ondataavailable",g),a.detachEvent("onlosecapture",
g)):(c=E(b),a.removeEventListener?a.removeEventListener(c,g,!1):a.detachEvent("on"+c,g));d.set(b,e.without(g));return a}function n(a,b,c,d){a=$(a);Object.isUndefined(d)&&(d=!0);a==document&&(document.createEvent&&!a.dispatchEvent)&&(a=document.documentElement);var e;document.createEvent?(e=document.createEvent("HTMLEvents"),e.initEvent("dataavailable",d,!0)):(e=document.createEventObject(),e.eventType=d?"ondataavailable":"onlosecapture");e.eventName=b;e.memo=c||{};document.createEvent?a.dispatchEvent(e):
a.fireEvent(e.eventType,e);return m.extend(e)}function q(a,b,c,d){a=$(a);Object.isFunction(c)&&Object.isUndefined(d)&&(d=c,c=null);return(new m.Handler(a,b,c,d)).start()}var m={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},z=document.documentElement,s="onmouseenter"in z&&"onmouseleave"in z,t=function(a){return!1};window.attachEvent&&(t=window.addEventListener?
function(a){return!(a instanceof window.Event)}:function(a){return!0});var u,y={0:1,1:4,2:2};u=window.attachEvent?window.addEventListener?function(c,d){return t(c)?b(c,d):a(c,d)}:b:Prototype.Browser.WebKit?c:a;m.Methods={isLeftClick:function(a){return u(a,0)},isMiddleClick:function(a){return u(a,1)},isRightClick:function(a){return u(a,2)},element:function(a){a=m.extend(a);var b=a.target,c=a.type;if((a=a.currentTarget)&&a.tagName&&("load"===c||"error"===c||"click"===c&&"input"===a.tagName.toLowerCase()&&
"radio"===a.type))b=a;b.nodeType==Node.TEXT_NODE&&(b=b.parentNode);return Element.extend(b)},findElement:function(a,b){var c=m.element(a);if(!b)return c;for(;c;){if(Object.isElement(c)&&Prototype.Selector.match(c,b))return Element.extend(c);c=c.parentNode}},pointer:function(a){return{x:d(a),y:g(a)}},pointerX:d,pointerY:g,stop:function(a){m.extend(a);a.preventDefault();a.stopPropagation();a.stopped=!0}};var A=Object.keys(m.Methods).inject({},function(a,b){a[b]=m.Methods[b].methodize();return a});if(window.attachEvent){var C=
function(a){switch(a.type){case "mouseover":case "mouseenter":a=a.fromElement;break;case "mouseout":case "mouseleave":a=a.toElement;break;default:return null}return Element.extend(a)},F={stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}};m.extend=function(a,b){if(!a)return!1;if(!t(a)||a._extendedByPrototype)return a;a._extendedByPrototype=Prototype.emptyFunction;var c=m.pointer(a);Object.extend(a,{target:a.srcElement||
b,relatedTarget:C(a),pageX:c.x,pageY:c.y});Object.extend(a,A);Object.extend(a,F);return a}}else m.extend=Prototype.K;window.addEventListener&&(m.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(m.prototype,A));var B=[];Prototype.Browser.IE&&window.attachEvent("onunload",e);Prototype.Browser.WebKit&&window.addEventListener("unload",Prototype.emptyFunction,!1);var E=Prototype.K,p={mouseenter:"mouseover",mouseleave:"mouseout"};s||(E=function(a){return p[a]||
a});m.Handler=Class.create({initialize:function(a,b,c,d){this.element=$(a);this.eventName=b;this.selector=c;this.callback=d;this.handler=this.handleEvent.bind(this)},start:function(){m.observe(this.element,this.eventName,this.handler);return this},stop:function(){m.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(a){var b=m.findElement(a,this.selector);b&&this.callback.call(this.element,a,b)}});Object.extend(m,m.Methods);Object.extend(m,{fire:n,observe:k,stopObserving:h,
on:q});Element.addMethods({fire:n,observe:k,stopObserving:h,on:q});Object.extend(document,{fire:n.methodize(),observe:k.methodize(),stopObserving:h.methodize(),on:q.methodize(),loaded:!1});window.Event?Object.extend(window.Event,m):window.Event=m})();
(function(){function a(){document.loaded||(d&&window.clearTimeout(d),document.loaded=!0,document.fire("dom:loaded"))}function b(){"complete"===document.readyState&&(document.stopObserving("readystatechange",b),a())}function c(){try{document.documentElement.doScroll("left")}catch(b){d=c.defer();return}a()}var d;document.addEventListener?document.addEventListener("DOMContentLoaded",a,!1):(document.observe("readystatechange",b),window==top&&(d=c.defer()));Event.observe(window,"load",a)})();Element.addMethods();
Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;
var Insertion={Before:function(a,b){return Element.insert(a,{before:b})},Top:function(a,b){return Element.insert(a,{top:b})},Bottom:function(a,b){return Element.insert(a,{bottom:b})},After:function(a,b){return Element.insert(a,{after:b})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop||0},within:function(a,b,c){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,b,c);this.xcomp=b;this.ycomp=c;this.offset=Element.cumulativeOffset(a);return c>=this.offset[1]&&c<this.offset[1]+a.offsetHeight&&b>=this.offset[0]&&b<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,b,c){var d=Element.cumulativeScrollOffset(a);this.xcomp=b+d[0]-this.deltaX;this.ycomp=c+d[1]-this.deltaY;this.offset=Element.cumulativeOffset(a);return this.ycomp>=
this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,b){if(!a)return 0;if("vertical"==a)return(this.offset[1]+b.offsetHeight-this.ycomp)/b.offsetHeight;if("horizontal"==a)return(this.offset[0]+b.offsetWidth-this.xcomp)/b.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(a){Position.prepare();return Element.absolutize(a)},relativize:function(a){Position.prepare();
return Element.relativize(a)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(a,b,c){c=c||{};return Element.clonePosition(b,a,c)}};
document.getElementsByClassName||(document.getElementsByClassName=function(a){function b(a){return a.blank()?null:"[contains(concat(' ', @class, ' '), ' "+a+" ')]"}a.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(a,d){d=d.toString().strip();var g=/\s/.test(d)?$w(d).map(b).join(""):b(d);return g?document._getElementsByXPath(".//*"+g,a):[]}:function(a,b){b=b.toString().strip();var g=[],f=/\s/.test(b)?$w(b):null;if(!f&&!b)return g;var e=$(a).getElementsByTagName("*");b=" "+b+" ";for(var k=
0,h,n;h=e[k];k++)h.className&&((n=" "+h.className+" ")&&(n.include(b)||f&&f.all(function(a){return!a.toString().blank()&&n.include(" "+a+" ")})))&&g.push(Element.extend(h));return g};return function(a,b){return $(b||document.body).getElementsByClassName(a)}}(Element.Methods));Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a){this.element.className.split(/\s+/).select(function(a){return 0<a.length})._each(a)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(a){this.expression=a.strip()},findElements:function(a){return Prototype.Selector.select(this.expression,a)},match:function(a){return Prototype.Selector.match(a,this.expression)},toString:function(){return this.expression},inspect:function(){return"#\x3cSelector: "+this.expression+"\x3e"}});Object.extend(Selector,{matchElements:function(a,b){for(var c=Prototype.Selector.match,d=[],g=0,f=a.length;g<f;g++){var e=a[g];c(e,b)&&d.push(Element.extend(e))}return d},
findElement:function(a,b,c){c=c||0;for(var d=0,g,f=0,e=a.length;f<e;f++)if(g=a[f],Prototype.Selector.match(g,b)&&c===d++)return Element.extend(g)},findChildElements:function(a,b){var c=b.toArray().join(", ");return Prototype.Selector.select(c,a||document)}})})();var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(a,b,c){a=a.toUpperCase();var d=document.createElement(this.NODEMAP[a]||"div");try{d.innerHTML="\x3c"+a+"\x3e\x3c/"+a+"\x3e"}catch(e){}var f=d.firstChild||null;f&&f.tagName.toUpperCase()!=a&&(f=f.getElementsByTagName(a)[0]);f||(f=document.createElement(a));if(f){if(b)if(this._isStringOrNumber(b)||
b instanceof Array||b.tagName)this._children(f,b);else{var g=this._attributes(b);if(g.length){try{d.innerHTML="\x3c"+a+" "+g+"\x3e\x3c/"+a+"\x3e"}catch(h){}f=d.firstChild||null;if(!f)for(attr in f=document.createElement(a),b)f["class"==attr?"className":attr]=b[attr];f.tagName.toUpperCase()!=a&&(f=d.getElementsByTagName(a)[0])}}c&&this._children(f,c);return $(f)}},_text:function(a){return document.createTextNode(a)},ATTR_MAP:{className:"class",htmlFor:"for"},_attributes:function(a){var b=[];for(attribute in a)b.push((attribute in
this.ATTR_MAP?this.ATTR_MAP[attribute]:attribute)+'\x3d"'+a[attribute].toString().escapeHTML().gsub(/"/,"\x26quot;")+'"');return b.join(" ")},_children:function(a,b){b.tagName?a.appendChild(b):"object"==typeof b?b.flatten().each(function(b){"object"==typeof b?a.appendChild(b):Builder._isStringOrNumber(b)&&a.appendChild(Builder._text(b))}):Builder._isStringOrNumber(b)&&a.appendChild(Builder._text(b))},_isStringOrNumber:function(a){return"string"==typeof a||"number"==typeof a},build:function(a){var b=
this.node("div");$(b).update(a.strip());return b.down()},dump:function(a){"object"!=typeof a&&"function"!=typeof a&&(a=window);"A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR".split(/\s+/).each(function(b){a[b]=
function(){return Builder.node.apply(Builder,[b].concat($A(arguments)))}})}};String.prototype.parseColor=function(a){var b="#";if("rgb("==this.slice(0,4)){var c=this.slice(4,this.length-1).split(","),d=0;do b+=parseInt(c[d]).toColorPart();while(3>++d)}else if("#"==this.slice(0,1)){if(4==this.length)for(d=1;4>d;d++)b+=(this.charAt(d)+this.charAt(d)).toLowerCase();7==this.length&&(b=this.toLowerCase())}return 7==b.length?b:a||this};
Element.collectTextNodes=function(a){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()?Element.collectTextNodes(a):""}).flatten().join("")};Element.collectTextNodesIgnoreClass=function(a,b){return $A($(a).childNodes).collect(function(a){return 3==a.nodeType?a.nodeValue:a.hasChildNodes()&&!Element.hasClassName(a,b)?Element.collectTextNodesIgnoreClass(a,b):""}).flatten().join("")};
Element.setContentZoom=function(a,b){a=$(a);a.setStyle({fontSize:b/100+"em"});Prototype.Browser.WebKit&&window.scrollBy(0,0);return a};Element.getInlineOpacity=function(a){return $(a).style.opacity||""};Element.forceRerendering=function(a){try{a=$(a);var b=document.createTextNode(" ");a.appendChild(b);a.removeChild(b)}catch(c){}};
var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(a){return-Math.cos(a*Math.PI)/2+0.5},reverse:function(a){return 1-a},flicker:function(a){a=-Math.cos(a*Math.PI)/4+0.75+Math.random()/4;return 1<a?1:a},wobble:function(a){return-Math.cos(a*Math.PI*9*a)/2+0.5},pulse:function(a,b){return-Math.cos(2*(a*((b||5)-0.5))*Math.PI)/2+0.5},spring:function(a){return 1-
Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},none:function(a){return 0},full:function(a){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(a){var b="position:relative";Prototype.Browser.IE&&(b+=";zoom:1");a=$(a);$A(a.childNodes).each(function(c){3==c.nodeType&&(c.nodeValue.toArray().each(function(d){a.insertBefore((new Element("span",{style:b})).update(" "==d?String.fromCharCode(160):d),c)}),Element.remove(c))})},multiple:function(a,b,c){a=
("object"==typeof a||Object.isFunction(a))&&a.length?a:$(a).childNodes;var d=Object.extend({speed:0.1,delay:0},c||{}),e=d.delay;$A(a).each(function(a,c){new b(a,Object.extend(d,{delay:c*d.speed+e}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(a,b,c){a=$(a);b=(b||"appear").toLowerCase();return Effect[Effect.PAIRS[b][a.visible()?1:0]](a,Object.extend({queue:{position:"end",scope:a.id||"global",limit:1}},c||{}))}};
Effect.DefaultOptions.transition=Effect.Transitions.sinoidal;
Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[];this.interval=null},_each:function(a){this.effects._each(a)},add:function(a){var b=(new Date).getTime();switch(Object.isString(a.options.queue)?a.options.queue:a.options.queue.position){case "front":this.effects.findAll(function(a){return"idle"==a.state}).each(function(b){b.startOn+=a.finishOn;b.finishOn+=a.finishOn});break;case "with-last":b=this.effects.pluck("startOn").max()||b;break;case "end":b=this.effects.pluck("finishOn").max()||
b}a.startOn+=b;a.finishOn+=b;(!a.options.queue.limit||this.effects.length<a.options.queue.limit)&&this.effects.push(a);this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(a){this.effects=this.effects.reject(function(b){return b==a});0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var a=(new Date).getTime(),b=0,c=this.effects.length;b<c;b++)this.effects[b]&&this.effects[b].loop(a)}});
Effect.Queues={instances:$H(),get:function(a){return!Object.isString(a)?a:this.instances.get(a)||this.instances.set(a,new Effect.ScopedQueue)}};Effect.Queue=Effect.Queues.get("global");
Effect.Base=Class.create({position:null,start:function(a){a&&!1===a.transition&&(a.transition=Effect.Transitions.linear);this.options=Object.extend(Object.extend({},Effect.DefaultOptions),a||{});this.currentFrame=0;this.state="idle";this.startOn=1E3*this.options.delay;this.finishOn=this.startOn+1E3*this.options.duration;this.fromToDelta=this.options.to-this.options.from;this.totalTime=this.finishOn-this.startOn;this.totalFrames=this.options.fps*this.options.duration;this.render=function(){function a(b,
d){if(b.options[d+"Internal"])b.options[d+"Internal"](b);if(b.options[d])b.options[d](b)}return function(c){"idle"===this.state&&(this.state="running",a(this,"beforeSetup"),this.setup&&this.setup(),a(this,"afterSetup"));"running"===this.state&&(this.position=c=this.options.transition(c)*this.fromToDelta+this.options.from,a(this,"beforeUpdate"),this.update&&this.update(c),a(this,"afterUpdate"))}}();this.event("beforeStart");this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":
this.options.queue.scope).add(this)},loop:function(a){if(a>=this.startOn)if(a>=this.finishOn)this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),this.event("afterFinish");else{a=(a-this.startOn)/this.totalTime;var b=(a*this.totalFrames).round();b>this.currentFrame&&(this.render(a),this.currentFrame=b)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this);this.state="finished"},event:function(a){if(this.options[a+
"Internal"])this.options[a+"Internal"](this);if(this.options[a])this.options[a](this)},inspect:function(){var a=$H();for(property in this)Object.isFunction(this[property])||a.set(property,this[property]);return"#\x3cEffect:"+a.inspect()+",options:"+$H(this.options).inspect()+"\x3e"}});
Effect.Parallel=Class.create(Effect.Base,{initialize:function(a,b){this.effects=a||[];this.start(b)},update:function(a){this.effects.invoke("render",a)},finish:function(a){this.effects.each(function(b){b.render(1);b.cancel();b.event("beforeFinish");b.finish&&b.finish(a);b.event("afterFinish")})}});
Effect.Tween=Class.create(Effect.Base,{initialize:function(a,b,c){a=Object.isString(a)?$(a):a;var d=$A(arguments),e=d.last(),d=5==d.length?d[3]:null;this.method=Object.isFunction(e)?e.bind(a):Object.isFunction(a[e])?a[e].bind(a):function(b){a[e]=b};this.start(Object.extend({from:b,to:c},d||{}))},update:function(a){this.method(a)}});Effect.Event=Class.create(Effect.Base,{initialize:function(a){this.start(Object.extend({duration:0},a||{}))},update:Prototype.emptyFunction});
Effect.Opacity=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var c=Object.extend({from:this.element.getOpacity()||0,to:1},b||{});this.start(c)},update:function(a){this.element.setOpacity(a)}});
Effect.Move=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({x:0,y:0,mode:"relative"},b||{});this.start(c)},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(a){this.element.setStyle({left:(this.options.x*
a+this.originalLeft).round()+"px",top:(this.options.y*a+this.originalTop).round()+"px"})}});Effect.MoveBy=function(a,b,c,d){return new Effect.Move(a,Object.extend({x:c,y:b},d||{}))};
Effect.Scale=Class.create(Effect.Base,{initialize:function(a,b,c){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;a=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:b},c||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(a){this.originalStyle[a]=
this.element.style[a]}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var a=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(b){0<a.indexOf(b)&&(this.fontSize=parseFloat(a),this.fontSizeType=b)}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]);/^content/.test(this.options.scaleMode)&&(this.dims=
[this.element.scrollHeight,this.element.scrollWidth]);this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(a){a=this.options.scaleFrom/100+this.factor*a;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*a+this.fontSizeType});this.setDimensions(this.dims[0]*a,this.dims[1]*a)},finish:function(a){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(a,b){var c={};
this.options.scaleX&&(c.width=b.round()+"px");this.options.scaleY&&(c.height=a.round()+"px");if(this.options.scaleFromCenter){var d=(a-this.dims[0])/2,e=(b-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(c.top=this.originalTop-d+"px"),this.options.scaleX&&(c.left=this.originalLeft-e+"px")):(this.options.scaleY&&(c.top=-d+"px"),this.options.scaleX&&(c.left=-e+"px"))}this.element.setStyle(c)}});
Effect.Highlight=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({startcolor:"#ffff99"},b||{});this.start(c)},setup:function(){"none"==this.element.getStyle("display")?this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),
this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(a){return parseInt(this.options.startcolor.slice(2*a+1,2*a+3),16)}.bind(this)),this._delta=$R(0,2).map(function(a){return parseInt(this.options.endcolor.slice(2*a+1,2*a+3),16)-this._base[a]}.bind(this)))},update:function(a){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(b,c,d){return b+(this._base[d]+this._delta[d]*a).round().toColorPart()}.bind(this))})},
finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}});Effect.ScrollTo=function(a,b){var c=b||{},d=document.viewport.getScrollOffsets(),e=$(a).cumulativeOffset();c.offset&&(e[1]+=c.offset);return new Effect.Tween(null,d.top,e[1],c,function(a){scrollTo(d.left,a.round())})};
Effect.Fade=function(a,b){a=$(a);var c=a.getInlineOpacity(),d=Object.extend({from:a.getOpacity()||1,to:0,afterFinishInternal:function(a){0==a.options.to&&a.element.hide().setStyle({opacity:c})}},b||{});return new Effect.Opacity(a,d)};
Effect.Appear=function(a,b){a=$(a);var c=Object.extend({from:"none"==a.getStyle("display")?0:a.getOpacity()||0,to:1,afterFinishInternal:function(a){a.element.forceRerendering()},beforeSetup:function(a){a.element.setOpacity(a.options.from).show()}},b||{});return new Effect.Opacity(a,c)};
Effect.Puff=function(a,b){a=$(a);var c={opacity:a.getInlineOpacity(),position:a.getStyle("position"),top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};return new Effect.Parallel([new Effect.Scale(a,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(a){Position.absolutize(a.effects[0].element)},afterFinishInternal:function(a){a.effects[0].element.hide().setStyle(c)}},
b||{}))};Effect.BlindUp=function(a,b){a=$(a);a.makeClipping();return new Effect.Scale(a,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(a){a.element.hide().undoClipping()}},b||{}))};
Effect.BlindDown=function(a,b){a=$(a);var c=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:c.height,originalWidth:c.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.element.undoClipping()}},b||{}))};
Effect.SwitchOff=function(a,b){a=$(a);var c=a.getInlineOpacity();return new Effect.Appear(a,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(a){new Effect.Scale(a.element,1,{duration:0.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(a){a.element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned().setStyle({opacity:c})}})}},b||{}))};
Effect.DropOut=function(a,b){a=$(a);var c={top:a.getStyle("top"),left:a.getStyle("left"),opacity:a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(a,{x:0,y:100,sync:!0}),new Effect.Opacity(a,{sync:!0,to:0})],Object.extend({duration:0.5,beforeSetup:function(a){a.effects[0].element.makePositioned()},afterFinishInternal:function(a){a.effects[0].element.hide().undoPositioned().setStyle(c)}},b||{}))};
Effect.Shake=function(a,b){a=$(a);var c=Object.extend({distance:20,duration:0.5},b||{}),d=parseFloat(c.distance),e=parseFloat(c.duration)/10,f={top:a.getStyle("top"),left:a.getStyle("left")};return new Effect.Move(a,{x:d,y:0,duration:e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:2*-d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,
{x:2*d,y:0,duration:2*e,afterFinishInternal:function(a){new Effect.Move(a.element,{x:-d,y:0,duration:e,afterFinishInternal:function(a){a.element.undoPositioned().setStyle(f)}})}})}})}})}})}})};
Effect.SlideDown=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),d=a.getDimensions();return new Effect.Scale(a,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned();a.element.down().makePositioned();window.opera&&a.element.setStyle({top:""});a.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-
a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.undoClipping().undoPositioned();a.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};
Effect.SlideUp=function(a,b){a=$(a).cleanWhitespace();var c=a.down().getStyle("bottom"),d=a.getDimensions();return new Effect.Scale(a,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:d.height,originalWidth:d.width},restoreAfterFinish:!0,afterSetup:function(a){a.element.makePositioned();a.element.down().makePositioned();window.opera&&a.element.setStyle({top:""});a.element.makeClipping().show()},afterUpdateInternal:function(a){a.element.down().setStyle({bottom:a.dims[0]-
a.element.clientHeight+"px"})},afterFinishInternal:function(a){a.element.hide().undoClipping().undoPositioned();a.element.down().undoPositioned().setStyle({bottom:c})}},b||{}))};Effect.Squish=function(a){return new Effect.Scale(a,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(a){a.element.makeClipping()},afterFinishInternal:function(a){a.element.hide().undoClipping()}})};
Effect.Grow=function(a,b){a=$(a);var c=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},b||{}),d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},e=a.getDimensions(),f,g,h,k;switch(c.direction){case "top-left":f=g=h=k=0;break;case "top-right":f=e.width;g=k=0;h=-e.width;break;case "bottom-left":f=h=0;g=e.height;k=-e.height;break;
case "bottom-right":f=e.width;g=e.height;h=-e.width;k=-e.height;break;case "center":f=e.width/2,g=e.height/2,h=-e.width/2,k=-e.height/2}return new Effect.Move(a,{x:f,y:g,duration:0.01,beforeSetup:function(a){a.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(a){new Effect.Parallel([new Effect.Opacity(a.element,{sync:!0,to:1,from:0,transition:c.opacityTransition}),new Effect.Move(a.element,{x:h,y:k,sync:!0,transition:c.moveTransition}),new Effect.Scale(a.element,100,{scaleMode:{originalHeight:e.height,
originalWidth:e.width},sync:!0,scaleFrom:window.opera?1:0,transition:c.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(a){a.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(a){a.effects[0].element.undoClipping().undoPositioned().setStyle(d)}},c))}})};
Effect.Shrink=function(a,b){a=$(a);var c=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},b||{}),d={top:a.style.top,left:a.style.left,height:a.style.height,width:a.style.width,opacity:a.getInlineOpacity()},e=a.getDimensions(),f,g;switch(c.direction){case "top-left":f=g=0;break;case "top-right":f=e.width;g=0;break;case "bottom-left":f=0;g=e.height;break;case "bottom-right":f=e.width;g=
e.height;break;case "center":f=e.width/2,g=e.height/2}return new Effect.Parallel([new Effect.Opacity(a,{sync:!0,to:0,from:1,transition:c.opacityTransition}),new Effect.Scale(a,window.opera?1:0,{sync:!0,transition:c.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(a,{x:f,y:g,sync:!0,transition:c.moveTransition})],Object.extend({beforeStartInternal:function(a){a.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(a){a.effects[0].element.hide().undoClipping().undoPositioned().setStyle(d)}},
c))};Effect.Pulsate=function(a,b){a=$(a);var c=b||{},d=a.getInlineOpacity(),e=c.transition||Effect.Transitions.linear;return new Effect.Opacity(a,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(a){a.element.setStyle({opacity:d})}},c),{transition:function(a){return 1-e(-Math.cos(2*(a*(c.pulses||5))*Math.PI)/2+0.5)}}))};
Effect.Fold=function(a,b){a=$(a);var c={top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height};a.makeClipping();return new Effect.Scale(a,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(b){new Effect.Scale(a,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(a){a.element.hide().undoClipping().setStyle(c)}})}},b||{}))};
Effect.Morph=Class.create(Effect.Base,{initialize:function(a,b){this.element=$(a);if(!this.element)throw Effect._elementDoesNotExistError;var c=Object.extend({style:{}},b||{});if(Object.isString(c.style))if(c.style.include(":"))this.style=c.style.parseStyle();else{this.element.addClassName(c.style);this.style=$H(this.element.getStyles());this.element.removeClassName(c.style);var d=this.element.getStyles();this.style=this.style.reject(function(a){return a.value==d[a.key]});c.afterFinishInternal=function(a){a.element.addClassName(a.options.style);
a.transforms.each(function(b){a.element.style[b.style]=""})}}else this.style=$H(c.style);this.start(c)},setup:function(){function a(a){if(!a||["rgba(0, 0, 0, 0)","transparent"].include(a))a="#ffffff";a=a.parseColor();return $R(0,2).map(function(c){return parseInt(a.slice(2*c+1,2*c+3),16)})}this.transforms=this.style.map(function(b){var c=b[0];b=b[1];var d=null;"#zzzzzz"!=b.parseColor("#zzzzzz")?(b=b.parseColor(),d="color"):"opacity"==c?(b=parseFloat(b),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&
this.element.setStyle({zoom:1})):Element.CSS_LENGTH.test(b)&&(d=b.match(/^([\+\-]?[0-9\.]+)(.*)$/),b=parseFloat(d[1]),d=3==d.length?d[2]:null);var e=this.element.getStyle(c);return{style:c.camelize(),originalValue:"color"==d?a(e):parseFloat(e||0),targetValue:"color"==d?a(b):b,unit:d}}.bind(this)).reject(function(a){return a.originalValue==a.targetValue||"color"!=a.unit&&(isNaN(a.originalValue)||isNaN(a.targetValue))})},update:function(a){for(var b={},c,d=this.transforms.length;d--;)b[(c=this.transforms[d]).style]=
"color"==c.unit?"#"+Math.round(c.originalValue[0]+(c.targetValue[0]-c.originalValue[0])*a).toColorPart()+Math.round(c.originalValue[1]+(c.targetValue[1]-c.originalValue[1])*a).toColorPart()+Math.round(c.originalValue[2]+(c.targetValue[2]-c.originalValue[2])*a).toColorPart():(c.originalValue+(c.targetValue-c.originalValue)*a).toFixed(3)+(null===c.unit?"":c.unit);this.element.setStyle(b,!0)}});
Effect.Transform=Class.create({initialize:function(a,b){this.tracks=[];this.options=b||{};this.addTracks(a)},addTracks:function(a){a.each(function(a){a=$H(a);var c=a.values().first();this.tracks.push($H({ids:a.keys().first(),effect:Effect.Morph,options:{style:c}}))}.bind(this));return this},play:function(){return new Effect.Parallel(this.tracks.map(function(a){var b=a.get("ids"),c=a.get("effect"),d=a.get("options");return[$(b)||$$(b)].flatten().map(function(a){return new c(a,Object.extend({sync:!0},
d))})}).flatten(),this.options)}});Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex");
Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/;String.__parseStyleElement=document.createElement("div");
String.prototype.parseStyle=function(){var a,b=$H();Prototype.Browser.WebKit?a=(new Element("div",{style:this})).style:(String.__parseStyleElement.innerHTML='\x3cdiv style\x3d"'+this+'"\x3e\x3c/div\x3e',a=String.__parseStyleElement.childNodes[0].style);Element.CSS_PROPERTIES.each(function(c){a[c]&&b.set(c,a[c])});Prototype.Browser.IE&&this.include("opacity")&&b.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]);return b};
Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(a){var b=document.defaultView.getComputedStyle($(a),null);return Element.CSS_PROPERTIES.inject({},function(a,d){a[d]=b[d];return a})}:function(a){a=$(a);var b=a.currentStyle,c;c=Element.CSS_PROPERTIES.inject({},function(a,c){a[c]=b[c];return a});c.opacity||(c.opacity=a.getOpacity());return c};
Effect.Methods={morph:function(a,b,c){a=$(a);new Effect.Morph(a,Object.extend({style:b},c||{}));return a},visualEffect:function(a,b,c){a=$(a);b=b.dasherize().camelize();b=b.charAt(0).toUpperCase()+b.substring(1);new Effect[b](a,c);return a},highlight:function(a,b){a=$(a);new Effect.Highlight(a,b);return a}};
$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(a){Effect.Methods[a]=function(b,c){b=$(b);Effect[a.charAt(0).toUpperCase()+a.substring(1)](b,c);return b}});$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(a){Effect.Methods[a]=Element[a]});Element.addMethods(Effect.Methods);
if("undefined"==typeof Effect)throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};
Autocompleter.Base=Class.create({baseInitialize:function(a,b,c){this.element=a=$(a);this.update=$(b);this.active=this.changed=this.hasFocus=!1;this.entryCount=this.index=0;this.oldElementValue=this.element.value;this.setOptions?this.setOptions(c):this.options=c||{};this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=this.options.onShow||
function(a,b){if(!b.style.position||"absolute"==b.style.position)b.style.position="absolute",Position.clone(a,b,{setHeight:!1,offsetTop:a.offsetHeight});Effect.Appear(b,{duration:0.15})};this.options.onHide=this.options.onHide||function(a,b){new Effect.Fade(b,{duration:0.15})};"string"==typeof this.options.tokens&&(this.options.tokens=Array(this.options.tokens));this.options.tokens.include("\n")||this.options.tokens.push("\n");this.observer=null;this.element.setAttribute("autocomplete","off");Element.hide(this.update);
Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){if("none"==Element.getStyle(this.update,"display"))this.options.onShow(this.element,this.update);!this.iefix&&(Prototype.Browser.IE&&"absolute"==Element.getStyle(this.update,"position"))&&(new Insertion.After(this.update,'\x3ciframe id\x3d"'+this.update.id+'_iefix" style\x3d"display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0);" src\x3d"javascript:false;" frameborder\x3d"0" scrolling\x3d"no"\x3e\x3c/iframe\x3e'),
this.iefix=$(this.update.id+"_iefix"));this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix)},hide:function(){this.stopIndicator();if("none"!=Element.getStyle(this.update,"display"))this.options.onHide(this.element,this.update);this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&
Element.show(this.options.indicator)},stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(a){if(this.active)switch(a.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry(),Event.stop(a);case Event.KEY_ESC:this.hide();this.active=!1;Event.stop(a);return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();Event.stop(a);return;case Event.KEY_DOWN:this.markNext();this.render();Event.stop(a);
return}else if(a.keyCode==Event.KEY_TAB||a.keyCode==Event.KEY_RETURN||0<Prototype.Browser.WebKit&&0==a.keyCode)return;this.hasFocus=this.changed=!0;this.observer&&clearTimeout(this.observer);this.observer=setTimeout(this.onObserverEvent.bind(this),1E3*this.options.frequency)},activate:function(){this.changed=!1;this.hasFocus=!0;this.getUpdatedChoices()},onHover:function(a){var b=Event.findElement(a,"LI");this.index!=b.autocompleteIndex&&(this.index=b.autocompleteIndex,this.render());Event.stop(a)},
onClick:function(a){this.index=Event.findElement(a,"LI").autocompleteIndex;this.selectEntry();this.hide()},onBlur:function(a){setTimeout(this.hide.bind(this),250);this.active=this.hasFocus=!1},render:function(){if(0<this.entryCount){for(var a=0;a<this.entryCount;a++)this.index==a?Element.addClassName(this.getEntry(a),"selected"):Element.removeClassName(this.getEntry(a),"selected");this.hasFocus&&(this.show(),this.active=!0)}else this.active=!1,this.hide()},markPrevious:function(){0<this.index?this.index--:
(this.index=this.entryCount-1,this.update.scrollTop=this.update.scrollHeight);selection=this.getEntry(this.index);selection_top=selection.offsetTop;selection_top<this.update.scrollTop&&(this.update.scrollTop-=selection.offsetHeight)},markNext:function(){this.index<this.entryCount-1?this.index++:(this.index=0,this.update.scrollTop=0);selection=this.getEntry(this.index);selection_bottom=selection.offsetTop+selection.offsetHeight;selection_bottom>this.update.scrollTop+this.update.offsetHeight&&(this.update.scrollTop+=
selection.offsetHeight)},getEntry:function(a){return this.update.firstChild.childNodes[a]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=!1;this.updateElement(this.getCurrentEntry())},updateElement:function(a){if(this.options.updateElement)this.options.updateElement(a);else{var b="";if(this.options.select){var c=$(a).select("."+this.options.select)||[];0<c.length&&(b=Element.collectTextNodes(c[0],this.options.select))}else b=Element.collectTextNodesIgnoreClass(a,
"informal");c=this.getTokenBounds();if(-1!=c[0]){var d=this.element.value.substr(0,c[0]),e=this.element.value.substr(c[0]).match(/^\s+/);e&&(d+=e[0]);this.element.value=d+b+this.element.value.substr(c[1])}else this.element.value=b;this.oldElementValue=this.element.value;this.options.afterUpdateElement&&this.options.afterUpdateElement(this.element,a)}},updateChoices:function(a){if(!this.changed&&this.hasFocus){this.update.innerHTML=a;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.down());
if(this.update.firstChild&&this.update.down().childNodes){this.entryCount=this.update.down().childNodes.length;for(a=0;a<this.entryCount;a++){var b=this.getEntry(a);b.autocompleteIndex=a;this.addObservers(b)}}else this.entryCount=0;this.stopIndicator();this.index=this.update.scrollTop=0;1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):this.render()}},addObservers:function(a){Event.observe(a,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(a,"click",this.onClick.bindAsEventListener(this))},
onObserverEvent:function(){this.changed=!1;this.tokenBounds=null;this.getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide());this.oldElementValue=this.element.value},getToken:function(){var a=this.getTokenBounds();return this.element.value.substring(a[0],a[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var a=this.element.value;if(a.strip().empty())return[-1,0];for(var b=arguments.callee.getFirstDifferencePos(a,this.oldElementValue),
c=b==this.oldElementValue.length?1:0,d=-1,e=a.length,f,g=0,h=this.options.tokens.length;g<h;++g)f=a.lastIndexOf(this.options.tokens[g],b+c-1),f>d&&(d=f),f=a.indexOf(this.options.tokens[g],b+c),-1!=f&&f<e&&(e=f);return this.tokenBounds=[d+1,e]}});Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(a,b){for(var c=Math.min(a.length,b.length),d=0;d<c;++d)if(a[d]!=b[d])return d;return c};
Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(a,b,c,d){this.baseInitialize(a,b,d);this.options.asynchronous=!0;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=c},getUpdatedChoices:function(){this.startIndicator();var a=encodeURIComponent(this.options.paramName)+"\x3d"+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,a):a;this.options.defaultParams&&
(this.options.parameters+="\x26"+this.options.defaultParams);new Ajax.Request(this.url,this.options)},onComplete:function(a){this.updateChoices(a.responseText)}});
Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(a,b,c,d){this.baseInitialize(a,b,d);this.options.array=c},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(a){this.options=Object.extend({choices:10,partialSearch:!0,partialChars:2,ignoreCase:!0,fullSearch:!1,selector:function(a){for(var c=[],d=[],e=a.getToken(),f=0;f<a.options.array.length&&c.length<a.options.choices;f++)for(var g=a.options.array[f],h=a.options.ignoreCase?g.toLowerCase().indexOf(e.toLowerCase()):
g.indexOf(e);-1!=h;){if(0==h&&g.length!=e.length){c.push("\x3cli\x3e\x3cstrong\x3e"+g.substr(0,e.length)+"\x3c/strong\x3e"+g.substr(e.length)+"\x3c/li\x3e");break}else if(e.length>=a.options.partialChars&&(a.options.partialSearch&&-1!=h)&&(a.options.fullSearch||/\s/.test(g.substr(h-1,1)))){d.push("\x3cli\x3e"+g.substr(0,h)+"\x3cstrong\x3e"+g.substr(h,e.length)+"\x3c/strong\x3e"+g.substr(h+e.length)+"\x3c/li\x3e");break}h=a.options.ignoreCase?g.toLowerCase().indexOf(e.toLowerCase(),h+1):g.indexOf(e,
h+1)}d.length&&(c=c.concat(d.slice(0,a.options.choices-c.length)));return"\x3cul\x3e"+c.join("")+"\x3c/ul\x3e"}},a||{})}});Field.scrollFreeActivate=function(a){setTimeout(function(){Field.activate(a)},1)};
Ajax.InPlaceEditor=Class.create({initialize:function(a,b,c){this.url=b;this.element=a=$(a);this.prepareOptions();this._controls={};arguments.callee.dealWithDeprecatedOptions(c);Object.extend(this.options,c||{});!this.options.formId&&this.element.id&&(this.options.formId=this.element.id+"-inplaceeditor",$(this.options.formId)&&(this.options.formId=""));this.options.externalControl&&(this.options.externalControl=$(this.options.externalControl));this.options.externalControl||(this.options.externalControlOnly=
!1);this._originalBackground=this.element.getStyle("background-color")||"transparent";this.element.title=this.options.clickToEditText;this._boundCancelHandler=this.handleFormCancellation.bind(this);this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this);this._boundFailureHandler=this.handleAJAXFailure.bind(this);this._boundSubmitHandler=this.handleFormSubmission.bind(this);this._boundWrapperHandler=this.wrapUp.bind(this);this.registerListeners()},checkForEscapeOrReturn:function(a){this._editing&&
(!a.ctrlKey&&!a.altKey&&!a.shiftKey)&&(Event.KEY_ESC==a.keyCode?this.handleFormCancellation(a):Event.KEY_RETURN==a.keyCode&&this.handleFormSubmission(a))},createControl:function(a,b,c){var d=this.options[a+"Control"];b=this.options[a+"Text"];"button"==d?(c=document.createElement("input"),c.type="submit",c.value=b,c.className="editor_"+a+"_button","cancel"==a&&(c.onclick=this._boundCancelHandler),this._form.appendChild(c),this._controls[a]=c):"link"==d&&(d=document.createElement("a"),d.href="#",d.appendChild(document.createTextNode(b)),
d.onclick="cancel"==a?this._boundCancelHandler:this._boundSubmitHandler,d.className="editor_"+a+"_link",c&&(d.className+=" "+c),this._form.appendChild(d),this._controls[a]=d)},createEditField:function(){var a=this.options.loadTextURL?this.options.loadingText:this.getText(),b;if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){b=document.createElement("input");b.type="text";var c=this.options.size||this.options.cols||0;0<c&&(b.size=c)}else b=document.createElement("textarea"),b.rows=1>=this.options.rows?
this.options.autoRows:this.options.rows,b.cols=this.options.cols||40;b.name=this.options.paramName;b.value=a;b.className="editor_field";this.options.submitOnBlur&&(b.onblur=this._boundSubmitHandler);this._controls.editor=b;this.options.loadTextURL&&this.loadExternalText();this._form.appendChild(this._controls.editor)},createForm:function(){function a(a,d){var e=b.options["text"+a+"Controls"];e&&!1!==d&&b._form.appendChild(document.createTextNode(e))}var b=this;this._form=$(document.createElement("form"));
this._form.id=this.options.formId;this._form.addClassName(this.options.formClassName);this._form.onsubmit=this._boundSubmitHandler;this.createEditField();"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br"));if(this.options.onFormCustomization)this.options.onFormCustomization(this,this._form);a("Before",this.options.okControl||this.options.cancelControl);this.createControl("ok",this._boundSubmitHandler);a("Between",this.options.okControl&&this.options.cancelControl);
this.createControl("cancel",this._boundCancelHandler,"editor_cancel");a("After",this.options.okControl||this.options.cancelControl)},destroy:function(){this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML);this.leaveEditMode();this.unregisterListeners()},enterEditMode:function(a){!this._saving&&!this._editing&&(this._editing=!0,this.triggerCallback("onEnterEditMode"),this.options.externalControl&&this.options.externalControl.hide(),this.element.hide(),this.createForm(),this.element.parentNode.insertBefore(this._form,
this.element),this.options.loadTextURL||this.postProcessEditField(),a&&Event.stop(a))},enterHover:function(a){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML.unescapeHTML()},handleAJAXFailure:function(a){this.triggerCallback("onFailure",a);this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML,this._oldInnerHTML=null)},handleFormCancellation:function(a){this.wrapUp();
a&&Event.stop(a)},handleFormSubmission:function(a){var b=this._form,c=$F(this._controls.editor);this.prepareSubmission();b=this.options.callback(b,c)||"";Object.isString(b)&&(b=b.toQueryParams());b.editorId=this.element.id;this.options.htmlResponse?(c=Object.extend({evalScripts:!0},this.options.ajaxOptions),Object.extend(c,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Updater({success:this.element},this.url,c)):(c=Object.extend({method:"get"},this.options.ajaxOptions),
Object.extend(c,{parameters:b,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Request(this.url,c));a&&Event.stop(a)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this._originalBackground;this.element.show();this.options.externalControl&&this.options.externalControl.show();this._editing=this._saving=!1;this._oldInnerHTML=null;this.triggerCallback("onLeaveEditMode")},
leaveHover:function(a){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName);this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName);this._controls.editor.disabled=!0;var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId\x3d"+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){this._form.removeClassName(this.options.loadingClassName);
a=a.responseText;this.options.stripLoadedTextTags&&(a=a.stripTags());this._controls.editor.value=a;this._controls.editor.disabled=!1;this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler});new Ajax.Request(this.options.loadTextURL,a)},postProcessEditField:function(){var a=this.options.fieldPostCreation;if(a)$(this._controls.editor)["focus"==a?"focus":"activate"]()},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions);Object.extend(this.options,
Ajax.InPlaceEditor.DefaultCallbacks);[this._extraDefaultOptions].flatten().compact().each(function(a){Object.extend(this.options,a)}.bind(this))},prepareSubmission:function(){this._saving=!0;this.removeForm();this.leaveHover();this.showSaving()},registerListeners:function(){this._listeners={};var a;$H(Ajax.InPlaceEditor.Listeners).each(function(b){a=this[b.value].bind(this);this._listeners[b.key]=a;this.options.externalControlOnly||this.element.observe(b.key,a);this.options.externalControl&&this.options.externalControl.observe(b.key,
a)}.bind(this))},removeForm:function(){this._form&&(this._form.remove(),this._form=null,this._controls={})},showSaving:function(){this._oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;this.element.addClassName(this.options.savingClassName);this.element.style.backgroundColor=this._originalBackground;this.element.show()},triggerCallback:function(a,b){if("function"==typeof this.options[a])this.options[a](this,b)},unregisterListeners:function(){$H(this._listeners).each(function(a){this.options.externalControlOnly||
this.element.stopObserving(a.key,a.value);this.options.externalControl&&this.options.externalControl.stopObserving(a.key,a.value)}.bind(this))},wrapUp:function(a){this.leaveEditMode();this._boundComplete(a,this.element)}});Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy});
Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function($super,b,c,d){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions;$super(b,c,d)},createEditField:function(){var a=document.createElement("select");a.name=this.options.paramName;a.size=1;this._controls.editor=a;this._collection=this.options.collection||[];this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText();this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName);
this.showLoadingText(this.options.loadingCollectionText);var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId\x3d"+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){a=a.responseText.strip();if(!/^\[.*\]$/.test(a))throw"Server returned an invalid collection representation.";this._collection=eval(a);this.checkForExternalText()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadCollectionURL,
a)},showLoadingText:function(a){this._controls.editor.disabled=!0;var b=this._controls.editor.firstChild;b||(b=document.createElement("option"),b.value="",this._controls.editor.appendChild(b),b.selected=!0);b.update((a||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText();this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var a=Object.extend({method:"get"},this.options.ajaxOptions);
Object.extend(a,{parameters:"editorId\x3d"+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){this._text=a.responseText.strip();this.buildOptionList()}.bind(this),onFailure:this.onFailure});new Ajax.Request(this.options.loadTextURL,a)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName);this._collection=this._collection.map(function(a){return 2===a.length?a:[a,a].flatten()});var a="value"in this.options?this.options.value:
this._text,b=this._collection.any(function(b){return b[0]==a}.bind(this));this._controls.editor.update("");var c;this._collection.each(function(d,e){c=document.createElement("option");c.value=d[0];c.selected=b?d[0]==a:0==e;c.appendChild(document.createTextNode(d[1]));this._controls.editor.appendChild(c)}.bind(this));this._controls.editor.disabled=!1;Field.scrollFreeActivate(this._controls.editor)}});
Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(a){function b(b,d){b in a||void 0===d||(a[b]=d)}a&&(b("cancelControl",a.cancelLink?"link":a.cancelButton?"button":!1==(a.cancelLink==a.cancelButton)?!1:void 0),b("okControl",a.okLink?"link":a.okButton?"button":!1==(a.okLink==a.okButton)?!1:void 0),b("highlightColor",a.highlightcolor),b("highlightEndColor",a.highlightendcolor))};
Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:!1,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:!0,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",
savingText:"Saving...",size:0,stripLoadedTextTags:!1,submitOnBlur:!1,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(a){return Form.serialize(a)},onComplete:function(a,b){new Effect.Highlight(b,{startcolor:this.options.highlightColor,keepBackgroundImage:!0})},onEnterEditMode:null,onEnterHover:function(a){a.element.style.backgroundColor=a.options.highlightColor;a._effect&&a._effect.cancel()},onFailure:function(a,b){alert("Error communication with the server: "+
a.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(a){a._effect=new Effect.Highlight(a.element,{startcolor:a.options.highlightColor,endcolor:a.options.highlightEndColor,restorecolor:a._originalBackground,keepBackgroundImage:!0})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}});Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."};
Form.Element.DelayedObserver=Class.create({initialize:function(a,b,c){this.delay=b||0.5;this.element=$(a);this.callback=c;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(a){this.lastValue!=$F(this.element)&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.onTimerEvent.bind(this),1E3*this.delay),this.lastValue=$F(this.element))},onTimerEvent:function(){this.timer=null;this.callback(this.element,
$F(this.element))}});if(Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";
var Droppables={drops:[],remove:function(a){this.drops=this.drops.reject(function(b){return b.element==$(a)})},add:function(a,b){a=$(a);var c=Object.extend({greedy:!0,hoverclass:null,tree:!1},b||{});if(c.containment){c._containers=[];var d=c.containment;Object.isArray(d)?d.each(function(a){c._containers.push($(a))}):c._containers.push($(d))}c.accept&&(c.accept=[c.accept].flatten());Element.makePositioned(a);c.element=a;this.drops.push(c)},findDeepestChild:function(a){deepest=a[0];for(i=1;i<a.length;++i)Element.isParent(a[i].element,
deepest.element)&&(deepest=a[i]);return deepest},isContained:function(a,b){var c;c=b.tree?a.treeNode:a.parentNode;return b._containers.detect(function(a){return c==a})},isAffected:function(a,b,c){return c.element!=b&&(!c._containers||this.isContained(b,c))&&(!c.accept||Element.classNames(b).detect(function(a){return c.accept.include(a)}))&&Position.within(c.element,a[0],a[1])},deactivate:function(a){a.hoverclass&&Element.removeClassName(a.element,a.hoverclass);this.last_active=null},activate:function(a){a.hoverclass&&
Element.addClassName(a.element,a.hoverclass);this.last_active=a},show:function(a,b){if(this.drops.length){var c,d=[];this.drops.each(function(c){Droppables.isAffected(a,b,c)&&d.push(c)});0<d.length&&(c=Droppables.findDeepestChild(d));this.last_active&&this.last_active!=c&&this.deactivate(this.last_active);if(c){Position.within(c.element,a[0],a[1]);if(c.onHover)c.onHover(b,c.element,Position.overlap(c.overlap,c.element));c!=this.last_active&&Droppables.activate(c)}}},fire:function(a,b){if(this.last_active&&
(Position.prepare(),this.isAffected([Event.pointerX(a),Event.pointerY(a)],b,this.last_active)&&this.last_active.onDrop))return this.last_active.onDrop(b,this.last_active.element,a),!0},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(a){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),
Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"mousemove",this.eventMouseMove),Event.observe(document,"keypress",this.eventKeypress));this.drags.push(a)},unregister:function(a){this.drags=this.drags.reject(function(b){return b==a});0==this.drags.length&&(Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(a){a.options.delay?
this._timeout=setTimeout(function(){Draggables._timeout=null;window.focus();Draggables.activeDraggable=a}.bind(this),a.options.delay):(window.focus(),this.activeDraggable=a)},deactivate:function(){this.activeDraggable=null},updateDrag:function(a){if(this.activeDraggable){var b=[Event.pointerX(a),Event.pointerY(a)];this._lastPointer&&this._lastPointer.inspect()==b.inspect()||(this._lastPointer=b,this.activeDraggable.updateDrag(a,b))}},endDrag:function(a){this._timeout&&(clearTimeout(this._timeout),
this._timeout=null);this.activeDraggable&&(this._lastPointer=null,this.activeDraggable.endDrag(a),this.activeDraggable=null)},keyPress:function(a){this.activeDraggable&&this.activeDraggable.keyPress(a)},addObserver:function(a){this.observers.push(a);this._cacheObserverCallbacks()},removeObserver:function(a){this.observers=this.observers.reject(function(b){return b.element==a});this._cacheObserverCallbacks()},notify:function(a,b,c){0<this[a+"Count"]&&this.observers.each(function(d){if(d[a])d[a](a,
b,c)});if(b.options[a])b.options[a](b,c)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(a){Draggables[a+"Count"]=Draggables.observers.select(function(b){return b[a]}).length})}},Draggable=Class.create({initialize:function(a,b){var c={handle:!1,reverteffect:function(a,b,c){var g=0.02*Math.sqrt(Math.abs(b^2)+Math.abs(c^2));new Effect.Move(a,{x:-c,y:-b,duration:g,queue:{scope:"_draggable",position:"end"}})},endeffect:function(a){var b=Object.isNumber(a._opacity)?a._opacity:
1;new Effect.Opacity(a,{duration:0.2,from:0.7,to:b,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[a]=!1}})},zindex:1E3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};(!b||Object.isUndefined(b.endeffect))&&Object.extend(c,{starteffect:function(a){a._opacity=Element.getOpacity(a);Draggable._dragging[a]=!0;new Effect.Opacity(a,{duration:0.2,from:a._opacity,to:0.7})}});c=Object.extend(c,b||{});this.element=$(a);c.handle&&Object.isString(c.handle)&&
(this.handle=this.element.down("."+c.handle,0));this.handle||(this.handle=$(c.handle));this.handle||(this.handle=this.element);c.scroll&&(!c.scroll.scrollTo&&!c.scroll.outerHTML)&&(c.scroll=$(c.scroll),this._isScrollChild=Element.childOf(this.element,c.scroll));Element.makePositioned(this.element);this.options=c;this.dragging=!1;this.eventMouseDown=this.initDrag.bindAsEventListener(this);Event.observe(this.handle,"mousedown",this.eventMouseDown);Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,
"mousedown",this.eventMouseDown);Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(a){if(Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])if(Event.isLeftClick(a)&&(!(tag_name=Event.element(a).tagName.toUpperCase())||!("INPUT"==tag_name||"SELECT"==tag_name||"OPTION"==tag_name||"BUTTON"==tag_name||"TEXTAREA"==tag_name))){var b=
[Event.pointerX(a),Event.pointerY(a)],c=this.element.cumulativeOffset();this.offset=[0,1].map(function(a){return b[a]-c[a]});Draggables.activate(this);Event.stop(a)}},startDrag:function(a){this.dragging=!0;this.delta||(this.delta=this.currentDelta());this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex);this.options.ghosting&&(this._clone=this.element.cloneNode(!0),(this._originallyAbsolute="absolute"==this.element.getStyle("position"))||
Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element));if(this.options.scroll)if(this.options.scroll==window){var b=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=b.left;this.originalScrollTop=b.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,a);this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(a,b){this.dragging||
this.startDrag(a);this.options.quiet||(Position.prepare(),Droppables.show(b,this.element));Draggables.notify("onDrag",this,a);this.draw(b);this.options.change&&this.options.change(this);if(this.options.scroll){this.stopScrolling();var c;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))c=[left,top,left+width,top+height];else c=Position.page(this.options.scroll).toArray(),c[0]+=this.options.scroll.scrollLeft+Position.deltaX,c[1]+=this.options.scroll.scrollTop+Position.deltaY,
c.push(c[0]+this.options.scroll.offsetWidth),c.push(c[1]+this.options.scroll.offsetHeight);var d=[0,0];b[0]<c[0]+this.options.scrollSensitivity&&(d[0]=b[0]-(c[0]+this.options.scrollSensitivity));b[1]<c[1]+this.options.scrollSensitivity&&(d[1]=b[1]-(c[1]+this.options.scrollSensitivity));b[0]>c[2]-this.options.scrollSensitivity&&(d[0]=b[0]-(c[2]-this.options.scrollSensitivity));b[1]>c[3]-this.options.scrollSensitivity&&(d[1]=b[1]-(c[3]-this.options.scrollSensitivity));this.startScrolling(d)}Prototype.Browser.WebKit&&
window.scrollBy(0,0);Event.stop(a)},finishDrag:function(a,b){this.dragging=!1;if(this.options.quiet){Position.prepare();var c=[Event.pointerX(a),Event.pointerY(a)];Droppables.show(c,this.element)}this.options.ghosting&&(this._originallyAbsolute||Position.relativize(this.element),delete this._originallyAbsolute,Element.remove(this._clone),this._clone=null);c=!1;b&&((c=Droppables.fire(a,this.element))||(c=!1));if(c&&this.options.onDropped)this.options.onDropped(this.element);Draggables.notify("onEnd",
this,a);var d=this.options.revert;d&&Object.isFunction(d)&&(d=d(this.element));var e=this.currentDelta();d&&this.options.reverteffect?(0==c||"failure"!=d)&&this.options.reverteffect(this.element,e[1]-this.delta[1],e[0]-this.delta[0]):this.delta=e;this.options.zindex&&(this.element.style.zIndex=this.originalZ);this.options.endeffect&&this.options.endeffect(this.element);Draggables.deactivate(this);Droppables.reset()},keyPress:function(a){a.keyCode==Event.KEY_ESC&&(this.finishDrag(a,!1),Event.stop(a))},
endDrag:function(a){this.dragging&&(this.stopScrolling(),this.finishDrag(a,!0),Event.stop(a))},draw:function(a){var b=this.element.cumulativeOffset();if(this.options.ghosting){var c=Position.realOffset(this.element);b[0]+=c[0]-Position.deltaX;b[1]+=c[1]-Position.deltaY}c=this.currentDelta();b[0]-=c[0];b[1]-=c[1];this.options.scroll&&(this.options.scroll!=window&&this._isScrollChild)&&(b[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,b[1]-=this.options.scroll.scrollTop-this.originalScrollTop);
c=[0,1].map(function(c){return a[c]-b[c]-this.offset[c]}.bind(this));this.options.snap&&(c=Object.isFunction(this.options.snap)?this.options.snap(c[0],c[1],this):Object.isArray(this.options.snap)?c.map(function(a,b){return(a/this.options.snap[b]).round()*this.options.snap[b]}.bind(this)):c.map(function(a){return(a/this.options.snap).round()*this.options.snap}.bind(this)));var d=this.element.style;if(!this.options.constraint||"horizontal"==this.options.constraint)d.left=c[0]+"px";if(!this.options.constraint||
"vertical"==this.options.constraint)d.top=c[1]+"px";"hidden"==d.visibility&&(d.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(a){if(a[0]||a[1])this.scrollSpeed=[a[0]*this.options.scrollSpeed,a[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10)},scroll:function(){var a=new Date,b=a-this.lastScrolled;
this.lastScrolled=a;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll)){if(this.scrollSpeed[0]||this.scrollSpeed[1])a=b/1E3,this.options.scroll.scrollTo(left+a*this.scrollSpeed[0],top+a*this.scrollSpeed[1])}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*b/1E3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*b/1E3;Position.prepare();Droppables.show(Draggables._lastPointer,this.element);Draggables.notify("onDrag",this);this._isScrollChild&&(Draggables._lastScrollPointer=
Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*b/1E3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*b/1E3,0>Draggables._lastScrollPointer[0]&&(Draggables._lastScrollPointer[0]=0),0>Draggables._lastScrollPointer[1]&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer));this.options.change&&this.options.change(this)},_getWindowScroll:function(a){var b,c,d;with(a.document)a.document.documentElement&&documentElement.scrollTop?
(b=documentElement.scrollTop,c=documentElement.scrollLeft):a.document.body&&(b=body.scrollTop,c=body.scrollLeft),a.innerWidth?(d=a.innerWidth,a=a.innerHeight):a.document.documentElement&&documentElement.clientWidth?(d=documentElement.clientWidth,a=documentElement.clientHeight):(d=body.offsetWidth,a=body.offsetHeight);return{top:b,left:c,width:d,height:a}}});Draggable._dragging={};
var SortableObserver=Class.create({initialize:function(a,b){this.element=$(a);this.observer=b;this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark();this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(a){for(;"BODY"!=a.tagName.toUpperCase();){if(a.id&&Sortable.sortables[a.id])return a;
a=a.parentNode}},options:function(a){if(a=Sortable._findRootElement($(a)))return Sortable.sortables[a.id]},destroy:function(a){a=$(a);if(a=Sortable.sortables[a.id])Draggables.removeObserver(a.element),a.droppables.each(function(a){Droppables.remove(a)}),a.draggables.invoke("destroy"),delete Sortable.sortables[a.element.id]},create:function(a,b){a=$(a);var c=Object.extend({element:a,tag:"li",dropOnEmpty:!1,tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:a,handle:!1,only:!1,
delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},b||{});this.destroy(a);var d={revert:!0,quiet:c.quiet,scroll:c.scroll,scrollSpeed:c.scrollSpeed,scrollSensitivity:c.scrollSensitivity,delay:c.delay,ghosting:c.ghosting,constraint:c.constraint,handle:c.handle};c.starteffect&&(d.starteffect=c.starteffect);c.reverteffect?d.reverteffect=c.reverteffect:
c.ghosting&&(d.reverteffect=function(a){a.style.top=0;a.style.left=0});c.endeffect&&(d.endeffect=c.endeffect);c.zindex&&(d.zindex=c.zindex);var e={overlap:c.overlap,containment:c.containment,tree:c.tree,hoverclass:c.hoverclass,onHover:Sortable.onHover},f={onHover:Sortable.onEmptyHover,overlap:c.overlap,containment:c.containment,hoverclass:c.hoverclass};Element.cleanWhitespace(a);c.draggables=[];c.droppables=[];if(c.dropOnEmpty||c.tree)Droppables.add(a,f),c.droppables.push(a);(c.elements||this.findElements(a,
c)||[]).each(function(b,f){var k=c.handles?$(c.handles[f]):c.handle?$(b).select("."+c.handle)[0]:b;c.draggables.push(new Draggable(b,Object.extend(d,{handle:k})));Droppables.add(b,e);c.tree&&(b.treeNode=a);c.droppables.push(b)});c.tree&&(Sortable.findTreeElements(a,c)||[]).each(function(b){Droppables.add(b,f);b.treeNode=a;c.droppables.push(b)});this.sortables[a.identify()]=c;Draggables.addObserver(new SortableObserver(a,c.onUpdate))},findElements:function(a,b){return Element.findChildren(a,b.only,
b.tree?!0:!1,b.tag)},findTreeElements:function(a,b){return Element.findChildren(a,b.only,b.tree?!0:!1,b.treeTag)},onHover:function(a,b,c){if(!Element.isParent(b,a)&&!(0.33<c&&0.66>c&&Sortable.options(b).tree))if(0.5<c){if(Sortable.mark(b,"before"),b.previousSibling!=a){c=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,b);if(b.parentNode!=c)Sortable.options(c).onChange(a);Sortable.options(b.parentNode).onChange(a)}}else{Sortable.mark(b,"after");var d=b.nextSibling||null;if(d!=
a){c=a.parentNode;a.style.visibility="hidden";b.parentNode.insertBefore(a,d);if(b.parentNode!=c)Sortable.options(c).onChange(a);Sortable.options(b.parentNode).onChange(a)}}},onEmptyHover:function(a,b,c){var d=a.parentNode,e=Sortable.options(b);if(!Element.isParent(b,a)){var f=Sortable.findElements(b,{tag:e.tag,only:e.only}),g=null;if(f){var h=Element.offsetSize(b,e.overlap)*(1-c);for(c=0;c<f.length;c+=1)if(0<=h-Element.offsetSize(f[c],e.overlap))h-=Element.offsetSize(f[c],e.overlap);else{g=0<=h-Element.offsetSize(f[c],
e.overlap)/2?c+1<f.length?f[c+1]:null:f[c];break}}b.insertBefore(a,g);Sortable.options(d).onChange(a);e.onChange(a)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(a,b){var c=Sortable.options(a.parentNode);if(!c||c.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var d=
a.cumulativeOffset();Sortable._marker.setStyle({left:d[0]+"px",top:d[1]+"px"});"after"==b&&("horizontal"==c.overlap?Sortable._marker.setStyle({left:d[0]+a.clientWidth+"px"}):Sortable._marker.setStyle({top:d[1]+a.clientHeight+"px"}));Sortable._marker.show()}},_tree:function(a,b,c){for(var d=Sortable.findElements(a,b)||[],e=0;e<d.length;++e){var f=d[e].id.match(b.format);f&&(f={id:encodeURIComponent(f?f[1]:null),element:a,parent:c,children:[],position:c.children.length,container:$(d[e]).down(b.treeTag)},
f.container&&this._tree(f.container,b,f),c.children.push(f))}return c},tree:function(a,b){a=$(a);var c=this.options(a),c=Object.extend({tag:c.tag,treeTag:c.treeTag,only:c.only,name:a.id,format:c.format},b||{});return Sortable._tree(a,c,{id:null,parent:null,children:[],container:a,position:0})},_constructIndex:function(a){var b="";do a.id&&(b="["+a.position+"]"+b);while(null!=(a=a.parent));return b},sequence:function(a,b){a=$(a);var c=Object.extend(this.options(a),b||{});return $(this.findElements(a,
c)||[]).map(function(a){return a.id.match(c.format)?a.id.match(c.format)[1]:""})},setSequence:function(a,b,c){a=$(a);var d=Object.extend(this.options(a),c||{}),e={};this.findElements(a,d).each(function(a){a.id.match(d.format)&&(e[a.id.match(d.format)[1]]=[a,a.parentNode]);a.parentNode.removeChild(a)});b.each(function(a){var b=e[a];b&&(b[1].appendChild(b[0]),delete e[a])})},serialize:function(a,b){a=$(a);var c=Object.extend(Sortable.options(a),b||{}),d=encodeURIComponent(b&&b.name?b.name:a.id);return c.tree?
Sortable.tree(a,b).children.map(function(a){return[d+Sortable._constructIndex(a)+"[id]\x3d"+encodeURIComponent(a.id)].concat(a.children.map(arguments.callee))}).flatten().join("\x26"):Sortable.sequence(a,b).map(function(a){return d+"[]\x3d"+encodeURIComponent(a)}).join("\x26")}};Element.isParent=function(a,b){return!a.parentNode||a==b?!1:a.parentNode==b?!0:Element.isParent(a.parentNode,b)};
Element.findChildren=function(a,b,c,d){if(!a.hasChildNodes())return null;d=d.toUpperCase();b&&(b=[b].flatten());var e=[];$A(a.childNodes).each(function(a){a.tagName&&(a.tagName.toUpperCase()==d&&(!b||Element.classNames(a).detect(function(a){return b.include(a)})))&&e.push(a);c&&(a=Element.findChildren(a,b,c,d))&&e.push(a)});return 0<e.length?e.flatten():[]};Element.offsetSize=function(a,b){return a["offset"+("vertical"==b||"height"==b?"Height":"Width")]};var TableKit=Class.create();
TableKit.prototype={initialize:function(a,b){var c=$(a);if("TABLE"===c.tagName){TableKit.register(c,Object.extend(TableKit.options,b||{}));this.id=c.id;var d=TableKit.option("sortable resizable editable",this.id);d.sortable&&TableKit.Sortable.init(c);d.resizable&&TableKit.Resizable.init(c);d.editable&&TableKit.Editable.init(c)}},sort:function(a,b){TableKit.Sortable.sort(this.id,a,b)},resizeColumn:function(a,b){TableKit.Resizable.resize(this.id,a,b)},editCell:function(a,b){TableKit.Editable.editCell(this.id,
a,b)}};
Object.extend(TableKit,{getBodyRows:function(a){a=$(a);var b=a.id;TableKit.rows[b]||(TableKit.rows[b]=a.tHead&&0<a.tHead.rows.length?$A(a.tBodies[0].rows):$A(a.rows).without(a.rows[0]));return TableKit.rows[b]},getHeaderCells:function(a,b){a||(a=$(b).up("table"));var c=a.id;TableKit.heads[c]||(TableKit.heads[c]=$A(a.tHead&&0<a.tHead.rows.length?a.tHead.rows[a.tHead.rows.length-1].cells:a.rows[0].cells));return TableKit.heads[c]},getCellIndex:function(a){return $A(a.parentNode.cells).indexOf(a)},getRowIndex:function(a){return $A(a.parentNode.rows).indexOf(a)},
getCellText:function(a,b){if(!a)return"";TableKit.registerCell(a);var c=TableKit.cells[a.id];if(b||c.refresh||!c.textContent)x=$(a).readAttribute("x"),c.textContent=null!=x&&""!=x?x:a.textContent?a.textContent:a.innerText,c.refresh=!1;return c.textContent},register:function(a,b){a.id||(TableKit._tblcount+=1,a.id="tablekit-table-"+TableKit._tblcount);var c=a.id;TableKit.tables[c]=TableKit.tables[c]?Object.extend(TableKit.tables[c],b||{}):Object.extend({sortable:!1,resizable:!1,editable:!1},b||{})},
registerCell:function(a){a.id||(TableKit._cellcount+=1,a.id="tablekit-cell-"+TableKit._cellcount);TableKit.cells[a.id]||(TableKit.cells[a.id]={textContent:"",htmlContent:"",active:!1})},isSortable:function(a){return TableKit.tables[a.id]?TableKit.tables[a.id].sortable:!1},isResizable:function(a){return TableKit.tables[a.id]?TableKit.tables[a.id].resizable:!1},isEditable:function(a){return TableKit.tables[a.id]?TableKit.tables[a.id].editable:!1},setup:function(a){Object.extend(TableKit.options,a||
{})},option:function(a,b,c,d){c=c||TableKit.options;d=d||(b?TableKit.tables[b]?TableKit.tables[b]:{}:{});b+=a;TableKit._opcache[b]||(TableKit._opcache[b]=$A($w(a)).inject([],function(a,b){a.push(a[b]=d[b]||c[b]);return a}));return TableKit._opcache[b]},e:function(a){return a||window.event},tables:{},_opcache:{},cells:{},rows:{},heads:{},options:{autoLoad:!1,stripe:!0,sortable:!0,resizable:!0,editable:!0,rowEvenClass:"roweven",rowOddClass:"rowodd",sortableSelector:["table.sortable"],columnClass:"sortcol",
descendingClass:"sortdesc",ascendingClass:"sortasc",noSortClass:"nosort",sortFirstAscendingClass:"sortfirstasc",sortFirstDecendingClass:"sortfirstdesc",resizableSelector:["table.resizable"],minWidth:10,showHandle:!0,resizeOnHandleClass:"resize-handle-active",editableSelector:["table.editable"],formClassName:"editable-cell-form",noEditClass:"noedit",editAjaxURI:"/",editAjaxOptions:{}},_tblcount:0,_cellcount:0,load:function(){TableKit.options.autoLoad&&(TableKit.options.sortable&&$A(TableKit.options.sortableSelector).each(function(a){$$(a).each(function(a){TableKit.Sortable.init(a)})}),
TableKit.options.resizable&&$A(TableKit.options.resizableSelector).each(function(a){$$(a).each(function(a){TableKit.Resizable.init(a)})}),TableKit.options.editable&&$A(TableKit.options.editableSelector).each(function(a){$$(a).each(function(a){TableKit.Editable.init(a)})}))}});
TableKit.Rows={stripe:function(a){TableKit.getBodyRows(a).each(function(b,c){TableKit.Rows.addStripeClass(a,b,c)})},addStripeClass:function(a,b,c){a=a||b.up("table");a=TableKit.option("rowEvenClass rowOddClass",a.id);c=0===(c+1)%2?a[0]:a[1];for(var d=b.className.split(/\s+/),e=[],f=0,g=d.length;f<g;f+=1)d[f]!==a[0]&&d[f]!==a[1]&&e.push(d[f]);e.push(c);b.className=e.join(" ")}};
TableKit.Sortable={init:function(a,b){var c=$(a);if("TABLE"===c.tagName){TableKit.register(c,Object.extend(b||{},{sortable:!0}));var d,e=TableKit.getHeaderCells(c),f=TableKit.option("noSortClass columnClass sortFirstAscendingClass sortFirstDecendingClass",c.id);e.each(function(a){a=$(a);if(!a.hasClassName(f.noSortClass)&&(Event.observe(a,"mousedown",TableKit.Sortable._sort),a.addClassName(f.columnClass),a.hasClassName(f.sortFirstAscendingClass)||a.hasClassName(f.sortFirstDecendingClass)))d=a});d?
d.hasClassName(f.sortFirstAscendingClass)?TableKit.Sortable.sort(c,d,1):TableKit.Sortable.sort(c,d,-1):TableKit.Rows.stripe(c)}},reload:function(a){a=$(a);var b=TableKit.getHeaderCells(a),c=TableKit.option("noSortClass columnClass",a.id);b.each(function(a){a=$(a);a.hasClassName(c.noSortClass)||(Event.stopObserving(a,"mousedown",TableKit.Sortable._sort),a.removeClassName(c.columnClass))});TableKit.Sortable.init(a)},_sort:function(a){if(!TableKit.Resizable._onHandle){a=TableKit.e(a);Event.stop(a);for(a=
Event.element(a);!a.tagName||!a.tagName.match(/td|th/gi);)a=a.parentNode;TableKit.Sortable.sort(null,a)}},sort:function(a,b,c){var d;if("number"===typeof b){if(!a||a.tagName&&"TABLE"!==a.tagName)return;a=$(a);b=Math.min(a.rows[0].cells.length,b);b=Math.max(1,b);b-=1;d=a.tHead&&0<a.tHead.rows.length?$(a.tHead.rows[a.tHead.rows.length-1].cells[b]):$(a.rows[0].cells[b])}else d=$(b),a=a?$(a):d.up("table"),b=TableKit.getCellIndex(d);var e=TableKit.option("noSortClass descendingClass ascendingClass",a.id);
if(!d.hasClassName(e.noSortClass)){c=c?c:d.hasClassName(e.descendingClass)?1:-1;var f=TableKit.getBodyRows(a);if(d.hasClassName(e.ascendingClass)||d.hasClassName(e.descendingClass))f.reverse();else{var g=TableKit.Sortable.getDataType(d,b,a),h=TableKit.Sortable.types;f.sort(function(a,d){return c*h[g].compare(TableKit.getCellText(a.cells[b]),TableKit.getCellText(d.cells[b]))})}var k=a.tBodies[0];f.each(function(a,b){k.appendChild(a)});TableKit.Rows.stripe(a);a=TableKit.getHeaderCells(null,d);$A(a).each(function(a,
d){a=$(a);a.removeClassName(e.ascendingClass);a.removeClassName(e.descendingClass);b===d&&(1===c?(a.removeClassName(e.descendingClass),a.addClassName(e.ascendingClass)):(a.removeClassName(e.ascendingClass),a.addClassName(e.descendingClass)))})}},types:{},detectors:[],addSortType:function(){$A(arguments).each(function(a){TableKit.Sortable.types[a.name]=a})},getDataType:function(a,b,c){a=$(a);b=b||0===b?b:TableKit.getCellIndex(a);var d=TableKit.Sortable._coltypecache,d=d[c.id]?d[c.id]:d[c.id]={};if(!d[b]){var e=
"";a.id&&TableKit.Sortable.types[a.id]&&(e=a.id);e=a.classNames().detect(function(a){return TableKit.Sortable.types[a]?!0:!1});e||(a=TableKit.getBodyRows(c)[0].cells[b],e=TableKit.Sortable.detectors.detect(function(b){return TableKit.Sortable.types[b].detect(TableKit.getCellText(a))}));d[b]=e}return d[b]},_coltypecache:{}};TableKit.Sortable.detectors=$A($w("date-iso date date-eu date-au time currency datasize number text"));TableKit.Sortable.Type=Class.create();
TableKit.Sortable.Type.prototype={initialize:function(a,b){this.name=a;b=Object.extend({normal:function(a){return a},pattern:/.*/},b||{});this.normal=b.normal;this.pattern=b.pattern;b.compare&&(this.compare=b.compare);b.detect&&(this.detect=b.detect)},compare:function(a,b){return TableKit.Sortable.Type.compare(this.normal(a),this.normal(b))},detect:function(a){return this.pattern.test(a)}};TableKit.Sortable.Type.compare=function(a,b){return a<b?-1:a===b?0:1};
TableKit.Sortable.addSortType(new TableKit.Sortable.Type("number",{pattern:/^[-+]?[\d]*\.?[\d]+(?:[eE][-+]?[\d]+)?/,normal:function(a){a=parseFloat(a.replace(/^.*?([-+]?[\d]*\.?[\d]+(?:[eE][-+]?[\d]+)?).*$/,"$1"));return isNaN(a)?0:a}}),new TableKit.Sortable.Type("text",{normal:function(a){return a?a.toLowerCase():""}}),new TableKit.Sortable.Type("casesensitivetext",{pattern:/^[A-Z]+$/}),new TableKit.Sortable.Type("datasize",{pattern:/^[-+]?[\d]*\.?[\d]+(?:[eE][-+]?[\d]+)?\s?[k|m|g|t]b$/i,normal:function(a){var b=
a.match(/^([-+]?[\d]*\.?[\d]+([eE][-+]?[\d]+)?)\s?([k|m|g|t]?b)?/i);a=b[1]?Number(b[1]).valueOf():0;var b=b[3]?b[3].substr(0,1).toLowerCase():"",c=a;switch(b){case "k":c=1024*a;break;case "m":c=1048576*a;break;case "g":c=1073741824*a;break;case "t":c=1099511627776*a}return c}}),new TableKit.Sortable.Type("date-au",{pattern:/^\d{2}\/\d{2}\/\d{4}\s?(?:\d{1,2}\:\d{2}(?:\:\d{2})?\s?[a|p]?m?)?/i,normal:function(a){if(!this.pattern.test(a))return 0;a=a.match(/^(\d{2})\/(\d{2})\/(\d{4})\s?(?:(\d{1,2})\:(\d{2})(?:\:(\d{2}))?\s?([a|p]?m?))?/i);
var b=a[3],c=parseInt(a[2],10)-1,d=a[1],e=a[4]?a[4]:0;a[7]&&-1!==a[7].toLowerCase().indexOf("p")&&(e=parseInt(a[4],10)+12);return(new Date(b,c,d,e,a[5]?a[5]:0,a[6]?a[6]:0,0)).valueOf()}}),new TableKit.Sortable.Type("date-us",{pattern:/^\d{2}\/\d{2}\/\d{4}\s?(?:\d{1,2}\:\d{2}(?:\:\d{2})?\s?[a|p]?m?)?/i,normal:function(a){if(!this.pattern.test(a))return 0;a=a.match(/^(\d{2})\/(\d{2})\/(\d{4})\s?(?:(\d{1,2})\:(\d{2})(?:\:(\d{2}))?\s?([a|p]?m?))?/i);var b=a[3],c=parseInt(a[1],10)-1,d=a[2],e=a[4]?a[4]:
0;a[7]&&-1!==a[7].toLowerCase().indexOf("p")&&(e=parseInt(a[4],10)+12);return(new Date(b,c,d,e,a[5]?a[5]:0,a[6]?a[6]:0,0)).valueOf()}}),new TableKit.Sortable.Type("date-eu",{pattern:/^\d{2}-\d{2}-\d{4}/i,normal:function(a){if(!this.pattern.test(a))return 0;a=a.match(/^(\d{2})-(\d{2})-(\d{4})/);var b=a[3],c=parseInt(a[2],10)-1;return(new Date(b,c,a[1])).valueOf()}}),new TableKit.Sortable.Type("date-iso",{pattern:/[\d]{4}-[\d]{2}-[\d]{2}(?:T[\d]{2}\:[\d]{2}(?:\:[\d]{2}(?:\.[\d]+)?)?(Z|([-+][\d]{2}:[\d]{2})?)?)?/,
normal:function(a){if(!this.pattern.test(a))return 0;a=a.match(/([\d]{4})(-([\d]{2})(-([\d]{2})(T([\d]{2}):([\d]{2})(:([\d]{2})(\.([\d]+))?)?(Z|(([-+])([\d]{2}):([\d]{2})))?)?)?)?/);var b=0,c=new Date(a[1],0,1);a[3]&&c.setMonth(a[3]-1);a[5]&&c.setDate(a[5]);a[7]&&c.setHours(a[7]);a[8]&&c.setMinutes(a[8]);a[10]&&c.setSeconds(a[10]);a[12]&&c.setMilliseconds(1E3*Number("0."+a[12]));a[14]&&(b=60*Number(a[16])+Number(a[17]),b*="-"===a[15]?1:-1);b-=c.getTimezoneOffset();0!==b&&c.setTime(Number(Number(c)+
6E4*b));return c.valueOf()}}),new TableKit.Sortable.Type("date",{pattern:/^(?:sun|mon|tue|wed|thu|fri|sat)\,\s\d{1,2}\s(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s\d{4}(?:\s\d{2}\:\d{2}(?:\:\d{2})?(?:\sGMT(?:[+-]\d{4})?)?)?/i,compare:function(a,b){return a&&b?TableKit.Sortable.Type.compare(new Date(a),new Date(b)):TableKit.Sortable.Type.compare(a?1:0,b?1:0)}}),new TableKit.Sortable.Type("time",{pattern:/^\d{1,2}\:\d{2}(?:\:\d{2})?(?:\s[a|p]m)?$/i,compare:function(a,b){var c=new Date,c=c.getMonth()+
"/"+c.getDate()+"/"+c.getFullYear()+" ";return TableKit.Sortable.Type.compare(new Date(c+a),new Date(c+b))}}),new TableKit.Sortable.Type("currency",{pattern:/^[$����]/,normal:function(a){return a?parseFloat(a.replace(/[^-\d\.]/g,"")):0}}));
TableKit.Resizable={init:function(a,b){var c=$(a);"TABLE"===c.tagName&&(TableKit.register(c,Object.extend(b||{},{resizable:!0})),TableKit.getHeaderCells(c).each(function(a){a=$(a);Event.observe(a,"mouseover",TableKit.Resizable.initDetect);Event.observe(a,"mouseout",TableKit.Resizable.killDetect)}))},resize:function(a,b,c){if("number"===typeof b){if(!a||a.tagName&&"TABLE"!==a.tagName)return;a=$(a);b=Math.min(a.rows[0].cells.length,b);b=Math.max(1,b);b-=1;b=a.tHead&&0<a.tHead.rows.length?$(a.tHead.rows[a.tHead.rows.length-
1].cells[b]):$(a.rows[0].cells[b])}else b=$(b),a=a?$(a):b.up("table"),TableKit.getCellIndex(b);var d=parseInt(b.getStyle("paddingLeft"),10)+parseInt(b.getStyle("paddingRight"),10);c=Math.max(c-d,TableKit.option("minWidth",a.id)[0]);b.setStyle({width:c+"px"})},initDetect:function(a){a=TableKit.e(a);a=Event.element(a);Event.observe(a,"mousemove",TableKit.Resizable.detectHandle);Event.observe(a,"mousedown",TableKit.Resizable.startResize)},detectHandle:function(a){a=TableKit.e(a);var b=Event.element(a);
TableKit.Resizable.pointerPos(b,Event.pointerX(a),Event.pointerY(a))?(b.addClassName(TableKit.option("resizeOnHandleClass",b.up("table").id)[0]),TableKit.Resizable._onHandle=!0):(b.removeClassName(TableKit.option("resizeOnHandleClass",b.up("table").id)[0]),TableKit.Resizable._onHandle=!1)},killDetect:function(a){a=TableKit.e(a);TableKit.Resizable._onHandle=!1;a=Event.element(a);Event.stopObserving(a,"mousemove",TableKit.Resizable.detectHandle);Event.stopObserving(a,"mousedown",TableKit.Resizable.startResize);
a.removeClassName(TableKit.option("resizeOnHandleClass",a.up("table").id)[0])},startResize:function(a){a=TableKit.e(a);if(TableKit.Resizable._onHandle){var b=Event.element(a);Event.stopObserving(b,"mousemove",TableKit.Resizable.detectHandle);Event.stopObserving(b,"mousedown",TableKit.Resizable.startResize);Event.stopObserving(b,"mouseout",TableKit.Resizable.killDetect);TableKit.Resizable._cell=b;var c=b.up("table");TableKit.Resizable._tbl=c;TableKit.option("showHandle",c.id)[0]&&(TableKit.Resizable._handle=
$(document.createElement("div")).addClassName("resize-handle").setStyle({top:Position.cumulativeOffset(b)[1]+"px",left:Event.pointerX(a)+"px",height:c.getDimensions().height+"px"}),document.body.appendChild(TableKit.Resizable._handle));Event.observe(document,"mousemove",TableKit.Resizable.drag);Event.observe(document,"mouseup",TableKit.Resizable.endResize);Event.stop(a)}},endResize:function(a){a=TableKit.e(a);var b=TableKit.Resizable._cell;TableKit.Resizable.resize(null,b,Event.pointerX(a)-Position.cumulativeOffset(b)[0]);
Event.stopObserving(document,"mousemove",TableKit.Resizable.drag);Event.stopObserving(document,"mouseup",TableKit.Resizable.endResize);TableKit.option("showHandle",TableKit.Resizable._tbl.id)[0]&&$$("div.resize-handle").each(function(a){document.body.removeChild(a)});Event.observe(b,"mouseout",TableKit.Resizable.killDetect);TableKit.Resizable._tbl=TableKit.Resizable._handle=TableKit.Resizable._cell=null;Event.stop(a)},drag:function(a){a=TableKit.e(a);if(null===TableKit.Resizable._handle)try{TableKit.Resizable.resize(TableKit.Resizable._tbl,
TableKit.Resizable._cell,Event.pointerX(a)-Position.cumulativeOffset(TableKit.Resizable._cell)[0])}catch(b){}else TableKit.Resizable._handle.setStyle({left:Event.pointerX(a)+"px"});return!1},pointerPos:function(a,b,c){var d=Position.cumulativeOffset(a);return c>=d[1]&&c<d[1]+a.offsetHeight&&b>=d[0]+a.offsetWidth-5&&b<d[0]+a.offsetWidth},_onHandle:!1,_cell:null,_tbl:null,_handle:null};
TableKit.Editable={init:function(a,b){var c=$(a);"TABLE"===c.tagName&&(TableKit.register(c,Object.extend(b||{},{editable:!0})),Event.observe(c.tBodies[0],"click",TableKit.Editable._editCell))},_editCell:function(a){a=TableKit.e(a);a=Event.findElement(a,"td");TableKit.Editable.editCell(null,a)},editCell:function(a,b,c){if("number"===typeof b){if(!a||a.tagName&&"TABLE"!==a.tagName)return;a=$(a);b=Math.min(a.tBodies[0].rows.length,b);b=Math.max(1,b);b-=1;c=Math.min(a.rows[0].cells.length,c);c=Math.max(1,
c);c-=1;b=$(a.tBodies[0].rows[b]);c=$(b.cells[c])}else c=$(b),a=a&&a.tagName&&"TABLE"!==a.tagName?$(a):c.up("table"),b=c.up("tr");b=TableKit.option("noEditClass",a.id);if(!c.hasClassName(b.noEditClass)&&(a=$(TableKit.getHeaderCells(a,c)[TableKit.getCellIndex(c)]),!a.hasClassName(b.noEditClass)&&(TableKit.registerCell(c),b=TableKit.cells[c.id],!b.active))){b.htmlContent=c.innerHTML;var d=TableKit.Editable.types["text-input"];d=a.id&&TableKit.Editable.types[a.id]?TableKit.Editable.types[a.id]:(a=a.classNames().detect(function(a){return TableKit.Editable.types[a]?
!0:!1}))?TableKit.Editable.types[a]:d;d.edit(c);b.active=!0}},types:{},addCellEditor:function(a){a&&a.name&&(TableKit.Editable.types[a.name]=a)}};TableKit.Editable.CellEditor=Class.create();
TableKit.Editable.CellEditor.prototype={initialize:function(a,b){this.name=a;this.options=Object.extend({element:"input",attributes:{name:"value",type:"text"},selectOptions:[],showSubmit:!0,submitText:"OK",showCancel:!0,cancelText:"Cancel",ajaxURI:null,ajaxOptions:null},b||{})},edit:function(a){a=$(a);var b=this.options,c=a.up("table"),d=$(document.createElement("form"));d.id=a.id+"-form";d.addClassName(TableKit.option("formClassName",c.id)[0]);d.onsubmit=this._submit.bindAsEventListener(this);var e=
document.createElement(b.element);$H(b.attributes).each(function(a){e[a.key]=a.value});switch(b.element){case "input":case "textarea":e.value=TableKit.getCellText(a);break;case "select":var f=TableKit.getCellText(a);$A(b.selectOptions).each(function(a){e.options[e.options.length]=new Option(a[0],a[1]);f===a[1]&&(e.options[e.options.length-1].selected="selected")})}d.appendChild(e);"textarea"===b.element&&d.appendChild(document.createElement("br"));b.showSubmit&&(c=document.createElement("input"),
c.type="submit",c.value=b.submitText,c.className="editor_ok_button",d.appendChild(c));b.showCancel&&(c=document.createElement("a"),c.href="#",c.appendChild(document.createTextNode(b.cancelText)),c.onclick=this._cancel.bindAsEventListener(this),c.className="editor_cancel",d.appendChild(c));a.innerHTML="";a.appendChild(d)},_submit:function(a){var b=Event.findElement(a,"td"),c=Event.findElement(a,"form");Event.stop(a);this.submit(b,c)},submit:function(a,b){var c=this.options;b=b?b:a.down("form");var d=
$(TableKit.getHeaderCells(null,a)[TableKit.getCellIndex(a)]),e=a.up("tr"),f=a.up("table"),d="\x26row\x3d"+(TableKit.getRowIndex(e)+1)+"\x26cell\x3d"+(TableKit.getCellIndex(a)+1)+"\x26id\x3d"+e.id+"\x26field\x3d"+d.id+"\x26"+Form.serialize(b);this.ajax=new Ajax.Updater(a,c.ajaxURI||TableKit.option("editAjaxURI",f.id)[0],Object.extend(c.ajaxOptions||TableKit.option("editAjaxOptions",f.id)[0],{postBody:d,onComplete:function(){var b=TableKit.cells[a.id];b.active=!1;b.refresh=!0}}))},_cancel:function(a){var b=
Event.findElement(a,"td");Event.stop(a);this.cancel(b)},cancel:function(a){this.ajax=null;var b=TableKit.cells[a.id];a.innerHTML=b.htmlContent;b.htmlContent="";b.active=!1},ajax:null};TableKit.Editable.textInput=function(a,b){TableKit.Editable.addCellEditor(new TableKit.Editable.CellEditor(a,{element:"input",attributes:Object.extend({name:"value",type:"text"},b||{})}))};TableKit.Editable.textInput("text-input");
TableKit.Editable.multiLineInput=function(a,b){TableKit.Editable.addCellEditor(new TableKit.Editable.CellEditor(a,{element:"textarea",attributes:Object.extend({name:"value",rows:"5",cols:"20"},b||{})}))};TableKit.Editable.multiLineInput("multi-line-input");TableKit.Editable.selectInput=function(a,b,c){TableKit.Editable.addCellEditor(new TableKit.Editable.CellEditor(a,{element:"select",attributes:Object.extend({name:"value"},b||{}),selectOptions:c}))};
window.FastInit?FastInit.addOnLoad(TableKit.load):Event.observe(window,"load",TableKit.load);(function(r,n){function va(a){var b=a.length,d=c.type(a);return c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||"function"!==d&&(0===b||"number"==typeof b&&0<b&&b-1 in a)}function Zb(a){var b=Xa[a]={};return c.each(a.match(Q)||[],function(a,c){b[c]=!0}),b}function Ya(a,b,d,e){if(c.acceptData(a)){var f,g,h=c.expando,k=a.nodeType,l=k?c.cache:a,q=k?a[h]:a[h]&&h;if(q&&l[q]&&(e||l[q].data)||d!==n||"string"!=typeof b)return q||(q=k?a[h]=ca.pop()||c.guid++:h),l[q]||(l[q]=k?{}:{toJSON:c.noop}),("object"==
typeof b||"function"==typeof b)&&(e?l[q]=c.extend(l[q],b):l[q].data=c.extend(l[q].data,b)),g=l[q],e||(g.data||(g.data={}),g=g.data),d!==n&&(g[c.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[c.camelCase(b)])):f=g,f}}function Za(a,b,d){if(c.acceptData(a)){var e,f,g=a.nodeType,h=g?c.cache:a,k=g?a[c.expando]:c.expando;if(h[k]){if(b&&(e=d?h[k]:h[k].data)){c.isArray(b)?b=b.concat(c.map(b,c.camelCase)):b in e?b=[b]:(b=c.camelCase(b),b=b in e?[b]:b.split(" "));for(f=b.length;f--;)delete e[b[f]];
if(d?!Ca(e):!c.isEmptyObject(e))return}(d||(delete h[k].data,Ca(h[k])))&&(g?c.cleanData([a],!0):c.support.deleteExpando||h!=h.window?delete h[k]:h[k]=null)}}}function $a(a,b,d){if(d===n&&1===a.nodeType){var e="data-"+b.replace($b,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:ac.test(d)?c.parseJSON(d):d}catch(f){}c.data(a,b,d)}else d=n}return d}function Ca(a){for(var b in a)if(("data"!==b||!c.isEmptyObject(a[b]))&&"toJSON"!==
b)return!1;return!0}function ma(){return!0}function da(){return!1}function ab(){try{return p.activeElement}catch(a){}}function bb(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function Da(a,b,d){if(c.isFunction(b))return c.grep(a,function(a,c){return!!b.call(a,c,a)!==d});if(b.nodeType)return c.grep(a,function(a){return a===b!==d});if("string"==typeof b){if(bc.test(b))return c.filter(b,a,d);b=c.filter(b,a)}return c.grep(a,function(a){return 0<=c.inArray(a,b)!==d})}function cb(a){var b=db.split("|");
a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function eb(a,b){return c.nodeName(a,"table")&&c.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function fb(a){return a.type=(null!==c.find.attr(a,"type"))+"/"+a.type,a}function gb(a){var b=cc.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ea(a,b){for(var d,e=0;null!=(d=a[e]);e++)c._data(d,
"globalEval",!b||c._data(b[e],"globalEval"))}function hb(a,b){if(1===b.nodeType&&c.hasData(a)){var d,e,f;e=c._data(a);var g=c._data(b,e),h=e.events;if(h)for(d in delete g.handle,g.events={},h){e=0;for(f=h[d].length;f>e;e++)c.event.add(b,d,h[d][e])}g.data&&(g.data=c.extend({},g.data))}}function B(a,b){var d,e,f=0,g=typeof a.getElementsByTagName!==D?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==D?a.querySelectorAll(b||"*"):n;if(!g){g=[];for(d=a.childNodes||a;null!=(e=d[f]);f++)!b||c.nodeName(e,
b)?g.push(e):c.merge(g,B(e,b))}return b===n||b&&c.nodeName(a,b)?c.merge([a],g):g}function dc(a){Fa.test(a.type)&&(a.defaultChecked=a.checked)}function ib(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),e=b,f=jb.length;f--;)if(b=jb[f]+c,b in a)return b;return e}function T(a,b){return a=b||a,"none"===c.css(a,"display")||!c.contains(a.ownerDocument,a)}function kb(a,b){for(var d,e,f,g=[],h=0,k=a.length;k>h;h++)e=a[h],e.style&&(g[h]=c._data(e,"olddisplay"),d=e.style.display,b?(g[h]||
"none"!==d||(e.style.display=""),""===e.style.display&&T(e)&&(g[h]=c._data(e,"olddisplay",lb(e.nodeName)))):g[h]||(f=T(e),(d&&"none"!==d||!f)&&c._data(e,"olddisplay",f?d:c.css(e,"display"))));for(h=0;k>h;h++)e=a[h],e.style&&(b&&"none"!==e.style.display&&""!==e.style.display||(e.style.display=b?g[h]||"":"none"));return a}function mb(a,b,c){return(a=ec.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function nb(a,b,d,e,f){b=d===(e?"border":"content")?4:"width"===b?1:0;for(var g=0;4>b;b+=2)"margin"===
d&&(g+=c.css(a,d+U[b],!0,f)),e?("content"===d&&(g-=c.css(a,"padding"+U[b],!0,f)),"margin"!==d&&(g-=c.css(a,"border"+U[b]+"Width",!0,f))):(g+=c.css(a,"padding"+U[b],!0,f),"padding"!==d&&(g+=c.css(a,"border"+U[b]+"Width",!0,f)));return g}function ob(a,b,d){var e=!0,f="width"===b?a.offsetWidth:a.offsetHeight,g=C(a),h=c.support.boxSizing&&"border-box"===c.css(a,"boxSizing",!1,g);if(0>=f||null==f){if(f=E(a,b,g),(0>f||null==f)&&(f=a.style[b]),na.test(f))return f;e=h&&(c.support.boxSizingReliable||f===a.style[b]);
f=parseFloat(f)||0}return f+nb(a,b,d||(h?"border":"content"),e,g)+"px"}function lb(a){var b=p,d=pb[a];return d||(d=qb(a,b),"none"!==d&&d||(ia=(ia||c("\x3ciframe frameborder\x3d'0' width\x3d'0' height\x3d'0'/\x3e").css("cssText","display:block !important")).appendTo(b.documentElement),b=(ia[0].contentWindow||ia[0].contentDocument).document,b.write("\x3c!doctype html\x3e\x3chtml\x3e\x3cbody\x3e"),b.close(),d=qb(a,b),ia.detach()),pb[a]=d),d}function qb(a,b){var d=c(b.createElement(a)).appendTo(b.body),
e=c.css(d[0],"display");return d.remove(),e}function Ga(a,b,d,e){var f;if(c.isArray(b))c.each(b,function(b,c){d||fc.test(a)?e(a,c):Ga(a+"["+("object"==typeof c?b:"")+"]",c,d,e)});else if(d||"object"!==c.type(b))e(a,b);else for(f in b)Ga(a+"["+f+"]",b[f],d,e)}function rb(a){return function(b,d){"string"!=typeof b&&(d=b,b="*");var e,f=0,g=b.toLowerCase().match(Q)||[];if(c.isFunction(d))for(;e=g[f++];)"+"===e[0]?(e=e.slice(1)||"*",(a[e]=a[e]||[]).unshift(d)):(a[e]=a[e]||[]).push(d)}}function sb(a,b,
d,e){function f(k){var l;return g[k]=!0,c.each(a[k]||[],function(a,c){var k=c(b,d,e);return"string"!=typeof k||h||g[k]?h?!(l=k):n:(b.dataTypes.unshift(k),f(k),!1)}),l}var g={},h=a===Ha;return f(b.dataTypes[0])||!g["*"]&&f("*")}function Ia(a,b){var d,e,f=c.ajaxSettings.flatOptions||{};for(e in b)b[e]!==n&&((f[e]?a:d||(d={}))[e]=b[e]);return d&&c.extend(!0,a,d),a}function tb(){try{return new r.XMLHttpRequest}catch(a){}}function ub(){return setTimeout(function(){X=n}),X=c.now()}function vb(a,b,c){for(var e,
f=(ja[b]||[]).concat(ja["*"]),g=0,h=f.length;h>g;g++)if(e=f[g].call(c,b,a))return e}function wb(a,b,d){var e,f=0,g=oa.length,h=c.Deferred().always(function(){delete k.elem}),k=function(){if(e)return!1;for(var b=X||ub(),b=Math.max(0,l.startTime+l.duration-b),c=1-(b/l.duration||0),d=0,f=l.tweens.length;f>d;d++)l.tweens[d].run(c);return h.notifyWith(a,[l,c,b]),1>c&&f?b:(h.resolveWith(a,[l]),!1)},l=h.promise({elem:a,props:c.extend({},b),opts:c.extend(!0,{specialEasing:{}},d),originalProperties:b,originalOptions:d,
startTime:X||ub(),duration:d.duration,tweens:[],createTween:function(b,d){var e=c.Tween(a,l.opts,b,d,l.opts.specialEasing[b]||l.opts.easing);return l.tweens.push(e),e},stop:function(b){var c=0,d=b?l.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)l.tweens[c].run(1);return b?h.resolveWith(a,[l,b]):h.rejectWith(a,[l,b]),this}});d=l.props;for(gc(d,l.opts.specialEasing);g>f;f++)if(b=oa[f].call(l,a,d,l.opts))return b;return c.map(d,vb,l),c.isFunction(l.opts.start)&&l.opts.start.call(a,l),c.fx.timer(c.extend(k,
{elem:a,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function gc(a,b){var d,e,f,g,h;for(d in a)if(e=c.camelCase(d),f=b[e],g=a[d],c.isArray(g)&&(f=g[1],g=a[d]=g[0]),d!==e&&(a[e]=g,delete a[d]),h=c.cssHooks[e],h&&"expand"in h)for(d in g=h.expand(g),delete a[e],g)d in a||(a[d]=g[d],b[d]=f);else b[e]=f}function y(a,b,c,e,f){return new y.prototype.init(a,b,c,e,f)}function Y(a,b){var c,e={height:a},f=0;for(b=b?1:0;4>f;f+=
2-b)c=U[f],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function xb(a){return c.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var pa,yb,D=typeof n,hc=r.location,p=r.document,zb=p.documentElement,ic=r.jQuery,jc=r.$,qa={},ca=[],Ab=ca.concat,Ja=ca.push,z=ca.slice,Bb=ca.indexOf,kc=qa.toString,Z=qa.hasOwnProperty,Ka="1.10.1".trim,c=function(a,b){return new c.fn.init(a,b,yb)},ra=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Q=/\S+/g,lc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
mc=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Cb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,nc=/^[\],:{}\s]*$/,oc=/(?:^|:|,)(?:\s*\[)+/g,pc=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,qc=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,rc=/^-ms-/,sc=/-([\da-z])/gi,tc=function(a,b){return b.toUpperCase()},R=function(a){(p.addEventListener||"load"===a.type||"complete"===p.readyState)&&(Db(),c.ready())},Db=function(){p.addEventListener?(p.removeEventListener("DOMContentLoaded",R,!1),r.removeEventListener("load",
R,!1)):(p.detachEvent("onreadystatechange",R),r.detachEvent("onload",R))};c.fn=c.prototype={jquery:"1.10.1",constructor:c,init:function(a,b,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="\x3c"===a.charAt(0)&&"\x3e"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:mc.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof c?b[0]:b,c.merge(this,c.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:p,!0)),Cb.test(e[1])&&c.isPlainObject(b))for(e in b)c.isFunction(this[e])?
this[e](b[e]):this.attr(e,b[e]);return this}if(f=p.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1;this[0]=f}return this.context=p,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):c.isFunction(a)?d.ready(a):(a.selector!==n&&(this.selector=a.selector,this.context=a.context),c.makeArray(a,this))},selector:"",length:0,toArray:function(){return z.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},
pushStack:function(a){a=c.merge(this.constructor(),a);return a.prevObject=this,a.context=this.context,a},each:function(a,b){return c.each(this,a,b)},ready:function(a){return c.ready.promise().done(a),this},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&b>a?[this[a]]:[])},map:function(a){return this.pushStack(c.map(this,function(b,c){return a.call(b,
c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Ja,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},k=1,l=arguments.length,q=!1;"boolean"==typeof h&&(q=h,h=arguments[1]||{},k=2);"object"==typeof h||c.isFunction(h)||(h={});for(l===k&&(h=this,--k);l>k;k++)if(null!=(f=arguments[k]))for(e in f)a=h[e],d=f[e],h!==d&&(q&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?
a:{},h[e]=c.extend(q,g,d)):d!==n&&(h[e]=d));return h};c.extend({expando:"jQuery"+("1.10.1"+Math.random()).replace(/\D/g,""),noConflict:function(a){return r.$===c&&(r.$=jc),a&&r.jQuery===c&&(r.jQuery=ic),c},isReady:!1,readyWait:1,holdReady:function(a){a?c.readyWait++:c.ready(!0)},ready:function(a){if(!0===a?!--c.readyWait:!c.isReady){if(!p.body)return setTimeout(c.ready);c.isReady=!0;!0!==a&&0<--c.readyWait||(pa.resolveWith(p,[c]),c.fn.trigger&&c(p).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===
c.type(a)},isArray:Array.isArray||function(a){return"array"===c.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?qa[kc.call(a)]||"object":typeof a},isPlainObject:function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!Z.call(a,"constructor")&&!Z.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(c.support.ownLast)for(b in a)return Z.call(a,
b);for(b in a);return b===n||Z.call(a,b)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,d){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(d=b,b=!1);b=b||p;var e=Cb.exec(a);d=!d&&[];return e?[b.createElement(e[1])]:(e=c.buildFragment([a],b,d),d&&c(d).remove(),c.merge([],e.childNodes))},parseJSON:function(a){return r.JSON&&r.JSON.parse?r.JSON.parse(a):null===a?a:"string"==typeof a&&(a=c.trim(a),a&&nc.test(a.replace(pc,
"@").replace(qc,"]").replace(oc,"")))?Function("return "+a)():(c.error("Invalid JSON: "+a),n)},parseXML:function(a){var b,d;if(!a||"string"!=typeof a)return null;try{r.DOMParser?(d=new DOMParser,b=d.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a))}catch(e){b=n}return b&&b.documentElement&&!b.getElementsByTagName("parsererror").length||c.error("Invalid XML: "+a),b},noop:function(){},globalEval:function(a){a&&c.trim(a)&&(r.execScript||function(a){r.eval.call(r,
a)})(a)},camelCase:function(a){return a.replace(rc,"ms-").replace(sc,tc)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,f=0,g=a.length,h=va(a);if(c)if(h)for(;g>f&&!(e=b.apply(a[f],c),!1===e);f++);else for(f in a){if(e=b.apply(a[f],c),!1===e)break}else if(h)for(;g>f&&!(e=b.call(a[f],f,a[f]),!1===e);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),!1===e)break;return a},trim:Ka&&!Ka.call("﻿ ")?function(a){return null==a?"":Ka.call(a)}:
function(a){return null==a?"":(a+"").replace(lc,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(va(Object(a))?c.merge(d,"string"==typeof a?[a]:a):Ja.call(d,a)),d},inArray:function(a,b,c){var e;if(b){if(Bb)return Bb.call(b,a,c);e=b.length;for(c=c?0>c?Math.max(0,e+c):c:0;e>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=b.length,e=a.length,f=0;if("number"==typeof c)for(;c>f;f++)a[e++]=b[f];else for(;b[f]!==n;)a[e++]=b[f++];return a.length=e,a},grep:function(a,b,c){var e,
f=[],g=0,h=a.length;for(c=!!c;h>g;g++)e=!!b(a[g],g),c!==e&&f.push(a[g]);return f},map:function(a,b,c){var e,f=0,g=a.length,h=[];if(va(a))for(;g>f;f++)e=b(a[f],f,c),null!=e&&(h[h.length]=e);else for(f in a)e=b(a[f],f,c),null!=e&&(h[h.length]=e);return Ab.apply([],h)},guid:1,proxy:function(a,b){var d,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),c.isFunction(a)?(d=z.call(arguments,2),e=function(){return a.apply(b||this,d.concat(z.call(arguments)))},e.guid=a.guid=a.guid||c.guid++,e):n},access:function(a,
b,d,e,f,g,h){var k=0,l=a.length,q=null==d;if("object"===c.type(d))for(k in f=!0,d)c.access(a,b,k,d[k],!0,g,h);else if(e!==n&&(f=!0,c.isFunction(e)||(h=!0),q&&(h?(b.call(a,e),b=null):(q=b,b=function(a,b,d){return q.call(c(a),d)})),b))for(;l>k;k++)b(a[k],d,h?e:e.call(a[k],k,b(a[k],d)));return f?a:q?b.call(a):l?b(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,e){var f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];c=c.apply(a,e||[]);for(f in b)a.style[f]=g[f];return c}});
c.ready.promise=function(a){if(!pa)if(pa=c.Deferred(),"complete"===p.readyState)setTimeout(c.ready);else if(p.addEventListener)p.addEventListener("DOMContentLoaded",R,!1),r.addEventListener("load",R,!1);else{p.attachEvent("onreadystatechange",R);r.attachEvent("onload",R);var b=!1;try{b=null==r.frameElement&&p.documentElement}catch(d){}b&&b.doScroll&&function f(){if(!c.isReady){try{b.doScroll("left")}catch(a){return setTimeout(f,50)}Db();c.ready()}}()}return pa.promise(a)};c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,b){qa["[object "+b+"]"]=b.toLowerCase()});yb=c(p);(function(a,b){function d(a,b,c,d){var e,f,g,h,k;if((b?b.ownerDocument||b:L)!==F&&I(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(x&&!d){if(e=qa.exec(a))if(g=e[1])if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&K(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return ea.apply(c,b.getElementsByTagName(a)),
c;if((g=e[3])&&v.getElementsByClassName&&b.getElementsByClassName)return ea.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!M||!M.test(a))){if(f=e=A,g=b,k=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){h=r(a);(e=b.getAttribute("id"))?f=e.replace(ua,"\\$\x26"):b.setAttribute("id",f);f="[id\x3d'"+f+"'] ";for(g=h.length;g--;)h[g]=f+xa(h[g]);g=ba.test(a)&&b.parentNode||b;k=h.join(",")}if(k)try{return ea.apply(c,g.querySelectorAll(k)),c}catch(l){}finally{e||b.removeAttribute("id")}}}var m;a:{a=
a.replace(T,"$1");var q,n;f=r(a);if(!d&&1===f.length){if(m=f[0]=f[0].slice(0),2<m.length&&"ID"===(q=m[0]).type&&v.getById&&9===b.nodeType&&x&&w.relative[m[1].type]){if(b=(w.find.ID(q.matches[0].replace(fa,ga),b)||[])[0],!b){m=c;break a}a=a.slice(m.shift().value.length)}for(h=Y.needsContext.test(a)?0:m.length;h--&&!(q=m[h],w.relative[e=q.type]);)if((n=w.find[e])&&(d=n(q.matches[0].replace(fa,ga),ba.test(m[0].type)&&b.parentNode||b))){if(m.splice(h,1),a=d.length&&xa(m),!a){m=(ea.apply(c,d),c);break a}break}}m=
(Ma(a,f)(d,b,!x,c,ba.test(a)),c)}return m}function e(a){return pa.test(a+"")}function f(){function a(c,d){return b.push(c+=" ")>w.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function g(a){return a[A]=!0,a}function h(a){var b=F.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function k(a,b,c){a=a.split("|");var d,e=a.length;for(c=c?null:b;e--;)(d=w.attrHandle[a[e]])&&d!==b||(w.attrHandle[a[e]]=c)}function l(a,b){var c=a.getAttributeNode(b);
return c&&c.specified?c.value:!0===a[b]?b.toLowerCase():null}function q(a,b){return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}function n(a){return"input"===a.nodeName.toLowerCase()?a.defaultValue:b}function m(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function J(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function t(a){return function(b){var c=
b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function p(a){return g(function(b){return b=+b,g(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function r(a,b){var c,e,f,g,h,k,m;if(h=S[a+" "])return b?0:h.slice(0);h=a;k=[];for(m=w.preFilter;h;){(!c||(e=ia.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),k.push(f=[]));c=!1;(e=ja.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(T," ")}),h=h.slice(c.length));for(g in w.filter)!(e=
Y[g].exec(h))||m[g]&&!(e=m[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?d.error(a):S(a,k).slice(0)}function xa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function B(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=D++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,k,La,m=P+" "+f;if(g)for(;b=b[d];){if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||
e)if(La=b[A]||(b[A]={}),(k=La[d])&&k[0]===m){if(!0===(h=k[1])||h===ya)return!0===h}else if(k=La[d]=[m],k[1]=a(b,c,g)||ya,!0===k[1])return!0}}function y(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function O(a,b,c,d,e){for(var f,g=[],h=0,k=a.length,m=null!=b;k>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),m&&b.push(h));return g}function H(a,b,c,e,f,h){return e&&!e[A]&&(e=H(e)),f&&!f[A]&&(f=H(f,h)),g(function(g,h,k,m){var l,q,n=[],s=[],J=h.length,
t;if(!(t=g)){t=b||"*";for(var p=k.nodeType?[k]:k,r=[],v=0,wa=p.length;wa>v;v++)d(t,p[v],r);t=r}t=!a||!g&&b?t:O(t,n,a,k,m);p=c?f||(g?a:J||e)?[]:h:t;if(c&&c(t,p,k,m),e){l=O(p,s);e(l,[],k,m);for(k=l.length;k--;)(q=l[k])&&(p[s[k]]=!(t[s[k]]=q))}if(g){if(f||a){if(f){l=[];for(k=p.length;k--;)(q=p[k])&&l.push(t[k]=q);f(null,p=[],l,m)}for(k=p.length;k--;)(q=p[k])&&-1<(l=f?ka.call(g,q):n[k])&&(g[l]=!(h[l]=q))}}else p=O(p===h?p.splice(J,p.length):p),f?f(null,h,p,m):ea.apply(h,p)})}function u(a){var b,c,d,e=
a.length,f=w.relative[a[0].type];c=f||w.relative[" "];for(var g=f?1:0,h=B(function(a){return a===b},c,!0),k=B(function(a){return-1<ka.call(b,a)},c,!0),m=[function(a,c,d){return!f&&(d||c!==za)||((b=c).nodeType?h(a,c,d):k(a,c,d))}];e>g;g++)if(c=w.relative[a[g].type])m=[B(y(m),c)];else{if(c=w.filter[a[g].type].apply(null,a[g].matches),c[A]){for(d=++g;e>d&&!w.relative[a[d].type];d++);return H(1<g&&y(m),1<g&&xa(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(T,"$1"),c,d>g&&u(a.slice(g,
d)),e>d&&u(a=a.slice(d)),e>d&&xa(a))}m.push(c)}return y(m)}function Q(a,b){var c=0,e=0<b.length,f=0<a.length,h=function(g,h,k,m,l){var q,n,s=[],J=0,p="0",t=g&&[],v=null!=l,r=za,u=g||f&&w.find.TAG("*",l&&h.parentNode||h),wa=P+=null==r?1:Math.random()||0.1;for(v&&(za=h!==F&&h,ya=c);null!=(l=u[p]);p++){if(f&&l){for(q=0;n=a[q++];)if(n(l,h,k)){m.push(l);break}v&&(P=wa,ya=++c)}e&&((l=!n&&l)&&J--,g&&t.push(l))}if(J+=p,e&&p!==J){for(q=0;n=b[q++];)n(t,s,h,k);if(g){if(0<J)for(;p--;)t[p]||s[p]||(s[p]=ca.call(m));
s=O(s)}ea.apply(m,s);v&&!g&&0<s.length&&1<J+b.length&&d.uniqueSort(m)}return v&&(P=wa,za=r),t};return e?g(h):h}function Eb(){}var sa,v,ya,w,Aa,Fb,Ma,za,la,I,F,G,x,M,N,Ba,K,A="sizzle"+-new Date,L=a.document,P=0,D=0,R=f(),S=f(),U=f(),C=!1,E=function(){return 0},z=typeof b,V=-2147483648,aa={}.hasOwnProperty,ha=[],ca=ha.pop,da=ha.push,ea=ha.push,X=ha.slice,ka=ha.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},Z="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),
$="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?\x3d)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Z+")|)|)[\\x20\\t\\r\\n\\f]*\\]",W=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",T=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ia=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ja=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,
ba=/[\x20\t\r\n\f]*[+~]/,ma=RegExp("\x3d[\\x20\\t\\r\\n\\f]*([^\\]'\"]*)[\\x20\\t\\r\\n\\f]*\\]","g"),na=RegExp(W),oa=RegExp("^"+Z+"$"),Y={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+W),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[\x3e+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?\x3d[^-]|$)","i")},pa=/^[^{]+\{\s*\[native \w/,qa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ra=/^(?:input|select|textarea|button)$/i,ta=/^h\d$/i,ua=/'|\\/g,fa=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)",
"ig"),ga=function(a,b,c){a="0x"+b-65536;return a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(55296|a>>10,56320|1023&a)};try{ea.apply(ha=X.call(L.childNodes),L.childNodes),ha[L.childNodes.length].nodeType}catch(va){ea={apply:ha.length?function(a,b){da.apply(a,X.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}Fb=d.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};v=d.support={};I=d.setDocument=function(a){var c=
a?a.ownerDocument||a:L;a=c.parentWindow;return c!==F&&9===c.nodeType&&c.documentElement?(F=c,G=c.documentElement,x=!Fb(c),a&&a.frameElement&&a.attachEvent("onbeforeunload",function(){I()}),v.attributes=h(function(a){return a.innerHTML="\x3ca href\x3d'#'\x3e\x3c/a\x3e",k("type|href|height|width",q,"#"===a.firstChild.getAttribute("href")),k("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",l,null==a.getAttribute("disabled")),
a.className="i",!a.getAttribute("className")}),v.input=h(function(a){return a.innerHTML="\x3cinput\x3e",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}),k("value",n,v.attributes&&v.input),v.getElementsByTagName=h(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=h(function(a){return a.innerHTML="\x3cdiv class\x3d'a'\x3e\x3c/div\x3e\x3cdiv class\x3d'a i'\x3e\x3c/div\x3e",a.firstChild.className="i",2===
a.getElementsByClassName("i").length}),v.getById=h(function(a){return G.appendChild(a).id=A,!c.getElementsByName||!c.getElementsByName(A).length}),v.getById?(w.find.ID=function(a,b){if(typeof b.getElementById!==z&&x){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(fa,ga);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(fa,ga);return function(a){return(a=typeof a.getAttributeNode!==z&&a.getAttributeNode("id"))&&
a.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,c){return typeof c.getElementsByTagName!==z?c.getElementsByTagName(a):b}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,c){return typeof c.getElementsByClassName!==z&&x?c.getElementsByClassName(a):b},N=[],M=[],(v.qsa=e(c.querySelectorAll))&&(h(function(a){a.innerHTML="\x3cselect\x3e\x3coption selected\x3d''\x3e\x3c/option\x3e\x3c/select\x3e";
a.querySelectorAll("[selected]").length||M.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");a.querySelectorAll(":checked").length||M.push(":checked")}),h(function(a){var b=c.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("t","");a.querySelectorAll("[t^\x3d'']").length&&M.push("[*^$]\x3d[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll(":enabled").length||
M.push(":enabled",":disabled");a.querySelectorAll("*,:x");M.push(",.*:")})),(v.matchesSelector=e(Ba=G.webkitMatchesSelector||G.mozMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&h(function(a){v.disconnectedMatch=Ba.call(a,"div");Ba.call(a,"[s!\x3d'']:x");N.push("!\x3d",W)}),M=M.length&&RegExp(M.join("|")),N=N.length&&RegExp(N.join("|")),K=e(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||
!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},v.sortDetached=h(function(a){return 1&a.compareDocumentPosition(c.createElement("div"))}),E=G.compareDocumentPosition?function(a,b){if(a===b)return C=!0,0;var d=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);return d?1&d||!v.sortDetached&&b.compareDocumentPosition(a)===d?a===c||K(L,a)?-1:b===c||K(L,b)?1:la?
ka.call(la,a)-ka.call(la,b):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var d,e=0;d=a.parentNode;var f=b.parentNode,g=[a],h=[b];if(a===b)return C=!0,0;if(!d||!f)return a===c?-1:b===c?1:d?-1:f?1:la?ka.call(la,a)-ka.call(la,b):0;if(d===f)return m(a,b);for(d=a;d=d.parentNode;)g.unshift(d);for(d=b;d=d.parentNode;)h.unshift(d);for(;g[e]===h[e];)e++;return e?m(g[e],h[e]):g[e]===L?-1:h[e]===L?1:0},c):F};d.matches=function(a,b){return d(a,null,null,b)};d.matchesSelector=function(a,b){if((a.ownerDocument||
a)!==F&&I(a),b=b.replace(ma,"\x3d'$1']"),!(!v.matchesSelector||!x||N&&N.test(b)||M&&M.test(b)))try{var c=Ba.call(a,b);if(c||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(e){}return 0<d(b,F,null,[a]).length};d.contains=function(a,b){return(a.ownerDocument||a)!==F&&I(a),K(a,b)};d.attr=function(a,c){(a.ownerDocument||a)!==F&&I(a);var d=w.attrHandle[c.toLowerCase()],d=d&&aa.call(w.attrHandle,c.toLowerCase())?d(a,c,!x):b;return d===b?v.attributes||!x?a.getAttribute(c):(d=a.getAttributeNode(c))&&
d.specified?d.value:null:d};d.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};d.uniqueSort=function(a){var b,c=[],d=0,e=0;if(C=!v.detectDuplicates,la=!v.sortStable&&a.slice(0),a.sort(E),C){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a};Aa=d.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=Aa(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=
a[d];d++)c+=Aa(b);return c};w=d.selectors={cacheLength:50,createPseudo:g,match:Y,attrHandle:{},find:{},relative:{"\x3e":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(fa,ga),a[3]=(a[4]||a[5]||"").replace(fa,ga),"~\x3d"===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||d.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||
1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&d.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return Y.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&na.test(d)&&(c=r(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(fa,ga).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];
return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==z&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(e){e=d.attr(e,a);return null==e?"!\x3d"===b:b?(e+="","\x3d"===b?e===c:"!\x3d"===b?e!==c:"^\x3d"===b?c&&0===e.indexOf(c):"*\x3d"===b?c&&-1<e.indexOf(c):"$\x3d"===b?c&&e.slice(-c.length)===c:"~\x3d"===b?-1<(" "+e+" ").indexOf(c):"|\x3d"===b?e===c||e.slice(0,
c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,k){var m,l,q,n,s;c=f!==g?"nextSibling":"previousSibling";var J=b.parentNode,p=h&&b.nodeName.toLowerCase();k=!k&&!h;if(J){if(f){for(;c;){for(l=b;l=l[c];)if(h?l.nodeName.toLowerCase()===p:1===l.nodeType)return!1;s=c="only"===a&&!s&&"nextSibling"}return!0}if(s=[g?J.firstChild:J.lastChild],g&&k){k=J[A]||(J[A]={});m=
k[a]||[];n=m[0]===P&&m[1];q=m[0]===P&&m[2];for(l=n&&J.childNodes[n];l=++n&&l&&l[c]||(q=n=0)||s.pop();)if(1===l.nodeType&&++q&&l===b){k[a]=[P,n,q];break}}else if(k&&(m=(b[A]||(b[A]={}))[a])&&m[0]===P)q=m[1];else for(;(l=++n&&l&&l[c]||(q=n=0)||s.pop())&&(!(h?l.nodeName.toLowerCase()===p:1===l.nodeType)||!++q||!(k&&((l[A]||(l[A]={}))[a]=[P,q]),l===b)););return q-=e,q===d||0===q%d&&0<=q/d}}},PSEUDO:function(a,b){var c,e=w.pseudos[a]||w.setFilters[a.toLowerCase()]||d.error("unsupported pseudo: "+a);return e[A]?
e(b):1<e.length?(c=[a,a,"",b],w.setFilters.hasOwnProperty(a.toLowerCase())?g(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=ka.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:g(function(a){var b=[],c=[],d=Ma(a.replace(T,"$1"));return d[A]?g(function(a,b,c,e){var f;c=d(a,null,e,[]);for(e=a.length;e--;)(f=c[e])&&(a[e]=!(b[e]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:g(function(a){return function(b){return 0<d(a,b).length}}),contains:g(function(a){return function(b){return-1<
(b.textContent||b.innerText||Aa(b)).indexOf(a)}}),lang:g(function(a){return oa.test(a||"")||d.error("unsupported lang: "+a),a=a.replace(fa,ga).toLowerCase(),function(b){var c;do if(c=x?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&
(!F.hasFocus||F.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},
header:function(a){return ta.test(a.nodeName)},input:function(a){return ra.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:p(function(){return[0]}),last:p(function(a,b){return[b-1]}),eq:p(function(a,b,c){return[0>c?c+b:c]}),even:p(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),
odd:p(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:p(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:p(function(a,b,c){for(c=0>c?c+b:c;b>++c;)a.push(c);return a})}};for(sa in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[sa]=J(sa);for(sa in{submit:!0,reset:!0})w.pseudos[sa]=t(sa);Ma=d.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){b||(b=r(a));for(c=b.length;c--;)f=u(b[c]),f[A]?d.push(f):e.push(f);f=U(a,Q(e,d))}return f};w.pseudos.nth=w.pseudos.eq;
Eb.prototype=w.filters=w.pseudos;w.setFilters=new Eb;v.sortStable=A.split("").sort(E).join("")===A;I();[0,0].sort(E);v.detectDuplicates=C;c.find=d;c.expr=d.selectors;c.expr[":"]=c.expr.pseudos;c.unique=d.uniqueSort;c.text=d.getText;c.isXMLDoc=d.isXML;c.contains=d.contains})(r);var Xa={};c.Callbacks=function(a){a="string"==typeof a?Xa[a]||Zb(a):c.extend({},a);var b,d,e,f,g,h,k=[],l=!a.once&&[],q=function(c){d=a.memory&&c;e=!0;g=h||0;h=0;f=k.length;for(b=!0;k&&f>g;g++)if(!1===k[g].apply(c[0],c[1])&&
a.stopOnFalse){d=!1;break}b=!1;k&&(l?l.length&&q(l.shift()):d?k=[]:s.disable())},s={add:function(){if(k){var e=k.length;(function t(b){c.each(b,function(b,d){var e=c.type(d);"function"===e?a.unique&&s.has(d)||k.push(d):d&&d.length&&"string"!==e&&t(d)})})(arguments);b?f=k.length:d&&(h=e,q(d))}return this},remove:function(){return k&&c.each(arguments,function(a,d){for(var e;-1<(e=c.inArray(d,k,e));)k.splice(e,1),b&&(f>=e&&f--,g>=e&&g--)}),this},has:function(a){return a?-1<c.inArray(a,k):!(!k||!k.length)},
empty:function(){return k=[],f=0,this},disable:function(){return k=l=d=n,this},disabled:function(){return!k},lock:function(){return l=n,d||s.disable(),this},locked:function(){return!l},fireWith:function(a,c){return c=c||[],c=[a,c.slice?c.slice():c],!k||e&&!l||(b?l.push(c):q(c)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!e}};return s};c.extend({Deferred:function(a){var b=[["resolve","done",c.Callbacks("once memory"),"resolved"],["reject","fail",c.Callbacks("once memory"),
"rejected"],["notify","progress",c.Callbacks("memory")]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},then:function(){var a=arguments;return c.Deferred(function(d){c.each(b,function(b,l){var q=l[0],n=c.isFunction(a[b])&&a[b];f[l[1]](function(){var a=n&&n.apply(this,arguments);a&&c.isFunction(a.promise)?a.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[q+"With"](this===e?d.promise():this,n?[a]:arguments)})});a=null}).promise()},
promise:function(a){return null!=a?c.extend(a,e):e}},f={};return e.pipe=e.then,c.each(b,function(a,c){var k=c[2],l=c[3];e[c[1]]=k.add;l&&k.add(function(){d=l},b[1^a][2].disable,b[2][2].lock);f[c[0]]=function(){return f[c[0]+"With"](this===f?e:this,arguments),this};f[c[0]+"With"]=k.fireWith}),e.promise(f),a&&a.call(f,f),f},when:function(a){var b=0,d=z.call(arguments),e=d.length,f=1!==e||a&&c.isFunction(a.promise)?e:0,g=1===f?a:c.Deferred(),h=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?
z.call(arguments):d;c===k?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},k,l,q;if(1<e){k=Array(e);l=Array(e);for(q=Array(e);e>b;b++)d[b]&&c.isFunction(d[b].promise)?d[b].promise().done(h(b,q,d)).fail(g.reject).progress(h(b,l,k)):--f}return f||g.resolveWith(q,d),g.promise()}});c.support=function(a){var b,d,e,f,g,h,k=p.createElement("div");if(k.setAttribute("className","t"),k.innerHTML="  \x3clink/\x3e\x3ctable\x3e\x3c/table\x3e\x3ca href\x3d'/a'\x3ea\x3c/a\x3e\x3cinput type\x3d'checkbox'/\x3e",b=k.getElementsByTagName("*")||
[],d=k.getElementsByTagName("a")[0],!d||!d.style||!b.length)return a;e=p.createElement("select");f=e.appendChild(p.createElement("option"));b=k.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";a.getSetAttribute="t"!==k.className;a.leadingWhitespace=3===k.firstChild.nodeType;a.tbody=!k.getElementsByTagName("tbody").length;a.htmlSerialize=!!k.getElementsByTagName("link").length;a.style=/top/.test(d.getAttribute("style"));a.hrefNormalized="/a"===d.getAttribute("href");
a.opacity=/^0.5/.test(d.style.opacity);a.cssFloat=!!d.style.cssFloat;a.checkOn=!!b.value;a.optSelected=f.selected;a.enctype=!!p.createElement("form").enctype;a.html5Clone="\x3c:nav\x3e\x3c/:nav\x3e"!==p.createElement("nav").cloneNode(!0).outerHTML;a.inlineBlockNeedsLayout=!1;a.shrinkWrapBlocks=!1;a.pixelPosition=!1;a.deleteExpando=!0;a.noCloneEvent=!0;a.reliableMarginRight=!0;a.boxSizingReliable=!0;b.checked=!0;a.noCloneChecked=b.cloneNode(!0).checked;e.disabled=!0;a.optDisabled=!f.disabled;try{delete k.test}catch(l){a.deleteExpando=
!1}b=p.createElement("input");b.setAttribute("value","");a.input=""===b.getAttribute("value");b.value="t";b.setAttribute("type","radio");a.radioValue="t"===b.value;b.setAttribute("checked","t");b.setAttribute("name","t");d=p.createDocumentFragment();d.appendChild(b);a.appendChecked=b.checked;a.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;k.attachEvent&&(k.attachEvent("onclick",function(){a.noCloneEvent=!1}),k.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})k.setAttribute(d=
"on"+h,"t"),a[h+"Bubbles"]=d in r||!1===k.attributes[d].expando;k.style.backgroundClip="content-box";k.cloneNode(!0).style.backgroundClip="";a.clearCloneStyle="content-box"===k.style.backgroundClip;for(h in c(a))break;return a.ownLast="0"!==h,c(function(){var b,d,e,f=p.getElementsByTagName("body")[0];f&&(b=p.createElement("div"),b.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",f.appendChild(b).appendChild(k),k.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3et\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
e=k.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",g=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",a.reliableHiddenOffsets=g&&0===e[0].offsetHeight,k.innerHTML="",k.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",c.swap(f,null!=f.style.zoom?{zoom:1}:{},function(){a.boxSizing=4===k.offsetWidth}),r.getComputedStyle&&
(a.pixelPosition="1%"!==(r.getComputedStyle(k,null)||{}).top,a.boxSizingReliable="4px"===(r.getComputedStyle(k,null)||{width:"4px"}).width,d=k.appendChild(p.createElement("div")),d.style.cssText=k.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",d.style.marginRight=d.style.width="0",k.style.width="1px",a.reliableMarginRight=!parseFloat((r.getComputedStyle(d,null)||{}).marginRight)),typeof k.style.zoom!==D&&
(k.innerHTML="",k.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===k.offsetWidth,k.style.display="block",k.innerHTML="\x3cdiv\x3e\x3c/div\x3e",k.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==k.offsetWidth,a.inlineBlockNeedsLayout&&(f.style.zoom=1)),f.removeChild(b),b=k=e=d=null)}),b=e=d=f=d=b=null,a}({});var ac=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
$b=/([A-Z])/g;c.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?c.cache[a[c.expando]]:a[c.expando],!!a&&!Ca(a)},data:function(a,b,c){return Ya(a,b,c)},removeData:function(a,b){return Za(a,b)},_data:function(a,b,c){return Ya(a,b,c,!0)},_removeData:function(a,b){return Za(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&c.noData[a.nodeName.toLowerCase()];return!b||
!0!==b&&a.getAttribute("classid")===b}});c.fn.extend({data:function(a,b){var d,e,f=null,g=0,h=this[0];if(a===n){if(this.length&&(f=c.data(h),1===h.nodeType&&!c._data(h,"parsedAttrs"))){for(d=h.attributes;d.length>g;g++)e=d[g].name,0===e.indexOf("data-")&&(e=c.camelCase(e.slice(5)),$a(h,e,f[e]));c._data(h,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){c.data(this,a)}):1<arguments.length?this.each(function(){c.data(this,a,b)}):h?$a(h,a,c.data(h,a)):null},removeData:function(a){return this.each(function(){c.removeData(this,
a)})}});c.extend({queue:function(a,b,d){var e;return a?(b=(b||"fx")+"queue",e=c._data(a,b),d&&(!e||c.isArray(d)?e=c._data(a,b,c.makeArray(d)):e.push(d)),e||[]):n},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),e=d.length,f=d.shift(),g=c._queueHooks(a,b),h=function(){c.dequeue(a,b)};"inprogress"===f&&(f=d.shift(),e--);f&&("fx"===b&&d.unshift("inprogress"),delete g.stop,f.call(a,h,g));!e&&g&&g.empty.fire()},_queueHooks:function(a,b){var d=b+"queueHooks";return c._data(a,d)||c._data(a,d,{empty:c.Callbacks("once memory").add(function(){c._removeData(a,
b+"queue");c._removeData(a,d)})})}});c.fn.extend({queue:function(a,b){var d=2;return"string"!=typeof a&&(b=a,a="fx",d--),d>arguments.length?c.queue(this[0],a):b===n?this:this.each(function(){var d=c.queue(this,a,b);c._queueHooks(this,a);"fx"===a&&"inprogress"!==d[0]&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){return a=c.fx?c.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var f=setTimeout(b,a);c.stop=function(){clearTimeout(f)}})},
clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=c.Deferred(),g=this,h=this.length,k=function(){--e||f.resolveWith(g,[g])};"string"!=typeof a&&(b=a,a=n);for(a=a||"fx";h--;)(d=c._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(k));return k(),f.promise(b)}});var $,Gb,Na=/[\t\r\n\f]/g,uc=/\r/g,vc=/^(?:input|select|textarea|button|object)$/i,wc=/^(?:a|area)$/i,Oa=/^(?:checked|selected)$/i,V=c.support.getSetAttribute,ta=c.support.input;c.fn.extend({attr:function(a,
b){return c.access(this,c.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){c.removeAttr(this,a)})},prop:function(a,b){return c.access(this,c.prop,a,b,1<arguments.length)},removeProp:function(a){return a=c.propFix[a]||a,this.each(function(){try{this[a]=n,delete this[a]}catch(b){}})},addClass:function(a){var b,d,e,f,g,h=0,k=this.length;b="string"==typeof a&&a;if(c.isFunction(a))return this.each(function(b){c(this).addClass(a.call(this,b,this.className))});if(b)for(b=
(a||"").match(Q)||[];k>h;h++)if(d=this[h],e=1===d.nodeType&&(d.className?(" "+d.className+" ").replace(Na," "):" ")){for(g=0;f=b[g++];)0>e.indexOf(" "+f+" ")&&(e+=f+" ");d.className=c.trim(e)}return this},removeClass:function(a){var b,d,e,f,g,h=0,k=this.length;b=0===arguments.length||"string"==typeof a&&a;if(c.isFunction(a))return this.each(function(b){c(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(Q)||[];k>h;h++)if(d=this[h],e=1===d.nodeType&&(d.className?(" "+d.className+
" ").replace(Na," "):"")){for(g=0;f=b[g++];)for(;0<=e.indexOf(" "+f+" ");)e=e.replace(" "+f+" "," ");d.className=a?c.trim(e):""}return this},toggleClass:function(a,b){var d=typeof a,e="boolean"==typeof b;return c.isFunction(a)?this.each(function(d){c(this).toggleClass(a.call(this,d,this.className,b),b)}):this.each(function(){if("string"===d)for(var f,g=0,h=c(this),k=b,l=a.match(Q)||[];f=l[g++];)k=e?k:!h.hasClass(f),h[k?"addClass":"removeClass"](f);else(d===D||"boolean"===d)&&(this.className&&c._data(this,
"__className__",this.className),this.className=this.className||!1===a?"":c._data(this,"__className__")||"")})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Na," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];if(arguments.length)return e=c.isFunction(a),this.each(function(b){var f;1===this.nodeType&&(f=e?a.call(this,b,c(this).val()):a,null==f?f="":"number"==typeof f?f+="":c.isArray(f)&&(f=c.map(f,
function(a){return null==a?"":a+""})),d=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==n||(this.value=f))});if(f)return d=c.valHooks[f.type]||c.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(b=d.get(f,"value"))!==n?b:(b=f.value,"string"==typeof b?b.replace(uc,""):null==b?"":b)}});c.extend({valHooks:{option:{get:function(a){var b=c.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,d=a.options,e=a.selectedIndex,
f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,k=0>e?h:f?e:0;h>k;k++)if(b=d[k],!(!b.selected&&k!==e||(c.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&c.nodeName(b.parentNode,"optgroup"))){if(a=c(b).val(),f)return a;g.push(a)}return g},set:function(a,b){for(var d,e,f=a.options,g=c.makeArray(b),h=f.length;h--;)e=f[h],(e.selected=0<=c.inArray(c(e).val(),g))&&(d=!0);return d||(a.selectedIndex=-1),g}}},attr:function(a,b,d){var e,f,g=a.nodeType;if(a&&
3!==g&&8!==g&&2!==g)return typeof a.getAttribute===D?c.prop(a,b,d):(1===g&&c.isXMLDoc(a)||(b=b.toLowerCase(),e=c.attrHooks[b]||(c.expr.match.bool.test(b)?Gb:$)),d===n?e&&"get"in e&&null!==(f=e.get(a,b))?f:(f=c.find.attr(a,b),null==f?n:f):null!==d?e&&"set"in e&&(f=e.set(a,d,b))!==n?f:(a.setAttribute(b,d+""),d):(c.removeAttr(a,b),n))},removeAttr:function(a,b){var d,e,f=0,g=b&&b.match(Q);if(g&&1===a.nodeType)for(;d=g[f++];)e=c.propFix[d]||d,c.expr.match.bool.test(d)?ta&&V||!Oa.test(d)?a[e]=!1:a[c.camelCase("default-"+
d)]=a[e]=!1:c.attr(a,d,""),a.removeAttribute(V?d:e)},attrHooks:{type:{set:function(a,b){if(!c.support.radioValue&&"radio"===b&&c.nodeName(a,"input")){var d=a.value;return a.setAttribute("type",b),d&&(a.value=d),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!c.isXMLDoc(a),g&&(b=c.propFix[b]||b,f=c.propHooks[b]),d!==n?f&&"set"in f&&(e=f.set(a,d,b))!==n?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]},propHooks:{tabIndex:{get:function(a){var b=
c.find.attr(a,"tabindex");return b?parseInt(b,10):vc.test(a.nodeName)||wc.test(a.nodeName)&&a.href?0:-1}}}});Gb={set:function(a,b,d){return!1===b?c.removeAttr(a,d):ta&&V||!Oa.test(d)?a.setAttribute(!V&&c.propFix[d]||d,d):a[c.camelCase("default-"+d)]=a[d]=!0,d}};c.each(c.expr.match.bool.source.match(/\w+/g),function(a,b){var d=c.expr.attrHandle[b]||c.find.attr;c.expr.attrHandle[b]=ta&&V||!Oa.test(b)?function(a,b,g){var h=c.expr.attrHandle[b];a=g?n:(c.expr.attrHandle[b]=n)!=d(a,b,g)?b.toLowerCase():
null;return c.expr.attrHandle[b]=h,a}:function(a,b,d){return d?n:a[c.camelCase("default-"+b)]?b.toLowerCase():null}});ta&&V||(c.attrHooks.value={set:function(a,b,d){return c.nodeName(a,"input")?(a.defaultValue=b,n):$&&$.set(a,b,d)}});V||($={set:function(a,b,c){var e=a.getAttributeNode(c);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(c)),e.value=b+="","value"===c||b===a.getAttribute(c)?b:n}},c.expr.attrHandle.id=c.expr.attrHandle.name=c.expr.attrHandle.coords=function(a,b,c){var e;
return c?n:(e=a.getAttributeNode(b))&&""!==e.value?e.value:null},c.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:n},set:$.set},c.attrHooks.contenteditable={set:function(a,b,c){$.set(a,""===b?!1:b,c)}},c.each(["width","height"],function(a,b){c.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):n}}}));c.support.hrefNormalized||c.each(["href","src"],function(a,b){c.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}});c.support.style||
(c.attrHooks.style={get:function(a){return a.style.cssText||n},set:function(a,b){return a.style.cssText=b+""}});c.support.optSelected||(c.propHooks.selected={get:function(a){a=a.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}});c.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){c.propFix[this.toLowerCase()]=this});c.support.enctype||(c.propFix.enctype="encoding");c.each(["radio",
"checkbox"],function(){c.valHooks[this]={set:function(a,b){return c.isArray(b)?a.checked=0<=c.inArray(c(a).val(),b):n}};c.support.checkOn||(c.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var Pa=/^(?:input|select|textarea)$/i,xc=/^key/,yc=/^(?:mouse|contextmenu)|click/,Hb=/^(?:focusinfocus|focusoutblur)$/,Ib=/^([^.]*)(?:\.(.+)|)$/;c.event={global:{},add:function(a,b,d,e,f){var g,h,k,l,q,s,m,p,t,r;if(k=c._data(a)){d.handler&&(l=d,d=l.handler,f=l.selector);d.guid||
(d.guid=c.guid++);(h=k.events)||(h=k.events={});(s=k.handle)||(s=k.handle=function(a){return typeof c===D||a&&c.event.triggered===a.type?n:c.event.dispatch.apply(s.elem,arguments)},s.elem=a);b=(b||"").match(Q)||[""];for(k=b.length;k--;)g=Ib.exec(b[k])||[],t=r=g[1],g=(g[2]||"").split(".").sort(),t&&(q=c.event.special[t]||{},t=(f?q.delegateType:q.bindType)||t,q=c.event.special[t]||{},m=c.extend({type:t,origType:r,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&c.expr.match.needsContext.test(f),
namespace:g.join(".")},l),(p=h[t])||(p=h[t]=[],p.delegateCount=0,q.setup&&!1!==q.setup.call(a,e,g,s)||(a.addEventListener?a.addEventListener(t,s,!1):a.attachEvent&&a.attachEvent("on"+t,s))),q.add&&(q.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,m):p.push(m),c.event.global[t]=!0);a=null}},remove:function(a,b,d,e,f){var g,h,k,l,q,n,m,p,t,r,B,y=c.hasData(a)&&c._data(a);if(y&&(n=y.events)){b=(b||"").match(Q)||[""];for(q=b.length;q--;)if(k=Ib.exec(b[q])||[],t=B=
k[1],r=(k[2]||"").split(".").sort(),t){m=c.event.special[t]||{};t=(e?m.delegateType:m.bindType)||t;p=n[t]||[];k=k[2]&&RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)");for(l=g=p.length;g--;)h=p[g],!f&&B!==h.origType||d&&d.guid!==h.guid||k&&!k.test(h.namespace)||e&&e!==h.selector&&("**"!==e||!h.selector)||(p.splice(g,1),h.selector&&p.delegateCount--,m.remove&&m.remove.call(a,h));l&&!p.length&&(m.teardown&&!1!==m.teardown.call(a,r,y.handle)||c.removeEvent(a,t,y.handle),delete n[t])}else for(t in n)c.event.remove(a,
t+b[q],d,e,!0);c.isEmptyObject(n)&&(delete y.handle,c._removeData(a,"events"))}},trigger:function(a,b,d,e){var f,g,h,k,l,q,s=[d||p],m=Z.call(a,"type")?a.type:a;q=Z.call(a,"namespace")?a.namespace.split("."):[];if(h=f=d=d||p,3!==d.nodeType&&8!==d.nodeType&&!Hb.test(m+c.event.triggered)&&(0<=m.indexOf(".")&&(q=m.split("."),m=q.shift(),q.sort()),g=0>m.indexOf(":")&&"on"+m,a=a[c.expando]?a:new c.Event(m,"object"==typeof a&&a),a.isTrigger=e?2:3,a.namespace=q.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+
q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=n,a.target||(a.target=d),b=null==b?[a]:c.makeArray(b,[a]),l=c.event.special[m]||{},e||!l.trigger||!1!==l.trigger.apply(d,b))){if(!e&&!l.noBubble&&!c.isWindow(d)){k=l.delegateType||m;for(Hb.test(k+m)||(h=h.parentNode);h;h=h.parentNode)s.push(h),f=h;f===(d.ownerDocument||p)&&s.push(f.defaultView||f.parentWindow||r)}for(q=0;(h=s[q++])&&!a.isPropagationStopped();)a.type=1<q?k:l.bindType||m,(f=(c._data(h,"events")||{})[a.type]&&c._data(h,"handle"))&&f.apply(h,
b),(f=g&&h[g])&&c.acceptData(h)&&f.apply&&!1===f.apply(h,b)&&a.preventDefault();if(a.type=m,!e&&!a.isDefaultPrevented()&&(!l._default||!1===l._default.apply(s.pop(),b))&&c.acceptData(d)&&g&&d[m]&&!c.isWindow(d)){(f=d[g])&&(d[g]=null);c.event.triggered=m;try{d[m]()}catch(J){}c.event.triggered=n;f&&(d[g]=f)}return a.result}},dispatch:function(a){a=c.event.fix(a);var b,d,e,f,g,h=[],k=z.call(arguments);b=(c._data(this,"events")||{})[a.type]||[];var l=c.event.special[a.type]||{};if(k[0]=a,a.delegateTarget=
this,!l.preDispatch||!1!==l.preDispatch.call(this,a)){h=c.event.handlers.call(this,a,b);for(b=0;(f=h[b++])&&!a.isPropagationStopped();){a.currentTarget=f.elem;for(g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((c.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,k),d!==n&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,a),a.result}},
handlers:function(a,b){var d,e,f,g,h=[],k=b.delegateCount,l=a.target;if(k&&l.nodeType&&(!a.button||"click"!==a.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==a.type)){f=[];for(g=0;k>g;g++)e=b[g],d=e.selector+" ",f[d]===n&&(f[d]=e.needsContext?0<=c(d,this).index(l):c.find(d,this,null,[l]).length),f[d]&&f.push(e);f.length&&h.push({elem:l,handlers:f})}return b.length>k&&h.push({elem:this,handlers:b.slice(k)}),h},fix:function(a){if(a[c.expando])return a;var b,d,
e;b=a.type;var f=a,g=this.fixHooks[b];g||(this.fixHooks[b]=g=yc.test(b)?this.mouseHooks:xc.test(b)?this.keyHooks:{});e=g.props?this.props.concat(g.props):this.props;a=new c.Event(f);for(b=e.length;b--;)d=e[b],a[d]=f[d];return a.target||(a.target=f.srcElement||p),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||p,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&
f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||g===n||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ab()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ab()&&this.blur?(this.blur(),!1):n},delegateType:"focusout"},click:{trigger:function(){return c.nodeName(this,
"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):n},_default:function(a){return c.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==n&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,d,e){a=c.extend(new c.Event,d,{type:a,isSimulated:!0,originalEvent:{}});e?c.event.trigger(a,null,b):c.event.dispatch.call(b,a);a.isDefaultPrevented()&&d.preventDefault()}};c.removeEvent=p.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,
c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&(typeof a[b]===D&&(a[b]=null),a.detachEvent(b,c))};c.Event=function(a,b){return this instanceof c.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?ma:da):this.type=a,b&&c.extend(this,b),this.timeStamp=a&&a.timeStamp||c.now(),this[c.expando]=!0,n):new c.Event(a,b)};c.Event.prototype={isDefaultPrevented:da,isPropagationStopped:da,isImmediatePropagationStopped:da,
preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ma;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ma;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ma;this.stopPropagation()}};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={delegateType:b,bindType:b,handle:function(a){var e,
f=a.relatedTarget,g=a.handleObj;return(!f||f!==this&&!c.contains(this,f))&&(a.type=g.origType,e=g.handler.apply(this,arguments),a.type=b),e}}});c.support.submitBubbles||(c.event.special.submit={setup:function(){return c.nodeName(this,"form")?!1:(c.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=c.nodeName(a,"input")||c.nodeName(a,"button")?a.form:n)&&!c._data(a,"submitBubbles")&&(c.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),c._data(a,"submitBubbles",!0))}),
n)},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&c.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return c.nodeName(this,"form")?!1:(c.event.remove(this,"._submit"),n)}});c.support.changeBubbles||(c.event.special.change={setup:function(){return Pa.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(c.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=
!0)}),c.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);c.event.simulate("change",this,a,!0)})),!1):(c.event.add(this,"beforeactivate._change",function(a){a=a.target;Pa.test(a.nodeName)&&!c._data(a,"changeBubbles")&&(c.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||c.event.simulate("change",this.parentNode,a,!0)}),c._data(a,"changeBubbles",!0))}),n)},handle:function(a){var b=a.target;return this!==b||a.isSimulated||
a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):n},teardown:function(){return c.event.remove(this,"._change"),!Pa.test(this.nodeName)}});c.support.focusinBubbles||c.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){c.event.simulate(b,a.target,c.event.fix(a),!0)};c.event.special[b]={setup:function(){0===d++&&p.addEventListener(a,e,!0)},teardown:function(){0===--d&&p.removeEventListener(a,e,!0)}}});c.fn.extend({on:function(a,b,d,
e,f){var g,h;if("object"==typeof a){"string"!=typeof b&&(d=d||b,b=n);for(g in a)this.on(g,b,d,a[g],f);return this}if(null==d&&null==e?(e=b,d=b=n):null==e&&("string"==typeof b?(e=d,d=n):(e=d,d=b,b=n)),!1===e)e=da;else if(!e)return this;return 1===f&&(h=e,e=function(a){return c().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=c.guid++)),this.each(function(){c.event.add(this,a,e,d,b)})},one:function(a,b,c,e){return this.on(a,b,c,e,1)},off:function(a,b,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=
a.handleObj,c(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,b,a[f]);return this}return(!1===b||"function"==typeof b)&&(d=b,b=n),!1===d&&(d=da),this.each(function(){c.event.remove(this,a,d,b)})},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){var d=this[0];return d?c.event.trigger(a,b,d,!0):n}});var bc=/^.[^:#\[\.,]*$/,zc=/^(?:parents|prev(?:Until|All))/,
Jb=c.expr.match.needsContext,Ac={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({find:function(a){var b,d=[],e=this,f=e.length;if("string"!=typeof a)return this.pushStack(c(a).filter(function(){for(b=0;f>b;b++)if(c.contains(e[b],this))return!0}));for(b=0;f>b;b++)c.find(a,e[b],d);return d=this.pushStack(1<f?c.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},has:function(a){var b,d=c(a,this),e=d.length;return this.filter(function(){for(b=0;e>b;b++)if(c.contains(this,d[b]))return!0})},
not:function(a){return this.pushStack(Da(this,a||[],!0))},filter:function(a){return this.pushStack(Da(this,a||[],!1))},is:function(a){return!!Da(this,"string"==typeof a&&Jb.test(a)?c(a):a||[],!1).length},closest:function(a,b){for(var d,e=0,f=this.length,g=[],h=Jb.test(a)||"string"!=typeof a?c(a,b||this.context):0;f>e;e++)for(d=this[e];d&&d!==b;d=d.parentNode)if(11>d.nodeType&&(h?-1<h.index(d):1===d.nodeType&&c.find.matchesSelector(d,a))){g.push(d);break}return this.pushStack(1<g.length?c.unique(g):
g)},index:function(a){return a?"string"==typeof a?c.inArray(this[0],c(a)):c.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var d="string"==typeof a?c(a,b):c.makeArray(a&&a.nodeType?[a]:a),d=c.merge(this.get(),d);return this.pushStack(c.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});c.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return c.dir(a,
"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",d)},next:function(a){return bb(a,"nextSibling")},prev:function(a){return bb(a,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return c.sibling(a.firstChild)},
contents:function(a){return c.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:c.merge([],a.childNodes)}},function(a,b){c.fn[a]=function(d,e){var f=c.map(this,b,d);return"Until"!==a.slice(-5)&&(e=d),e&&"string"==typeof e&&(f=c.filter(e,f)),1<this.length&&(Ac[a]||(f=c.unique(f)),zc.test(a)&&(f=f.reverse())),this.pushStack(f)}});c.extend({filter:function(a,b,d){var e=b[0];return d&&(a=":not("+a+")"),1===b.length&&1===e.nodeType?c.find.matchesSelector(e,a)?[e]:[]:c.find.matches(a,c.grep(b,
function(a){return 1===a.nodeType}))},dir:function(a,b,d){var e=[];for(a=a[b];a&&9!==a.nodeType&&(d===n||1!==a.nodeType||!c(a).is(d));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var db="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Bc=/ jQuery\d+="(?:null|\d+)"/g,Kb=RegExp("\x3c(?:"+db+")[\\s/\x3e]",
"i"),Qa=/^\s+/,Lb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mb=/<([\w:]+)/,Nb=/<tbody/i,Cc=/<|&#?\w+;/,Dc=/<(?:script|style|link)/i,Fa=/^(?:checkbox|radio)$/i,Ec=/checked\s*(?:[^=]|=\s*.checked.)/i,Ob=/^$|\/(?:java|ecma)script/i,cc=/^true\/(.*)/,Fc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,H={option:[1,"\x3cselect multiple\x3d'multiple'\x3e","\x3c/select\x3e"],legend:[1,"\x3cfieldset\x3e","\x3c/fieldset\x3e"],area:[1,"\x3cmap\x3e","\x3c/map\x3e"],param:[1,"\x3cobject\x3e",
"\x3c/object\x3e"],thead:[1,"\x3ctable\x3e","\x3c/table\x3e"],tr:[2,"\x3ctable\x3e\x3ctbody\x3e","\x3c/tbody\x3e\x3c/table\x3e"],col:[2,"\x3ctable\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3ccolgroup\x3e","\x3c/colgroup\x3e\x3c/table\x3e"],td:[3,"\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e","\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"],_default:c.support.htmlSerialize?[0,"",""]:[1,"X\x3cdiv\x3e","\x3c/div\x3e"]},Ra=cb(p).appendChild(p.createElement("div"));H.optgroup=H.option;H.tbody=H.tfoot=H.colgroup=H.caption=H.thead;
H.th=H.td;c.fn.extend({text:function(a){return c.access(this,function(a){return a===n?c.text(this):this.empty().append((this[0]&&this[0].ownerDocument||p).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&eb(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=eb(this,a);b.insertBefore(a,
b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var d,e=a?c.filter(a,this):this,f=0;null!=(d=e[f]);f++)b||1!==d.nodeType||c.cleanData(B(d)),d.parentNode&&(b&&c.contains(d.ownerDocument,d)&&Ea(B(d,"script")),d.parentNode.removeChild(d));return this},empty:function(){for(var a,
b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&c.cleanData(B(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&c.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return c.clone(this,a,b)})},html:function(a){return c.access(this,function(a){var d=this[0]||{},e=0,f=this.length;if(a===n)return 1===d.nodeType?d.innerHTML.replace(Bc,""):n;if(!("string"!=typeof a||Dc.test(a)||!c.support.htmlSerialize&&Kb.test(a)||
!c.support.leadingWhitespace&&Qa.test(a)||H[(Mb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Lb,"\x3c$1\x3e\x3c/$2\x3e");try{for(;f>e;e++)d=this[e]||{},1===d.nodeType&&(c.cleanData(B(d,!1)),d.innerHTML=a);d=0}catch(g){}}d&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=c.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(d){var e=a[b++],f=a[b++];f&&(e&&e.parentNode!==f&&(e=this.nextSibling),c(this).remove(),f.insertBefore(d,
e))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,d){a=Ab.apply([],a);var e,f,g,h,k=0,l=this.length,q=this,n=l-1,m=a[0],p=c.isFunction(m);if(p||!(1>=l||"string"!=typeof m||c.support.checkClone)&&Ec.test(m))return this.each(function(c){var e=q.eq(c);p&&(a[0]=m.call(this,c,e.html()));e.domManip(a,b,d)});if(l&&(h=c.buildFragment(a,this[0].ownerDocument,!1,!d&&this),e=h.firstChild,1===h.childNodes.length&&(h=e),e)){g=c.map(B(h,"script"),fb);for(f=g.length;l>
k;k++)e=h,k!==n&&(e=c.clone(e,!0,!0),f&&c.merge(g,B(e,"script"))),b.call(this[k],e,k);if(f){h=g[g.length-1].ownerDocument;c.map(g,gb);for(k=0;f>k;k++)e=g[k],Ob.test(e.type||"")&&!c._data(e,"globalEval")&&c.contains(h,e)&&(e.src?c._evalUrl(e.src):c.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Fc,"")))}h=e=null}return this}});c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(a){for(var e=0,
f=[],g=c(a),h=g.length-1;h>=e;e++)a=e===h?this:this.clone(!0),c(g[e])[b](a),Ja.apply(f,a.get());return this.pushStack(f)}});c.extend({clone:function(a,b,d){var e,f,g,h,k,l=c.contains(a.ownerDocument,a);if(c.support.html5Clone||c.isXMLDoc(a)||!Kb.test("\x3c"+a.nodeName+"\x3e")?g=a.cloneNode(!0):(Ra.innerHTML=a.outerHTML,Ra.removeChild(g=Ra.firstChild)),!(c.support.noCloneEvent&&c.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||c.isXMLDoc(a))){e=B(g);k=B(a);for(h=0;null!=(f=k[h]);++h)if(e[h]){var q=
e[h],n=void 0,m=void 0,p=void 0;if(1===q.nodeType){if(n=q.nodeName.toLowerCase(),!c.support.noCloneEvent&&q[c.expando]){p=c._data(q);for(m in p.events)c.removeEvent(q,m,p.handle);q.removeAttribute(c.expando)}"script"===n&&q.text!==f.text?(fb(q).text=f.text,gb(q)):"object"===n?(q.parentNode&&(q.outerHTML=f.outerHTML),c.support.html5Clone&&f.innerHTML&&!c.trim(q.innerHTML)&&(q.innerHTML=f.innerHTML)):"input"===n&&Fa.test(f.type)?(q.defaultChecked=q.checked=f.checked,q.value!==f.value&&(q.value=f.value)):
"option"===n?q.defaultSelected=q.selected=f.defaultSelected:("input"===n||"textarea"===n)&&(q.defaultValue=f.defaultValue)}}}if(b)if(d){k=k||B(a);e=e||B(g);for(h=0;null!=(f=k[h]);h++)hb(f,e[h])}else hb(a,g);return e=B(g,"script"),0<e.length&&Ea(e,!l&&B(a,"script")),g},buildFragment:function(a,b,d,e){for(var f,g,h,k,l,q,n,m=a.length,p=cb(b),t=[],r=0;m>r;r++)if(g=a[r],g||0===g)if("object"===c.type(g))c.merge(t,g.nodeType?[g]:g);else if(Cc.test(g)){k=k||p.appendChild(b.createElement("div"));l=(Mb.exec(g)||
["",""])[1].toLowerCase();n=H[l]||H._default;k.innerHTML=n[1]+g.replace(Lb,"\x3c$1\x3e\x3c/$2\x3e")+n[2];for(f=n[0];f--;)k=k.lastChild;if(!c.support.leadingWhitespace&&Qa.test(g)&&t.push(b.createTextNode(Qa.exec(g)[0])),!c.support.tbody)for(f=(g="table"!==l||Nb.test(g)?"\x3ctable\x3e"!==n[1]||Nb.test(g)?0:k:k.firstChild)&&g.childNodes.length;f--;)c.nodeName(q=g.childNodes[f],"tbody")&&!q.childNodes.length&&g.removeChild(q);c.merge(t,k.childNodes);for(k.textContent="";k.firstChild;)k.removeChild(k.firstChild);
k=p.lastChild}else t.push(b.createTextNode(g));k&&p.removeChild(k);c.support.appendChecked||c.grep(B(t,"input"),dc);for(r=0;g=t[r++];)if((!e||-1===c.inArray(g,e))&&(h=c.contains(g.ownerDocument,g),k=B(p.appendChild(g),"script"),h&&Ea(k),d))for(f=0;g=k[f++];)Ob.test(g.type||"")&&d.push(g);return p},cleanData:function(a,b){for(var d,e,f,g,h=0,k=c.expando,l=c.cache,n=c.support.deleteExpando,p=c.event.special;null!=(d=a[h]);h++)if((b||c.acceptData(d))&&(f=d[k],g=f&&l[f])){if(g.events)for(e in g.events)p[e]?
c.event.remove(d,e):c.removeEvent(d,e,g.handle);l[f]&&(delete l[f],n?delete d[k]:typeof d.removeAttribute!==D?d.removeAttribute(k):d[k]=null,ca.push(f))}},_evalUrl:function(a){return c.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}});c.fn.extend({wrapAll:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapAll(a.call(this,b))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=
this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return c.isFunction(a)?this.each(function(b){c(this).wrapInner(a.call(this,b))}):this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){var b=c.isFunction(a);return this.each(function(d){c(this).wrapAll(b?a.call(this,d):a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()}});
var ia,C,E,Sa=/alpha\([^)]*\)/i,Gc=/opacity\s*=\s*([^)]*)/,Hc=/^(top|right|bottom|left)$/,Ic=/^(none|table(?!-c[ea]).+)/,Pb=/^margin/,ec=RegExp("^("+ra+")(.*)$","i"),na=RegExp("^("+ra+")(?!px)[a-z%]+$","i"),Jc=RegExp("^([+-])\x3d("+ra+")","i"),pb={BODY:"block"},Kc={position:"absolute",visibility:"hidden",display:"block"},Qb={letterSpacing:0,fontWeight:400},U=["Top","Right","Bottom","Left"],jb=["Webkit","O","Moz","ms"];c.fn.extend({css:function(a,b){return c.access(this,function(a,b,f){var g,h={},
k=0;if(c.isArray(b)){g=C(a);for(f=b.length;f>k;k++)h[b[k]]=c.css(a,b[k],!1,g);return h}return f!==n?c.style(a,b,f):c.css(a,b)},a,b,1<arguments.length)},show:function(){return kb(this,!0)},hide:function(){return kb(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:T(this))?c(this).show():c(this).hide()})}});c.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=E(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,
opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,k=c.camelCase(b),l=a.style;if(b=c.cssProps[k]||(c.cssProps[k]=ib(l,k)),h=c.cssHooks[b]||c.cssHooks[k],d===n)return h&&"get"in h&&(f=h.get(a,!1,e))!==n?f:l[b];if(g=typeof d,"string"===g&&(f=Jc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(c.css(a,b)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||c.cssNumber[k]||
(d+="px"),c.support.clearCloneStyle||""!==d||0!==b.indexOf("background")||(l[b]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===n)))try{l[b]=d}catch(q){}}},css:function(a,b,d,e){var f,g,h,k=c.camelCase(b);return b=c.cssProps[k]||(c.cssProps[k]=ib(a.style,k)),h=c.cssHooks[b]||c.cssHooks[k],h&&"get"in h&&(g=h.get(a,!0,d)),g===n&&(g=E(a,b,e)),"normal"===g&&b in Qb&&(g=Qb[b]),""===d||d?(f=parseFloat(g),!0===d||c.isNumeric(f)?f||0:g):g}});r.getComputedStyle?(C=function(a){return r.getComputedStyle(a,null)},
E=function(a,b,d){var e,f,g,h=(d=d||C(a))?d.getPropertyValue(b)||d[b]:n,k=a.style;return d&&(""!==h||c.contains(a.ownerDocument,a)||(h=c.style(a,b)),na.test(h)&&Pb.test(b)&&(e=k.width,f=k.minWidth,g=k.maxWidth,k.minWidth=k.maxWidth=k.width=h,h=d.width,k.width=e,k.minWidth=f,k.maxWidth=g)),h}):p.documentElement.currentStyle&&(C=function(a){return a.currentStyle},E=function(a,b,c){var e,f,g;c=(c=c||C(a))?c[b]:n;var h=a.style;return null==c&&h&&h[b]&&(c=h[b]),na.test(c)&&!Hc.test(b)&&(e=h.left,f=a.runtimeStyle,
g=f&&f.left,g&&(f.left=a.currentStyle.left),h.left="fontSize"===b?"1em":c,c=h.pixelLeft+"px",h.left=e,g&&(f.left=g)),""===c?"auto":c});c.each(["height","width"],function(a,b){c.cssHooks[b]={get:function(a,e,f){return e?0===a.offsetWidth&&Ic.test(c.css(a,"display"))?c.swap(a,Kc,function(){return ob(a,b,f)}):ob(a,b,f):n},set:function(a,e,f){var g=f&&C(a);return mb(a,e,f?nb(a,b,f,c.support.boxSizing&&"border-box"===c.css(a,"boxSizing",!1,g),g):0)}}});c.support.opacity||(c.cssHooks.opacity={get:function(a,
b){return Gc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var d=a.style,e=a.currentStyle,f=c.isNumeric(b)?"alpha(opacity\x3d"+100*b+")":"",g=e&&e.filter||d.filter||"";d.zoom=1;(1<=b||""===b)&&""===c.trim(g.replace(Sa,""))&&d.removeAttribute&&(d.removeAttribute("filter"),""===b||e&&!e.filter)||(d.filter=Sa.test(g)?g.replace(Sa,f):g+" "+f)}});c(function(){c.support.reliableMarginRight||(c.cssHooks.marginRight={get:function(a,
b){return b?c.swap(a,{display:"inline-block"},E,[a,"marginRight"]):n}});!c.support.pixelPosition&&c.fn.position&&c.each(["top","left"],function(a,b){c.cssHooks[b]={get:function(a,e){return e?(e=E(a,b),na.test(e)?c(a).position()[b]+"px":e):n}}})});c.expr&&c.expr.filters&&(c.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!c.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||c.css(a,"display"))},c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)});
c.each({margin:"",padding:"",border:"Width"},function(a,b){c.cssHooks[a+b]={expand:function(c){var e=0,f={};for(c="string"==typeof c?c.split(" "):[c];4>e;e++)f[a+U[e]+b]=c[e]||c[e-2]||c[0];return f}};Pb.test(a)||(c.cssHooks[a+b].set=mb)});var Lc=/%20/g,fc=/\[\]$/,Rb=/\r?\n/g,Mc=/^(?:submit|button|image|reset|file)$/i,Nc=/^(?:input|select|textarea|keygen)/i;c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=c.prop(this,
"elements");return a?c.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!c(this).is(":disabled")&&Nc.test(this.nodeName)&&!Mc.test(a)&&(this.checked||!Fa.test(a))}).map(function(a,b){var d=c(this).val();return null==d?null:c.isArray(d)?c.map(d,function(a){return{name:b.name,value:a.replace(Rb,"\r\n")}}):{name:b.name,value:d.replace(Rb,"\r\n")}}).get()}});c.param=function(a,b){var d,e=[],f=function(a,b){b=c.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"\x3d"+
encodeURIComponent(b)};if(b===n&&(b=c.ajaxSettings&&c.ajaxSettings.traditional),c.isArray(a)||a.jquery&&!c.isPlainObject(a))c.each(a,function(){f(this.name,this.value)});else for(d in a)Ga(d,a[d],b,f);return e.join("\x26").replace(Lc,"+")};c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){c.fn[b]=function(a,c){return 0<
arguments.length?this.on(b,null,a,c):this.trigger(b)}});c.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,e){return this.on(b,a,c,e)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var aa,S,Ta=c.now(),Ua=/\?/,Oc=/#.*$/,Sb=/([?&])_=[^&]*/,Pc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qc=/^(?:GET|HEAD)$/,Rc=/^\/\//,
Tb=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ub=c.fn.load,Vb={},Ha={},Wb="*/".concat("*");try{S=hc.href}catch(Vc){S=p.createElement("a"),S.href="",S=S.href}aa=Tb.exec(S.toLowerCase())||[];c.fn.load=function(a,b,d){if("string"!=typeof a&&Ub)return Ub.apply(this,arguments);var e,f,g,h=this,k=a.indexOf(" ");return 0<=k&&(e=a.slice(k,a.length),a=a.slice(0,k)),c.isFunction(b)?(d=b,b=n):b&&"object"==typeof b&&(g="POST"),0<h.length&&c.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){f=arguments;
h.html(e?c("\x3cdiv\x3e").append(c.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this};c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){c.fn[b]=function(a){return this.on(b,a)}});c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:S,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(aa[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",
accepts:{"*":Wb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":c.parseJSON,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ia(Ia(a,c.ajaxSettings),b):Ia(c.ajaxSettings,a)},ajaxPrefilter:rb(Vb),ajaxTransport:rb(Ha),ajax:function(a,
b){function d(a,b,d,e){var f,p,s,C,z=b;if(2!==O){O=2;k&&clearTimeout(k);q=n;h=e||"";u.readyState=0<a?4:0;e=200<=a&&300>a||304===a;if(d){s=m;for(var E=u,I,F,G,x,M=s.contents,N=s.dataTypes;"*"===N[0];)N.shift(),F===n&&(F=s.mimeType||E.getResponseHeader("Content-Type"));if(F)for(x in M)if(M[x]&&M[x].test(F)){N.unshift(x);break}if(N[0]in d)G=N[0];else{for(x in d){if(!N[0]||s.converters[x+" "+N[0]]){G=x;break}I||(I=x)}G=G||I}s=G?(G!==N[0]&&N.unshift(G),d[G]):n}var D;a:{d=m;I=s;F=u;G=e;var K,A,L;s={};E=
d.dataTypes.slice();if(E[1])for(K in d.converters)s[K.toLowerCase()]=d.converters[K];for(x=E.shift();x;)if(d.responseFields[x]&&(F[d.responseFields[x]]=I),!L&&G&&d.dataFilter&&(I=d.dataFilter(I,d.dataType)),L=x,x=E.shift())if("*"===x)x=L;else if("*"!==L&&L!==x){if(K=s[L+" "+x]||s["* "+x],!K)for(D in s)if(A=D.split(" "),A[1]===x&&(K=s[L+" "+A[0]]||s["* "+A[0]])){!0===K?K=s[D]:!0!==s[D]&&(x=A[0],E.unshift(A[1]));break}if(!0!==K)if(K&&d["throws"])I=K(I);else try{I=K(I)}catch(P){D={state:"parsererror",
error:K?P:"No conversion from "+L+" to "+x};break a}}D={state:"success",data:I}}s=D;e?(m.ifModified&&(C=u.getResponseHeader("Last-Modified"),C&&(c.lastModified[g]=C),C=u.getResponseHeader("etag"),C&&(c.etag[g]=C)),204===a||"HEAD"===m.type?z="nocontent":304===a?z="notmodified":(z=s.state,f=s.data,p=s.error,e=!p)):(p=z,(a||!z)&&(z="error",0>a&&(a=0)));u.status=a;u.statusText=(b||z)+"";e?y.resolveWith(r,[f,z,u]):y.rejectWith(r,[u,z,p]);u.statusCode(H);H=n;l&&t.trigger(e?"ajaxSuccess":"ajaxError",[u,
m,e?f:p]);B.fireWith(r,[u,z]);l&&(t.trigger("ajaxComplete",[u,m]),--c.active||c.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=n);b=b||{};var e,f,g,h,k,l,q,p,m=c.ajaxSetup({},b),r=m.context||m,t=m.context&&(r.nodeType||r.jquery)?c(r):c.event,y=c.Deferred(),B=c.Callbacks("once memory"),H=m.statusCode||{},C={},z={},O=0,E="canceled",u={readyState:0,getResponseHeader:function(a){var b;if(2===O){if(!p)for(p={};b=Pc.exec(h);)p[b[1].toLowerCase()]=b[2];b=p[a.toLowerCase()]}return null==b?null:b},
getAllResponseHeaders:function(){return 2===O?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return O||(a=z[c]=z[c]||a,C[a]=b),this},overrideMimeType:function(a){return O||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>O)for(b in a)H[b]=[H[b],a[b]];else u.always(a[u.status]);return this},abort:function(a){a=a||E;return q&&q.abort(a),d(0,a),this}};if(y.promise(u).complete=B.add,u.success=u.done,u.error=u.fail,m.url=((a||m.url||S)+"").replace(Oc,"").replace(Rc,aa[1]+"//"),
m.type=b.method||b.type||m.method||m.type,m.dataTypes=c.trim(m.dataType||"*").toLowerCase().match(Q)||[""],null==m.crossDomain&&(e=Tb.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===aa[1]&&e[2]===aa[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(aa[3]||("http:"===aa[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=c.param(m.data,m.traditional)),sb(Vb,m,b,u),2===O)return u;(l=m.global)&&0===c.active++&&c.event.trigger("ajaxStart");m.type=m.type.toUpperCase();m.hasContent=
!Qc.test(m.type);g=m.url;m.hasContent||(m.data&&(g=m.url+=(Ua.test(g)?"\x26":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Sb.test(g)?g.replace(Sb,"$1_\x3d"+Ta++):g+(Ua.test(g)?"\x26":"?")+"_\x3d"+Ta++));m.ifModified&&(c.lastModified[g]&&u.setRequestHeader("If-Modified-Since",c.lastModified[g]),c.etag[g]&&u.setRequestHeader("If-None-Match",c.etag[g]));(m.data&&m.hasContent&&!1!==m.contentType||b.contentType)&&u.setRequestHeader("Content-Type",m.contentType);u.setRequestHeader("Accept",m.dataTypes[0]&&
m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Wb+"; q\x3d0.01":""):m.accepts["*"]);for(f in m.headers)u.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(!1===m.beforeSend.call(r,u,m)||2===O))return u.abort();E="abort";for(f in{success:1,error:1,complete:1})u[f](m[f]);if(q=sb(Ha,m,b,u)){u.readyState=1;l&&t.trigger("ajaxSend",[u,m]);m.async&&0<m.timeout&&(k=setTimeout(function(){u.abort("timeout")},m.timeout));try{O=1,q.send(C,d)}catch(D){if(!(2>O))throw D;d(-1,D)}}else d(-1,
"No Transport");return u},getJSON:function(a,b,d){return c.get(a,b,d,"json")},getScript:function(a,b){return c.get(a,n,b,"script")}});c.each(["get","post"],function(a,b){c[b]=function(a,e,f,g){return c.isFunction(e)&&(g=g||f,f=e,e=n),c.ajax({url:a,type:b,dataType:g,data:e,success:f})}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return c.globalEval(a),
a}}});c.ajaxPrefilter("script",function(a){a.cache===n&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});c.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=p.head||c("head")[0]||p.documentElement;return{send:function(c,f){b=p.createElement("script");b.async=!0;a.scriptCharset&&(b.charset=a.scriptCharset);b.src=a.url;b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),
b=null,c||f(200,"success"))};d.insertBefore(b,d.firstChild)},abort:function(){b&&b.onload(n,!0)}}}});var Xb=[],Va=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Xb.pop()||c.expando+"_"+Ta++;return this[a]=!0,a}});c.ajaxPrefilter("json jsonp",function(a,b,d){var e,f,g,h=!1!==a.jsonp&&(Va.test(a.url)?"url":"string"==typeof a.data&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&Va.test(a.data)&&"data");return h||"jsonp"===a.dataTypes[0]?(e=a.jsonpCallback=
c.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,h?a[h]=a[h].replace(Va,"$1"+e):!1!==a.jsonp&&(a.url+=(Ua.test(a.url)?"\x26":"?")+a.jsonp+"\x3d"+e),a.converters["script json"]=function(){return g||c.error(e+" was not called"),g[0]},a.dataTypes[0]="json",f=r[e],r[e]=function(){g=arguments},d.always(function(){r[e]=f;a[e]&&(a.jsonpCallback=b.jsonpCallback,Xb.push(e));g&&c.isFunction(f)&&f(g[0]);g=f=n}),"script"):n});var W,ba,Sc=0,Wa=r.ActiveXObject&&function(){for(var a in W)W[a](n,!0)};
c.ajaxSettings.xhr=r.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&tb()))a:{try{a=new r.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:tb;ba=c.ajaxSettings.xhr();c.support.cors=!!ba&&"withCredentials"in ba;(ba=c.support.ajax=!!ba)&&c.ajaxTransport(function(a){if(!a.crossDomain||c.support.cors){var b;return{send:function(d,e){var f,g,h=a.xhr();if(a.username?h.open(a.type,a.url,a.async,a.username,a.password):h.open(a.type,a.url,a.async),a.xhrFields)for(g in a.xhrFields)h[g]=
a.xhrFields[g];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType);a.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");try{for(g in d)h.setRequestHeader(g,d[g])}catch(k){}h.send(a.hasContent&&a.data||null);b=function(d,g){var k,m,p,r;try{if(b&&(g||4===h.readyState))if(b=n,f&&(h.onreadystatechange=c.noop,Wa&&delete W[f]),g)4!==h.readyState&&h.abort();else{r={};k=h.status;m=h.getAllResponseHeaders();"string"==typeof h.responseText&&(r.text=h.responseText);try{p=
h.statusText}catch(y){p=""}k||!a.isLocal||a.crossDomain?1223===k&&(k=204):k=r.text?200:404}}catch(z){g||e(-1,z)}r&&e(k,p,r,m)};a.async?4===h.readyState?setTimeout(b):(f=++Sc,Wa&&(W||(W={},c(r).unload(Wa)),W[f]=b),h.onreadystatechange=b):b()},abort:function(){b&&b(n,!0)}}}});var X,ua,Tc=/^(?:toggle|show|hide)$/,Yb=RegExp("^(?:([+-])\x3d|)("+ra+")([a-z%]*)$","i"),Uc=/queueHooks$/,oa=[function(a,b,d){var e,f,g,h,k,l=this,n={},p=a.style,m=a.nodeType&&T(a),r=c._data(a,"fxshow");d.queue||(h=c._queueHooks(a,
"fx"),null==h.unqueued&&(h.unqueued=0,k=h.empty.fire,h.empty.fire=function(){h.unqueued||k()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--;c.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(d.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===c.css(a,"display")&&"none"===c.css(a,"float")&&(c.support.inlineBlockNeedsLayout&&"inline"!==lb(a.nodeName)?p.zoom=1:p.display="inline-block"));d.overflow&&(p.overflow="hidden",c.support.shrinkWrapBlocks||
l.always(function(){p.overflow=d.overflow[0];p.overflowX=d.overflow[1];p.overflowY=d.overflow[2]}));for(e in b)if(f=b[e],Tc.exec(f))if(!(delete b[e],g=g||"toggle"===f,f===(m?"hide":"show")))n[e]=r&&r[e]||c.style(a,e);if(!c.isEmptyObject(n))for(e in r?"hidden"in r&&(m=r.hidden):r=c._data(a,"fxshow",{}),g&&(r.hidden=!m),m?c(a).show():l.done(function(){c(a).hide()}),l.done(function(){var b;c._removeData(a,"fxshow");for(b in n)c.style(a,b,n[b])}),n)b=vb(m?r[e]:0,e,l),e in r||(r[e]=b.start,m&&(b.end=b.start,
b.start="width"===e||"height"===e?1:0))}],ja={"*":[function(a,b){var d=this.createTween(a,b),e=d.cur(),f=Yb.exec(b),g=f&&f[3]||(c.cssNumber[a]?"":"px"),h=(c.cssNumber[a]||"px"!==g&&+e)&&Yb.exec(c.css(d.elem,a)),k=1,l=20;if(h&&h[3]!==g){g=g||h[3];f=f||[];h=+e||1;do k=k||".5",h/=k,c.style(d.elem,a,h+g);while(k!==(k=d.cur()/e)&&1!==k&&--l)}return f&&(h=d.start=+h||+e||0,d.unit=g,d.end=f[1]?h+(f[1]+1)*f[2]:+f[2]),d}]};c.Animation=c.extend(wb,{tweener:function(a,b){c.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");
for(var d,e=0,f=a.length;f>e;e++)d=a[e],ja[d]=ja[d]||[],ja[d].unshift(b)},prefilter:function(a,b){b?oa.unshift(a):oa.push(a)}});c.Tween=y;y.prototype={constructor:y,init:function(a,b,d,e,f,g){this.elem=a;this.prop=d;this.easing=f||"swing";this.options=b;this.start=this.now=this.cur();this.end=e;this.unit=g||(c.cssNumber[d]?"":"px")},cur:function(){var a=y.propHooks[this.prop];return a&&a.get?a.get(this):y.propHooks._default.get(this)},run:function(a){var b,d=y.propHooks[this.prop];return this.pos=
b=this.options.duration?c.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):y.propHooks._default.set(this),this}};y.prototype.init.prototype=y.prototype;y.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=c.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){c.fx.step[a.prop]?
c.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[c.cssProps[a.prop]]||c.cssHooks[a.prop])?c.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};y.propHooks.scrollTop=y.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};c.each(["toggle","show","hide"],function(a,b){var d=c.fn[b];c.fn[b]=function(a,c,g){return null==a||"boolean"==typeof a?d.apply(this,arguments):this.animate(Y(b,!0),a,c,g)}});c.fn.extend({fadeTo:function(a,b,c,e){return this.filter(T).css("opacity",
0).show().end().animate({opacity:b},a,c,e)},animate:function(a,b,d,e){var f=c.isEmptyObject(a),g=c.speed(b,d,e);b=function(){var b=wb(this,c.extend({},a),g);(f||c._data(this,"finish"))&&b.stop(!0)};return b.finish=b,f||!1===g.queue?this.each(b):this.queue(g.queue,b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};return"string"!=typeof a&&(d=b,b=a,a=n),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,g=null!=a&&a+"queueHooks",h=c.timers,k=c._data(this);if(g)k[g]&&
k[g].stop&&e(k[g]);else for(g in k)k[g]&&k[g].stop&&Uc.test(g)&&e(k[g]);for(g=h.length;g--;)h[g].elem!==this||null!=a&&h[g].queue!==a||(h[g].anim.stop(d),b=!1,h.splice(g,1));(b||!d)&&c.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,d=c._data(this),e=d[a+"queue"];b=d[a+"queueHooks"];var f=c.timers,g=e?e.length:0;d.finish=!0;c.queue(this,a,[]);b&&b.stop&&b.stop.call(this,!0);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,
1));for(b=0;g>b;b++)e[b]&&e[b].finish&&e[b].finish.call(this);delete d.finish})}});c.each({slideDown:Y("show"),slideUp:Y("hide"),slideToggle:Y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){c.fn[a]=function(a,c,f){return this.animate(b,a,c,f)}});c.speed=function(a,b,d){var e=a&&"object"==typeof a?c.extend({},a):{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};return e.duration=c.fx.off?0:"number"==typeof e.duration?
e.duration:e.duration in c.fx.speeds?c.fx.speeds[e.duration]:c.fx.speeds._default,(null==e.queue||!0===e.queue)&&(e.queue="fx"),e.old=e.complete,e.complete=function(){c.isFunction(e.old)&&e.old.call(this);e.queue&&c.dequeue(this,e.queue)},e};c.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};c.timers=[];c.fx=y.prototype.init;c.fx.tick=function(){var a,b=c.timers,d=0;for(X=c.now();b.length>d;d++)a=b[d],a()||b[d]!==a||b.splice(d--,1);b.length||c.fx.stop();X=
n};c.fx.timer=function(a){a()&&c.timers.push(a)&&c.fx.start()};c.fx.interval=13;c.fx.start=function(){ua||(ua=setInterval(c.fx.tick,c.fx.interval))};c.fx.stop=function(){clearInterval(ua);ua=null};c.fx.speeds={slow:600,fast:200,_default:400};c.fx.step={};c.expr&&c.expr.filters&&(c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length});c.fn.offset=function(a){if(arguments.length)return a===n?this:this.each(function(b){c.offset.setOffset(this,a,b)});var b,
d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return b=g.documentElement,c.contains(b,f)?(typeof f.getBoundingClientRect!==D&&(e=f.getBoundingClientRect()),d=xb(g),{top:e.top+(d.pageYOffset||b.scrollTop)-(b.clientTop||0),left:e.left+(d.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):e};c.offset={setOffset:function(a,b,d){var e=c.css(a,"position");"static"===e&&(a.style.position="relative");var f=c(a),g=f.offset(),h=c.css(a,"top"),k=c.css(a,"left"),l={},n={},p,m;("absolute"===e||"fixed"===
e)&&-1<c.inArray("auto",[h,k])?(n=f.position(),p=n.top,m=n.left):(p=parseFloat(h)||0,m=parseFloat(k)||0);c.isFunction(b)&&(b=b.call(a,d,g));null!=b.top&&(l.top=b.top-g.top+p);null!=b.left&&(l.left=b.left-g.left+m);"using"in b?b.using.call(a,l):f.css(l)}};c.fn.extend({position:function(){if(this[0]){var a,b,d={top:0,left:0},e=this[0];return"fixed"===c.css(e,"position")?b=e.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),c.nodeName(a[0],"html")||(d=a.offset()),d.top+=c.css(a[0],"borderTopWidth",
!0),d.left+=c.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-c.css(e,"marginTop",!0),left:b.left-d.left-c.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||zb;a&&!c.nodeName(a,"html")&&"static"===c.css(a,"position");)a=a.offsetParent;return a||zb})}});c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);c.fn[a]=function(e){return c.access(this,function(a,e,h){var k=xb(a);return h===n?k?b in k?k[b]:k.document.documentElement[e]:
a[e]:(k?k.scrollTo(d?c(k).scrollLeft():h,d?h:c(k).scrollTop()):a[e]=h,n)},a,e,arguments.length,null)}});c.each({Height:"height",Width:"width"},function(a,b){c.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){c.fn[e]=function(e,g){var h=arguments.length&&(d||"boolean"!=typeof e),k=d||(!0===e||!0===g?"margin":"border");return c.access(this,function(b,d,e){var f;return c.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+
a],b.body["offset"+a],f["offset"+a],f["client"+a])):e===n?c.css(b,d,k):c.style(b,d,e,k)},b,h?e:n,h,null)}})});c.fn.size=function(){return this.length};c.fn.andSelf=c.fn.addBack;"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=c:(r.jQuery=r.$=c,"function"==typeof define&&define.amd&&define("jquery",[],function(){return c}))})(window);(function(b,e){function c(g,d){var f,p,c,e=g.nodeName.toLowerCase();return"area"===e?(f=g.parentNode,p=f.name,g.href&&p&&"map"===f.nodeName.toLowerCase()?(c=b("img[usemap\x3d#"+p+"]")[0],!!c&&a(c)):!1):(/input|select|textarea|button|object/.test(e)?!g.disabled:"a"===e?g.href||d:d)&&a(g)}function a(a){return b.expr.filters.visible(a)&&!b(a).parents().addBack().filter(function(){return"hidden"===b.css(this,"visibility")}).length}var d=0,p=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.3",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:function(a){return function(d,f){return"number"==typeof d?this.each(function(){var a=this;setTimeout(function(){b(a).focus();f&&f.call(a)},d)}):a.apply(this,arguments)}}(b.fn.focus),scrollParent:function(){var a;return a=
b.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(b.css(this,"position"))&&/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?b(document):a},zIndex:function(a){if(a!==
e)return this.css("zIndex",a);if(this.length){var d,f;for(a=b(this[0]);a.length&&a[0]!==document;){if(d=a.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(f=parseInt(a.css("zIndex"),10),!isNaN(f)&&0!==f))return f;a=a.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})},removeUniqueId:function(){return this.each(function(){p.test(this.id)&&b(this).removeAttr("id")})}});b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(d){return!!b.data(d,
a)}}):function(a,d,f){return!!b.data(a,f[3])},focusable:function(a){return c(a,!isNaN(b.attr(a,"tabindex")))},tabbable:function(a){var d=b.attr(a,"tabindex"),f=isNaN(d);return(f||0<=d)&&c(a,!f)}});b("\x3ca\x3e").outerWidth(1).jquery||b.each(["Width","Height"],function(a,d){function f(a,d,g,f){return b.each(p,function(){d-=parseFloat(b.css(a,"padding"+this))||0;g&&(d-=parseFloat(b.css(a,"border"+this+"Width"))||0);f&&(d-=parseFloat(b.css(a,"margin"+this))||0)}),d}var p="Width"===d?["Left","Right"]:
["Top","Bottom"],c=d.toLowerCase(),n={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};b.fn["inner"+d]=function(a){return a===e?n["inner"+d].call(this):this.each(function(){b(this).css(c,f(this,a)+"px")})};b.fn["outer"+d]=function(a,g){return"number"!=typeof a?n["outer"+d].call(this,a):this.each(function(){b(this).css(c,f(this,a,!0,g)+"px")})}});b.fn.addBack||(b.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))});
b("\x3ca\x3e").data("a-b","a").removeData("a-b").data("a-b")&&(b.fn.removeData=function(a){return function(d){return arguments.length?a.call(this,b.camelCase(d)):a.call(this)}}(b.fn.removeData));b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart"in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});
b.extend(b.ui,{plugin:{add:function(a,d,f){var p;a=b.ui[a].prototype;for(p in f)a.plugins[p]=a.plugins[p]||[],a.plugins[p].push([d,f[p]])},call:function(a,b,d){var p=a.plugins[b];if(p&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;p.length>b;b++)a.options[p[b][0]]&&p[b][1].apply(a.element,d)}},hasScroll:function(a,d){if("hidden"===b(a).css("overflow"))return!1;var f=d&&"left"===d?"scrollLeft":"scrollTop";return 0<a[f]?!0:(a[f]=1,a[f]=0,!1)}})})(jQuery);
(function(b,e){var c=0,a=Array.prototype.slice,d=b.cleanData;b.cleanData=function(a){for(var g,h=0;null!=(g=a[h]);h++)try{b(g).triggerHandler("remove")}catch(f){}d(a)};b.widget=function(a,d,h){var f,c,l,n,q={},m=a.split(".")[0];a=a.split(".")[1];f=m+"-"+a;h||(h=d,d=b.Widget);b.expr[":"][f.toLowerCase()]=function(a){return!!b.data(a,f)};b[m]=b[m]||{};c=b[m][a];l=b[m][a]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),e):new l(a,b)};b.extend(l,c,{version:h.version,
_proto:b.extend({},h),_childConstructors:[]});n=new d;n.options=b.widget.extend({},n.options);b.each(h,function(a,f){return b.isFunction(f)?(q[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},p=function(b){return d.prototype[a].apply(this,b)};return function(){var a,d=this._super,g=this._superApply;return this._super=b,this._superApply=p,a=f.apply(this,arguments),this._super=d,this._superApply=g,a}}(),e):(q[a]=f,e)});l.prototype=b.widget.extend(n,{widgetEventPrefix:c?n.widgetEventPrefix:
a},q,{constructor:l,namespace:m,widgetName:a,widgetFullName:f});c?(b.each(c._childConstructors,function(a,d){var f=d.prototype;b.widget(f.namespace+"."+f.widgetName,l,d._proto)}),delete c._childConstructors):d._childConstructors.push(l);b.widget.bridge(a,l)};b.widget.extend=function(d){for(var g,h,f=a.call(arguments,1),c=0,l=f.length;l>c;c++)for(g in f[c])h=f[c][g],f[c].hasOwnProperty(g)&&h!==e&&(d[g]=b.isPlainObject(h)?b.isPlainObject(d[g])?b.widget.extend({},d[g],h):b.widget.extend({},h):h);return d};
b.widget.bridge=function(d,g){var c=g.prototype.widgetFullName||d;b.fn[d]=function(f){var k="string"==typeof f,l=a.call(arguments,1),n=this;return f=!k&&l.length?b.widget.extend.apply(null,[f].concat(l)):f,k?this.each(function(){var a,g=b.data(this,c);return g?b.isFunction(g[f])&&"_"!==f.charAt(0)?(a=g[f].apply(g,l),a!==g&&a!==e?(n=a&&a.jquery?n.pushStack(a.get()):a,!1):e):b.error("no such method '"+f+"' for "+d+" widget instance"):b.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+
f+"'")}):this.each(function(){var a=b.data(this,c);a?a.option(f||{})._init():b.data(this,c,new g(f,this))}),n}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"\x3cdiv\x3e",options:{disabled:!1,create:null},_createWidget:function(a,d){d=b(d||this.defaultElement||this)[0];this.element=b(d);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),
a);this.bindings=b();this.hoverable=b();this.focusable=b();d!==this&&(b.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=b(d.style?d.ownerDocument:d.document||d),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();
this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(a,d){var c,f,k,l=a;
if(0===arguments.length)return b.widget.extend({},this.options);if("string"==typeof a)if(l={},c=a.split("."),a=c.shift(),c.length){f=l[a]=b.widget.extend({},this.options[a]);for(k=0;c.length-1>k;k++)f[c[k]]=f[c[k]]||{},f=f[c[k]];if(a=c.pop(),d===e)return f[a]===e?null:f[a];f[a]=d}else{if(d===e)return this.options[a]===e?null:this.options[a];l[a]=d}return this._setOptions(l),this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=
b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(a,d,c){var f,k=this;"boolean"!=typeof a&&(c=d,d=a,a=!1);c?(d=f=b(d),this.bindings=this.bindings.add(d)):(c=d,d=this.element,f=this.widget());b.each(c,function(c,
h){function q(){return a||!0!==k.options.disabled&&!b(this).hasClass("ui-state-disabled")?("string"==typeof h?k[h]:h).apply(k,arguments):e}"string"!=typeof h&&(q.guid=h.guid=h.guid||q.guid||b.guid++);var m=c.match(/^(\w+)\s*(.*)$/),w=m[1]+k.eventNamespace;(m=m[2])?f.delegate(m,w,q):d.bind(w,q)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var d=this;return setTimeout(function(){return("string"==typeof a?
d[a]:a).apply(d,arguments)},b||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,d,c){var f,e=this.options[a];
if(c=c||{},d=b.Event(d),d.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase(),d.target=this.element[0],a=d.originalEvent)for(f in a)f in d||(d[f]=a[f]);return this.element.trigger(d,c),!(b.isFunction(e)&&!1===e.apply(this.element[0],[d].concat(c))||d.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(a,d){b.Widget.prototype["_"+a]=function(c,f,e){"string"==typeof f&&(f={effect:f});var l,n=f?!0===f||"number"==typeof f?d:f.effect||d:a;f=f||{};"number"==typeof f&&
(f={duration:f});l=!b.isEmptyObject(f);f.complete=e;f.delay&&c.delay(f.delay);l&&b.effects&&b.effects.effect[n]?c[a](f):n!==a&&c[n]?c[n](f.duration,f.easing,e):c.queue(function(d){b(this)[a]();e&&e.call(c[0]);d()})}})})(jQuery);
(function(b){var e=!1;b(document).mouseup(function(){e=!1});b.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(a){return!0===b.data(a.target,c.widgetName+".preventClickEvent")?(b.removeData(a.target,c.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1):void 0});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!e){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var a=this,d=1===c.which,p="string"==typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:!1;return d&&!p&&this._mouseCapture(c)?(this.mouseDelayMet=
!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted)?(c.preventDefault(),!0):(!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(b){return a._mouseMove(b)},this._mouseUpDelegate=function(b){return a._mouseUp(b)},
b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(c){return b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!c.button?this._mouseUp(c):this._mouseStarted?(this._mouseDrag(c),c.preventDefault()):(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c),this._mouseStarted?this._mouseDrag(c):this._mouseUp(c)),
!this._mouseStarted)},_mouseUp:function(c){return b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c)),!1},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(b,e){function c(a,b,d){return[parseFloat(a[0])*(q.test(a[0])?b/100:1),parseFloat(a[1])*(q.test(a[1])?d/100:1)]}function a(a){var d=a[0];return 9===d.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:b.isWindow(d)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:d.preventDefault?{width:0,height:0,offset:{top:d.pageY,left:d.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}b.ui=b.ui||{};var d,p=Math.max,g=Math.abs,h=
Math.round,f=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,q=/%$/,m=b.fn.position;b.position={scrollbarWidth:function(){if(d!==e)return d;var a,f,c=b("\x3cdiv style\x3d'display:block;width:50px;height:50px;overflow:hidden;'\x3e\x3cdiv style\x3d'height:100px;width:auto;'\x3e\x3c/div\x3e\x3c/div\x3e"),g=c.children()[0];return b("body").append(c),a=g.offsetWidth,c.css("overflow","scroll"),f=g.offsetWidth,a===f&&(f=c[0].clientWidth),c.remove(),d=a-f},getScrollInfo:function(a){var d=
a.isWindow?"":a.element.css("overflow-x"),f=a.isWindow?"":a.element.css("overflow-y"),d="scroll"===d||"auto"===d&&a.width<a.element[0].scrollWidth;return{width:"scroll"===f||"auto"===f&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:d?b.position.scrollbarWidth():0}},getWithinInfo:function(a){a=b(a||window);var d=b.isWindow(a[0]);return{element:a,isWindow:d,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:d?a.width():a.outerWidth(),
height:d?a.height():a.outerHeight()}}};b.fn.position=function(d){if(!d||!d.of)return m.apply(this,arguments);d=b.extend({},d);var e,q,t,v,s,x,B=b(d.of),D=b.position.getWithinInfo(d.within),E=b.position.getScrollInfo(D),z=(d.collision||"flip").split(" "),C={};return x=a(B),B[0].preventDefault&&(d.at="left top"),q=x.width,t=x.height,v=x.offset,s=b.extend({},v),b.each(["my","at"],function(){var a,b,c=(d[this]||"").split(" ");1===c.length&&(c=f.test(c[0])?c.concat(["center"]):k.test(c[0])?["center"].concat(c):
["center","center"]);c[0]=f.test(c[0])?c[0]:"center";c[1]=k.test(c[1])?c[1]:"center";a=l.exec(c[0]);b=l.exec(c[1]);C[this]=[a?a[0]:0,b?b[0]:0];d[this]=[n.exec(c[0])[0],n.exec(c[1])[0]]}),1===z.length&&(z[1]=z[0]),"right"===d.at[0]?s.left+=q:"center"===d.at[0]&&(s.left+=q/2),"bottom"===d.at[1]?s.top+=t:"center"===d.at[1]&&(s.top+=t/2),e=c(C.at,q,t),s.left+=e[0],s.top+=e[1],this.each(function(){var a,f,k=b(this),n=k.outerWidth(),l=k.outerHeight(),m=parseInt(b.css(this,"marginLeft"),10)||0,x=parseInt(b.css(this,
"marginTop"),10)||0,F=n+m+(parseInt(b.css(this,"marginRight"),10)||0)+E.width,G=l+x+(parseInt(b.css(this,"marginBottom"),10)||0)+E.height,r=b.extend({},s),A=c(C.my,k.outerWidth(),k.outerHeight());"right"===d.my[0]?r.left-=n:"center"===d.my[0]&&(r.left-=n/2);"bottom"===d.my[1]?r.top-=l:"center"===d.my[1]&&(r.top-=l/2);r.left+=A[0];r.top+=A[1];b.support.offsetFractions||(r.left=h(r.left),r.top=h(r.top));a={marginLeft:m,marginTop:x};b.each(["left","top"],function(f,c){b.ui.position[z[f]]&&b.ui.position[z[f]][c](r,
{targetWidth:q,targetHeight:t,elemWidth:n,elemHeight:l,collisionPosition:a,collisionWidth:F,collisionHeight:G,offset:[e[0]+A[0],e[1]+A[1]],my:d.my,at:d.at,within:D,elem:k})});d.using&&(f=function(a){var b=v.left-r.left,f=b+q-n,c=v.top-r.top,e=c+t-l,h={target:{element:B,left:v.left,top:v.top,width:q,height:t},element:{element:k,left:r.left,top:r.top,width:n,height:l},horizontal:0>f?"left":0<b?"right":"center",vertical:0>e?"top":0<c?"bottom":"middle"};n>q&&q>g(b+f)&&(h.horizontal="center");l>t&&t>g(c+
e)&&(h.vertical="middle");h.important=p(g(b),g(f))>p(g(c),g(e))?"horizontal":"vertical";d.using.call(this,a,h)});k.offset(b.extend(r,{using:f}))})};b.ui.position={fit:{left:function(a,b){var d,f=b.within,c=f.isWindow?f.scrollLeft:f.offset.left,f=f.width,g=a.left-b.collisionPosition.marginLeft,e=c-g,h=g+b.collisionWidth-f-c;b.collisionWidth>f?0<e&&0>=h?(d=a.left+e+b.collisionWidth-f-c,a.left+=e-d):a.left=0<h&&0>=e?c:e>h?c+f-b.collisionWidth:c:0<e?a.left+=e:0<h?a.left-=h:a.left=p(a.left-g,a.left)},
top:function(a,b){var d,f=b.within,f=f.isWindow?f.scrollTop:f.offset.top,c=b.within.height,g=a.top-b.collisionPosition.marginTop,e=f-g,h=g+b.collisionHeight-c-f;b.collisionHeight>c?0<e&&0>=h?(d=a.top+e+b.collisionHeight-c-f,a.top+=e-d):a.top=0<h&&0>=e?f:e>h?f+c-b.collisionHeight:f:0<e?a.top+=e:0<h?a.top-=h:a.top=p(a.top-g,a.top)}},flip:{left:function(a,b){var d,f,c=b.within,e=c.offset.left+c.scrollLeft,p=c.width,c=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,k=h-c,
h=h+b.collisionWidth-p-c,n="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];0>k?(d=a.left+n+l+m+b.collisionWidth-p-e,(0>d||g(k)>d)&&(a.left+=n+l+m)):0<h&&(f=a.left-b.collisionPosition.marginLeft+n+l+m-c,(0<f||h>g(f))&&(a.left+=n+l+m))},top:function(a,b){var d,f,c=b.within,e=c.offset.top+c.scrollTop,p=c.height,c=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,k=h-c,h=h+b.collisionHeight-
p-c,n="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,l="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,m=-2*b.offset[1];0>k?(f=a.top+n+l+m+b.collisionHeight-p-e,a.top+n+l+m>k&&(0>f||g(k)>f)&&(a.top+=n+l+m)):0<h&&(d=a.top-b.collisionPosition.marginTop+n+l+m-c,a.top+n+l+m>h&&(0<d||h>g(d))&&(a.top+=n+l+m))}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,arguments)},top:function(){b.ui.position.flip.top.apply(this,
arguments);b.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,d,f,c,g=document.getElementsByTagName("body")[0];f=document.createElement("div");a=document.createElement(g?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&b.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(c in d)a.style[c]=d[c];a.appendChild(f);d=g||document.documentElement;d.insertBefore(a,d.firstChild);f.style.cssText="position: absolute; left: 10.7432222px;";
f=b(f).offset().left;b.support.offsetFractions=10<f&&11>f;a.innerHTML="";d.removeChild(a)})()})(jQuery);
(function(b){b.widget("ui.draggable",b.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(e){var c=this.options;return this.helper||c.disabled||0<b(e.target).closest(".ui-resizable-handle").length?
!1:(this.handle=this._getHandle(e),this.handle?(b(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){b("\x3cdiv class\x3d'ui-draggable-iframeFix' style\x3d'background: #fff;'\x3e\x3c/div\x3e").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(b(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var c=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,b.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,
c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!c){var a=this._uiHash();if(!1===this._trigger("drag",e,a))return this._mouseUp({}),!1;this.position=a.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),b.ui.ddmanager&&
b.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var c=this,a=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(a=b.ui.ddmanager.drop(this,e)),this.dropped&&(a=this.dropped,this.dropped=!1),"original"!==this.options.helper||b.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?b(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",e)&&c._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1):!1},_mouseUp:function(e){return b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,e),b.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?
!!b(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var c=this.options;e=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[e])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_adjustOffsetFromHelper:function(e){"string"==
typeof e&&(e=e.split(" "));b.isArray(e)&&(e={left:+e[0],top:+e[1]||0});"left"in e&&(this.offset.click.left=e.left+this.margins.left);"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left);"top"in e&&(this.offset.click.top=e.top+this.margins.top);"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
b.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var b=this.element.position();
return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,c,a,d=this.options;return d.containment?"window"===d.containment?(this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top],void 0):"document"===d.containment?(this.containment=[0,0,b(document).width()-this.helperProportions.width-this.margins.left,(b(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):d.containment.constructor===Array?(this.containment=d.containment,void 0):("parent"===d.containment&&(d.containment=this.helper[0].parentNode),c=b(d.containment),a=c[0],a&&(e="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),
10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(e?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=c),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,c){c||(c=this.position);var a="absolute"===e?1:-1,d="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:d.scrollTop(),left:d.scrollLeft()}),{top:c.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===
this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*a,left:c.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*a}},_generatePosition:function(e){var c,a,d,p,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=e.pageX,k=e.pageY;return this.offset.scroll||(this.offset.scroll=
{top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(a=this.relative_container.offset(),c=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):c=this.containment,e.pageX-this.offset.click.left<c[0]&&(f=c[0]+this.offset.click.left),e.pageY-this.offset.click.top<c[1]&&(k=c[1]+this.offset.click.top),e.pageX-this.offset.click.left>c[2]&&(f=c[2]+this.offset.click.left),e.pageY-this.offset.click.top>
c[3]&&(k=c[3]+this.offset.click.top)),g.grid&&(d=g.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,k=c?d-this.offset.click.top>=c[1]||d-this.offset.click.top>c[3]?d:d-this.offset.click.top>=c[1]?d-g.grid[1]:d+g.grid[1]:d,p=g.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,f=c?p-this.offset.click.left>=c[0]||p-this.offset.click.left>c[2]?p:p-this.offset.click.left>=c[0]?p-g.grid[0]:p+g.grid[0]:
p)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(e,c,a){return a=a||this._uiHash(),b.ui.plugin.call(this,e,[c,a]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),b.Widget.prototype._trigger.call(this,e,c,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(e,c){var a=b(this).data("ui-draggable"),d=a.options,p=b.extend({},c,{item:a.element});a.sortables=
[];b(d.connectToSortable).each(function(){var d=b.data(this,"ui-sortable");d&&!d.options.disabled&&(a.sortables.push({instance:d,shouldRevert:d.options.revert}),d.refreshPositions(),d._trigger("activate",e,p))})},stop:function(e,c){var a=b(this).data("ui-draggable"),d=b.extend({},c,{item:a.element});b.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),
this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,d))})},drag:function(e,c){var a=b(this).data("ui-draggable"),d=this;b.each(a.sortables,function(){var p=!1,g=this;this.instance.positionAbs=a.positionAbs;this.instance.helperProportions=a.helperProportions;this.instance.offset.click=a.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&
(p=!0,b.each(a.sortables,function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&b.contains(g.instance.element[0],this.instance.element[0])&&(p=!1),p}));p?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(d).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=
this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",e),a.dropped=
this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),
a._trigger("fromSortable",e),a.dropped=!1)})}});b.ui.plugin.add("draggable","cursor",{start:function(){var e=b("body"),c=b(this).data("ui-draggable").options;e.css("cursor")&&(c._cursor=e.css("cursor"));e.css("cursor",c.cursor)},stop:function(){var e=b(this).data("ui-draggable").options;e._cursor&&b("body").css("cursor",e._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(e,c){var a=b(c.helper),d=b(this).data("ui-draggable").options;a.css("opacity")&&(d._opacity=a.css("opacity"));a.css("opacity",
d.opacity)},stop:function(e,c){var a=b(this).data("ui-draggable").options;a._opacity&&b(c.helper).css("opacity",a._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(){var e=b(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var c=b(this).data("ui-draggable"),a=c.options,d=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(a.axis&&"x"===a.axis||(c.overflowOffset.top+
c.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?c.scrollParent[0].scrollTop=d=c.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-c.overflowOffset.top<a.scrollSensitivity&&(c.scrollParent[0].scrollTop=d=c.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?c.scrollParent[0].scrollLeft=d=c.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-c.overflowOffset.left<a.scrollSensitivity&&(c.scrollParent[0].scrollLeft=
d=c.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(e.pageY-b(document).scrollTop()<a.scrollSensitivity?d=b(document).scrollTop(b(document).scrollTop()-a.scrollSpeed):b(window).height()-(e.pageY-b(document).scrollTop())<a.scrollSensitivity&&(d=b(document).scrollTop(b(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(e.pageX-b(document).scrollLeft()<a.scrollSensitivity?d=b(document).scrollLeft(b(document).scrollLeft()-a.scrollSpeed):b(window).width()-(e.pageX-b(document).scrollLeft())<
a.scrollSensitivity&&(d=b(document).scrollLeft(b(document).scrollLeft()+a.scrollSpeed))));!1!==d&&b.ui.ddmanager&&!a.dropBehaviour&&b.ui.ddmanager.prepareOffsets(c,e)}});b.ui.plugin.add("draggable","snap",{start:function(){var e=b(this).data("ui-draggable"),c=e.options;e.snapElements=[];b(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var a=b(this),d=a.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),
top:d.top,left:d.left})})},drag:function(e,c){var a,d,p,g,h,f,k,l,n,q,m=b(this).data("ui-draggable"),w=m.options,u=w.snapTolerance,y=c.offset.left,t=y+m.helperProportions.width,v=c.offset.top,s=v+m.helperProportions.height;for(n=m.snapElements.length-1;0<=n;n--)h=m.snapElements[n].left,f=h+m.snapElements[n].width,k=m.snapElements[n].top,l=k+m.snapElements[n].height,h-u>t||y>f+u||k-u>s||v>l+u||!b.contains(m.snapElements[n].item.ownerDocument,m.snapElements[n].item)?(m.snapElements[n].snapping&&m.options.snap.release&&
m.options.snap.release.call(m.element,e,b.extend(m._uiHash(),{snapItem:m.snapElements[n].item})),m.snapElements[n].snapping=!1):("inner"!==w.snapMode&&(a=u>=Math.abs(k-s),d=u>=Math.abs(l-v),p=u>=Math.abs(h-t),g=u>=Math.abs(f-y),a&&(c.position.top=m._convertPositionTo("relative",{top:k-m.helperProportions.height,left:0}).top-m.margins.top),d&&(c.position.top=m._convertPositionTo("relative",{top:l,left:0}).top-m.margins.top),p&&(c.position.left=m._convertPositionTo("relative",{top:0,left:h-m.helperProportions.width}).left-
m.margins.left),g&&(c.position.left=m._convertPositionTo("relative",{top:0,left:f}).left-m.margins.left)),q=a||d||p||g,"outer"!==w.snapMode&&(a=u>=Math.abs(k-v),d=u>=Math.abs(l-s),p=u>=Math.abs(h-y),g=u>=Math.abs(f-t),a&&(c.position.top=m._convertPositionTo("relative",{top:k,left:0}).top-m.margins.top),d&&(c.position.top=m._convertPositionTo("relative",{top:l-m.helperProportions.height,left:0}).top-m.margins.top),p&&(c.position.left=m._convertPositionTo("relative",{top:0,left:h}).left-m.margins.left),
g&&(c.position.left=m._convertPositionTo("relative",{top:0,left:f-m.helperProportions.width}).left-m.margins.left)),!m.snapElements[n].snapping&&(a||d||p||g||q)&&m.options.snap.snap&&m.options.snap.snap.call(m.element,e,b.extend(m._uiHash(),{snapItem:m.snapElements[n].item})),m.snapElements[n].snapping=a||d||p||g||q)}});b.ui.plugin.add("draggable","stack",{start:function(){var e,c=this.data("ui-draggable").options,c=b.makeArray(b(c.stack)).sort(function(a,d){return(parseInt(b(a).css("zIndex"),10)||
0)-(parseInt(b(d).css("zIndex"),10)||0)});c.length&&(e=parseInt(b(c[0]).css("zIndex"),10)||0,b(c).each(function(a){b(this).css("zIndex",e+a)}),this.css("zIndex",e+c.length))}});b.ui.plugin.add("draggable","zIndex",{start:function(e,c){var a=b(c.helper),d=b(this).data("ui-draggable").options;a.css("zIndex")&&(d._zIndex=a.css("zIndex"));a.css("zIndex",d.zIndex)},stop:function(e,c){var a=b(this).data("ui-draggable").options;a._zIndex&&b(c.helper).css("zIndex",a._zIndex)}})})(jQuery);
(function(b){function e(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}b.widget("ui.resizable",b.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var a,d,c,g,e,f=this,k=this.options;if(this.element.addClass("ui-resizable"),
b.extend(this,{_aspectRatio:!!k.aspectRatio,aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(b("\x3cdiv class\x3d'ui-wrapper' style\x3d'overflow: hidden;'\x3e\x3c/div\x3e").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),
left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),
this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=k.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),
this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");a=this.handles.split(",");this.handles={};for(d=0;a.length>d;d++)c=b.trim(a[d]),e="ui-resizable-"+c,g=b("\x3cdiv class\x3d'ui-resizable-handle "+e+"'\x3e\x3c/div\x3e"),g.css({zIndex:k.zIndex}),"se"===c&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[c]=".ui-resizable-"+c,this.element.append(g)}this._renderAxis=function(a){var d,f,c,g;a=a||this.element;for(d in this.handles)this.handles[d].constructor===
String&&(this.handles[d]=b(this.handles[d],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(f=b(this.handles[d],this.element),g=/sw|ne|nw|se|n|s/.test(d)?f.outerHeight():f.outerWidth(),c=["padding",/ne|nw|n/.test(d)?"Top":/se|sw|s/.test(d)?"Bottom":/^e$/.test(d)?"Right":"Left"].join(""),a.css(c,g),this._proportionallyResize()),b(this.handles[d]).length};this._renderAxis(this.element);this._handles=b(".ui-resizable-handle",this.element).disableSelection();
this._handles.mouseover(function(){f.resizing||(this.className&&(g=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),f.axis=g&&g[1]?g[1]:"se")});k.autoHide&&(this._handles.hide(),b(this.element).addClass("ui-resizable-autohide").mouseenter(function(){k.disabled||(b(this).removeClass("ui-resizable-autohide"),f._handles.show())}).mouseleave(function(){k.disabled||f.resizing||(b(this).addClass("ui-resizable-autohide"),f._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();
var a,d=function(a){b(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(d(this.element),a=this.element,this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")}).insertAfter(a),a.remove()),this.originalElement.css("resize",this.originalResizeStyle),d(this.originalElement),
this},_mouseCapture:function(a){var d,c,g=!1;for(d in this.handles)c=b(this.handles[d])[0],(c===a.target||b.contains(c,a.target))&&(g=!0);return!this.options.disabled&&g},_mouseStart:function(a){var d,c,g,h=this.options,f=this.element.position(),k=this.element;return this.resizing=!0,/absolute/.test(k.css("position"))?k.css({position:"absolute",top:k.css("top"),left:k.css("left")}):k.is(".ui-draggable")&&k.css({position:"absolute",top:f.top,left:f.left}),this._renderProxy(),d=e(this.helper.css("left")),
c=e(this.helper.css("top")),h.containment&&(d+=b(h.containment).scrollLeft()||0,c+=b(h.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:c},this.size=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.originalSize=this._helper?{width:k.outerWidth(),height:k.outerHeight()}:{width:k.width(),height:k.height()},this.originalPosition={left:d,top:c},this.sizeDiff={width:k.outerWidth()-k.width(),height:k.outerHeight()-
k.height()},this.originalMousePosition={left:a.pageX,top:a.pageY},this.aspectRatio="number"==typeof h.aspectRatio?h.aspectRatio:this.originalSize.width/this.originalSize.height||1,g=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===g?this.axis+"-resize":g),k.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(a){var d,c=this.helper,g={},e=this.originalMousePosition,f=this.position.top,k=this.position.left,l=this.size.width,n=this.size.height,
q=a.pageX-e.left||0,e=a.pageY-e.top||0,m=this._change[this.axis];return m?(d=m.apply(this,[a,q,e]),this._updateVirtualBoundaries(a.shiftKey),(this._aspectRatio||a.shiftKey)&&(d=this._updateRatio(d,a)),d=this._respectSize(d,a),this._updateCache(d),this._propagate("resize",a),this.position.top!==f&&(g.top=this.position.top+"px"),this.position.left!==k&&(g.left=this.position.left+"px"),this.size.width!==l&&(g.width=this.size.width+"px"),this.size.height!==n&&(g.height=this.size.height+"px"),c.css(g),
!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(g)||this._trigger("resize",a,this.ui()),!1):!1},_mouseStop:function(a){this.resizing=!1;var d,c,g,e,f,k,l,n=this.options;return this._helper&&(d=this._proportionallyResizeElements,c=d.length&&/textarea/i.test(d[0].nodeName),g=c&&b.ui.hasScroll(d[0],"left")?0:this.sizeDiff.height,e=c?0:this.sizeDiff.width,f={width:this.helper.width()-e,height:this.helper.height()-g},k=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,l=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null,n.animate||this.element.css(b.extend(f,{top:l,left:k})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!n.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",a),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,
e,g,h,f;f=this.options;f={minWidth:c(f.minWidth)?f.minWidth:0,maxWidth:c(f.maxWidth)?f.maxWidth:1/0,minHeight:c(f.minHeight)?f.minHeight:0,maxHeight:c(f.maxHeight)?f.maxHeight:1/0};(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,g=f.minWidth/this.aspectRatio,e=f.maxHeight*this.aspectRatio,h=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),g>f.minHeight&&(f.minHeight=g),f.maxWidth>e&&(f.maxWidth=e),f.maxHeight>h&&(f.maxHeight=h));this._vBoundaries=f},_updateCache:function(a){this.offset=
this.helper.offset();c(a.left)&&(this.position.left=a.left);c(a.top)&&(this.position.top=a.top);c(a.height)&&(this.size.height=a.height);c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,e=this.size,g=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===g&&(a.left=b.left+(e.width-a.width),a.top=null),"nw"===g&&(a.top=b.top+(e.height-a.height),a.left=b.left+(e.width-a.width)),a},_respectSize:function(a){var b=
this._vBoundaries,e=this.axis,g=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,h=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=c(a.width)&&b.minWidth&&b.minWidth>a.width,k=c(a.height)&&b.minHeight&&b.minHeight>a.height,l=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height,q=/sw|nw|w/.test(e),e=/nw|ne|n/.test(e);return f&&(a.width=b.minWidth),k&&(a.height=b.minHeight),g&&(a.width=b.maxWidth),h&&(a.height=b.maxHeight),f&&q&&(a.left=l-b.minWidth),g&&q&&(a.left=l-b.maxWidth),
k&&e&&(a.top=n-b.minHeight),h&&e&&(a.top=n-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,e,h,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(h=this._proportionallyResizeElements[a],!this.borderDif){this.borderDif=[];c=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")];
e=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];for(b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(e[b],10)||0)}h.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||b("\x3cdiv style\x3d'overflow:hidden;'\x3e\x3c/div\x3e"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-
1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+
c}},se:function(a,d,c){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,d,c]))},sw:function(a,d,c){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,d,c]))},ne:function(a,d,c){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,d,c]))},nw:function(a,d,c){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,d,c]))}},_propagate:function(a,d){b.ui.plugin.call(this,a,[d,this.ui()]);
"resize"!==a&&this._trigger(a,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","animate",{stop:function(a){var d=b(this).data("ui-resizable"),c=d.options,e=d._proportionallyResizeElements,h=e.length&&/textarea/i.test(e[0].nodeName),f=h&&b.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=
{width:d.size.width-(h?0:d.sizeDiff.width),height:d.size.height-f},f=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(b.extend(h,k&&f?{top:k,left:f}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var f={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),
10)};e&&e.length&&b(e[0]).css({width:f.width,height:f.height});d._updateCache(f);d._propagate("resize",a)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var a,d,c,g,h,f,k,l=b(this).data("ui-resizable"),n=l.element,q=l.options.containment;(n=q instanceof b?q.get(0):/parent/.test(q)?n.parent().get(0):q)&&(l.containerElement=b(n),/document/.test(q)||q===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:b(document),left:0,top:0,width:b(document).width(),
height:b(document).height()||document.body.parentNode.scrollHeight}):(a=b(n),d=[],b(["Top","Right","Left","Bottom"]).each(function(b,f){d[b]=e(a.css("padding"+f))}),l.containerOffset=a.offset(),l.containerPosition=a.position(),l.containerSize={height:a.innerHeight()-d[3],width:a.innerWidth()-d[1]},c=l.containerOffset,g=l.containerSize.height,h=l.containerSize.width,f=b.ui.hasScroll(n,"left")?n.scrollWidth:h,k=b.ui.hasScroll(n)?n.scrollHeight:g,l.parentData={element:n,left:c.left,top:c.top,width:f,
height:k}))},resize:function(a){var d,c,e,h,f=b(this).data("ui-resizable");d=f.options;c=f.containerOffset;e=f.position;a=f._aspectRatio||a.shiftKey;h={top:0,left:0};var k=f.containerElement;k[0]!==document&&/static/.test(k.css("position"))&&(h=c);e.left<(f._helper?c.left:0)&&(f.size.width+=f._helper?f.position.left-c.left:f.position.left-h.left,a&&(f.size.height=f.size.width/f.aspectRatio),f.position.left=d.helper?c.left:0);e.top<(f._helper?c.top:0)&&(f.size.height+=f._helper?f.position.top-c.top:
f.position.top,a&&(f.size.width=f.size.height*f.aspectRatio),f.position.top=f._helper?c.top:0);f.offset.left=f.parentData.left+f.position.left;f.offset.top=f.parentData.top+f.position.top;d=Math.abs(f.offset.left-h.left+f.sizeDiff.width);c=Math.abs((f._helper?f.offset.top-h.top:f.offset.top-c.top)+f.sizeDiff.height);e=f.containerElement.get(0)===f.element.parent().get(0);h=/relative|absolute/.test(f.containerElement.css("position"));e&&h&&(d-=f.parentData.left);d+f.size.width>=f.parentData.width&&
(f.size.width=f.parentData.width-d,a&&(f.size.height=f.size.width/f.aspectRatio));c+f.size.height>=f.parentData.height&&(f.size.height=f.parentData.height-c,a&&(f.size.width=f.size.height*f.aspectRatio))},stop:function(){var a=b(this).data("ui-resizable"),d=a.options,c=a.containerOffset,e=a.containerPosition,h=a.containerElement,f=b(a.helper),k=f.offset(),l=f.outerWidth()-a.sizeDiff.width,f=f.outerHeight()-a.sizeDiff.height;a._helper&&!d.animate&&/relative/.test(h.css("position"))&&b(this).css({left:k.left-
e.left-c.left,width:l,height:f});a._helper&&!d.animate&&/static/.test(h.css("position"))&&b(this).css({left:k.left-e.left-c.left,width:l,height:f})}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var a=b(this).data("ui-resizable").options,d=function(a){b(a).each(function(){var a=b(this);a.data("ui-resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"!=typeof a.alsoResize||a.alsoResize.parentNode?
d(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],d(a.alsoResize)):b.each(a.alsoResize,function(a){d(a)})},resize:function(a,d){var c=b(this).data("ui-resizable"),e=c.options,h=c.originalSize,f=c.originalPosition,k={height:c.size.height-h.height||0,width:c.size.width-h.width||0,top:c.position.top-f.top||0,left:c.position.left-f.left||0},l=function(a,c){b(a).each(function(){var a=b(this),f=b(this).data("ui-resizable-alsoresize"),e={},g=c&&c.length?c:a.parents(d.originalElement[0]).length?
["width","height"]:["width","height","top","left"];b.each(g,function(a,b){var d=(f[b]||0)+(k[b]||0);d&&0<=d&&(e[b]=d||null)});a.css(e)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?l(e.alsoResize):b.each(e.alsoResize,function(a,b){l(a,b)})},stop:function(){b(this).removeData("resizable-alsoresize")}});b.ui.plugin.add("resizable","ghost",{start:function(){var a=b(this).data("ui-resizable"),d=a.options,c=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",
height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof d.ghost?d.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=b(this).data("ui-resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=b(this).data("ui-resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(){var a=b(this).data("ui-resizable"),
d=a.options,c=a.size,e=a.originalSize,h=a.originalPosition,f=a.axis,k="number"==typeof d.grid?[d.grid,d.grid]:d.grid,l=k[0]||1,n=k[1]||1,q=Math.round((c.width-e.width)/l)*l,c=Math.round((c.height-e.height)/n)*n,m=e.width+q,e=e.height+c,w=d.maxWidth&&m>d.maxWidth,u=d.maxHeight&&e>d.maxHeight,y=d.minWidth&&d.minWidth>m,t=d.minHeight&&d.minHeight>e;d.grid=k;y&&(m+=l);t&&(e+=n);w&&(m-=l);u&&(e-=n);/^(se|s|e)$/.test(f)?(a.size.width=m,a.size.height=e):/^(ne)$/.test(f)?(a.size.width=m,a.size.height=e,a.position.top=
h.top-c):/^(sw)$/.test(f)?(a.size.width=m,a.size.height=e,a.position.left=h.left-q):(a.size.width=m,a.size.height=e,a.position.top=h.top-c,a.position.left=h.left-q)}})})(jQuery);
(function(b){var e,c,a,d,p=function(){var a=b(this);setTimeout(function(){a.find(":ui-button").button("refresh")},1)},g=function(a){var d=a.name,c=a.form,e=b([]);return d&&(d=d.replace(/'/g,"\\'"),e=c?b(c).find("[name\x3d'"+d+"']"):b("[name\x3d'"+d+"']",a.ownerDocument).filter(function(){return!this.form})),e};b.widget("ui.button",{version:"1.10.3",defaultElement:"\x3cbutton\x3e",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+
this.eventNamespace).bind("reset"+this.eventNamespace,p);"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var h=this,f=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active";null===f.label&&(f.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);
this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter"+this.eventNamespace,function(){f.disabled||this===e&&b(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){f.disabled||b(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){f.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){h.buttonElement.addClass("ui-state-focus")}).bind("blur"+
this.eventNamespace,function(){h.buttonElement.removeClass("ui-state-focus")});k&&(this.element.bind("change"+this.eventNamespace,function(){d||h.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(b){f.disabled||(d=!1,c=b.pageX,a=b.pageY)}).bind("mouseup"+this.eventNamespace,function(b){f.disabled||(c!==b.pageX||a!==b.pageY)&&(d=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return f.disabled||d?!1:void 0}):"radio"===this.type?
this.buttonElement.bind("click"+this.eventNamespace,function(){if(f.disabled||d)return!1;b(this).addClass("ui-state-active");h.buttonElement.attr("aria-pressed","true");var a=h.element[0];g(a).not(a).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return f.disabled?!1:(b(this).addClass("ui-state-active"),e=this,h.document.one("mouseup",function(){e=null}),void 0)}).bind("mouseup"+
this.eventNamespace,function(){return f.disabled?!1:(b(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(a){return f.disabled?!1:((a.keyCode===b.ui.keyCode.SPACE||a.keyCode===b.ui.keyCode.ENTER)&&b(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));
this._setOption("disabled",f.disabled);this._resetButton()},_determineButtonType:function(){var a,b,d;this.type=this.element.is("[type\x3dcheckbox]")?"checkbox":this.element.is("[type\x3dradio]")?"radio":this.element.is("input")?"input":"button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for\x3d'"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),
this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),d=this.element.is(":checked"),d&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",d)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var a=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?g(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
d=b("\x3cspan\x3e\x3c/span\x3e",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),c=this.options.icons,e=c.primary&&c.secondary,g=[];c.primary||c.secondary?(this.options.text&&g.push("ui-button-text-icon"+(e?"s":c.primary?"-primary":"-secondary")),c.primary&&a.prepend("\x3cspan class\x3d'ui-button-icon-primary ui-icon "+c.primary+"'\x3e\x3c/span\x3e"),c.secondary&&a.append("\x3cspan class\x3d'ui-button-icon-secondary ui-icon "+c.secondary+"'\x3e\x3c/span\x3e"),
this.options.text||(g.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",b.trim(d)))):g.push("ui-button-text-only");a.addClass(g.join(" "))}});b.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type\x3dbutton], input[type\x3dsubmit], input[type\x3dreset], input[type\x3dcheckbox], input[type\x3dradio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===
a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var a="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},
_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(b){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};b.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var d=b(this).css(a).offset().top;
0>d&&b(this).css("top",a.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};
this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&b.fn.draggable&&this._makeDraggable();this.options.resizable&&b.fn.resizable&&this._makeResizable();this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=
this.options.appendTo;return a&&(a.jquery||a.nodeType)?b(a):this.document.find(a||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},
widget:function(){return this.uiDialog},disable:b.noop,enable:b.noop,close:function(a){var d=this;this._isOpen&&!1!==this._trigger("beforeClose",a)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||b(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",a)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
return c&&!b&&this._trigger("focus",a),c},open:function(){var a=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=b(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable();a._trigger("focus")}),this._trigger("open"),void 0)},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable"));
a.length||(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).focus()},_keepFocus:function(a){function d(){var a=this.document[0].activeElement;this.uiDialog[0]===a||b.contains(this.uiDialog[0],a)||this._focusTabbable()}a.preventDefault();d.call(this);this._delay(d)},_createWrapper:function(){this.uiDialog=b("\x3cdiv\x3e").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,
role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(a){if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE)return a.preventDefault(),this.close(a),void 0;if(a.keyCode===b.ui.keyCode.TAB){var d=this.uiDialog.find(":tabbable"),c=d.filter(":first"),d=d.filter(":last");a.target!==d[0]&&a.target!==this.uiDialog[0]||a.shiftKey?a.target!==c[0]&&a.target!==this.uiDialog[0]||!a.shiftKey||(d.focus(1),a.preventDefault()):(c.focus(1),
a.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var a;this.uiDialogTitlebar=b("\x3cdiv\x3e").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(a){b(a.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}});
this.uiDialogTitlebarClose=b("\x3cbutton\x3e\x3c/button\x3e").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});a=b("\x3cspan\x3e").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(a);this.uiDialog.attr({"aria-labelledby":a.attr("id")})},_title:function(a){this.options.title||
a.html("\x26#160;");a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=b("\x3cdiv\x3e").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=b("\x3cdiv\x3e").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var a=this,d=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),b.isEmptyObject(d)||b.isArray(d)&&!d.length?(this.uiDialog.removeClass("ui-dialog-buttons"),
void 0):(b.each(d,function(d,c){var e,f;c=b.isFunction(c)?{click:c,text:d}:c;c=b.extend({type:"button"},c);e=c.click;c.click=function(){e.apply(a.element[0],arguments)};f={icons:c.icons,text:c.showText};delete c.icons;delete c.showText;b("\x3cbutton\x3e\x3c/button\x3e",c).button(f).appendTo(a.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var d=this,
c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(c,e){b(this).addClass("ui-dialog-dragging");d._blockFrames();d._trigger("dragStart",c,a(e))},drag:function(b,c){d._trigger("drag",b,a(c))},stop:function(e,h){c.position=[h.position.left-d.document.scrollLeft(),h.position.top-d.document.scrollTop()];b(this).removeClass("ui-dialog-dragging");d._unblockFrames();d._trigger("dragStop",e,a(h))}})},
_makeResizable:function(){function a(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var d=this,c=this.options,e=c.resizable,h=this.uiDialog.css("position"),e="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:c.maxWidth,maxHeight:c.maxHeight,minWidth:c.minWidth,minHeight:this._minHeight(),handles:e,start:function(c,e){b(this).addClass("ui-dialog-resizing");
d._blockFrames();d._trigger("resizeStart",c,a(e))},resize:function(b,c){d._trigger("resize",b,a(c))},stop:function(f,e){c.height=b(this).height();c.width=b(this).width();b(this).removeClass("ui-dialog-resizing");d._unblockFrames();d._trigger("resizeStop",f,a(e))}}).css("position",h)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show();this.uiDialog.position(this.options.position);
a||this.uiDialog.hide()},_setOptions:function(a){var d=this,p=!1,g={};b.each(a,function(a,b){d._setOption(a,b);a in e&&(p=!0);a in c&&(g[a]=b)});p&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,e,h=this.uiDialog;"dialogClass"===a&&h.removeClass(this.options.dialogClass).addClass(b);"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),
"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=h.is(":data(ui-draggable)"),c&&!b&&h.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(e=h.is(":data(ui-resizable)"),e&&!b&&h.resizable("destroy"),e&&"string"==typeof b&&h.resizable("option","handles",b),e||!1===b||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,e=this.options;this.element.show().css({width:"auto",
minHeight:0,maxHeight:"none",height:0});e.minWidth>e.width&&(e.width=e.minWidth);a=this.uiDialog.css({height:"auto",width:e.width}).outerHeight();b=Math.max(0,e.minHeight-a);c="number"==typeof e.maxHeight?Math.max(0,e.maxHeight-a):"none";"auto"===e.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,e.height-a));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=
this.document.find("iframe").map(function(){var a=b(this);return b("\x3cdiv\x3e").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return!!$(a.target).closest(".ui-dialog, .ui-datepicker, .select2-drop").length},_createOverlay:function(){if(this.options.modal){var a=this,c=this.widgetFullName;b.ui.dialog.overlayInstances||
this._delay(function(){b.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(e){a._allowInteraction(e)||(e.preventDefault(),b(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})});this.overlay=b("\x3cdiv\x3e").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});b.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(b.ui.dialog.overlayInstances--,b.ui.dialog.overlayInstances||
this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}});b.ui.dialog.overlayInstances=0;!1!==b.uiBackCompat&&b.widget("ui.dialog",b.ui.dialog,{_position:function(){var a,c=this.options.position,e=[],g=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(e=c.split?c.split(" "):[c[0],c[1]],1===e.length&&(e[1]=e[0]),b.each(["left","top"],function(a,b){+e[a]===e[a]&&(g[a]=e[a],e[a]=b)}),c={my:e[0]+(0>g[0]?g[0]:"+"+g[0])+" "+e[1]+(0>g[1]?g[1]:"+"+g[1]),at:e.join(" ")}),
c=b.extend({},b.ui.dialog.prototype.options.position,c)):c=b.ui.dialog.prototype.options.position;(a=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(c);a||this.uiDialog.hide()}})})(jQuery);(function(c,q){function l(a){return 1<a.hash.length&&decodeURIComponent(a.href.replace(m,""))===decodeURIComponent(location.href.replace(m,""))}var p=0,m=/#.*$/;c.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var a=this,b=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
b.collapsible).delegate(".ui-tabs-nav \x3e li","mousedown"+this.eventNamespace,function(a){c(this).is(".ui-state-disabled")&&a.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){c(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();b.active=this._initialActive();c.isArray(b.disabled)&&(b.disabled=c.unique(b.disabled.concat(c.map(this.tabs.filter(".ui-state-disabled"),function(b){return a.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&
this.anchors.length?this._findActive(b.active):c();this._refresh();this.active.length&&this.load(b.active)},_initialActive:function(){var a=this.options.active,b=this.options.collapsible,d=location.hash.substring(1);if(null===a&&(d&&this.tabs.each(function(b,f){if(c(f).attr("aria-controls")===d)return a=b,!1}),null===a&&(a=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===a||-1===a))a=this.tabs.length?0:!1;!1!==a&&(a=this.tabs.index(this.tabs.eq(a)),-1===a&&(a=b?!1:0));!b&&(!1===a&&this.anchors.length)&&
(a=0);return a},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?c():this._getPanelForTab(this.active)}},_tabKeydown:function(a){var b=c(this.document[0].activeElement).closest("li"),d=this.tabs.index(b),e=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:d++;break;case c.ui.keyCode.UP:case c.ui.keyCode.LEFT:e=!1;d--;break;case c.ui.keyCode.END:d=this.anchors.length-1;break;case c.ui.keyCode.HOME:d=0;break;case c.ui.keyCode.SPACE:a.preventDefault();
clearTimeout(this.activating);this._activate(d);return;case c.ui.keyCode.ENTER:a.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}a.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);a.ctrlKey||(b.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(a){!this._handlePageNav(a)&&(a.ctrlKey&&
a.keyCode===c.ui.keyCode.UP)&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){if(a.altKey&&a.keyCode===c.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(a.altKey&&a.keyCode===c.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(a,b){function d(){a>e&&(a=0);0>a&&(a=e);return a}for(var e=this.tabs.length-1;-1!==c.inArray(d(),this.options.disabled);)a=b?a+1:a-1;return a},
_focusNextTab:function(a,b){a=this._findNextTab(a,b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),!b&&!1===this.options.active&&this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++p},_sanitizeSelector:function(a){return a?
a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$\x26"):""},refresh:function(){var a=this.options,b=this.tablist.children(":has(a[href])");a.disabled=c.map(b.filter(".ui-state-disabled"),function(a){return b.index(a)});this._processTabs();!1===a.active||!this.anchors.length?(a.active=!1,this.active=c()):this.active.length&&!c.contains(this.tablist[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=c()):this._activate(this._findNextTab(Math.max(0,a.active-1),!1)):a.active=
this.tabs.index(this.active);this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("\x3e li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return c("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
c();this.anchors.each(function(b,d){var e,f,g,h=c(d).uniqueId().attr("id"),k=c(d).closest("li"),n=k.attr("aria-controls");l(d)?(e=d.hash,f=a.element.find(a._sanitizeSelector(e))):(g=a._tabId(k),e="#"+g,f=a.element.find(e),f.length||(f=a._createPanel(g),f.insertAfter(a.panels[b-1]||a.tablist)),f.attr("aria-live","polite"));f.length&&(a.panels=a.panels.add(f));n&&k.data("ui-tabs-aria-controls",n);k.attr({"aria-controls":e.substring(1),"aria-labelledby":h});f.attr("aria-labelledby",h)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(a){return c("\x3cdiv\x3e").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(a){c.isArray(a)&&(a.length?a.length===this.anchors.length&&(a=!0):a=!1);for(var b=0,d;d=this.tabs[b];b++)!0===a||-1!==c.inArray(b,a)?c(d).addClass("ui-state-disabled").attr("aria-disabled","true"):c(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=a},_setupEvents:function(a){var b={click:function(a){a.preventDefault()}};a&&c.each(a.split(" "),function(a,c){b[c]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,b);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var b,d=this.element.parent();"fill"===a?(b=d.height(),b-=this.element.outerHeight()-this.element.height(),
this.element.siblings(":visible").each(function(){var a=c(this),d=a.css("position");"absolute"===d||"fixed"===d||(b-=a.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){b-=c(this).outerHeight(!0)}),this.panels.each(function(){c(this).height(Math.max(0,b-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===a&&(b=0,this.panels.each(function(){b=Math.max(b,c(this).height("").height())}).height(b))},_eventHandler:function(a){var b=this.options,d=this.active,
e=c(a.currentTarget).closest("li"),f=e[0]===d[0],g=f&&b.collapsible,h=g?c():this._getPanelForTab(e),k=!d.length?c():this._getPanelForTab(d),d={oldTab:d,oldPanel:k,newTab:g?c():e,newPanel:h};a.preventDefault();if(!e.hasClass("ui-state-disabled")&&!e.hasClass("ui-tabs-loading")&&!this.running&&!(f&&!b.collapsible||!1===this._trigger("beforeActivate",a,d)))b.active=g?!1:this.tabs.index(e),this.active=f?c():e,this.xhr&&this.xhr.abort(),!k.length&&!h.length&&c.error("jQuery UI Tabs: Mismatching fragment identifier."),
h.length&&this.load(this.tabs.index(e),a),this._toggle(a,d)},_toggle:function(a,b){function d(){f.running=!1;f._trigger("activate",a,b)}function e(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=b.newPanel,h=b.oldPanel;this.running=!0;h.length&&this.options.hide?this._hide(h,this.options.hide,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
h.hide(),e());h.attr({"aria-expanded":"false","aria-hidden":"true"});b.oldTab.attr("aria-selected","false");g.length&&h.length?b.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1);g.attr({"aria-expanded":"true","aria-hidden":"false"});b.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(a){a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),a=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:c.noop}))},_findActive:function(a){return!1===a?c():this.tabs.eq(a)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$\x3d'"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
this.tabs.add(this.panels).each(function(){c.data(this,"ui-tabs-destroy")?c(this).remove():c(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var a=c(this),b=a.data("ui-tabs-aria-controls");
b?a.attr("aria-controls",b).removeData("ui-tabs-aria-controls"):a.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var b=this.options.disabled;!1!==b&&(void 0===a?b=!1:(a=this._getIndex(a),b=c.isArray(b)?c.map(b,function(b){return b!==a?b:null}):c.map(this.tabs,function(b,c){return c!==a?c:null})),this._setupDisabled(b))},disable:function(a){var b=this.options.disabled;if(!0!==b){if(void 0===a)b=!0;else{a=this._getIndex(a);
if(-1!==c.inArray(a,b))return;b=c.isArray(b)?c.merge([a],b).sort():[a]}this._setupDisabled(b)}},load:function(a,b){a=this._getIndex(a);var d=this,e=this.tabs.eq(a),f=e.find(".ui-tabs-anchor"),g=this._getPanelForTab(e),h={tab:e,panel:g};if(!l(f[0])&&(this.xhr=c.ajax(this._ajaxSettings(f,b,h)))&&"canceled"!==this.xhr.statusText)e.addClass("ui-tabs-loading"),g.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){g.html(a);d._trigger("load",b,h)},1)}).complete(function(a,b){setTimeout(function(){"abort"===
b&&d.panels.stop(!1,!0);e.removeClass("ui-tabs-loading");g.removeAttr("aria-busy");a===d.xhr&&delete d.xhr},1)})},_ajaxSettings:function(a,b,d){var e=this;return{url:a.attr("href"),beforeSend:function(a,g){return e._trigger("beforeLoad",b,c.extend({jqXHR:a,ajaxSettings:g},d))}}},_getPanelForTab:function(a){a=c(a).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}})})(jQuery);d3=function(){function sc(a){return null!=a&&!isNaN(a)}function zg(a){return a.length}function Md(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function da(){}function tc(){}function Ag(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function uc(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=Nd.length;d>c;++c){var e=Nd[c]+b;if(e in a)return e}}function G(){}function vc(){}function Od(a){function b(){for(var b,
d=c,h=-1,g=d.length;++h<g;)(b=d[h].on)&&b.apply(this,arguments);return a}var c=[],d=new da;return b.on=function(b,f){var h,g=d.get(b);return 2>arguments.length?g&&g.on:(g&&(g.on=null,c=c.slice(0,h=c.indexOf(g)).concat(c.slice(h+1)),d.remove(b)),f&&c.push(d.set(b,{on:f})),a)},b}function ra(){k.event.preventDefault()}function Pd(){for(var a,b=k.event;a=b.sourceEvent;)b=a;return b}function wc(a){for(var b=new vc,c=0,d=arguments.length;++c<d;)b[arguments[c]]=Od(b);return b.of=function(c,d){return function(h){try{var g=
h.sourceEvent=k.event;h.target=a;k.event=h;b[h.type].apply(c,d)}finally{k.event=g}}},b}function sa(a){return pb(a,F),a}function xc(a){return"function"==typeof a?a:function(){return yc(a,this)}}function Qd(a){return"function"==typeof a?a:function(){return zc(a,this)}}function Rd(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function h(){var c=b.apply(this,arguments);
null==c?this.removeAttribute(a):this.setAttribute(a,c)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=k.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?g:h:a.local?f:e}function Sd(a){return a.trim().replace(/\s+/g," ")}function Td(a){return RegExp("(?:^|\\s+)"+k.requote(a)+"(?:\\s+|$)","g")}function Ud(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,
arguments);++c<e;)a[c](this,d)}a=a.trim().split(/\s+/).map(Bg);var e=a.length;return"function"==typeof b?d:c}function Bg(a){var b=Td(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",Sd(e+" "+a))):c.setAttribute("class",Sd(e.replace(b," ")))}}function Vd(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==
d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function Wd(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function Xd(a){return"function"==typeof a?a:(a=k.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,
a)}}function Yd(a){return function(){return Zd(this,a)}}function Cg(a){return arguments.length||(a=k.ascending),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function ta(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],h=0,g=f.length;g>h;h++)(e=f[h])&&b(e,h,c);return a}function $d(a){return pb(a,ja),a}function Dg(a){var b,c;return function(d,e,f){d=a[f].update;var h=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<h;);return e}}function qb(){var a=this.__transition__;a&&++a.active}
function ae(a,b,c){function d(){var b=this[h];b&&(this.removeEventListener(a,b,b.$),delete this[h])}function e(){var f=m(b,ua(arguments));d.call(this);this.addEventListener(a,this[h]=f,f.$=c);f._=b}function f(){var b,c=RegExp("^__on([^.]+)"+k.requote(a)+"$"),d;for(d in this)if(b=d.match(c)){var f=this[d];this.removeEventListener(b[1],f,f.$);delete this[d]}}var h="__on"+a,g=a.indexOf("."),m=be;0<g&&(a=a.substring(0,g));var l=Ac.get(a);return l&&(a=l,m=Eg),g?b?e:d:b?G:f}function be(a,b){return function(c){var d=
k.event;k.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{k.event=d}}}function Eg(a,b){var c=be(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||c.call(this,a)}}function rb(){var a=".dragsuppress-"+ ++Fg,b="click"+a,c=k.select(P).on("touchmove"+a,ra).on("selectstart"+a,ra).on("dragstart"+a,ra),d=va.style,e=d[Bc];return d[Bc]="none",function(f){function h(){c.on(b,null)}c.on(a,null);d[Bc]=e;f&&(c.on(b,function(){ra();h()},!0),setTimeout(h,0))}}
function ce(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Cc&&(P.scrollX||P.scrollY)){var c=k.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();Cc=!(e.f||e.e);c.remove()}return Cc?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-
c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Da(a){return 1<a?T:-1>a?-T:Math.asin(a)}function de(a){return((a=Math.exp(a))-1/a)/2}function Dc(a){return((a=Math.exp(a))+1/a)/2}function ee(a){return(a=Math.sin(a/2))*a}function Pa(){}function Qa(a,b,c){return new Ec(a,b,c)}function Ec(a,b,c){this.h=a;this.s=b;this.l=c}function Fc(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?
0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=0.5>=c?c*(1+b):c+b-c*b,e=2*c-f,ea(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function Ra(a,b,c){return new sb(a,b,c)}function sb(a,b,c){this.h=a;this.c=b;this.l=c}function Gc(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),Sa(c,Math.cos(a*=C)*b,Math.sin(a)*b)}function Sa(a,b,c){return new tb(a,b,c)}function tb(a,b,c){this.l=a;this.a=b;this.b=c}function fe(a,b,c){a=(a+16)/116;b=a+b/500;c=a-c/200;return b=Hc(b)*ge,a=Hc(a)*he,c=Hc(c)*ie,ea(Ic(3.2404542*
b-1.5371385*a-0.4985314*c),Ic(-0.969266*b+1.8760108*a+0.041556*c),Ic(0.0556434*b-0.2040259*a+1.0572252*c))}function je(a,b,c){return 0<a?Ra(Math.atan2(c,b)*K,Math.sqrt(b*b+c*c),a):Ra(0/0,0/0,a)}function Hc(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Jc(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Ic(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function ub(a){return ea(a>>16,255&a>>8,255&a)+""}function ea(a,b,c){return new Kc(a,b,c)}function Kc(a,
b,c){this.r=a;this.g=b;this.b=c}function Ta(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ke(a,b,c){var d,e,f,h=0,g=0,m=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case "hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return b(Lc(e[0]),Lc(e[1]),Lc(e[2]))}return(f=vb.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(h=a.charAt(1),h+=h,g=a.charAt(2),g+=g,m=a.charAt(3),m+=m):7===a.length&&
(h=a.substring(1,3),g=a.substring(3,5),m=a.substring(5,7)),h=parseInt(h,16),g=parseInt(g,16),m=parseInt(m,16)),b(h,g,m))}function le(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),h=Math.max(a,b,c),g=h-f,m=(h+f)/2;return g?(e=0.5>m?g/(h+f):g/(2-h-f),d=a==h?(b-c)/g+(c>b?6:0):b==h?(c-a)/g+2:(a-b)/g+4,d*=60):(d=0/0,e=0<m&&1>m?0:d),Qa(d,e,m)}function me(a,b,c){a=Mc(a);b=Mc(b);c=Mc(c);var d=Jc((0.4124564*a+0.3575761*b+0.1804375*c)/ge),e=Jc((0.2126729*a+0.7151522*b+0.072175*c)/he);a=Jc((0.0193339*a+0.119192*
b+0.9503041*c)/ie);return Sa(116*e-16,500*(d-e),200*(e-a))}function Mc(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Lc(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function J(a){return"function"==typeof a?a:function(){return a}}function O(a){return a}function Nc(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Oc(b,c,a,d)}}function Oc(a,b,c,d){function e(){var a,b=m.status;if(!b&&m.responseText||
200<=b&&300>b||304===b){try{a=c.call(f,m)}catch(d){return h.error.call(f,d),void 0}h.load.call(f,a)}else h.error.call(f,m)}var f={},h=k.dispatch("beforesend","progress","load","error"),g={},m=new XMLHttpRequest,l=null;return!P.XDomainRequest||"withCredentials"in m||!/^(http(s)?:)?\/\//.test(a)||(m=new XDomainRequest),"onload"in m?m.onload=m.onerror=e:m.onreadystatechange=function(){3<m.readyState&&e()},m.onprogress=function(a){var b=k.event;k.event=a;try{h.progress.call(f,m)}finally{k.event=b}},f.header=
function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?g[a]:(null==b?delete g[a]:g[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(l=a,f):l},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(ua(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),m.open(c,a,!0),null==b||"accept"in g||(g.accept=
b+",*/*"),m.setRequestHeader)for(var k in g)m.setRequestHeader(k,g[k]);return null!=b&&m.overrideMimeType&&m.overrideMimeType(b),null!=l&&(m.responseType=l),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),h.beforesend.call(f,m),m.send(null==d?null:d),f},f.abort=function(){return m.abort(),f},k.rebind(f,h,"on"),null==d?f:f.get(Gg(d))}function Gg(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Pc(){var a=ne(),a=oe()-a;24<a?(isFinite(a)&&(clearTimeout(wb),wb=setTimeout(Pc,
a)),xb=0):(xb=1,pe(Pc))}function ne(){var a=Date.now();for(ka=yb;ka;)a>=ka.t&&(ka.f=ka.c(a-ka.t)),ka=ka.n;return a}function oe(){for(var a,b=yb,c=1/0;b;)b.f?b=a?a.n=b.n:yb=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return zb=a,c}function Qc(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Hg(a){return a+""}function Rc(){}function qe(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function Ab(a,b){a&&re.hasOwnProperty(a.type)&&re[a.type](a,b)}function Sc(a,b,c){var d=-1,e=a.length-c;for(b.lineStart();++d<
e;)c=a[d],b.point(c[0],c[1],c[2]);b.lineEnd()}function se(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Sc(a[c],b,1);b.polygonEnd()}function Ig(){function a(a,b){a*=C;b=b*C/2+D/4;var c=a-d,l=Math.cos(b),n=Math.sin(b),q=f*n,p=e*l+q*Math.cos(c),c=q*Math.sin(c);Ea.add(Math.atan2(c,p));d=a;e=l;f=n}var b,c,d,e,f;W.point=function(h,g){W.point=a;d=(b=h)*C;e=Math.cos(g=(c=g)*C/2+D/4);f=Math.sin(g)};W.lineEnd=function(){a(b,c)}}function Fa(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),
c*Math.sin(b),Math.sin(a)]}function Bb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Ua(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Tc(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Cb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Db(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function Eb(a){return[Math.atan2(a[1],a[0]),Da(a[2])]}function Fb(a,b){return E(a[0]-b[0])<y&&E(a[1]-b[1])<y}function Uc(a,b){a*=C;var c=Math.cos(b*=C);eb(c*
Math.cos(a),c*Math.sin(a),Math.sin(b))}function eb(a,b,c){++fb;la+=(a-la)/fb;ma+=(b-ma)/fb;fa+=(c-fa)/fb}function te(){function a(a,f){a*=C;var h=Math.cos(f*=C),g=h*Math.cos(a),h=h*Math.sin(a),m=Math.sin(f),l=Math.atan2(Math.sqrt((l=c*m-d*h)*l+(l=d*g-b*m)*l+(l=b*h-c*g)*l),b*g+c*h+d*m);Va+=l;Z+=l*(b+(b=g));$+=l*(c+(c=h));U+=l*(d+(d=m));eb(b,c,d)}var b,c,d;ba.point=function(e,f){e*=C;var h=Math.cos(f*=C);b=h*Math.cos(e);c=h*Math.sin(e);d=Math.sin(f);ba.point=a;eb(b,c,d)}}function ue(){ba.point=Uc}function Jg(){function a(a,
b){a*=C;var c=Math.cos(b*=C),l=c*Math.cos(a),c=c*Math.sin(a),n=Math.sin(b),q=e*n-f*c,p=f*l-d*n,k=d*c-e*l,s=Math.sqrt(q*q+p*p+k*k),t=d*l+e*c+f*n,v=s&&-(1<t?0:-1>t?D:Math.acos(t))/s,s=Math.atan2(s,t);wa+=v*q;xa+=v*p;ga+=v*k;Va+=s;Z+=s*(d+(d=l));$+=s*(e+(e=c));U+=s*(f+(f=n));eb(d,e,f)}var b,c,d,e,f;ba.point=function(h,g){b=h;c=g;ba.point=a;h*=C;var m=Math.cos(g*=C);d=m*Math.cos(h);e=m*Math.sin(h);f=Math.sin(g);eb(d,e,f)};ba.lineEnd=function(){a(b,c);ba.lineEnd=ue;ba.point=Uc}}function Wa(){return!0}
function ve(a,b,c,d,e){var f=[],h=[];if(a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(Fb(c,d)){e.lineStart();for(d=0;b>d;++d)e.point((c=a[d])[0],c[1]);return e.lineEnd(),void 0}b=new Gb(c,a,null,!0);c=new Gb(c,null,b,!1);b.o=c;f.push(b);h.push(c);b=new Gb(d,a,null,!1);c=new Gb(d,null,b,!0);b.o=c;f.push(b);h.push(c)}}),h.sort(b),we(f),we(h),f.length){a=0;b=c;for(c=h.length;c>a;++a)h[a].e=b=!b;for(var g,m=f[0];;){for(var l=m,n=!0;l.v;)if((l=l.n)===m)return;b=l.z;e.lineStart();
do{if(l.v=l.o.v=!0,l.e){if(n){a=0;for(c=b.length;c>a;++a)e.point((g=b[a])[0],g[1])}else d(l.x,l.n.x,1,e);l=l.n}else{if(n){b=l.p.z;for(a=b.length-1;0<=a;--a)e.point((g=b[a])[0],g[1])}else d(l.x,l.p.x,-1,e);l=l.p}l=l.o;b=l.z;n=!n}while(!l.v);e.lineEnd()}}}function we(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0];c.p=e}}function Gb(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function xe(a,b,c,d){return function(e,f){function h(b,c){var d=
e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function g(a,b){var c=e(a,b);v.point(c[0],c[1])}function m(){x.point=g;v.lineStart()}function l(){x.point=h;v.lineEnd()}function n(a,b){t.push([a,b]);var c=e(a,b);B.point(c[0],c[1])}function q(){B.lineStart();t=[]}function p(){n(t[0][0],t[0][1]);B.lineEnd();var a;a=B.clean();var b=z.buffer(),c=b.length;if(t.pop(),s.push(t),t=null,c){if(1&a){a=b[0];var d,c=a.length-1,b=-1;for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);return f.lineEnd(),void 0}1<c&&2&a&&b.push(b.pop().concat(b.shift()));
r.push(b.filter(Kg))}}var r,s,t,v=b(f),u=e.invert(d[0],d[1]),x={point:h,lineStart:m,lineEnd:l,polygonStart:function(){x.point=n;x.lineStart=q;x.lineEnd=p;r=[];s=[];f.polygonStart()},polygonEnd:function(){x.point=h;x.lineStart=m;x.lineEnd=l;r=k.merge(r);var a,b=u;a=s;var d=b[0],e=b[1],g=[Math.sin(d),-Math.cos(d),0],n=0,p=0;Ea.reset();for(var q=0,z=a.length;z>q;++q){var t=a[q],v=t.length;if(v)for(var B=t[0],w=B[0],b=B[1]/2+D/4,C=Math.sin(b),Ae=Math.cos(b),F=1;;){F===v&&(F=0);var b=t[F],Vc=b[0],J=b[1]/
2+D/4,K=Math.sin(J),J=Math.cos(J),H=Vc-w,G=E(H)>D,C=C*K;if(Ea.add(Math.atan2(C*Math.sin(H),Ae*J+C*Math.cos(H))),n+=G?H+(0<=H?V:-V):H,G^w>=d^Vc>=d)B=Ua(Fa(B),Fa(b)),Db(B),w=Ua(g,B),Db(w),w=(G^0<=H?-1:1)*Da(w[2]),(e>w||e===w&&(B[0]||B[1]))&&(p+=G^0<=H?1:-1);if(!F++)break;w=Vc;C=K;Ae=J;B=b}}a=(-y>n||y>n&&0>Ea)^1&p;r.length?ve(r,Lg,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd());f.polygonEnd();r=s=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},
z=Be(),B=b(z);return x}}function Kg(a){return 1<a.length}function Be(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,d){a.push([b,d])},lineEnd:G,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Lg(a,b){return(0>(a=a.x)[0]?a[1]-T-y:T-a[1])-(0>(b=b.x)[0]?b[1]-T-y:T-b[1])}function Mg(a){function b(a,b){return Math.cos(a)*Math.cos(b)>e}function c(a,b,c){var d=Fa(a),f=Fa(b),g=[1,0,0],f=Ua(d,f),h=Bb(f,f),d=
f[0],k=h-d*d;if(!k)return!c&&a;h=e*h/k;k=-e*d/k;d=Ua(g,f);g=Cb(g,h);f=Cb(f,k);Tc(g,f);f=Bb(g,d);h=Bb(d,d);k=f*f-h*(Bb(g,g)-1);if(!(0>k)){var v=Math.sqrt(k),k=Cb(d,(-f-v)/h);if(Tc(k,g),k=Eb(k),!c)return k;var u;c=a[0];var x=b[0];a=a[1];b=b[1];c>x&&(u=c,c=x,x=u);var z=x-c,B=E(z-D)<y,A=B||y>z;if(!B&&a>b&&(u=a,a=b,b=u),A?B?0<a+b^k[1]<(E(k[0]-c)<y?a:b):a<=k[1]&&k[1]<=b:z>D^(c<=k[0]&&k[0]<=x))return u=Cb(d,(-f+v)/h),Tc(u,g),[k,Eb(u)]}}function d(b,c){var d=f?a:D-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=
4:c>d&&(e|=8),e}var e=Math.cos(a),f=0<e,h=E(e)>y,g=Wc(a,6*C);return xe(b,function(a){var e,g,k,p,r;return{lineStart:function(){p=k=!1;r=1},point:function(s,t){var v,u=[s,t],x=b(s,t),z=f?x?0:d(s,t):x?d(s+(0>s?D:-D),t):0;if(!e&&(p=k=x)&&a.lineStart(),x!==k&&(v=c(e,u),(Fb(e,v)||Fb(u,v))&&(u[0]+=y,u[1]+=y,x=b(u[0],u[1]))),x!==k)r=0,x?(a.lineStart(),v=c(u,e),a.point(v[0],v[1])):(v=c(e,u),a.point(v[0],v[1]),a.lineEnd()),e=v;else if(h&&e&&f^x){var B;z&g||!(B=c(u,e,!0))||(r=0,f?(a.lineStart(),a.point(B[0][0],
B[0][1]),a.point(B[1][0],B[1][1]),a.lineEnd()):(a.point(B[1][0],B[1][1]),a.lineEnd(),a.lineStart(),a.point(B[0][0],B[0][1])))}!x||e&&Fb(e,u)||a.point(u[0],u[1]);e=u;k=x;g=z},lineEnd:function(){k&&a.lineEnd();e=null},clean:function(){return r|(p&&k)<<1}}},g,f?[0,-a]:[-D,a-D])}function Ce(a,b,c,d){return function(e){var f,h=e.a,g=e.b,m=h.x,h=h.y,l=0,n=1,k=g.x-m,g=g.y-h;if(f=a-m,k||!(0<f)){if(f/=k,0>k){if(l>f)return;n>f&&(n=f)}else if(0<k){if(f>n)return;f>l&&(l=f)}if(f=c-m,k||!(0>f)){if(f/=k,0>k){if(f>
n)return;f>l&&(l=f)}else if(0<k){if(l>f)return;n>f&&(n=f)}if(f=b-h,g||!(0<f)){if(f/=g,0>g){if(l>f)return;n>f&&(n=f)}else if(0<g){if(f>n)return;f>l&&(l=f)}if(f=d-h,g||!(0>f)){if(f/=g,0>g){if(f>n)return;f>l&&(l=f)}else if(0<g){if(l>f)return;n>f&&(n=f)}return 0<l&&(e.a={x:m+l*k,y:h+l*g}),1>n&&(e.b={x:m+n*k,y:h+n*g}),e}}}}}}function De(a,b,c,d){function e(d,f){return E(d[0]-a)<y?0<f?0:3:E(d[0]-c)<y?0<f?2:1:E(d[1]-b)<y?0<f?1:0:0<f?3:2}function f(a,b){return h(a.x,b.x)}function h(a,b){var c=e(a,1),d=e(b,
1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(g){function m(f,g,m,l){var n=0,p=0;if(null==f||(n=e(f,m))!==(p=e(g,m))||0>h(f,g)^0<m){do l.point(0===n||3===n?a:c,1<n?d:b);while((n=(n+m+4)%4)!==p)}else l.point(g[0],g[1])}function l(f,e){f>=a&&(c>=f&&e>=b&&d>=e)&&g.point(f,e)}function n(f,e){f=Math.max(-Hb,Math.min(Hb,f));e=Math.max(-Hb,Math.min(Hb,e));var h=f>=a&&c>=f&&e>=b&&d>=e;if(p&&r.push([f,e]),B)s=f,t=e,v=h,B=!1,h&&(g.lineStart(),g.point(f,e));else if(h&&
z)g.point(f,e);else{var m={a:{x:u,y:x},b:{x:f,y:e}};X(m)?(z||(g.lineStart(),g.point(m.a.x,m.a.y)),g.point(m.b.x,m.b.y),h||g.lineEnd(),A=!1):h&&(g.lineStart(),g.point(f,e),A=!1)}u=f;x=e;z=h}var q,p,r,s,t,v,u,x,z,B,A,L=g,I=Be(),X=Ce(a,b,c,d),N={point:l,lineStart:function(){N.point=n;p&&p.push(r=[]);B=!0;z=!1;u=x=0/0},lineEnd:function(){q&&(n(s,t),v&&z&&I.rejoin(),q.push(I.buffer()));N.point=l;z&&g.lineEnd()},polygonStart:function(){g=I;q=[];p=[];A=!0},polygonEnd:function(){g=L;q=k.merge(q);var b;b=
[a,d];for(var c=0,e=p.length,h=b[1],l=0;e>l;++l)for(var n,x=1,z=p[l],u=z.length,s=z[0];u>x;++x)n=z[x],s[1]<=h?n[1]>h&&0<(n[0]-s[0])*(b[1]-s[1])-(b[0]-s[0])*(n[1]-s[1])&&++c:n[1]<=h&&0>(n[0]-s[0])*(b[1]-s[1])-(b[0]-s[0])*(n[1]-s[1])&&--c,s=n;b=0!==c;c=A&&b;e=q.length;(c||e)&&(g.polygonStart(),c&&(g.lineStart(),m(null,null,1,g),g.lineEnd()),e&&ve(q,f,b,m,g),g.polygonEnd());q=p=r=null}};return N}}function Ee(a,b){function c(c,e){return c=a(c,e),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,
e){return c=b.invert(c,e),c&&a.invert(c[0],c[1])}),c}function Xc(a){var b=0,c=D/3,d=Yc(a);a=d(b,c);return a.parallels=function(a){return arguments.length?d(b=a[0]*D/180,c=a[1]*D/180):[180*(b/D),180*(c/D)]},a}function Fe(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),h-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),h=Math.sqrt(f)/e;return c.invert=function(a,b){var c=h-b;return[Math.atan2(a,c)/e,Da((f-(a*a+c*c)*e*e)/(2*e))]},c}function Ng(){function a(a,
b){Ib+=e*a-d*b;d=a;e=b}var b,c,d,e;ya.point=function(f,h){ya.point=a;b=d=f;c=e=h};ya.lineEnd=function(){a(b,c)}}function Og(){function a(a,b){h.push("M",a,",",b,f)}function b(a,b){h.push("M",a,",",b);g.point=c}function c(a,b){h.push("L",a,",",b)}function d(){g.point=a}function e(){h.push("Z")}var f=Ge(4.5),h=[],g={point:a,lineStart:function(){g.point=b},lineEnd:d,polygonStart:function(){g.lineEnd=e},polygonEnd:function(){g.lineEnd=d;g.point=a},pointRadius:function(a){return f=Ge(a),g},result:function(){if(h.length){var a=
h.join("");return h=[],a}}};return g}function Ge(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ha(a,b){la+=a;ma+=b;++fa}function He(){function a(a,e){var f=a-b,h=e-c,f=Math.sqrt(f*f+h*h);Z+=f*(b+a)/2;$+=f*(c+e)/2;U+=f;Ha(b=a,c=e)}var b,c;ca.point=function(d,e){ca.point=a;Ha(b=d,c=e)}}function Ie(){ca.point=Ha}function Pg(){function a(a,b){var c=a-d,m=b-e,c=Math.sqrt(c*c+m*m);Z+=c*(d+a)/2;$+=c*(e+b)/2;U+=c;c=e*a-d*b;wa+=c*(d+a);xa+=c*(e+b);ga+=3*c;Ha(d=a,e=
b)}var b,c,d,e;ca.point=function(f,h){ca.point=a;Ha(b=d=f,c=e=h)};ca.lineEnd=function(){a(b,c)}}function Qg(a){function b(b,c){a.moveTo(b,c);a.arc(b,c,h,0,V)}function c(b,c){a.moveTo(b,c);g.point=d}function d(b,c){a.lineTo(b,c)}function e(){g.point=b}function f(){a.closePath()}var h=4.5,g={point:b,lineStart:function(){g.point=c},lineEnd:e,polygonStart:function(){g.lineEnd=f},polygonEnd:function(){g.lineEnd=e;g.point=b},pointRadius:function(a){return h=a,g},result:G};return g}function Je(a){function b(b){function d(c,
f){c=a(c,f);b.point(c[0],c[1])}function e(){A=0/0;w.point=l;b.lineStart()}function l(d,e){var g=Fa([d,e]),m=a(d,e);c(A,L,B,I,X,N,A=m[0],L=m[1],B=d,I=g[0],X=g[1],N=g[2],f,b);b.point(A,L)}function n(){w.point=d;b.lineEnd()}function k(){e();w.point=p;w.lineEnd=r}function p(a,b){l(s=a,b);t=A;v=L;u=I;x=X;z=N;w.point=l}function r(){c(A,L,B,I,X,N,t,v,s,u,x,z,f,b);w.lineEnd=n;n()}var s,t,v,u,x,z,B,A,L,I,X,N,w={point:d,lineStart:e,lineEnd:n,polygonStart:function(){b.polygonStart();w.lineStart=k},polygonEnd:function(){b.polygonEnd();
w.lineStart=e}};return w}function c(b,f,m,l,n,k,p,r,s,t,v,u,x,z){var B=p-b,A=r-f,L=B*B+A*A;if(L>4*d&&x--){var I=l+t,X=n+v,N=k+u,w=Math.sqrt(I*I+X*X+N*N),C=Math.asin(N/=w),D=E(E(N)-1)<y?(m+s)/2:Math.atan2(X,I),Ga=a(D,C),C=Ga[0],Ga=Ga[1],ye=C-b,F=Ga-f,ze=A*ye-B*F;(ze*ze/L>d||0.3<E((B*ye+A*F)/L-0.5)||e>l*t+n*v+k*u)&&(c(b,f,m,l,n,k,C,Ga,D,I/=w,X/=w,N,x,z),z.point(C,Ga),c(C,Ga,D,I,X,N,p,r,s,t,v,u,x,z))}}var d=0.5,e=Math.cos(30*C),f=16;return b.precision=function(a){return arguments.length?(f=0<(d=a*a)&&
16,b):Math.sqrt(d)},b}function Jb(a){this.stream=a}function Rg(a){var b=Je(function(b,d){return a([b*K,d*K])});return function(a){var d=new Jb(a=b(a));return d.point=function(b,d){a.point(b*C,d*C)},d}}function za(a){return Yc(function(){return a})()}function Yc(a){function b(a){return a=g(a[0]*C,a[1]*C),[a[0]*p+m,l-a[1]*p]}function c(a){return a=g.invert((a[0]-m)/p,(l-a[1])/p),a&&[a[0]*K,a[1]*K]}function d(){g=Ee(h=Zc(u,x,z),f);var a=f(t,v);return m=r-a[0]*p,l=s+a[1]*p,e()}function e(){return n&&
(n.valid=!1,n=null),b}var f,h,g,m,l,n,q=Je(function(a,b){return a=f(a,b),[a[0]*p+m,l-a[1]*p]}),p=150,r=480,s=250,t=0,v=0,u=0,x=0,z=0,B=Ke,A=O,L=null,I=null;return b.stream=function(a){return n&&(n.valid=!1),n=Sg(B(h,q(A(a)))),n.valid=!0,n},b.clipAngle=function(a){return arguments.length?(B=null==a?(L=a,Ke):Mg((L=+a)*C),e()):L},b.clipExtent=function(a){return arguments.length?(I=a,A=a?De(a[0][0],a[0][1],a[1][0],a[1][1]):O,e()):I},b.scale=function(a){return arguments.length?(p=+a,d()):p},b.translate=
function(a){return arguments.length?(r=+a[0],s=+a[1],d()):[r,s]},b.center=function(a){return arguments.length?(t=a[0]%360*C,v=a[1]%360*C,d()):[t*K,v*K]},b.rotate=function(a){return arguments.length?(u=a[0]%360*C,x=a[1]%360*C,z=2<a.length?a[2]%360*C:0,d()):[u*K,x*K,z*K]},k.rebind(b,q,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function Sg(a){var b=new Jb(a);return b.point=function(b,d){a.point(b*C,d*C)},b}function gb(a,b){return[a,b]}function Le(a,b){return[a>
D?a-V:-D>a?a+V:a,b]}function Zc(a,b,c){return a?b||c?Ee(Me(a),Ne(b,c)):Me(a):b||c?Ne(b,c):Le}function Oe(a){return function(b,c){return b+=a,[b>D?b-V:-D>b?b+V:b,c]}}function Me(a){var b=Oe(a);return b.invert=Oe(-a),b}function Ne(a,b){function c(a,b){var c=Math.cos(b),n=Math.cos(a)*c,c=Math.sin(a)*c,k=Math.sin(b),p=k*d+n*e;return[Math.atan2(c*f-p*h,n*d-k*e),Da(p*f+c*h)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),h=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),n=Math.cos(a)*c,c=Math.sin(a)*
c,k=Math.sin(b),p=k*f-c*h;return[Math.atan2(c*f+k*h,n*d+p*e),Da(p*d-n*e)]},c}function Wc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,h,g){var m=h*b;null!=e?(e=Pe(c,e),f=Pe(c,f),(0<h?f>e:e>f)&&(e+=h*V)):(e=a+h*V,f=a-0.5*m);for(var l;0<h?e>f:f>e;e-=m)g.point((l=Eb([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],l[1])}}function Pe(a,b){var c=Fa(b);c[0]-=a;Db(c);var d=1<-c[1]?0:-1>-c[1]?D:Math.acos(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-y)%(2*Math.PI)}function Qe(a,b,c){var d=k.range(a,b-y,c).concat(b);
return function(a){return d.map(function(b){return[a,b]})}}function Re(a,b,c){var d=k.range(a,b-y,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function $c(a){return a.source}function ad(a){return a.target}function Tg(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),h=Math.cos(d),g=Math.sin(d),m=e*Math.cos(a),l=e*Math.sin(a),n=h*Math.cos(c),k=h*Math.sin(c),p=2*Math.asin(Math.sqrt(ee(d-b)+e*h*ee(c-a))),r=1/Math.sin(p);c=p?function(a){var b=Math.sin(a*=p)*r,c=Math.sin(p-a)*r;a=c*m+
b*n;var d=c*l+b*k,b=c*f+b*g;return[Math.atan2(d,a)*K,Math.atan2(b,Math.sqrt(a*a+d*d))*K]}:function(){return[a*K,b*K]};return c.distance=p,c}function hb(a,b){function c(b,c){var f=Math.cos(b),h=Math.cos(c),f=a(f*h);return[f*h*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var f=Math.sqrt(a*a+c*c),h=b(f),g=Math.sin(h),h=Math.cos(h);return[Math.atan2(a*g,f*h),Math.asin(f&&c*g/f)]},c}function Se(a,b){function c(a,b){var c=E(E(b)-T)<y?0:f/Math.pow(Math.tan(D/4+b/2),e);return[c*Math.sin(e*a),
f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(D/4+b/2)/Math.tan(D/4+a/2)),f=d*Math.pow(Math.tan(D/4+a/2),e)/e;return e?(c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-T]},c):Kb}function Te(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return E(e)<y?gb:(c.invert=function(a,
b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]},c)}function Kb(a,b){return[a,Math.log(Math.tan(D/4+b/2))]}function Ue(a){var b,c=za(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var m=D*d(),l=e();f([[l[0]-m,l[1]-m],[l[0]+
m,l[1]+m]])}}else b&&(g=null);return g},c.clipExtent(null)}function bd(a,b){var c=Math.cos(b)*Math.sin(a);return[Math.log((1+c)/(1-c))/2,Math.atan2(Math.tan(b),Math.cos(a))]}function Ia(a){return a[0]}function Xa(a){return a[1]}function Ug(a,b,c,d){var e,f,h,g,m,l,n;return e=d[a],f=e[0],h=e[1],e=d[b],g=e[0],m=e[1],e=d[c],l=e[0],n=e[1],0<(n-h)*(g-f)-(m-h)*(l-f)}function cd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ve(a,b,c,d){var e=a[0],f=c[0],h=b[0]-e,g=d[0]-f;a=a[1];c=
c[1];b=b[1]-a;d=d[1]-c;f=(g*(a-c)-d*(e-f))/(d*h-g*b);return[e+f*h,a+f*b]}function We(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function Vg(){Lb(this);this.edge=this.site=this.circle=null}function Xe(a){var b=Ye.pop()||new Vg;return b.site=a,b}function dd(a){Ya(a);Za.remove(a);Ye.push(a);Lb(a)}function Ze(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var h=a.P;if(!h)return-1/0;var c=h.site,h=c.x,c=c.y,g=c-b;if(!g)return h;var m=h-d,l=1/f-1/g,n=m/g;return l?(-n+Math.sqrt(n*n-
2*l*(m*m/(-2*g)-c+g/2+e-f/2)))/l+d:(d+h)/2}function $e(a){this.site=a;this.edges=[]}function af(a,b){return b.angle-a.angle}function Wg(){Lb(this);this.x=this.y=this.arc=this.site=this.cy=null}function $a(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,h=d.x-c,g=d.y-f,d=e.x-c,e=e.y-f,m=2*(h*e-g*d);if(!(m>=-ed)){var l=h*h+g*g,n=d*d+e*e,g=(e*l-g*n)/m,h=(h*n-d*l)/m,e=h+f,f=bf.pop()||new Wg;f.arc=a;f.site=b;f.x=g+c;f.y=e+Math.sqrt(g*g+h*h);f.cy=e;a.circle=f;a=null;
for(b=ib._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x){if(!b.L){a=b.P;break}b=b.L}else{if(!b.R){a=b;break}b=b.R}ib.insert(a,f);a||(fd=f)}}}}function Ya(a){var b=a.circle;b&&(b.P||(fd=b.N),ib.remove(b),bf.push(b),Lb(b),a.circle=null)}function Xg(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,c=b[0][0],h=b[1][0],g=b[0][1],m=b[1][1],l=a.l,n=a.r,k=l.x,l=l.y,p=n.x,n=n.y;e=(k+p)/2;if(n===l){if(c>e||e>=h)return;if(k>p){if(f){if(f.y>=m)return}else f={x:e,y:g};c={x:e,y:m}}else{if(f){if(f.y<g)return}else f={x:e,y:m};c=
{x:e,y:g}}}else if(d=(k-p)/(n-l),e=(l+n)/2-d*e,-1>d||1<d)if(k>p){if(f){if(f.y>=m)return}else f={x:(g-e)/d,y:g};c={x:(m-e)/d,y:m}}else{if(f){if(f.y<g)return}else f={x:(m-e)/d,y:m};c={x:(g-e)/d,y:g}}else if(n>l){if(f){if(f.x>=h)return}else f={x:c,y:d*c+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<c)return}else f={x:h,y:d*h+e};c={x:c,y:d*c+e}}return a.a=f,a.b=c,!0}function cf(a,b){this.l=a;this.r=b;this.a=this.b=null}function jb(a,b,c,d){var e=new cf(a,b);return ab.push(e),c&&Mb(e,a,b,c),d&&Mb(e,b,a,d),Ja[a.i].edges.push(new Nb(e,
a,b)),Ja[b.i].edges.push(new Nb(e,b,a)),e}function Yg(a,b,c){a=new cf(a,null);return a.a=b,a.b=c,ab.push(a),a}function Mb(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function Nb(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function gd(){this._=null}function Lb(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function kb(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=
b);c.L=b}function lb(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function df(a){for(;a.L;)a=a.L;return a}function hd(a,b){var c,d,e,f=a.sort(Zg).pop();ab=[];Ja=Array(a.length);Za=new gd;for(ib=new gd;;)if(e=fd,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x)){if(f.x!==c||f.y!==d){Ja[f.i]=new $e(f);c=f;for(var h=d=void 0,g=void 0,m=void 0,l=c.x,n=c.y,k=Za._;k;)if(g=Ze(k,n)-l,g>y)k=k.L;else{var p=l,r;var s=k;r=n;var t=s.N;t?r=Ze(t,r):(s=s.site,r=s.y===r?s.x:1/0);if(m=
p-r,!(m>y)){g>-y?(d=k.P,h=k):m>-y?(d=k,h=k.N):d=h=k;break}if(!k.R){d=k;break}k=k.R}g=Xe(c);if(Za.insert(d,g),d||h)if(d===h)Ya(d),h=Xe(d.site),Za.insert(g,h),g.edge=h.edge=jb(d.site,g.site),$a(d),$a(h);else if(h){Ya(d);Ya(h);m=d.site;n=m.x;k=m.y;p=c.x-n;r=c.y-k;var l=h.site,s=l.x-n,t=l.y-k,v=2*(p*t-r*s),u=p*p+r*r,x=s*s+t*t,n={x:(t*u-r*x)/v+n,y:(p*x-s*u)/v+k};Mb(h.edge,m,l,n);g.edge=jb(m,c,null,n);h.edge=jb(c,l,null,n);$a(d);$a(h)}else g.edge=jb(d.site,g.site);c=f.x;d=f.y}f=a.pop()}else{if(!e)break;
l=e.arc;h=l.circle;m=h.x;n=h.cy;h={x:m,y:n};p=l.P;k=l.N;g=[l];dd(l);for(l=p;l.circle&&E(m-l.circle.x)<y&&E(n-l.circle.cy)<y;)p=l.P,g.unshift(l),dd(l),l=p;g.unshift(l);Ya(l);for(p=k;p.circle&&E(m-p.circle.x)<y&&E(n-p.circle.cy)<y;)k=p.N,g.push(p),dd(p),p=k;g.push(p);Ya(p);m=void 0;n=g.length;for(m=1;n>m;++m)p=g[m],l=g[m-1],Mb(p.edge,l.site,p.site,h);l=g[0];p=g[n-1];p.edge=jb(l.site,p.site,null,h);$a(l);$a(p)}if(b){f=ab;c=Ce(b[0][0],b[0][1],b[1][0],b[1][1]);for(d=f.length;d--;)e=f[d],(!Xg(e,b)||!c(e)||
E(e.a.x-e.b.x)<y&&E(e.a.y-e.b.y)<y)&&(e.a=e.b=null,f.splice(d,1));var z,l=b[0][0],n=b[1][0],k=b[0][1],p=b[1][1];r=Ja;for(s=r.length;s--;)if(z=r[s],z&&z.prepare()){h=z.edges;g=h.length;for(d=0;g>d;)m=h[d].end(),f=m.x,c=m.y,t=h[++d%g].start(),e=t.x,t=t.y,(E(f-e)>y||E(c-t)>y)&&(h.splice(d,0,new Nb(Yg(z.site,m,E(f-l)<y&&p-c>y?{x:l,y:E(e-l)<y?t:p}:E(c-p)<y&&n-f>y?{x:E(t-p)<y?e:n,y:p}:E(f-n)<y&&c-k>y?{x:n,y:E(e-n)<y?t:k}:E(c-k)<y&&f-l>y?{x:E(t-k)<y?e:l,y:k}:null),z.site,null)),++g)}}z={cells:Ja,edges:ab};
return Za=ib=ab=Ja=null,z}function Zg(a,b){return b.y-a.y||b.x-a.x}function $g(a){return a.x}function ah(a){return a.y}function ef(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function mb(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var h=0.5*(c+e),g=0.5*(d+f);b=b.nodes;b[0]&&mb(a,b[0],c,d,h,g);b[1]&&mb(a,b[1],h,d,e,g);b[2]&&mb(a,b[2],c,g,h,f);b[3]&&mb(a,b[3],h,g,e,f)}}function id(a,b){a=k.rgb(a);b=k.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,h=b.g-d,g=b.b-e;return function(a){return"#"+Ta(Math.round(c+f*a))+
Ta(Math.round(d+h*a))+Ta(Math.round(e+g*a))}}function ff(a,b){var c,d={},e={};for(c in a)c in b?d[c]=Ka(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function na(a,b){return b-=a=+a,function(c){return a+b*c}}function gf(a,b){var c,d,e,f,h=0,g=[],m=[];a+="";b+="";for(d=Ob.lastIndex=0;c=Ob.exec(b);++d)c.index&&g.push(b.substring(h,c.index)),m.push({i:g.length,x:c[0]}),g.push(null),h=Ob.lastIndex;h<b.length&&g.push(b.substring(h));d=0;for(e=
m.length;(c=Ob.exec(a))&&e>d;++d)if(f=m[d],f.x==c[0]){if(f.i)if(null==g[f.i+1]){g[f.i-1]+=f.x;g.splice(f.i,1);for(c=d+1;e>c;++c)m[c].i--}else{g[f.i-1]+=f.x+g[f.i+1];g.splice(f.i,2);for(c=d+1;e>c;++c)m[c].i-=2}else if(null==g[f.i+1])g[f.i]=f.x;else{g[f.i]=f.x+g[f.i+1];g.splice(f.i+1,1);for(c=d+1;e>c;++c)m[c].i--}m.splice(d,1);e--;d--}else f.x=na(parseFloat(c[0]),parseFloat(f.x));for(;e>d;)f=m.pop(),null==g[f.i+1]?g[f.i]=f.x:(g[f.i]=f.x+g[f.i+1],g.splice(f.i+1,1)),e--;return 1===g.length?null==g[0]?
(f=m[0].x,function(a){return f(a)+""}):function(){return b}:function(a){for(d=0;e>d;++d)g[(f=m[d]).i]=f.x(a);return g.join("")}}function Ka(a,b){for(var c,d=k.interpolators.length;0<=--d&&!(c=k.interpolators[d](a,b)););return c}function Pb(a,b){var c,d=[],e=[],f=a.length,h=b.length,g=Math.min(a.length,b.length);for(c=0;g>c;++c)d.push(Ka(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;h>c;++c)e[c]=b[c];return function(a){for(c=0;g>c;++c)e[c]=d[c](a);return e}}function bh(a){return function(b){return 0>=b?
0:1<=b?1:a(b)}}function hf(a){return function(b){return 1-a(1-b)}}function jf(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function ch(a){return a*a}function dh(a){return a*a*a}function eh(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)}function fh(a){return 1-Math.cos(a*T)}function gh(a){return Math.pow(2,10*(a-1))}function hh(a){return 1-Math.sqrt(1-a*a)}function ih(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>
a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function kf(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function lf(a){var b=[a.a,a.b],c=[a.c,a.d],d=mf(b),e=b[0]*c[0]+b[1]*c[1],f=mf((c[0]+=-e*b[0],c[1]+=-e*b[1],c))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*K;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*K:0}function mf(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return b&&(a[0]/=
b,a[1]/=b),b}function nf(a,b){var c,d=[],e=[],f=k.transform(a),h=k.transform(b),g=f.translate,m=h.translate,l=f.rotate,n=h.rotate,q=f.skew,p=h.skew,f=f.scale,h=h.scale;return g[0]!=m[0]||g[1]!=m[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:na(g[0],m[0])},{i:3,x:na(g[1],m[1])})):m[0]||m[1]?d.push("translate("+m+")"):d.push(""),l!=n?(180<l-n?n+=360:180<n-l&&(l+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:na(l,n)})):n&&d.push(d.pop()+"rotate("+n+")"),q!=p?e.push({i:d.push(d.pop()+
"skewX(",null,")")-2,x:na(q,p)}):p&&d.push(d.pop()+"skewX("+p+")"),f[0]!=h[0]||f[1]!=h[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:na(f[0],h[0])},{i:c-2,x:na(f[1],h[1])})):(1!=h[0]||1!=h[1])&&d.push(d.pop()+"scale("+h+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function jh(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function kh(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function lh(a){var b=
a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=of(b);for(var d=of(d),e=c.pop(),f=d.pop(),h=null;e===f;)h=e,e=c.pop(),f=d.pop();c=h}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function of(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function mh(a){a.fixed|=2}function nh(a){a.fixed&=-7}function oh(a){a.fixed|=4;a.px=a.x;a.py=a.y}function ph(a){a.fixed&=-5}function pf(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,
h=a.nodes,g=h.length,m=-1;++m<g;)f=h[m],null!=f&&(pf(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function nb(a,b){return k.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=qh,a}function rh(a){return a.children}function sh(a){return a.value}function th(a,b){return b.value-a.value}function qh(a){return k.merge(a.map(function(a){return(a.children||
[]).map(function(c){return{source:a,target:c}})}))}function uh(a){return a.x}function vh(a){return a.y}function wh(a,b,c){a.y0=b;a.y=c}function jd(a){return k.range(a.length)}function kd(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function xh(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function yh(a){return a.reduce(zh,0)}function zh(a,b){return a+b[1]}function Ah(a,b){return qf(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function qf(a,b){for(var c=
-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Bh(a){return[k.min(a),k.max(a)]}function rf(a,b){return a.parent==b.parent?1:2}function ld(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function md(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Qb(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Qb(c[f],b),a)&&(a=d);return a}function Ch(a,b){return a.x-b.x}function Dh(a,b){return b.x-a.x}function Eh(a,b){return a.depth-
b.depth}function oa(a,b){function c(a,e){var f=a.children;if(f&&(g=f.length))for(var h,g,m=null,l=-1;++l<g;)h=f[l],c(h,m),m=h;b(a,e)}c(a,null)}function Fh(a,b){return a.value-b.value}function nd(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function sf(a,b){a._pack_next=b;b._pack_prev=a}function tf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return 0.999*e*e>c*c+d*d}function uf(a){function b(a){n=Math.min(a.x-a.r,n);k=Math.max(a.x+a.r,k);p=Math.min(a.y-a.r,p);r=Math.max(a.y+
a.r,r)}if((c=a.children)&&(l=c.length)){var c,d,e,f,h,g,m,l,n=1/0,k=-1/0,p=1/0,r=-1/0;if(c.forEach(Gh),d=c[0],d.x=-d.r,d.y=0,b(d),1<l&&(e=c[1],e.x=e.r,e.y=0,b(e),2<l)){f=c[2];vf(d,e,f);b(f);nd(d,f);d._pack_prev=f;nd(f,e);e=d._pack_next;for(h=3;l>h;h++){vf(d,e,f=c[h]);var s=0,t=1,v=1;for(g=e._pack_next;g!==e;g=g._pack_next,t++)if(tf(g,f)){s=1;break}if(1==s)for(m=d._pack_prev;m!==g._pack_prev&&!tf(m,f);m=m._pack_prev,v++);s?(v>t||t==v&&e.r<d.r?sf(d,e=g):sf(d=m,e),h--):(nd(d,f),e=f,b(f))}}d=(n+k)/2;
e=(p+r)/2;for(h=g=0;l>h;h++)f=c[h],f.x-=d,f.y-=e,g=Math.max(g,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=g;c.forEach(Hh)}}function Gh(a){a._pack_next=a._pack_prev=a}function Hh(a){delete a._pack_next;delete a._pack_prev}function wf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e){a=-1;for(var f=e.length;++a<f;)wf(e[a],b,c,d)}}function vf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var h=b.r+c.r,g=e*e+f*f,h=h*h,d=d*d;b=0.5+(d-h)/(2*g);h=Math.sqrt(Math.max(0,2*h*(d+g)-(d-=g)*d-h*
h))/(2*g);c.x=a.x+b*e+h*f;c.y=a.y+b*f-h*e}else c.x=a.x+d,c.y=a.y}function Ih(a){return 1+k.max(a,function(a){return a.y})}function Jh(a){return a.reduce(function(a,c){return a+c.x},0)/a.length}function xf(a){var b=a.children;return b&&b.length?xf(b[0]):a}function yf(a){var b,c=a.children;return c&&(b=c.length)?yf(c[b-1]):a}function od(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function zf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,
y:d,dx:e,dy:f}}function bb(a){var b=a[0];a=a[a.length-1];return a>b?[b,a]:[a,b]}function Rb(a){return a.rangeExtent?a.rangeExtent():bb(a.range())}function Kh(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Sb(a,b){var c,d=0,e=a.length-1,f=a[d],h=a[e];return f>h&&(c=d,d=e,e=c,c=f,f=h,h=c),a[d]=b.floor(f),a[e]=b.ceil(h),a}function Af(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Lh}function Mh(a,b,c,d){var e=
[],f=[],h=0,g=Math.min(a.length,b.length)-1;for(a[g]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++h<=g;)e.push(c(a[h-1],a[h])),f.push(d(b[h-1],b[h]));return function(b){var c=k.bisect(a,b,1,g)-1;return f[c](e[c](b))}}function Bf(a,b,c,d){function e(){var e=2<Math.min(a.length,b.length)?Mh:Kh,l=d?kh:jh;return h=e(a,b,l,c),g=e(b,a,l,Ka),f}function f(a){return h(a)}var h,g;return f.invert=function(a){return g(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=
function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(kf)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return k.range.apply(k,Aa(a,b))},f.tickFormat=function(b,c){return pd(a,b,c)},f.nice=function(b){return Sb(a,Af(Aa(a,b)[2])),e()},f.copy=function(){return Bf(a,b,c,d)},e()}function qd(a,b){return k.rebind(a,b,"range","rangeRound","interpolate","clamp")}
function Aa(a,b){null==b&&(b=10);var c=bb(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return 0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+0.5*e,c[2]=e,c}function pd(a,b,c){var d=-Math.floor(Math.log(Aa(a,b)[2])/Math.LN10+0.01);return k.format(c?c.replace(Cf,function(a,b,c,g,m,l,n,k,p,r){return[b,c,g,m,l,n,k,p||"."+(d-2*("%"===r)),r].join("")}):",."+d+"f")}function Df(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<
a?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function h(b){return a(e(b))}return h.invert=function(b){return f(a.invert(b))},h.domain=function(b){return arguments.length?(c=0<=b[0],a.domain((d=b.map(Number)).map(e)),h):d},h.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),h):b},h.nice=function(){var b=Sb(d.map(e),c?Math:Nh);return a.domain(b),d=b.map(f),h},h.ticks=function(){var a=bb(d),h=[],l=a[0],a=a[1],n=Math.floor(e(l)),k=Math.ceil(e(a)),p=b%1?2:b;
if(isFinite(k-n)){if(c){for(;k>n;n++)for(var r=1;p>r;r++)h.push(f(n)*r);h.push(f(n))}else for(h.push(f(n));n++<k;)for(r=p-1;0<r;r--)h.push(f(n)*r);for(n=0;h[n]<l;n++);for(k=h.length;h[k-1]>a;k--);h=h.slice(n,k)}return h},h.tickFormat=function(a,b){if(!arguments.length)return Ef;2>arguments.length?b=Ef:"function"!=typeof b&&(b=k.format(b));var d,n=Math.max(0.1,a/h.ticks().length),q=c?(d=1E-12,Math.ceil):(d=-1E-12,Math.floor);return function(a){return a/f(q(e(a)+d))<=n?b(a):""}},h.copy=function(){return Df(a.copy(),
b,c,d)},qd(h,a)}function Ff(a,b,c){function d(b){return a(e(b))}var e=Tb(b),f=Tb(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return k.range.apply(k,Aa(c,a))},d.tickFormat=function(a,b){return pd(c,a,b)},d.nice=function(a){return d.domain(Sb(c,Af(Aa(c,a)[2])))},d.exponent=function(h){return arguments.length?(e=Tb(b=h),f=Tb(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return Ff(a.copy(),
b,c)},qd(d,a)}function Tb(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Gf(a,b){function c(c){return f[((e.get(c)||"range"===b.t&&e.set(c,a.push(c)))-1)%f.length]}function d(b,c){return k.range(a.length).map(function(a){return b+c*a})}var e,f,h;return c.domain=function(d){if(!arguments.length)return a;a=[];e=new da;for(var f,h=-1,n=d.length;++h<n;)e.has(f=d[h])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,h=0,b={t:"range",
a:arguments},c):f},c.rangePoints=function(e,m){2>arguments.length&&(m=0);var l=e[0],n=e[1],k=(n-l)/(Math.max(1,a.length-1)+m);return f=d(2>a.length?(l+n)/2:l+k*m/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,m,l){2>arguments.length&&(m=0);3>arguments.length&&(l=m);var n=e[1]<e[0],k=e[n-0],p=(e[1-n]-k)/(a.length-m+2*l);return f=d(k+p*l,p),n&&f.reverse(),h=p*(1-m),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,m,l){2>arguments.length&&(m=0);3>arguments.length&&
(l=m);var n=e[1]<e[0],k=e[n-0],p=e[1-n],r=Math.floor((p-k)/(a.length-m+2*l));return f=d(k+Math.round((p-k-(a.length-m)*r)/2),r),n&&f.reverse(),h=Math.round(r*(1-m)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return bb(b.a[0])},c.copy=function(){return Gf(a,b)},c.domain(a)}function Hf(a,b){function c(){var c=0,h=b.length;for(e=[];++c<h;)e[c-1]=k.quantile(a,c/h);return d}function d(a){return isNaN(a=+a)?void 0:b[k.bisect(e,a)]}var e;return d.domain=
function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(k.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.invertExtent=function(c){return c=b.indexOf(c),0>c?[0/0,0/0]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]},d.copy=function(){return Hf(a,b)},c()}function If(a,b,c){function d(b){return c[Math.max(0,Math.min(h,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),h=c.length-1,d}var f,h;return d.domain=
function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return If(a,b,c)},e()}function Jf(a,b){function c(c){return c>=c?b[k.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=
function(){return Jf(a,b)},c}function Kf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return k.range.apply(k,Aa(a,b))},b.tickFormat=function(b,d){return pd(a,b,d)},b.copy=function(){return Kf(a)},b}function Oh(a){return a.innerRadius}function Ph(a){return a.outerRadius}function Lf(a){return a.startAngle}function Mf(a){return a.endAngle}function Nf(a){function b(b){function h(){k.push("M",f(a(p),g))}for(var n,
k=[],p=[],r=-1,s=b.length,t=J(c),v=J(d);++r<s;)e.call(this,n=b[r],r)?p.push([+t.call(this,n,r),+v.call(this,n,r)]):p.length&&(h(),p=[]);return p.length&&h(),k.length?k.join(""):null}var c=Ia,d=Xa,e=Wa,f=Y,h=f.key,g=0.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(h="function"==typeof a?f=a:(f=rd.get(a)||Y).key,b):h},b.tension=function(a){return arguments.length?
(g=a,b):g},b}function Y(a){return a.join("L")}function sd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function td(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Ub(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return Y(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],h=b[0],g=h,m=1;if(c&&(d+="Q"+(f[0]-2*h[0]/3)+","+(f[1]-2*h[1]/3)+","+f[0]+","+f[1],e=
a[1],m=2),1<b.length){g=b[1];f=a[m];m++;d+="C"+(e[0]+h[0])+","+(e[1]+h[1])+","+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1];for(e=2;e<b.length;e++,m++)f=a[m],g=b[e],d+="S"+(f[0]-g[0])+","+(f[1]-g[1])+","+f[0]+","+f[1]}c&&(c=a[m],d+="Q"+(f[0]+2*g[0]/3)+","+(f[1]+2*g[1]/3)+","+c[0]+","+c[1]);return d}function ud(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],h=a[1],g=1,m=a.length;++g<m;)c=f,f=h,h=a[g],d.push([e*(h[0]-c[0]),e*(h[1]-c[1])]);return d}function Of(a){if(3>a.length)return Y(a);var b=1,c=a.length,
d=a[0],e=d[0],f=d[1],h=[e,e,e,(d=a[1])[0]],g=[f,f,f,d[1]],e=[e,",",f,"L",aa(Ba,h),",",aa(Ba,g)];for(a.push(a[c-1]);++b<=c;)d=a[b],h.shift(),h.push(d[0]),g.shift(),g.push(d[1]),vd(e,h,g);return a.pop(),e.push("L",d),e.join("")}function aa(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function vd(a,b,c){a.push("C",aa(Pf,b),",",aa(Pf,c),",",aa(Qf,b),",",aa(Qf,c),",",aa(Ba,b),",",aa(Ba,c))}function wd(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Rf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],
c=b[0],d=b[1]+La,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Sf(a){function b(b){function m(){u.push("M",g(a(z),q),k,l(a(x.reverse()),q),"Z")}for(var s,t,v,u=[],x=[],z=[],B=-1,A=b.length,L=J(c),I=J(e),w=c===d?function(){return t}:J(d),N=e===f?function(){return v}:J(f);++B<A;)h.call(this,s=b[B],B)?(x.push([t=+L.call(this,s,B),v=+I.call(this,s,B)]),z.push([+w.call(this,s,B),+N.call(this,s,B)])):x.length&&(m(),x=[],z=[]);return x.length&&m(),u.length?u.join(""):null}var c=Ia,d=Ia,e=0,f=Xa,
h=Wa,g=Y,m=g.key,l=g,k="L",q=0.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(h=a,b):h},b.interpolate=function(a){return arguments.length?(m="function"==typeof a?g=a:(g=rd.get(a)||
Y).key,l=g.reverse||g,k=g.closed?"M":"L",b):m},b.tension=function(a){return arguments.length?(q=a,b):q},b}function Qh(a){return a.radius}function Tf(a){return[a.x,a.y]}function Rh(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+La;return[c*Math.cos(b),c*Math.sin(b)]}}function Sh(){return 64}function Th(){return"circle"}function Uf(a){a=Math.sqrt(a/D);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function ob(a,b){return pb(a,M),a.id=b,a}function xd(a,b,c,d){var e=
a.id;return ta(a,"function"==typeof c?function(a,h,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,h,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Uh(a){return null==a&&(a=""),function(){this.textContent=a}}function Vb(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var h=d.time,f=e[c]={tween:new da,time:h,ease:d.ease,delay:d.delay,duration:d.duration};++e.count;k.timer(function(d){function m(d){return e.active>c?n():(e.active=
c,f.event&&f.event.start.call(a,q,b),f.tween.forEach(function(c,d){(d=d.call(a,q,b))&&v.push(d)}),k.timer(function(){return t.c=l(d||1)?Wa:l,1},0,h),void 0)}function l(d){if(e.active!==c)return n();d/=s;for(var g=p(d),h=v.length;0<h;)v[--h].call(a,g);return 1<=d?(f.event&&f.event.end.call(a,q,b),n()):void 0}function n(){return--e.count?delete e[c]:delete a.__transition__,1}var q=a.__data__,p=f.ease,r=f.delay,s=f.duration,t=ka,v=[];return t.t=r+h,d>=r?m(d-r):(t.c=m,void 0)},0,h)}}function Vf(a,b){a.attr("transform",
function(a){return"translate("+b(a)+",0)"})}function Wf(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function pa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ma(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new Q(c-1)),1),c}function f(a,c){return b(a=new Q(+a),c),a}function h(a,d,f){a=e(a);var g=[];if(1<f)for(;d>a;)c(a)%f||g.push(new Date(+a)),b(a,1);else for(;d>a;)g.push(new Date(+a)),b(a,
1);return g}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=h;var g=a.utc=Wb(a);return g.floor=g,g.round=Wb(d),g.ceil=Wb(e),g.offset=Wb(f),g.range=function(a,b,c){try{Q=pa;var d=new pa;return d._=a,h(d,b,c)}finally{Q=Date}},a}function Wb(a){return function(b,c){try{Q=pa;var d=new pa;return d._=b,a(d,c)._}finally{Q=Date}}}function R(a){function b(b){for(var e,f,h,g=[],m=-1,l=0;++m<c;)37===a.charCodeAt(m)&&(g.push(a.substring(l,m)),null!=(f=Xf[e=a.charAt(++m)])&&(e=a.charAt(++m)),(h=Xb[e])&&(e=h(b,
null==f?"e"===e?" ":"0":f)),g.push(e),l=m+1);return g.push(a.substring(l,m)),g.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(Yb(c,a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=null!=c.Z&&Q!==pa;var f=new (b?pa:Q);return"j"in c?f.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(f.setFullYear(c.y,0,1),f.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(f.getDay()+5)%7:c.w+7*c.U-(f.getDay()+6)%7)):f.setFullYear(c.y,c.m,c.d),f.setHours(c.H+
Math.floor(c.Z/100),c.M+c.Z%100,c.S,c.L),b?f._:f},b.toString=function(){return a},b}function Yb(a,b,c,d){for(var e,f,h,g=0,m=b.length,l=c.length;m>g;){if(d>=l)return-1;if(e=b.charCodeAt(g++),37===e){if(h=b.charAt(g++),f=Vh[h in Xf?b.charAt(g++):h],!f||0>(d=f(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function Zb(a){return RegExp("^(?:"+a.map(k.requote).join("|")+")","i")}function $b(a){for(var b=new da,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function S(a,b,
c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(c>e?Array(c-e+1).join(b)+a:a)}function Yf(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Zf(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function ha(a){function b(a){try{Q=pa;var b=new Q;return b._=a,c(b)}finally{Q=Date}}var c=R(a);return b.parse=function(a){try{Q=pa;var b=c.parse(a);return b&&b._}finally{Q=Date}},b.toString=c.toString,b}function yd(a){return a.toISOString()}
function zd(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,e=k.bisect(ac,d);return e==ac.length?[b.year,Aa(a.map(function(a){return a/31536E6}),c)[2]]:e?b[d/ac[e-1]<ac[e]/d?e-1:e]:[Wh,Aa(a,c)[2]]}return d.invert=function(b){return Na(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Na)},d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,Na(+d+1),b).length}var m=d.domain(),l=bb(m),l=null==a?e(l,10):"number"==typeof a&&e(l,a);
return l&&(a=l[0],b=l[1]),d.domain(Sb(m,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=Na(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Na(+b+1);return b}}:a))},d.ticks=function(a,b){var c=bb(d.domain()),m=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return m&&(a=m[0],b=m[1]),a.range(c[0],Na(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return zd(a.copy(),b,c)},qd(d,a)}function Na(a){return new Date(a)}function $f(a){return function(b){for(var c=
a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Xh(a){return JSON.parse(a.responseText)}function Yh(a){var b=ia.createRange();return b.selectNode(ia.body),b.createContextualFragment(a.responseText)}var k={version:"3.3.8"};Date.now||(Date.now=function(){return+new Date});var ag=[].slice,ua=function(a){return ag.call(a)},ia=document,va=ia.documentElement,P=window;try{ua(va.childNodes)[0].nodeType}catch(Fi){ua=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{ia.createElement("div").style.setProperty("opacity",
0,"")}catch(Gi){var bc=P.Element.prototype,Zh=bc.setAttribute,$h=bc.setAttributeNS,bg=P.CSSStyleDeclaration.prototype,ai=bg.setProperty;bc.setAttribute=function(a,b){Zh.call(this,a,b+"")};bc.setAttributeNS=function(a,b,c){$h.call(this,a,b,c+"")};bg.setProperty=function(a,b,c){ai.call(this,a,b+"",c)}}k.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0};k.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0};k.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=
(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c};k.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c};k.extent=function(a,b){var c,d,e,f=
-1,h=a.length;if(1===arguments.length){for(;++f<h&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<h;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<h&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<h;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]};k.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d};k.mean=function(a,b){var c,d=a.length,e=0,f=-1,h=0;
if(1===arguments.length)for(;++f<d;)sc(c=a[f])&&(e+=(c-e)/++h);else for(;++f<d;)sc(c=b.call(a,a[f],f))&&(e+=(c-e)/++h);return h?e:void 0};k.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};k.median=function(a,b){return 1<arguments.length&&(a=a.map(b)),a=a.filter(sc),a.length?k.quantile(a.sort(k.ascending),0.5):void 0};k.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+
e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var cg=k.bisector(function(a){return a});k.bisectLeft=cg.left;k.bisect=k.bisectRight=cg.right;k.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a};k.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};k.pairs=function(a){for(var b=
0,c=a.length-1,d=a[0],e=Array(0>c?0:c);c>b;)e[b]=[d,d=a[++b]];return e};k.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=k.min(arguments,zg),c=Array(b);++a<b;)for(var d,e=-1,f=c[a]=Array(d);++e<d;)f[e]=arguments[e][a];return c};k.transpose=function(a){return k.zip.apply(k,a)};k.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};k.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};k.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};
k.merge=function(a){var b,c,d,e=a.length;b=-1;for(var f=0;++b<e;)f+=a[b].length;for(c=Array(f);0<=--e;){d=a[e];for(b=d.length;0<=--b;)c[--f]=d[b]}return c};var E=Math.abs;k.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0)),1/0===(b-a)/c)throw Error("infinite range");var d,e=[],f;d=E(c);for(f=1;d*f%1;)f*=10;var h=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++h)>b;)e.push(d/f);else for(;(d=a+c*++h)<b;)e.push(d/f);return e};k.map=function(a){var b=new da;if(a instanceof da)a.forEach(function(a,
c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};Md(da,{has:function(a){return Ca+a in this},get:function(a){return this[Ca+a]},set:function(a,b){return this[Ca+a]=b},remove:function(a){return a=Ca+a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===
dg&&a.call(this,b.substring(1),this[b])}});var Ca="\x00",dg=Ca.charCodeAt(0);k.nest=function(){function a(b,h,l){if(l>=f.length)return d?d.call(e,h):c?h.sort(c):h;for(var k,q,p,r,s=-1,t=h.length,v=f[l++],u=new da;++s<t;)(r=u.get(k=v(q=h[s])))?r.push(q):u.set(k,[q]);return b?(q=b(),p=function(c,d){q.set(c,a(b,d,l))}):(q={},p=function(c,d){q[c]=a(b,d,l)}),u.forEach(p),q}function b(a,c){if(c>=f.length)return a;var d=[],e=h[c++];return a.forEach(function(a,f){d.push({key:a,values:b(f,c)})}),e?d.sort(function(a,
b){return e(a.key,b.key)}):d}var c,d,e={},f=[],h=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(k.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return h[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e};k.set=function(a){var b=new tc;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b};Md(tc,{has:function(a){return Ca+a in this},add:function(a){return this[Ca+a]=!0,a},remove:function(a){return a=
Ca+a,a in this&&delete this[a]},values:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===dg&&a.call(this,b.substring(1))}});k.behavior={};k.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=Ag(a,b,b[c]);return a};var Nd="webkit ms moz Moz o O".split(" ");k.dispatch=function(){for(var a=new vc,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=Od(a);return a};vc.prototype.on=function(a,b){var c=a.indexOf("."),
d="";if(0<=c&&(d=a.substring(c+1),a=a.substring(0,c)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};k.event=null;k.requote=function(a){return a.replace(bi,"\\$\x26")};var bi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,pb={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},yc=function(a,b){return b.querySelector(a)},zc=function(a,b){return b.querySelectorAll(a)},
ci=va[uc(va,"matchesSelector")],Zd=function(a,b){return ci.call(a,b)};"function"==typeof Sizzle&&(yc=function(a,b){return Sizzle(a,b)[0]||null},zc=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Zd=Sizzle.matchesSelector);k.selection=function(){return eg};var F=k.selection.prototype=[];F.select=function(a){var b,c,d,e,f=[];a=xc(a);for(var h=-1,g=this.length;++h<g;){f.push(b=[]);b.parentNode=(d=this[h]).parentNode;for(var m=-1,l=d.length;++m<l;)(e=d[m])?(b.push(c=a.call(e,e.__data__,m,h)),c&&
"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return sa(f)};F.selectAll=function(a){var b,c,d=[];a=Qd(a);for(var e=-1,f=this.length;++e<f;)for(var h=this[e],g=-1,m=h.length;++g<m;)(c=h[g])&&(d.push(b=ua(a.call(c,c.__data__,g,e))),b.parentNode=c);return sa(d)};var Ad={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};k.ns={prefix:Ad,qualify:function(a){var b=
a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),Ad.hasOwnProperty(c)?{space:Ad[c],local:a}:a}};F.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=k.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(Rd(b,a[b]));return this}return this.each(Rd(a,b))};F.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList)for(;++e<
d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!Td(a[e]).test(b))return!1;return!0}for(b in a)this.each(Ud(b,a[b]));return this}return this.each(Ud(a,b))};F.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(Vd(c,a[c],b));return this}if(2>d)return P.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(Vd(a,b,c))};F.property=function(a,b){if(2>arguments.length){if("string"==typeof a)return this.node()[a];
for(b in a)this.each(Wd(b,a[b]));return this}return this.each(Wd(a,b))};F.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};F.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=
a}):this.node().innerHTML};F.append=function(a){return a=Xd(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};F.insert=function(a,b){return a=Xd(a),b=xc(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};F.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};F.data=function(a,b){function c(a,c){var d,f,e,h=a.length,k=c.length,u=Math.min(h,k),x=Array(k),z=Array(k),B=Array(h);
if(b){var A=new da,L=new da,I=[];for(d=-1;++d<h;)u=b.call(f=a[d],f.__data__,d),A.has(u)?B[d]=f:A.set(u,f),I.push(u);for(d=-1;++d<k;)u=b.call(c,e=c[d],d),(f=A.get(u))?(x[d]=f,f.__data__=e):L.has(u)||(z[d]={__data__:e}),L.set(u,e),A.remove(u);for(d=-1;++d<h;)A.has(I[d])&&(B[d]=a[d])}else{for(d=-1;++d<u;)f=a[d],e=c[d],f?(f.__data__=e,x[d]=f):z[d]={__data__:e};for(;k>d;++d)z[d]={__data__:c[d]};for(;h>d;++d)B[d]=a[d]}z.update=x;z.parentNode=x.parentNode=B.parentNode=a.parentNode;g.push(z);m.push(x);l.push(B)}
var d,e,f=-1,h=this.length;if(!arguments.length){for(a=Array(h=(d=this[0]).length);++f<h;)(e=d[f])&&(a[f]=e.__data__);return a}var g=$d([]),m=sa([]),l=sa([]);if("function"==typeof a)for(;++f<h;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<h;)c(d=this[f],a);return m.enter=function(){return g},m.exit=function(){return l},m};F.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};F.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Yd(a));
for(var f=0,h=this.length;h>f;f++){e.push(b=[]);b.parentNode=(c=this[f]).parentNode;for(var g=0,m=c.length;m>g;g++)(d=c[g])&&a.call(d,d.__data__,g)&&b.push(d)}return sa(e)};F.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];0<=--e;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this};F.sort=function(a){a=Cg.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};F.each=function(a){return ta(this,
function(b,c,d){a.call(b,b.__data__,c,d)})};F.call=function(a){var b=ua(arguments);return a.apply(b[0]=this,b),this};F.empty=function(){return!this.node()};F.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null};F.size=function(){var a=0;return this.each(function(){++a}),a};var ja=[];k.selection.enter=$d;k.selection.enter.prototype=ja;ja.append=F.append;ja.empty=F.empty;ja.node=F.node;ja.call=F.call;ja.size=F.size;ja.select=
function(a){for(var b,c,d,e,f,h=[],g=-1,m=this.length;++g<m;){d=(e=this[g]).update;h.push(b=[]);b.parentNode=e.parentNode;for(var l=-1,k=e.length;++l<k;)(f=e[l])?(b.push(d[l]=c=a.call(e.parentNode,f.__data__,l,g)),c.__data__=f.__data__):b.push(null)}return sa(h)};ja.insert=function(a,b){return 2>arguments.length&&(b=Dg(this)),F.insert.call(this,a,b)};F.transition=function(){for(var a,b,c=Oa||++fg,d=[],e=cc||{time:Date.now(),ease:eh,delay:0,duration:250},f=-1,h=this.length;++f<h;){d.push(a=[]);for(var g=
this[f],m=-1,l=g.length;++m<l;)(b=g[m])&&Vb(b,m,c,e),a.push(b)}return ob(d,c)};F.interrupt=function(){return this.each(qb)};k.select=function(a){a=["string"==typeof a?yc(a,ia):a];return a.parentNode=va,sa([a])};k.selectAll=function(a){a=ua("string"==typeof a?zc(a,ia):a);return a.parentNode=va,sa([a])};var eg=k.select(va);F.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(ae(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;
c=!1}return this.each(ae(a,b,c))};var Ac=k.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ac.forEach(function(a){"on"+a in ia&&Ac.remove(a)});var Bc=uc(va.style,"userSelect"),Fg=0;k.mouse=function(a){return ce(a,Pd())};var Cc=/WebKit/.test(P.navigator.userAgent)?-1:0;k.touches=function(a,b){return 2>arguments.length&&(b=Pd().touches),b?ua(b).map(function(b){var d=ce(a,b);return d.identifier=b.identifier,d}):[]};k.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",
f)}function b(a,b,f,e){return function(){var n,q=this.parentNode,p=c.of(this,arguments),r=k.event.target,s=a(),t=null==s?"drag":"drag-"+s,v=b(q,s),u=0,x=k.select(P).on(f+"."+t,function(){var a=b(q,s),c=a[0]-v[0],d=a[1]-v[1];u|=c|d;v=a;p({type:"drag",x:a[0]+n[0],y:a[1]+n[1],dx:c,dy:d})}).on(e+"."+t,function(){x.on(f+"."+t,null).on(e+"."+t,null);z(u&&k.event.target===r);p({type:"dragend"})}),z=rb();d?(n=d.apply(this,arguments),n=[n.x-v[0],n.y-v[1]]):n=[0,0];p({type:"dragstart"})}}var c=wc(a,"drag",
"dragstart","dragend"),d=null,e=b(G,k.mouse,"mousemove","mouseup"),f=b(function(){return k.event.changedTouches[0].identifier},function(a,b){return k.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},k.rebind(a,c,"on")};var D=Math.PI,V=2*D,T=D/2,y=1E-6,ed=y*y,C=D/180,K=180/D,dc=Math.SQRT2,Bd=2;k.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){a=Dc(p);var c=f/(Bd*k),h,l=dc*b+p;h=((l=Math.exp(2*
l))-1)/(l+1);c*=a*h-de(p);return[d+c*g,e+c*m,f*a/Dc(dc*b+p)]}return[d+a*g,e+a*m,f*Math.exp(dc*b)]}var d=a[0],e=a[1],f=a[2],h=b[2],g=b[0]-d,m=b[1]-e,l=g*g+m*m,k=Math.sqrt(l),q=(h*h-f*f+4*l)/(2*f*Bd*k),l=(h*h-f*f-4*l)/(2*h*Bd*k),p=Math.log(Math.sqrt(q*q+1)-q),r=Math.log(Math.sqrt(l*l+1)-l)-p,s=(r||Math.log(h/f))/dc;return c.duration=1E3*s,c};k.behavior.zoom=function(){function a(a){a.on(w,m).on(di+".zoom",n).on(N,q).on("dblclick.zoom",p).on(C,l)}function b(a){return[(a[0]-A.x)/A.k,(a[1]-A.y)/A.k]}function c(a){A.k=
Math.max(I[0],Math.min(I[1],a))}function d(a,b){b=[b[0]*A.k+A.x,b[1]*A.k+A.y];A.x+=a[0]-b[0];A.y+=a[1]-b[1]}function e(){x&&x.domain(u.range().map(function(a){return(a-A.x)/A.k}).map(u.invert));B&&B.domain(z.range().map(function(a){return(a-A.y)/A.k}).map(z.invert))}function f(a){a({type:"zoomstart"})}function h(a){e();a({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function g(a){a({type:"zoomend"})}function m(){var a=this,c=D.of(a,arguments),e=k.event.target,l=0,m=k.select(P).on(N,function(){l=1;
d(k.mouse(a),n);h(c)}).on(y,function(){m.on(N,P===a?q:null).on(y,null);p(l&&k.event.target===e);g(c)}),n=b(k.mouse(a)),p=rb();qb.call(a);f(c)}function l(){function a(){var c=k.touches(p);return n=A.k,c.forEach(function(a){a.identifier in z&&(z[a.identifier]=b(a))}),c}function e(){for(var b=k.event.changedTouches,f=0,g=b.length;g>f;++f)z[b[f].identifier]=null;g=a();f=Date.now();1===g.length?(500>f-v&&(b=g[0],g=z[b.identifier],c(2*A.k),d(b,g),ra(),h(x)),v=f):1<g.length&&(b=g[0],g=g[1],f=b[0]-g[0],b=
b[1]-g[1],q=f*f+b*b)}var n,p=this,x=D.of(p,arguments),z={},q=0,s=k.event.changedTouches[0].identifier,u="touchmove.zoom-"+s,t="touchend.zoom-"+s,r=k.select(P).on(u,function(){for(var a,b,f,e,g=k.touches(p),l=0,m=g.length;m>l;++l,e=null)if(f=g[l],e=z[f.identifier]){if(b)break;a=f;b=e}if(e){var s=(s=f[0]-a[0])*s+(s=f[1]-a[1])*s,g=q&&Math.sqrt(s/q);a=[(a[0]+f[0])/2,(a[1]+f[1])/2];b=[(b[0]+e[0])/2,(b[1]+e[1])/2];c(g*n)}v=null;d(a,b);h(x)}).on(t,function(){if(k.event.touches.length){for(var b=k.event.changedTouches,
c=0,d=b.length;d>c;++c)delete z[b[c].identifier];for(var f in z)return void a()}r.on(u,null).on(t,null);B.on(w,m).on(C,l);I();g(x)}),B=k.select(p).on(w,null).on(C,e),I=rb();qb.call(p);e();f(x)}function n(){var a=D.of(this,arguments);t?clearTimeout(t):(qb.call(this),f(a));t=setTimeout(function(){t=null;g(a)},50);ra();var e=s||k.mouse(this);r||(r=b(e));c(Math.pow(2,0.0020*ec())*A.k);d(e,r);h(a)}function q(){r=null}function p(){var a=D.of(this,arguments),e=k.mouse(this),l=b(e),m=Math.log(A.k)/Math.LN2;
f(a);c(Math.pow(2,k.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(e,l);h(a);g(a)}var r,s,t,v,u,x,z,B,A={x:0,y:0,k:1},L=[960,500],I=gg,w="mousedown.zoom",N="mousemove.zoom",y="mouseup.zoom",C="touchstart.zoom",D=wc(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=D.of(this,arguments),b=A;Oa?k.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=L[0],d=c/2,f=L[1]/2,e=k.interpolateZoom([(d-
A.x)/A.k,(f-A.y)/A.k,c/A.k],[(d-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){b=e(b);var g=c/b[2];this.__chart__=A={x:d-b[0]*g,y:f-b[1]*g,k:g};h(a)}}).each("end.zoom",function(){g(a)}):(this.__chart__=A,f(a),h(a),g(a))})},a.translate=function(b){return arguments.length?(A={x:+b[0],y:+b[1],k:A.k},e(),a):[A.x,A.y]},a.scale=function(b){return arguments.length?(A={x:A.x,y:A.y,k:+b},e(),a):A.k},a.scaleExtent=function(b){return arguments.length?(I=null==b?gg:[+b[0],+b[1]],a):I},a.center=function(b){return arguments.length?
(s=b&&[+b[0],+b[1]],a):s},a.size=function(b){return arguments.length?(L=b&&[+b[0],+b[1]],a):L},a.x=function(b){return arguments.length?(x=b,u=b.copy(),A={x:0,y:0,k:1},a):x},a.y=function(b){return arguments.length?(B=b,z=b.copy(),A={x:0,y:0,k:1},a):B},k.rebind(a,D,"on")};var ec,gg=[0,1/0],di="onwheel"in ia?(ec=function(){return-k.event.deltaY*(k.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ia?(ec=function(){return k.event.wheelDelta},"mousewheel"):(ec=function(){return-k.event.detail},"MozMousePixelScroll");
Pa.prototype.toString=function(){return this.rgb()+""};k.hsl=function(a,b,c){return 1===arguments.length?a instanceof Ec?Qa(a.h,a.s,a.l):ke(""+a,le,Qa):Qa(+a,+b,+c)};var Cd=Ec.prototype=new Pa;Cd.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),Qa(this.h,this.s,this.l/a)};Cd.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),Qa(this.h,this.s,a*this.l)};Cd.rgb=function(){return Fc(this.h,this.s,this.l)};k.hcl=function(a,b,c){return 1===arguments.length?a instanceof sb?Ra(a.h,
a.c,a.l):a instanceof tb?je(a.l,a.a,a.b):je((a=me((a=k.rgb(a)).r,a.g,a.b)).l,a.a,a.b):Ra(+a,+b,+c)};var Dd=sb.prototype=new Pa;Dd.brighter=function(a){return Ra(this.h,this.c,Math.min(100,this.l+fc*(arguments.length?a:1)))};Dd.darker=function(a){return Ra(this.h,this.c,Math.max(0,this.l-fc*(arguments.length?a:1)))};Dd.rgb=function(){return Gc(this.h,this.c,this.l).rgb()};k.lab=function(a,b,c){return 1===arguments.length?a instanceof tb?Sa(a.l,a.a,a.b):a instanceof sb?Gc(a.l,a.c,a.h):me((a=k.rgb(a)).r,
a.g,a.b):Sa(+a,+b,+c)};var fc=18,ge=0.95047,he=1,ie=1.08883,Ed=tb.prototype=new Pa;Ed.brighter=function(a){return Sa(Math.min(100,this.l+fc*(arguments.length?a:1)),this.a,this.b)};Ed.darker=function(a){return Sa(Math.max(0,this.l-fc*(arguments.length?a:1)),this.a,this.b)};Ed.rgb=function(){return fe(this.l,this.a,this.b)};k.rgb=function(a,b,c){return 1===arguments.length?a instanceof Kc?ea(a.r,a.g,a.b):ke(""+a,ea,Fc):ea(~~a,~~b,~~c)};var gc=Kc.prototype=new Pa;gc.brighter=function(a){a=Math.pow(0.7,
arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),ea(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))):ea(30,30,30)};gc.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),ea(~~(a*this.r),~~(a*this.g),~~(a*this.b))};gc.hsl=function(){return le(this.r,this.g,this.b)};gc.toString=function(){return"#"+Ta(this.r)+Ta(this.g)+Ta(this.b)};var vb=k.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,
whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});vb.forEach(function(a,b){vb.set(a,ea(b>>16,255&b>>8,255&b))});k.functor=J;k.xhr=Nc(O);k.dsv=function(a,b){function c(a,c,f){3>arguments.length&&(f=c,c=null);var g=k.xhr(a,b,f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g.row(c)}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(h).join(a)}function h(a){return g.test(a)?
'"'+a.replace(/\"/g,'""')+'"':a}var g=RegExp('["'+a+"\n]"),m=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var f=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(f(a),c)}:f})},c.parseRows=function(a,b){function c(){if(x>=k)return g;if(f)return f=!1,e;var b=x;if(34===a.charCodeAt(b)){for(var d=b;d++<k;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;
++d}x=d+2;var h=a.charCodeAt(d+1);return 13===h?(f=!0,10===a.charCodeAt(d+2)&&++x):10===h&&(f=!0),a.substring(b+1,d).replace(/""/g,'"')}for(;k>x;){h=a.charCodeAt(x++);d=1;if(10===h)f=!0;else if(13===h)f=!0,10===a.charCodeAt(x)&&(++x,++d);else if(h!==m)continue;return a.substring(b,x-d)}return a.substring(b)}for(var d,f,e={},g={},h=[],k=a.length,x=0,z=0;(d=c())!==g;){for(var B=[];d!==e&&d!==g;)B.push(d),d=c();(!b||(B=b(B,z++)))&&h.push(B)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);
var d=new tc,f=[];return b.forEach(function(a){for(var b in a)d.has(b)||f.push(d.add(b))}),[f.map(h).join(a)].concat(b.map(function(b){return f.map(function(a){return h(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c};k.csv=k.dsv(",","text/csv");k.tsv=k.dsv("\t","text/tab-separated-values");var yb,zb,xb,wb,ka,pe=P[uc(P,"requestAnimationFrame")]||function(a){setTimeout(a,17)};k.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,
t:c+b,f:!1,n:null};zb?zb.n=d:yb=d;zb=d;xb||(wb=clearTimeout(wb),xb=1,pe(Pc))};k.timer.flush=function(){ne();oe()};var hc=[3,3],ei="y z a f p n µ m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*E(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});k.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=k.round(a,Qc(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),ei[8+c/3]};
k.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};k.format=function(a){a=Cf.exec(a);var b=a[1]||" ",c=a[2]||"\x3e",d=a[3]||"",e=a[4]||"",f=a[5],h=+a[6],g=a[7],m=a[8],l=a[9],n=1,q="",p=!1;switch(m&&(m=+m.substring(1)),(f||"0"===b&&"\x3d"===c)&&(f=b="0",c="\x3d",g&&(h-=Math.floor((h-1)/4))),l){case "n":g=!0;l="g";break;case "%":n=100;q="%";l="f";break;case "p":n=100;q="%";l="r";break;case "b":case "o":case "x":case "X":"#"===e&&(e="0"+l.toLowerCase());case "c":case "d":p=
!0;m=0;break;case "s":n=-1,l="r"}"#"===e?e="":"$"===e&&(e="$");"r"!=l||m||(l="g");null!=m&&("g"==l?m=Math.max(1,Math.min(21,m)):("e"==l||"f"==l)&&(m=Math.max(0,Math.min(20,m))));var l=fi.get(l)||Hg,r=f&&g;return function(a){if(p&&a%1)return"";var t=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>n){var v=k.formatPrefix(a,m);a=v.scale(a);q=v.symbol}else a*=n;a=l(a,m);var u=a.lastIndexOf("."),v=0>u?a:a.substring(0,u),u=0>u?"":"."+a.substring(u+1);!f&&g&&(v=Fd(v));var x=e.length+v.length+u.length+(r?0:t.length),
z=h>x?Array(x=h-x+1).join(b):"";return r&&(v=Fd(z+v)),t+=e,a=v+u,("\x3c"===c?t+a+z:"\x3e"===c?z+t+a:"^"===c?z.substring(0,x>>=1)+t+a+z.substring(x):t+(r?a:z+a))+q}};var Cf=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,fi=k.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},
e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=k.round(a,Qc(a,b))).toFixed(Math.max(0,Math.min(20,Qc(a*(1+1E-15),b))))}}),Fd=O;if(hc)var gi=hc.length,Fd=function(a){for(var b=a.length,c=[],d=0,e=hc[0];0<b&&0<e;)c.push(a.substring(b-=e,b+e)),e=hc[d=(d+1)%gi];return c.reverse().join(",")};k.geo={};Rc.prototype={s:0,t:0,add:function(a){qe(a,this.t,ic);qe(ic.s,this.s,this);this.s?this.t+=ic.t:this.s=ic.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};
var ic=new Rc;k.geo.stream=function(a,b){a&&hg.hasOwnProperty(a.type)?hg[a.type](a,b):Ab(a,b)};var hg={Feature:function(a,b){Ab(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)Ab(c[d].geometry,b)}},re={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Sc(a.coordinates,b,0)},MultiLineString:function(a,
b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Sc(c[d],b,0)},Polygon:function(a,b){se(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)se(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)Ab(c[d],b)}};k.geo.area=function(a){return cb=0,k.geo.stream(a,W),cb};var cb,Ea=new Rc,W={sphere:function(){cb+=4*D},point:G,lineStart:G,lineEnd:G,polygonStart:function(){Ea.reset();W.lineStart=Ig},polygonEnd:function(){var a=2*Ea;
cb+=0>a?4*D+a:a;W.lineStart=W.lineEnd=W.point=G}};k.geo.bounds=function(){function a(a,b){z.push(B=[n=a,p=a]);q>b&&(q=b);b>r&&(r=b)}function b(b,c){var d=Fa([b*C,c*C]);if(u){var f=Ua(u,d),f=Ua([f[1],-f[0],0],f);Db(f);var f=Eb(f),e=b-s,h=0<e?1:-1,m=f[0]*K*h,e=180<E(e);e^(m>h*s&&h*b>m)?(f=f[1]*K,f>r&&(r=f)):(m=(m+360)%360-180,e^(m>h*s&&h*b>m))?(f=-f[1]*K,q>f&&(q=f)):(q>c&&(q=c),c>r&&(r=c));e?s>b?g(n,b)>g(n,p)&&(p=b):g(b,p)>g(n,p)&&(n=b):p>=n?(n>b&&(n=b),b>p&&(p=b)):b>s?g(n,b)>g(n,p)&&(p=b):g(b,p)>g(n,
p)&&(n=b)}else a(b,c);u=d;s=b}function c(){A.point=b}function d(){B[0]=n;B[1]=p;A.point=a;u=null}function e(a,c){if(u){var d=a-s;x+=180<E(d)?d+(0<d?360:-360):d}else t=a,v=c;W.point(a,c);b(a,c)}function f(){W.lineStart()}function h(){e(t,v);W.lineEnd();E(x)>y&&(n=-(p=180));B[0]=n;B[1]=p;u=null}function g(a,b){return 0>(b-=a)?b+360:b}function m(a,b){return a[0]-b[0]}function l(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var n,q,p,r,s,t,v,u,x,z,B,A={point:a,lineStart:c,lineEnd:d,polygonStart:function(){A.point=
e;A.lineStart=f;A.lineEnd=h;x=0;W.polygonStart()},polygonEnd:function(){W.polygonEnd();A.point=a;A.lineStart=c;A.lineEnd=d;0>Ea?(n=-(p=180),q=-(r=90)):x>y?r=90:-y>x&&(q=-90);B[0]=n;B[1]=p}};return function(a){r=p=-(n=q=1/0);z=[];k.geo.stream(a,A);if(a=z.length){z.sort(m);for(var b,c=1,d=z[0],f=[d];a>c;++c)b=z[c],l(b[0],d)||l(b[1],d)?(g(d[0],b[1])>g(d[0],d[1])&&(d[1]=b[1]),g(b[0],d[1])>g(d[0],d[1])&&(d[0]=b[0])):f.push(d=b);var e,h=-1/0;a=f.length-1;c=0;for(d=f[a];a>=c;d=b,++c)b=f[c],(e=g(d[1],b[0]))>
h&&(h=e,n=b[0],p=d[1])}return z=B=null,1/0===n||1/0===q?[[0/0,0/0],[0/0,0/0]]:[[n,q],[p,r]]}}();k.geo.centroid=function(a){fb=Va=la=ma=fa=Z=$=U=wa=xa=ga=0;k.geo.stream(a,ba);a=wa;var b=xa,c=ga,d=a*a+b*b+c*c;return ed>d&&(a=Z,b=$,c=U,y>Va&&(a=la,b=ma,c=fa),d=a*a+b*b+c*c,ed>d)?[0/0,0/0]:[Math.atan2(b,a)*K,Da(c/Math.sqrt(d))*K]};var fb,Va,la,ma,fa,Z,$,U,wa,xa,ga,ba={sphere:G,point:Uc,lineStart:te,lineEnd:ue,polygonStart:function(){ba.lineStart=Jg},polygonEnd:function(){ba.lineStart=te}},Ke=xe(Wa,function(a){var b,
c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart();b=1},point:function(f,h){var g=0<f?D:-D,m=E(f-c);if(E(m-D)<y)a.point(c,d=0<(d+h)/2?T:-T),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(g,d),a.point(f,d),b=0;else if(e!==g&&m>=D){E(c-e)<y&&(c-=e*y);E(f-g)<y&&(f-=g*y);var m=c,l=d,k=f,q,p,r=Math.sin(m-k);d=E(r)>y?Math.atan((Math.sin(l)*(p=Math.cos(h))*Math.sin(k)-Math.sin(h)*(q=Math.cos(l))*Math.sin(m))/(q*p*r)):(l+h)/2;a.point(e,d);a.lineEnd();a.lineStart();a.point(g,d);b=0}a.point(c=f,d=
h);e=g},lineEnd:function(){a.lineEnd();c=d=0/0},clean:function(){return 2-b}}},function(a,b,c,d){null==a?(c*=T,d.point(-D,c),d.point(0,c),d.point(D,c),d.point(D,0),d.point(D,-c),d.point(0,-c),d.point(-D,-c),d.point(-D,0),d.point(-D,c)):E(a[0]-b[0])>y?(a=a[0]<b[0]?D:-D,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-D,-D/2]),Hb=1E9;k.geo.clipExtent=function(){var a,b,c,d,e,f,h={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(g){return arguments.length?
(f=De(a=+g[0][0],b=+g[0][1],c=+g[1][0],d=+g[1][1]),e&&(e.valid=!1,e=null),h):[[a,b],[c,d]]}};return h.extent([[0,0],[960,500]])};(k.geo.conicEqualArea=function(){return Xc(Fe)}).raw=Fe;k.geo.albers=function(){return k.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)};k.geo.albersUsa=function(){function a(a){var f=a[0];a=a[1];return b=null,c(f,a),b||(d(f,a),b)||e(f,a),b}var b,c,d,e,f=k.geo.albers(),h=k.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,
65]),g=k.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),m={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,b=(a[1]-c[1])/b;return(0.12<=b&&0.234>b&&-0.425<=d&&-0.214>d?h:0.166<=b&&0.234>b&&-0.214<=d&&-0.115>d?g:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=h.stream(a),d=g.stream(a);return{point:function(a,f){b.point(a,f);c.point(a,f);d.point(a,f)},sphere:function(){b.sphere();c.sphere();d.sphere()},lineStart:function(){b.lineStart();
c.lineStart();d.lineStart()},lineEnd:function(){b.lineEnd();c.lineEnd();d.lineEnd()},polygonStart:function(){b.polygonStart();c.polygonStart();d.polygonStart()},polygonEnd:function(){b.polygonEnd();c.polygonEnd();d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),h.precision(b),g.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),h.scale(0.35*b),g.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();
var k=f.scale(),q=+b[0],p=+b[1];return c=f.translate(b).clipExtent([[q-0.455*k,p-0.238*k],[q+0.455*k,p+0.238*k]]).stream(m).point,d=h.translate([q-0.307*k,p+0.201*k]).clipExtent([[q-0.425*k+y,p+0.12*k+y],[q-0.214*k-y,p+0.234*k-y]]).stream(m).point,e=g.translate([q-0.205*k,p+0.212*k]).clipExtent([[q-0.214*k+y,p+0.166*k+y],[q-0.115*k-y,p+0.234*k-y]]).stream(m).point,a},a.scale(1070)};var jc,Ib,kc,lc,mc,nc,ya={point:G,lineStart:G,lineEnd:G,polygonStart:function(){Ib=0;ya.lineStart=Ng},polygonEnd:function(){ya.lineStart=
ya.lineEnd=ya.point=G;jc+=E(Ib/2)}},hi={point:function(a,b){kc>a&&(kc=a);a>mc&&(mc=a);lc>b&&(lc=b);b>nc&&(nc=b)},lineStart:G,lineEnd:G,polygonStart:G,polygonEnd:G},ca={point:Ha,lineStart:He,lineEnd:Ie,polygonStart:function(){ca.lineStart=Pg},polygonEnd:function(){ca.point=Ha;ca.lineStart=He;ca.lineEnd=Ie}};k.geo.transform=function(a){return{stream:function(b){b=new Jb(b);for(var c in a)b[c]=a[c];return b}}};Jb.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},
lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};k.geo.path=function(){function a(a){return a&&("function"==typeof h&&e.pointRadius(+h.apply(this,arguments)),f&&f.valid||(f=d(e)),k.geo.stream(a,f)),e.result()}var b,c,d,e,f,h=4.5;return a.area=function(a){return jc=0,k.geo.stream(a,d(ya)),jc},a.centroid=function(a){return la=ma=fa=Z=$=U=wa=xa=ga=0,k.geo.stream(a,
d(ca)),ga?[wa/ga,xa/ga]:U?[Z/U,$/U]:fa?[la/fa,ma/fa]:[0/0,0/0]},a.bounds=function(a){return mc=nc=-(kc=lc=1/0),k.geo.stream(a,d(hi)),[[kc,lc],[mc,nc]]},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||Rg(c):O,f=null,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new Og:new Qg(b),"function"!=typeof h&&e.pointRadius(h),f=null,a):c},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(e.pointRadius(+b),+b),a):h},a.projection(k.geo.albersUsa()).context(null)};
k.geo.projection=za;k.geo.projectionMutator=Yc;(k.geo.equirectangular=function(){return za(gb)}).raw=gb.invert=gb;k.geo.rotation=function(a){function b(b){return b=a(b[0]*C,b[1]*C),b[0]*=K,b[1]*=K,b}return a=Zc(a[0]%360*C,a[1]*C,2<a.length?a[2]*C:0),b.invert=function(b){return b=a.invert(b[0]*C,b[1]*C),b[0]*=K,b[1]*=K,b},b};Le.invert=gb;k.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=Zc(-a[0]*C,-a[1]*C,0).invert,e=[];return c(null,null,1,{point:function(a,
c){e.push(a=b(a,c));a[0]*=K;a[1]*=K}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=Wc((b=+d)*C,e*C),a):b},a.precision=function(d){return arguments.length?(c=Wc(b*C,(e=+d)*C),a):e},a.angle(90)};k.geo.distance=function(a,b){var c,d=(b[0]-a[0])*C,e=a[1]*C,f=b[1]*C,h=Math.sin(d),d=Math.cos(d),g=Math.sin(e),e=Math.cos(e),m=Math.sin(f),f=Math.cos(f);return Math.atan2(Math.sqrt((c=f*h)*
c+(c=e*m-g*f*d)*c),g*m+e*f*d)};k.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return k.range(Math.ceil(f/v)*v,e,v).map(p).concat(k.range(Math.ceil(l/u)*u,m,u).map(r)).concat(k.range(Math.ceil(d/s)*s,c,s).filter(function(a){return E(a%v)>y}).map(n)).concat(k.range(Math.ceil(g/t)*t,h,t).filter(function(a){return E(a%u)>y}).map(q))}var c,d,e,f,h,g,m,l,n,q,p,r,s=10,t=s,v=90,u=360,x=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[p(f).concat(r(m).slice(1),p(e).reverse().slice(1),r(l).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],l=+b[0][1],m=+b[1][1],f>e&&(b=f,f=e,e=b),l>m&&(b=l,l=m,m=b),a.precision(x)):[[f,l],[e,m]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],g=+b[0][1],h=+b[1][1],
d>c&&(b=d,d=c,c=b),g>h&&(b=g,g=h,h=b),a.precision(x)):[[d,g],[c,h]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(v=+b[0],u=+b[1],a):[v,u]},a.minorStep=function(b){return arguments.length?(s=+b[0],t=+b[1],a):[s,t]},a.precision=function(b){return arguments.length?(x=+b,n=Qe(g,h,90),q=Re(d,c,x),p=Qe(l,m,90),r=Re(f,e,x),a):x},a.majorExtent([[-180,-90+y],[180,90-y]]).minorExtent([[-180,-80-y],[180,80+y]])};k.geo.greatArc=
function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=$c,e=ad;return a.distance=function(){return k.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a};k.geo.interpolate=function(a,b){return Tg(a[0]*
C,a[1]*C,b[0]*C,b[1]*C)};k.geo.length=function(a){return oc=0,k.geo.stream(a,db),oc};var oc,db={sphere:G,point:G,lineStart:function(){function a(a,f){var h=Math.sin(f*=C),g=Math.cos(f),m=E((a*=C)-b),k=Math.cos(m);oc+=Math.atan2(Math.sqrt((m=g*Math.sin(m))*m+(m=d*h-c*g*k)*m),c*h+d*g*k);b=a;c=h;d=g}var b,c,d;db.point=function(e,f){b=e*C;c=Math.sin(f*=C);d=Math.cos(f);db.point=a};db.lineEnd=function(){db.point=db.lineEnd=G}},lineEnd:G,polygonStart:G,polygonEnd:G},ig=hb(function(a){return Math.sqrt(2/
(1+a))},function(a){return 2*Math.asin(a/2)});(k.geo.azimuthalEqualArea=function(){return za(ig)}).raw=ig;var jg=hb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},O);(k.geo.azimuthalEquidistant=function(){return za(jg)}).raw=jg;(k.geo.conicConformal=function(){return Xc(Se)}).raw=Se;(k.geo.conicEquidistant=function(){return Xc(Te)}).raw=Te;var kg=hb(function(a){return 1/a},Math.atan);(k.geo.gnomonic=function(){return za(kg)}).raw=kg;Kb.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-T]};
(k.geo.mercator=function(){return Ue(Kb)}).raw=Kb;var lg=hb(function(){return 1},Math.asin);(k.geo.orthographic=function(){return za(lg)}).raw=lg;var mg=hb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(k.geo.stereographic=function(){return za(mg)}).raw=mg;bd.invert=function(a,b){return[Math.atan2(de(a),Math.cos(b)),Da(Math.sin(b)/Dc(a))]};(k.geo.transverseMercator=function(){return Ue(bd)}).raw=bd;k.geom={};k.geom.hull=function(a){function b(a){if(3>a.length)return[];var b,h,g,
m,k,n,q,p,r,s;p=J(c);r=J(d);s=a.length;var t=s-1,v=[],u=[],x=0;if(p===Ia&&d===Xa)b=a;else{g=0;for(b=[];s>g;++g)b.push([+p.call(this,h=a[g],g),+r.call(this,h,g)])}for(g=1;s>g;++g)(b[g][1]<b[x][1]||b[g][1]==b[x][1]&&b[g][0]<b[x][0])&&(x=g);for(g=0;s>g;++g)g!==x&&(k=b[g][1]-b[x][1],m=b[g][0]-b[x][0],v.push({angle:Math.atan2(k,m),index:g}));v.sort(function(a,b){return a.angle-b.angle});s=v[0].angle;r=v[0].index;p=0;for(g=1;t>g;++g){if(h=v[g].index,s==v[g].angle){if(m=b[r][0]-b[x][0],k=b[r][1]-b[x][1],
n=b[h][0]-b[x][0],q=b[h][1]-b[x][1],m*m+k*k>=n*n+q*q){v[g].index=-1;continue}v[p].index=-1}s=v[g].angle;p=g;r=h}u.push(x);for(h=g=0;2>g;++h)-1<v[h].index&&(u.push(v[h].index),g++);for(g=u.length;t>h;++h)if(!(0>v[h].index)){for(;!Ug(u[g-2],u[g-1],v[h].index,b);)--g;u[g++]=v[h].index}b=[];for(g-=1;0<=g;--g)b.push(a[u[g]]);return b}var c=Ia,d=Xa;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)};k.geom.polygon=function(a){return pb(a,
pc),a};var pc=k.geom.polygon.prototype=[];pc.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return 0.5*e};pc.centroid=function(a){var b,c,d=-1,e=this.length,f=0,h=0,g=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=g,g=this[d],c=b[0]*g[1]-g[0]*b[1],f+=(b[0]+g[0])*c,h+=(b[1]+g[1])*c;return[f*a,h*a]};pc.clip=function(a){for(var b,c,d,e,f,h,g=We(a),m=-1,k=this.length-We(this),n=this[k-1];++m<k;){b=a.slice();a.length=0;e=this[m];
f=b[(d=b.length-g)-1];for(c=-1;++c<d;)h=b[c],cd(h,n,e)?(cd(f,n,e)||a.push(Ve(f,h,n,e)),a.push(h)):cd(f,n,e)&&a.push(Ve(f,h,n,e)),f=h;g&&a.push(a[0]);n=e}return a};var ab,Ja,Za,fd,ib,Ye=[],bf=[];$e.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(af),b.length};Nb.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};gd.prototype=
{insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=df(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(kb(this,c),a=c,c=a.U),c.C=!1,d.C=!0,lb(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(lb(this,c),a=c,c=a.U),c.C=!1,d.C=!0,kb(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&
(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b,c,d,e=a.U,f=a.L,h=a.R;if(c=f?h?df(h):f:h,e?e.L===a?e.L=c:e.R=c:this._=c,f&&h?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==h?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=h,h.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return a.C=!1,void 0;do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,kb(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,lb(this,b),b=e.R);b.C=e.C;e.C=b.R.C=!1;kb(this,e);a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,
e.C=!0,lb(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,kb(this,b),b=e.L);b.C=e.C;e.C=b.L.C=!1;lb(this,e);a=this._;break}b.C=!0;a=e;e=e.U}while(!a.C);a&&(a.C=!1)}}};k.geom.voronoi=function(a){function b(a){var b=Array(a.length),d=g[0][0],f=g[0][1],e=g[1][0],h=g[1][1];return hd(c(a),g).cells.forEach(function(c,g){var k=c.edges,u=c.site;(b[g]=k.length?k.map(function(a){a=a.start();return[a.x,a.y]}):u.x>=d&&u.x<=e&&u.y>=f&&u.y<=h?[[d,h],[e,h],[e,f],[d,f]]:[]).point=a[g]}),b}function c(a){return a.map(function(a,
b){return{x:Math.round(f(a,b)/y)*y,y:Math.round(h(a,b)/y)*y,i:b}})}var d=Ia,e=Xa,f=d,h=e,g=qc;return a?b(a):(b.links=function(a){return hd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return hd(c(a)).cells.forEach(function(c,d){for(var f,e=c.site,g=c.edges.sort(af),h=-1,k=g.length,u=g[k-1].edge,u=u.l===e?u.r:u.l;++h<k;)f=u,u=g[h].edge,u=u.l===e?u.r:u.l,d<f.i&&d<u.i&&0>(e.x-u.x)*(f.y-e.y)-(e.x-f.x)*(u.y-
e.y)&&b.push([a[d],a[f.i],a[u.i]])}),b},b.x=function(a){return arguments.length?(f=J(d=a),b):d},b.y=function(a){return arguments.length?(h=J(e=a),b):e},b.clipExtent=function(a){return arguments.length?(g=null==a?qc:a,b):g===qc?null:g},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):g===qc?null:g&&g[1]},b)};var qc=[[-1E6,-1E6],[1E6,1E6]];k.geom.delaunay=function(a){return k.geom.voronoi().triangles(a)};k.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,g,h,
k){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var m=a.x,l=a.y;if(null!=m){if(!(0.01>E(m-c)+E(l-d))){var n=a.point;a.x=a.y=a.point=null;q(a,n,m,l,e,g,h,k)}q(a,b,c,d,e,g,h,k)}else a.x=c,a.y=d,a.point=b}else q(a,b,c,d,e,g,h,k)}function q(a,b,c,d,e,g,h,k){var m=0.5*(e+h),l=0.5*(g+k),p=c>=m,x=d>=l,z=(x<<1)+p;a.leaf=!1;a=a.nodes[z]||(a.nodes[z]=ef());p?e=m:h=m;x?g=l:k=l;f(a,b,c,d,e,g,h,k)}var p,r,s,t,v,u,x,z,B,A=J(g),w=J(k);if(null!=b)u=b,x=c,z=d,B=e;else if(z=B=-(u=x=1/0),r=[],s=[],v=a.length,h)for(t=0;v>t;++t)p=
a[t],p.x<u&&(u=p.x),p.y<x&&(x=p.y),p.x>z&&(z=p.x),p.y>B&&(B=p.y),r.push(p.x),s.push(p.y);else for(t=0;v>t;++t){var I=+A(p=a[t],t);p=+w(p,t);u>I&&(u=I);x>p&&(x=p);I>z&&(z=I);p>B&&(B=p);r.push(I);s.push(p)}I=z-u;p=B-x;I>p?B=x+I:z=u+p;var y=ef();if(y.add=function(a){f(y,a,+A(a,++t),+w(a,t),u,x,z,B)},y.visit=function(a){mb(a,y,u,x,z,B)},t=-1,null==b){for(;++t<v;)f(y,a[t],r[t],s[t],u,x,z,B);--t}else a.forEach(y.add);return r=s=a=p=null,y}var h,g=Ia,k=Xa;return(h=arguments.length)?(g=$g,k=ah,3===h&&(e=
c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(g=a,f):g},f.y=function(a){return arguments.length?(k=a,f):k},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)};k.interpolateRgb=id;k.interpolateObject=ff;k.interpolateNumber=na;k.interpolateString=gf;var Ob=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
k.interpolate=Ka;k.interpolators=[function(a,b){var c=typeof b;return("string"===c?vb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?id:gf:b instanceof Pa?id:"object"===c?Array.isArray(b)?Pb:ff:na)(a,b)}];k.interpolateArray=Pb;var ng=function(){return O},ii=k.map({linear:ng,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return ch},cubic:function(){return dh},sin:function(){return fh},exp:function(){return gh},circle:function(){return hh},elastic:function(a,b){var c;return 2>arguments.length&&
(b=0.45),arguments.length?c=b/V*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*V/b)}},back:function(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return ih}}),ji=k.map({"in":O,out:hf,"in-out":jf,"out-in":function(a){return jf(hf(a))}});k.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=ii.get(c)||ng,b=ji.get(b)||O,bh(b(c.apply(null,ag.call(arguments,1))))};k.interpolateHcl=function(a,
b){a=k.hcl(a);b=k.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,h=b.c-d,g=b.l-e;return isNaN(h)&&(h=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return Gc(c+f*a,d+h*a,e+g*a)+""}};k.interpolateHsl=function(a,b){a=k.hsl(a);b=k.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,h=b.s-d,g=b.l-e;return isNaN(h)&&(h=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(a){return Fc(c+f*a,d+h*a,e+g*a)+""}};k.interpolateLab=function(a,b){a=k.lab(a);
b=k.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,h=b.a-d,g=b.b-e;return function(a){return fe(c+f*a,d+h*a,e+g*a)+""}};k.interpolateRound=kf;k.transform=function(a){var b=ia.createElementNS(k.ns.prefix.svg,"g");return(k.transform=function(a){if(null!=a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new lf(d?d.matrix:ki)})(a)};lf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ki={a:1,b:0,
c:0,d:1,e:0,f:0};k.interpolateTransform=nf;k.layout={};k.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(lh(a[c]));return b}};k.layout.chord=function(){function a(){var a,l,r,s,t,v={},u=[],x=k.range(f),z=[];c=[];d=[];a=0;for(s=-1;++s<f;){l=0;for(t=-1;++t<f;)l+=e[s][t];u.push(l);z.push(k.range(f));a+=l}h&&x.sort(function(a,b){return h(u[a],u[b])});g&&z.forEach(function(a,b){a.sort(function(a,c){return g(e[b][a],e[b][c])})});a=(V-n*f)/a;l=0;for(s=-1;++s<f;){r=
l;for(t=-1;++t<f;){var B=x[s],A=z[B][t],w=e[B][A],I=l,y=l+=w*a;v[B+"-"+A]={index:B,subindex:A,startAngle:I,endAngle:y,value:w}}d[B]={index:B,startAngle:r,endAngle:l,value:(l-r)/a};l+=n}for(s=-1;++s<f;)for(t=s-1;++t<f;)a=v[s+"-"+t],l=v[t+"-"+s],(a.value||l.value)&&c.push(a.value<l.value?{source:l,target:a}:{source:a,target:l});m&&b()}function b(){c.sort(function(a,b){return m((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,h,g,m,l={},n=0;return l.matrix=function(a){return arguments.length?
(f=(e=a)&&e.length,c=d=null,l):e},l.padding=function(a){return arguments.length?(n=a,c=d=null,l):n},l.sortGroups=function(a){return arguments.length?(h=a,c=d=null,l):h},l.sortSubgroups=function(a){return arguments.length?(g=a,c=null,l):g},l.sortChords=function(a){return arguments.length?(m=a,c&&b(),l):m},l.chords=function(){return c||a(),c},l.groups=function(){return d||a(),d},l};k.layout.force=function(){function a(a){return function(b,c,d,f){if(b.point!==a){d=b.cx-a.x;var e=b.cy-a.y,g=1/Math.sqrt(d*
d+e*e);if(t>(f-c)*g)return c=b.charge*g*g,a.px-=d*c,a.py-=e*c,!0;b.point&&isFinite(g)&&(c=b.pointCharge*g*g,a.px-=d*c,a.py-=e*c)}return!b.charge}}function b(a){a.px=k.event.x;a.py=k.event.y;g.resume()}var c,d,e,f,h,g={},m=k.dispatch("start","tick","end"),l=[1,1],n=0.9,q=li,p=mi,r=-30,s=0.1,t=0.8,v=[],u=[];return g.tick=function(){if(0.0050>(d*=0.99))return m.end({type:"end",alpha:d=0}),!0;var b,c,g,p,t,q,w,y,C=v.length,D=u.length;for(c=0;D>c;++c)g=u[c],b=g.source,p=g.target,w=p.x-b.x,y=p.y-b.y,(t=
w*w+y*y)&&(t=d*f[c]*((t=Math.sqrt(t))-e[c])/t,w*=t,y*=t,p.x-=w*(q=b.weight/(p.weight+b.weight)),p.y-=y*q,b.x+=w*(q=1-q),b.y+=y*q);if((q=d*s)&&(w=l[0]/2,y=l[1]/2,c=-1,q))for(;++c<C;)g=v[c],g.x+=(w-g.x)*q,g.y+=(y-g.y)*q;if(r){pf(b=k.geom.quadtree(v),d,h);for(c=-1;++c<C;)(g=v[c]).fixed||b.visit(a(g))}for(c=-1;++c<C;)g=v[c],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*n,g.y-=(g.py-(g.py=g.y))*n);m.tick({type:"tick",alpha:d})},g.nodes=function(a){return arguments.length?(v=a,g):v},g.links=function(a){return arguments.length?
(u=a,g):u},g.size=function(a){return arguments.length?(l=a,g):l},g.linkDistance=function(a){return arguments.length?(q="function"==typeof a?a:+a,g):q},g.distance=g.linkDistance,g.linkStrength=function(a){return arguments.length?(p="function"==typeof a?a:+a,g):p},g.friction=function(a){return arguments.length?(n=+a,g):n},g.charge=function(a){return arguments.length?(r="function"==typeof a?a:+a,g):r},g.gravity=function(a){return arguments.length?(s=+a,g):s},g.theta=function(a){return arguments.length?
(t=+a,g):t},g.alpha=function(a){return arguments.length?(a=+a,d?d=0<a?a:0:0<a&&(m.start({type:"start",alpha:d=a}),k.timer(g.tick)),g):d},g.start=function(){function a(d,f){if(!c){c=Array(k);for(h=0;k>h;++h)c[h]=[];for(h=0;m>h;++h){var e=u[h];c[e.source.index].push(e.target);c[e.target.index].push(e.source)}}for(var g=c[b],h=-1,m=g.length;++h<m;)if(!isNaN(e=g[h][d]))return e;return Math.random()*f}var b,c,d,k=v.length,m=u.length,n=l[0],t=l[1];for(b=0;k>b;++b)(d=v[b]).index=b,d.weight=0;for(b=0;m>b;++b)d=
u[b],"number"==typeof d.source&&(d.source=v[d.source]),"number"==typeof d.target&&(d.target=v[d.target]),++d.source.weight,++d.target.weight;for(b=0;k>b;++b)d=v[b],isNaN(d.x)&&(d.x=a("x",n)),isNaN(d.y)&&(d.y=a("y",t)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof q)for(b=0;m>b;++b)e[b]=+q.call(this,u[b],b);else for(b=0;m>b;++b)e[b]=q;if(f=[],"function"==typeof p)for(b=0;m>b;++b)f[b]=+p.call(this,u[b],b);else for(b=0;m>b;++b)f[b]=p;if(h=[],"function"==typeof r)for(b=0;k>
b;++b)h[b]=+r.call(this,v[b],b);else for(b=0;k>b;++b)h[b]=r;return g.resume()},g.resume=function(){return g.alpha(0.1)},g.stop=function(){return g.alpha(0)},g.drag=function(){return c||(c=k.behavior.drag().origin(O).on("dragstart.force",mh).on("drag.force",b).on("dragend.force",nh)),arguments.length?(this.on("mouseover.force",oh).on("mouseout.force",ph).call(c),void 0):c},k.rebind(g,m,"on")};var li=20,mi=1;k.layout.hierarchy=function(){function a(b,g,k){var l=e.call(c,b,g);if(b.depth=g,k.push(b),
l&&(n=l.length)){for(var n,q=-1,p=b.children=Array(n),r=0,s=g+1;++q<n;)g=p[q]=a(l[q],s,k),g.parent=b,r+=g.value;d&&p.sort(d);f&&(b.value=r)}else delete b.children,f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,k=0;if(e&&(n=e.length))for(var n,q=-1,p=d+1;++q<n;)k+=b(e[q],p);else f&&(k=+f.call(c,a,d)||0);return f&&(a.value=k),k}function c(b){var c=[];return a(b,0,c),c}var d=th,e=rh,f=sh;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?
(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c};k.layout.partition=function(){function a(b,c,d,e){var k=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,k&&(n=k.length)){var n,q,p=-1;for(d=b.value?d/b.value:0;++p<n;)a(q=k[p],c,b=q.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(d=a.length))for(var d,e=-1;++e<d;)c=Math.max(c,b(a[e]));return 1+c}function c(c,h){var g=d.call(this,c,h);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=k.layout.hierarchy(),
e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},nb(c,d)};k.layout.pie=function(){function a(f){var h=f.map(function(c,d){return+b.call(a,c,d)}),g=+("function"==typeof d?d.apply(this,arguments):d),m=(("function"==typeof e?e.apply(this,arguments):e)-g)/k.sum(h),l=k.range(f.length);null!=c&&l.sort(c===og?function(a,b){return h[b]-h[a]}:function(a,b){return c(f[a],f[b])});var n=[];return l.forEach(function(a){var b;n[a]={data:f[a],value:b=h[a],startAngle:g,endAngle:g+=b*m}}),n}var b=
Number,c=og,d=0,e=V;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var og={};k.layout.stack=function(){function a(g,m){var l=g.map(function(c,d){return b.call(a,c,d)}),n=l.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),h.call(a,b,c)]})}),q=c.call(a,n,m),l=k.permute(l,q),n=k.permute(n,q),p,r,s=
d.call(a,n,m),t=l.length,v=l[0].length;for(p=0;v>p;++p){e.call(a,l[0][p],r=s[p],n[0][p][1]);for(q=1;t>q;++q)e.call(a,l[q][p],r+=n[q-1][p][1],n[q][p][1])}return g}var b=O,c=jd,d=kd,e=wh,f=uh,h=vh;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ni.get(b)||jd,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:oi.get(b)||kd,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?
(h=b,a):h},a.out=function(b){return arguments.length?(e=b,a):e},a};var ni=k.map({"inside-out":function(a){var b,c=a.length,d=a.map(xh),e=a.map(yh),f=k.range(c).sort(function(a,b){return d[a]-d[b]}),h=0,g=0,m=[],l=[];for(a=0;c>a;++a)b=f[a],g>h?(h+=e[b],m.push(b)):(g+=e[b],l.push(b));return l.reverse().concat(m)},reverse:function(a){return k.range(a.length).reverse()},"default":jd}),oi=k.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,h=[],g=0,k=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=
a[b][c][1];d>g&&(g=d);h.push(d)}for(c=0;f>c;++c)k[c]=(g-h[c])/2;return k},wiggle:function(a){var b,c,d,e,f,h,g,k,l,n=a.length,q=a[0],p=q.length,r=[];r[0]=k=l=0;for(c=1;p>c;++c){for(e=b=0;n>b;++b)e+=a[b][c][1];f=b=0;for(g=q[c][0]-q[c-1][0];n>b;++b){d=0;for(h=(a[b][c][1]-a[b][c-1][1])/(2*g);b>d;++d)h+=(a[d][c][1]-a[d][c-1][1])/g;f+=h*a[b][c][1]}r[c]=k-=e?f/e*g:0;l>k&&(l=k)}for(c=0;p>c;++c)r[c]-=l;return r},expand:function(a){var b,c,d,e=a.length,f=a[0].length,h=1/e,g=[];for(c=0;f>c;++c){for(d=b=0;e>
b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=h}for(c=0;f>c;++c)g[c]=0;return g},zero:kd});k.layout.histogram=function(){function a(a,h){var g,m,l=[],n=a.map(c,this),q=d.call(this,n,h),p=e.call(this,q,n,h);h=-1;for(var r=n.length,s=p.length-1,t=b?1:1/r;++h<s;)g=l[h]=[],g.dx=p[h+1]-(g.x=p[h]),g.y=0;if(0<s)for(h=-1;++h<r;)m=n[h],m>=q[0]&&m<=q[1]&&(g=l[k.bisect(p,m,1,s)-1],g.y+=t,g.push(a[h]));return l}var b=!0,c=Number,d=Bh,e=Ah;return a.value=function(b){return arguments.length?
(c=b,a):c},a.range=function(b){return arguments.length?(d=J(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return qf(a,b)}:J(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a};k.layout.tree=function(){function a(a,h){function g(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,h,k,m=d[0],l=m,n=-1;++n<f;){k=d[n];g(k,h);var p=k;if(h){for(var t=void 0,v=p,s=p,q=p.parent.children[0],r=v._tree.mod,w=s._tree.mod,y=h._tree.mod,C=q._tree.mod;h=
md(h),v=ld(v),h&&v;){q=ld(q);s=md(s);s._tree.ancestor=p;t=h._tree.prelim+y-v._tree.prelim-r+c(h,v);if(0<t){var D=h._tree.ancestor.parent==p.parent?h._tree.ancestor:l,E=p,F=t,D=D._tree,E=E._tree,J=F/(E.number-D.number);D.change+=J;E.change-=J;E.shift+=F;E.prelim+=F;E.mod+=F;r+=t;w+=t}y+=h._tree.mod;r+=v._tree.mod;C+=q._tree.mod;w+=s._tree.mod}h&&!md(s)&&(s._tree.thread=h,s._tree.mod+=y-w);v&&!ld(q)&&(q._tree.thread=v,q._tree.mod+=r-C,l=p)}h=k}n=f=0;p=a.children;for(l=p.length;0<=--l;)d=p[l]._tree,
d.prelim+=f,d.mod+=f,f+=d.shift+(n+=d.change);k=0.5*(m._tree.prelim+k._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-k):e.prelim=k}else b&&(e.prelim=b._tree.prelim+c(a,b))}function k(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;++e<d;)k(c[e],b)}}var l=b.call(this,a,h),n=l[0];oa(n,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});g(n);k(n,-n._tree.prelim);var q=Qb(n,Dh),p=Qb(n,Ch),r=Qb(n,
Eh),s=q.x-c(q,p)/2,t=p.x+c(p,q)/2,v=r.depth||1;return oa(n,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-s)/(t-s)*d[0];a.y=a.depth/v*d[1];delete a._tree}),l}var b=k.layout.hierarchy().sort(null).value(null),c=rf,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},nb(a,b)};k.layout.pack=function(){function a(a,
h){var g=c.call(this,a,h),k=g[0],l=e[0],n=e[1],q=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(k.x=k.y=0,oa(k,function(a){a.r=+q(a.value)}),oa(k,uf),d){var p=d*(b?1:Math.max(2*k.r/l,2*k.r/n))/2;oa(k,function(a){a.r+=p});oa(k,uf);oa(k,function(a){a.r-=p})}return wf(k,l/2,n/2,b?1:1/Math.max(2*k.r/l,2*k.r/n)),g}var b,c=k.layout.hierarchy().sort(Fh),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==
typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},nb(a,c)};k.layout.cluster=function(){function a(a,h){var g,k=b.call(this,a,h),l=k[0],n=0;oa(l,function(a){var b=a.children;b&&b.length?(a.x=Jh(b),a.y=Ih(b)):(a.x=g?n+=c(a,g):0,a.y=0,g=a)});var q=xf(l),p=yf(l),r=q.x-c(q,p)/2,s=p.x+c(p,q)/2;return oa(l,e?function(a){a.x=(a.x-l.x)*d[0];a.y=(l.y-a.y)*d[1]}:function(a){a.x=(a.x-r)/(s-r)*d[0];a.y=(1-(l.y?a.y/l.y:1))*d[1]}),k}var b=k.layout.hierarchy().sort(null).value(null),c=
rf,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},nb(a,b)};k.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var e=c.children;if(e&&e.length){var f,g,h=n(c),k=[],m=e.slice(),l=1/0,q="slice"===p?h.dx:"dice"===p?h.dy:"slice-dice"===
p?1&c.depth?h.dy:h.dx:Math.min(h.dx,h.dy);a(m,h.dx*h.dy/c.value);for(k.area=0;0<(c=m.length);){k.push(f=m[c-1]);k.area+=f.area;var w;if(!(w="squarify"!==p)){c=q;g=void 0;var y=k.area;w=0;for(var C=1/0,D=-1,E=k.length;++D<E;)(g=k[D].area)&&(C>g&&(C=g),g>w&&(w=g));w=(g=(y*=y,c*=c,y?Math.max(c*w*r/y,y/(c*C*r)):1/0))<=l}w?(m.pop(),l=g):(k.area-=k.pop().area,d(k,q,h,!1),q=Math.min(h.dx,h.dy),k.length=k.area=0,l=1/0)}k.length&&(d(k,q,h,!0),k.length=k.area=0);e.forEach(b)}}function c(b){var e=b.children;
if(e&&e.length){var f=n(b),g=e.slice(),h=[];a(g,f.dx*f.dy/b.value);for(h.area=0;b=g.pop();)h.push(b),h.area+=b.area,null!=b.z&&(d(h,b.z?f.dx:f.dy,f,!g.length),h.length=h.area=0);e.forEach(c)}}function d(a,b,c,d){var e,f=-1,h=a.length,k=c.x,m=c.y,l=b?g(a.area/b):0;if(b==c.dx){for((d||l>c.dy)&&(l=c.dy);++f<h;)e=a[f],e.x=k,e.y=m,e.dy=l,k+=e.dx=Math.min(c.x+c.dx-k,l?g(e.area/l):0);e.z=!0;e.dx+=c.x+c.dx-k;c.y+=l;c.dy-=l}else{for((d||l>c.dx)&&(l=c.dx);++f<h;)e=a[f],e.x=k,e.y=m,e.dx=l,m+=e.dy=Math.min(c.y+
c.dy-m,l?g(e.area/l):0);e.z=!1;e.dy+=c.y+c.dy-m;c.x+=l;c.dx-=l}}function e(d){d=f||h(d);var e=d[0];return e.x=0,e.y=0,e.dx=m[0],e.dy=m[1],f&&h.revalue(e),a([e],e.dx*e.dy/e.value),(f?c:b)(e),q&&(f=d),d}var f,h=k.layout.hierarchy(),g=Math.round,m=[1,1],l=null,n=od,q=!1,p="squarify",r=0.5*(1+Math.sqrt(5));return e.size=function(a){return arguments.length?(m=a,e):m},e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?od(c):zf(c,"number"==typeof d?[d,d,d,d]:d)}function c(b){return zf(b,
a)}if(!arguments.length)return l;var d;return n=null==(l=a)?od:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,e},e.round=function(a){return arguments.length?(g=a?Math.round:Number,e):g!=Number},e.sticky=function(a){return arguments.length?(q=a,f=null,e):q},e.ratio=function(a){return arguments.length?(r=a,e):r},e.mode=function(a){return arguments.length?(p=a+"",e):p},nb(e,h)};k.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,e;do c=2*Math.random()-
1,e=2*Math.random()-1,e=c*c+e*e;while(!e||1<e);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=k.random.normal.apply(k,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b/a}}};k.scale={};var Lh={floor:O,ceil:O};k.scale.linear=function(){return Bf([0,1],[0,1],Ka,!1)};k.scale.log=function(){return Df(k.scale.linear().domain([0,1]),10,!0,[1,10])};var Ef=k.format(".0e"),Nh={floor:function(a){return-Math.ceil(-a)},
ceil:function(a){return-Math.floor(-a)}};k.scale.pow=function(){return Ff(k.scale.linear(),1,[0,1])};k.scale.sqrt=function(){return k.scale.pow().exponent(0.5)};k.scale.ordinal=function(){return Gf([],{t:"range",a:[[]]})};k.scale.category10=function(){return k.scale.ordinal().range(pi)};k.scale.category20=function(){return k.scale.ordinal().range(qi)};k.scale.category20b=function(){return k.scale.ordinal().range(ri)};k.scale.category20c=function(){return k.scale.ordinal().range(si)};var pi=[2062260,
16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ub),qi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ub),ri=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ub),si=[3244733,7057110,10406625,13032431,15095053,
16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ub);k.scale.quantile=function(){return Hf([],[])};k.scale.quantize=function(){return If(0,1,[0,1])};k.scale.threshold=function(){return Jf([0.5],[0,1])};k.scale.identity=function(){return Kf([0,1])};k.svg={};k.svg.arc=function(){function a(){var a=b.apply(this,arguments),h=c.apply(this,arguments),g=d.apply(this,arguments)+La,k=e.apply(this,arguments)+La,l=(g>k&&(l=
g,g=k,k=l),k-g),n=D>l?"0":"1",q=Math.cos(g),g=Math.sin(g),p=Math.cos(k),k=Math.sin(k);return l>=ti?a?"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+h+"A"+h+","+h+" 0 1,1 0,"+-h+"A"+h+","+h+" 0 1,1 0,"+h+"Z":a?"M"+h*q+","+h*g+"A"+h+","+h+" 0 "+n+",1 "+h*p+","+h*k+"L"+a*p+","+a*k+"A"+a+","+a+" 0 "+n+",0 "+a*q+","+a*g+"Z":"M"+h*q+","+h*g+"A"+h+","+h+" 0 "+n+",1 "+h*p+","+h*k+"L0,0Z"}var b=Oh,c=Ph,d=Lf,e=Mf;return a.innerRadius=
function(c){return arguments.length?(b=J(c),a):b},a.outerRadius=function(b){return arguments.length?(c=J(b),a):c},a.startAngle=function(b){return arguments.length?(d=J(b),a):d},a.endAngle=function(b){return arguments.length?(e=J(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,h=(d.apply(this,arguments)+e.apply(this,arguments))/2+La;return[Math.cos(h)*a,Math.sin(h)*a]},a};var La=-T,ti=V-y;k.svg.line=function(){return Nf(O)};var rd=k.map({linear:Y,"linear-closed":function(a){return Y(a)+
"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return 1<c&&e.push("H",d[0]),e.join("")},"step-before":sd,"step-after":td,basis:Of,"basis-open":function(a){if(4>a.length)return Y(a);for(var b,c=[],d=-1,e=a.length,f=[0],h=[0];3>++d;)b=a[d],f.push(b[0]),h.push(b[1]);c.push(aa(Ba,f)+","+aa(Ba,h));for(--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),h.shift(),h.push(b[1]),vd(c,f,h);return c.join("")},"basis-closed":function(a){for(var b,c,
d=-1,e=a.length,f=e+4,h=[],g=[];4>++d;)c=a[d%e],h.push(c[0]),g.push(c[1]);b=[aa(Ba,h),",",aa(Ba,g)];for(--d;++d<f;)c=a[d%e],h.shift(),h.push(c[0]),g.shift(),g.push(c[1]),vd(b,h,g);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],h=a[0][1],g=a[c][0]-f,k=a[c][1]-h,l=-1;++l<=c;)d=a[l],e=l/c,d[0]=b*d[0]+(1-b)*(f+e*g),d[1]=b*d[1]+(1-b)*(h+e*k);return Of(a)},cardinal:function(a,b){return 3>a.length?Y(a):a[0]+Ub(a,ud(a,b))},"cardinal-open":function(a,b){return 4>a.length?
Y(a):a[1]+Ub(a.slice(1,a.length-1),ud(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Y(a):a[0]+Ub((a.push(a[0]),a),ud([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Y(a);else{var b=a[0],c,d,e,f,h=[],g;c=0;g=a.length-1;for(var k=[],l=a[1],n=k[0]=wd(a[0],l);++c<g;)k[c]=(n+(n=wd(l,l=a[c+1])))/2;g=(k[c]=n,k);k=-1;for(l=a.length-1;++k<l;)c=wd(a[k],a[k+1]),E(c)<y?g[k]=g[k+1]=0:(d=g[k]/c,e=g[k+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),g[k]=f*d,g[k+1]=f*e));for(k=-1;++k<=
l;)f=(a[Math.min(l,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+g[k]*g[k])),h.push([f||0,g[k]*f||0]);a=b+Ub(a,h)}return a}});rd.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Pf=[0,2/3,1/3,0],Qf=[0,1/3,2/3,0],Ba=[0,1/6,2/3,1/6];k.svg.line.radial=function(){var a=Nf(Rf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a};sd.reverse=td;td.reverse=sd;k.svg.area=function(){return Sf(O)};k.svg.area.radial=function(){var a=Sf(Rf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,
a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a};k.svg.chord=function(){function a(a,e){var f=b(this,c,a,e),h=b(this,d,a,e);return"M"+f.p0+("A"+f.r+","+f.r+" 0 "+ +(f.a1-f.a0>D)+",1 "+f.p1)+(f.a0==h.a0&&f.a1==h.a1?"Q 0,0 "+f.p0:"Q 0,0 "+h.p0+("A"+h.r+","+h.r+" 0 "+ +(h.a1-h.a0>D)+",1 "+h.p1)+("Q 0,0 "+f.p0))+"Z"}function b(a,b,c,d){var k=b.call(a,c,d);b=e.call(a,k,d);c=f.call(a,k,d)+La;a=h.call(a,k,d)+La;return{r:b,a0:c,a1:a,p0:[b*
Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}var c=$c,d=ad,e=Qh,f=Lf,h=Mf;return a.radius=function(b){return arguments.length?(e=J(b),a):e},a.source=function(b){return arguments.length?(c=J(b),a):c},a.target=function(b){return arguments.length?(d=J(b),a):d},a.startAngle=function(b){return arguments.length?(f=J(b),a):f},a.endAngle=function(b){return arguments.length?(h=J(b),a):h},a};k.svg.diagonal=function(){function a(a,f){var h=b.call(this,a,f),g=c.call(this,a,f),k=(h.y+g.y)/2,h=
[h,{x:h.x,y:k},{x:g.x,y:k},g];return h=h.map(d),"M"+h[0]+"C"+h[1]+" "+h[2]+" "+h[3]}var b=$c,c=ad,d=Tf;return a.source=function(c){return arguments.length?(b=J(c),a):b},a.target=function(b){return arguments.length?(c=J(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a};k.svg.diagonal.radial=function(){var a=k.svg.diagonal(),b=Tf,c=a.projection;return a.projection=function(a){return arguments.length?c(Rh(b=a)):b},a};k.svg.symbol=function(){function a(a,e){return(pg.get(b.call(this,
a,e))||Uf)(c.call(this,a,e))}var b=Th,c=Sh;return a.type=function(c){return arguments.length?(b=J(c),a):b},a.size=function(b){return arguments.length?(c=J(b),a):c},a};var pg=k.map({circle:Uf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*qg));var b=a*qg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+
" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/rc);var b=a*rc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/rc);var b=a*rc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});k.svg.symbolTypes=pg.keys();var Oa,cc,rc=Math.sqrt(3),qg=Math.tan(30*C),M=[],fg=0;M.call=F.call;M.empty=F.empty;M.node=F.node;M.size=F.size;k.transition=function(a){return arguments.length?Oa?a.transition():a:eg.transition()};k.transition.prototype=M;M.select=function(a){var b,
c,d,e=this.id,f=[];a=xc(a);for(var h=-1,g=this.length;++h<g;){f.push(b=[]);for(var k=this[h],l=-1,n=k.length;++l<n;)(d=k[l])&&(c=a.call(d,d.__data__,l,h))?("__data__"in d&&(c.__data__=d.__data__),Vb(c,l,e,d.__transition__[e]),b.push(c)):b.push(null)}return ob(f,e)};M.selectAll=function(a){var b,c,d,e,f=this.id,h=[];a=Qd(a);for(var g=-1,k=this.length;++g<k;)for(var l=this[g],n=-1,q=l.length;++n<q;)if(b=l[n]){e=b.__transition__[f];c=a.call(b,b.__data__,n,g);h.push(b=[]);for(var p=-1,r=c.length;++p<
r;)(d=c[p])&&Vb(d,p,f,e),b.push(d)}return ob(h,f)};M.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Yd(a));for(var f=0,h=this.length;h>f;f++){e.push(b=[]);c=this[f];for(var g=0,k=c.length;k>g;g++)(d=c[g])&&a.call(d,d.__data__,g)&&b.push(d)}return ob(e,this.id)};M.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):ta(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};M.attr=
function(a,b){function c(){this.removeAttribute(g)}function d(){this.removeAttributeNS(g.space,g.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(g);return c!==a&&(b=h(c,a),function(a){this.setAttribute(g,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(g.space,g.local);return c!==a&&(b=h(c,a),function(a){this.setAttributeNS(g.space,g.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var h="transform"==
a?nf:Ka,g=k.ns.qualify(a);return xd(this,"attr."+a,b,g.local?f:e)};M.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=k.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};M.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>
e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return xd(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d,e=P.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=Ka(e,b),function(b){this.style.setProperty(a,d(b),c)})})})};M.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,P.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,
f(b),c)}})};M.text=function(a){return xd(this,"text",a,Uh)};M.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};M.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=k.ease.apply(k,arguments)),ta(this,function(c){c.__transition__[b].ease=a}))};M.delay=function(a){var b=this.id;return ta(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=
+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};M.duration=function(a){var b=this.id;return ta(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))};M.each=function(a,b){var c=this.id;if(2>arguments.length){var d=cc,e=Oa;Oa=c;ta(this,function(b,d,e){cc=b.__transition__[c];a.call(b,b.__data__,d,e)});cc=d;Oa=e}else ta(this,function(d){d=d.__transition__[c];
(d.event||(d.event=k.dispatch("start","end"))).on(a,b)});return this};M.transition=function(){for(var a,b,c,d,e=this.id,f=++fg,h=[],g=0,k=this.length;k>g;g++){h.push(a=[]);b=this[g];for(var l=0,n=b.length;n>l;l++)(c=b[l])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Vb(c,l,f,d)),a.push(c)}return ob(h,f)};k.svg.axis=function(){function a(a){a.each(function(){var a,l=k.select(this),p=this.__chart__||c,r=this.__chart__=c.copy(),s=null==m?r.ticks?r.ticks.apply(r,g):r.domain():m,t=null==
b?r.tickFormat?r.tickFormat.apply(r,g):O:b,v=l.selectAll(".tick").data(s,r),s=v.enter().insert("g",".domain").attr("class","tick").style("opacity",y),u=k.transition(v.exit()).style("opacity",y).remove(),x=k.transition(v).style("opacity",1),z=Rb(r),l=l.selectAll(".domain").data([0]),l=(l.enter().append("path").attr("class","domain"),k.transition(l));s.append("line");s.append("text");var w=s.select("line"),A=x.select("line"),t=v.select("text").text(t),v=s.select("text"),C=x.select("text");switch(d){case "bottom":a=
Vf;w.attr("y2",e);v.attr("y",Math.max(e,0)+h);A.attr("x2",0).attr("y2",e);C.attr("x",0).attr("y",Math.max(e,0)+h);t.attr("dy",".71em").style("text-anchor","middle");l.attr("d","M"+z[0]+","+f+"V0H"+z[1]+"V"+f);break;case "top":a=Vf;w.attr("y2",-e);v.attr("y",-(Math.max(e,0)+h));A.attr("x2",0).attr("y2",-e);C.attr("x",0).attr("y",-(Math.max(e,0)+h));t.attr("dy","0em").style("text-anchor","middle");l.attr("d","M"+z[0]+","+-f+"V0H"+z[1]+"V"+-f);break;case "left":a=Wf;w.attr("x2",-e);v.attr("x",-(Math.max(e,
0)+h));A.attr("x2",-e).attr("y2",0);C.attr("x",-(Math.max(e,0)+h)).attr("y",0);t.attr("dy",".32em").style("text-anchor","end");l.attr("d","M"+-f+","+z[0]+"H0V"+z[1]+"H"+-f);break;case "right":a=Wf,w.attr("x2",e),v.attr("x",Math.max(e,0)+h),A.attr("x2",e).attr("y2",0),C.attr("x",Math.max(e,0)+h).attr("y",0),t.attr("dy",".32em").style("text-anchor","start"),l.attr("d","M"+f+","+z[0]+"H0V"+z[1]+"H"+f)}if(r.rangeBand){var D=r.rangeBand()/2,p=function(a){return r(a)+D};s.call(a,p);x.call(a,p)}else s.call(a,
p),x.call(a,r),u.call(a,r)})}var b,c=k.scale.linear(),d=rg,e=6,f=6,h=3,g=[10],m=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in ui?b+"":rg,a):d},a.ticks=function(){return arguments.length?(g=arguments,a):g},a.tickValues=function(b){return arguments.length?(m=b,a):m},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?
(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(){return arguments.length&&a},a};var rg="bottom",ui={top:1,right:1,bottom:1,left:1};k.svg.brush=function(){function a(f){f.each(function(){var f=k.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),h=f.selectAll(".background").data([0]);h.enter().append("rect").attr("class",
"background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var g=f.selectAll(".resize").data(s,O);g.exit().remove();g.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return vi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility",
"hidden");g.style("display",a.empty()?"none":null);var n,f=k.transition(f),h=k.transition(h);m&&(n=Rb(m),h.attr("x",n[0]).attr("width",n[1]-n[0]),c(f));l&&(n=Rb(l),h.attr("y",n[0]).attr("height",n[1]-n[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+n[+/e$/.test(a)]+","+q[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",n[0]);a.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",n[1]-n[0])}function d(a){a.select(".extent").attr("y",
q[0]);a.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",q[1]-q[0])}function e(){function e(){var a=k.mouse(y),f=!1;w&&(a[0]+=w[0],a[1]+=w[1]);H||(k.event.altKey?(s||(s=[(n[0]+n[1])/2,(q[0]+q[1])/2]),G[0]=n[+(a[0]<s[0])],G[1]=q[+(a[1]<s[1])]):s=null);F&&v(a,m,0)&&(c(D),f=!0);J&&v(a,l,1)&&(d(D),f=!0);f&&(b(D),C({type:"brush",mode:H?"move":"resize"}))}function v(a,b,c){var d,e,g=Rb(b);b=g[0];var g=g[1],k=G[c],l=c?q:n,m=l[1]-l[0];return H&&(b-=k,g-=m+k),d=(c?r:p)?Math.max(b,Math.min(g,a[c])):
a[c],H?e=(d+=k)+m:(s&&(k=Math.max(b,Math.min(g,2*s[c]-d))),d>k?(e=d,d=k):e=k),l[0]!=d||l[1]!=e?(c?h=null:f=null,l[0]=d,l[1]=e,!0):void 0}function u(){e();D.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);k.select("body").style("cursor",null);M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);K();C({type:"brushend"})}var s,w,y=this,A=k.select(k.event.target),
C=g.of(y,arguments),D=k.select(y),E=A.datum(),F=!/^(n|s)$/.test(E)&&m,J=!/^(e|w)$/.test(E)&&l,H=A.classed("extent"),K=rb(),G=k.mouse(y),M=k.select(P).on("keydown.brush",function(){32==k.event.keyCode&&(H||(s=null,G[0]-=n[1],G[1]-=q[1],H=2),ra())}).on("keyup.brush",function(){32==k.event.keyCode&&2==H&&(G[0]+=n[1],G[1]+=q[1],H=0,ra())});if(k.event.changedTouches?M.on("touchmove.brush",e).on("touchend.brush",u):M.on("mousemove.brush",e).on("mouseup.brush",u),D.interrupt().selectAll("*").interrupt(),
H)G[0]=n[0]-G[0],G[1]=q[0]-G[1];else if(E){var O=+/w$/.test(E),E=+/^n/.test(E);w=[n[1-O]-G[0],q[1-E]-G[1]];G[0]=n[O];G[1]=q[E]}else k.event.altKey&&(s=G.slice());D.style("pointer-events","none").selectAll(".resize").style("display",null);k.select("body").style("cursor",A.style("cursor"));C({type:"brushstart"});e()}var f,h,g=wc(a,"brushstart","brush","brushend"),m=null,l=null,n=[0,0],q=[0,0],p=!0,r=!0,s=Gd[0];return a.event=function(a){a.each(function(){var a=g.of(this,arguments),b={x:n,y:q,i:f,j:h},
c=this.__chart__||b;this.__chart__=b;Oa?k.select(this).transition().each("start.brush",function(){f=c.i;h=c.j;n=c.x;q=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=Pb(n,b.x),d=Pb(q,b.y);return f=h=null,function(e){n=b.x=c(e);q=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i;h=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?
(m=b,s=Gd[!m<<1|!l],a):m},a.y=function(b){return arguments.length?(l=b,s=Gd[!m<<1|!l],a):l},a.clamp=function(b){return arguments.length?(m&&l?(p=!!b[0],r=!!b[1]):m?p=!!b:l&&(r=!!b),a):m&&l?[p,r]:m?p:l?r:null},a.extent=function(b){var c,d,e,g,k;return arguments.length?(m&&(c=b[0],d=b[1],l&&(c=c[0],d=d[0]),f=[c,d],m.invert&&(c=m(c),d=m(d)),c>d&&(k=c,c=d,d=k),(c!=n[0]||d!=n[1])&&(n=[c,d])),l&&(e=b[0],g=b[1],m&&(e=e[1],g=g[1]),h=[e,g],l.invert&&(e=l(e),g=l(g)),e>g&&(k=e,e=g,g=k),(e!=q[0]||g!=q[1])&&(q=
[e,g])),a):(m&&(f?(c=f[0],d=f[1]):(c=n[0],d=n[1],m.invert&&(c=m.invert(c),d=m.invert(d)),c>d&&(k=c,c=d,d=k))),l&&(h?(e=h[0],g=h[1]):(e=q[0],g=q[1],l.invert&&(e=l.invert(e),g=l.invert(g)),e>g&&(k=e,e=g,g=k))),m&&l?[[c,e],[d,g]]:m?[c,d]:l&&[e,g])},a.clear=function(){return a.empty()||(n=[0,0],q=[0,0],f=h=null),a},a.empty=function(){return!!m&&n[0]==n[1]||!!l&&q[0]==q[1]},k.rebind(a,g,"on")};var vi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",
sw:"nesw-resize"},Gd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],w=k.time={},Q=Date;pa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},
getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qa.setUTCDate.apply(this._,arguments)},setDay:function(){qa.setUTCDay.apply(this._,arguments)},setFullYear:function(){qa.setUTCFullYear.apply(this._,arguments)},setHours:function(){qa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qa.setUTCMinutes.apply(this._,arguments)},
setMonth:function(){qa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qa.setUTCSeconds.apply(this._,arguments)},setTime:function(){qa.setTime.apply(this._,arguments)}};var qa=Date.prototype,Hd="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Id="Sun Mon Tue Wed Thu Fri Sat".split(" "),Jd="January February March April May June July August September October November December".split(" "),Kd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");w.year=Ma(function(a){return a=
w.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});w.years=w.year.range;w.years.utc=w.year.utc.range;w.day=Ma(function(a){var b=new Q(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});w.days=w.day.range;w.days.utc=w.day.utc.range;w.dayOfYear=function(a){var b=w.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/
864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,b){a=a.toLowerCase();b=7-b;var c=w[a]=Ma(function(a){return(a=w.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=w.year(a).getDay();return Math.floor((w.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});w[a+"s"]=c.range;w[a+"s"].utc=c.utc.range;w[a+"OfYear"]=function(a){var c=w.year(a).getDay();return Math.floor((w.dayOfYear(a)+(c+b)%7)/7)}});w.week=
w.sunday;w.weeks=w.sunday.range;w.weeks.utc=w.sunday.utc.range;w.weekOfYear=w.sundayOfYear;w.format=R;var sg=Zb(Hd),wi=$b(Hd),tg=Zb(Id),xi=$b(Id),ug=Zb(Jd),yi=$b(Jd),vg=Zb(Kd),zi=$b(Kd),wg=/^%/,Xf={"-":"",_:" ",0:"0"},Xb={a:function(a){return Id[a.getDay()]},A:function(a){return Hd[a.getDay()]},b:function(a){return Kd[a.getMonth()]},B:function(a){return Jd[a.getMonth()]},c:R("%a %b %e %X %Y"),d:function(a,b){return S(a.getDate(),b,2)},e:function(a,b){return S(a.getDate(),b,2)},H:function(a,b){return S(a.getHours(),
b,2)},I:function(a,b){return S(a.getHours()%12||12,b,2)},j:function(a,b){return S(1+w.dayOfYear(a),b,3)},L:function(a,b){return S(a.getMilliseconds(),b,3)},m:function(a,b){return S(a.getMonth()+1,b,2)},M:function(a,b){return S(a.getMinutes(),b,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,b){return S(a.getSeconds(),b,2)},U:function(a,b){return S(w.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return S(w.mondayOfYear(a),b,2)},x:R("%m/%d/%Y"),X:R("%H:%M:%S"),
y:function(a,b){return S(a.getFullYear()%100,b,2)},Y:function(a,b){return S(a.getFullYear()%1E4,b,4)},Z:function(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(E(b)/60),b=E(b)%60;return a+S(c,"0",2)+S(b,"0",2)},"%":function(){return"%"}},Vh={a:function(a,b,c){tg.lastIndex=0;return(b=tg.exec(b.substring(c)))?(a.w=xi.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){sg.lastIndex=0;return(b=sg.exec(b.substring(c)))?(a.w=wi.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){vg.lastIndex=
0;return(b=vg.exec(b.substring(c)))?(a.m=zi.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){ug.lastIndex=0;return(b=ug.exec(b.substring(c)))?(a.m=yi.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return Yb(a,Xb.c.toString(),b,c)},d:Yf,e:Yf,H:Zf,I:Zf,j:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1},L:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){H.lastIndex=
0;return(b=H.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=Ai.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},U:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1},w:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,
c+1)))?(a.w=+b[0],c+b[0].length):-1},W:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1},x:function(a,b,c){return Yb(a,Xb.x.toString(),b,c)},X:function(a,b,c){return Yb(a,Xb.X.toString(),b,c)},y:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1},Y:function(a,b,c){H.lastIndex=0;return(b=H.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1},Z:function(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,
c+5))?(a.Z=+b,c+5):-1},"%":function(a,b,c){wg.lastIndex=0;return(a=wg.exec(b.substring(c,c+1)))?c+a[0].length:-1}},H=/^\s*\d+/,Ai=k.map({am:0,pm:1});R.utc=ha;var xg=ha("%Y-%m-%dT%H:%M:%S.%LZ");R.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?yd:xg;yd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};yd.toString=xg.toString;w.second=Ma(function(a){return new Q(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});
w.seconds=w.second.range;w.seconds.utc=w.second.utc.range;w.minute=Ma(function(a){return new Q(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});w.minutes=w.minute.range;w.minutes.utc=w.minute.utc.range;w.hour=Ma(function(a){var b=a.getTimezoneOffset()/60;return new Q(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});w.hours=w.hour.range;w.hours.utc=w.hour.utc.range;
w.month=Ma(function(a){return a=w.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});w.months=w.month.range;w.months.utc=w.month.utc.range;var ac=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Ld=[[w.second,1],[w.second,5],[w.second,15],[w.second,30],[w.minute,1],[w.minute,5],[w.minute,15],[w.minute,30],[w.hour,1],[w.hour,3],[w.hour,6],[w.hour,12],[w.day,1],[w.day,2],[w.week,1],[w.month,1],[w.month,
3],[w.year,1]],Bi=[[R("%Y"),Wa],[R("%B"),function(a){return a.getMonth()}],[R("%b %d"),function(a){return 1!=a.getDate()}],[R("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[R("%I %p"),function(a){return a.getHours()}],[R("%I:%M"),function(a){return a.getMinutes()}],[R(":%S"),function(a){return a.getSeconds()}],[R(".%L"),function(a){return a.getMilliseconds()}]],Ci=$f(Bi);Ld.year=w.year;w.scale=function(){return zd(k.scale.linear(),Ld,Ci)};var Wh={range:function(a,b,c){return k.range(+a,
+b,c).map(Na)}},yg=Ld.map(function(a){return[a[0].utc,a[1]]}),Di=[[ha("%Y"),Wa],[ha("%B"),function(a){return a.getUTCMonth()}],[ha("%b %d"),function(a){return 1!=a.getUTCDate()}],[ha("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[ha("%I %p"),function(a){return a.getUTCHours()}],[ha("%I:%M"),function(a){return a.getUTCMinutes()}],[ha(":%S"),function(a){return a.getUTCSeconds()}],[ha(".%L"),function(a){return a.getUTCMilliseconds()}]],Ei=$f(Di);return yg.year=w.year.utc,w.scale.utc=
function(){return zd(k.scale.linear(),yg,Ei)},k.text=Nc(function(a){return a.responseText}),k.json=function(a,b){return Oc(a,"application/json",Xh,b)},k.html=function(a,b){return Oc(a,"text/html",Yh,b)},k.xml=Nc(function(a){return a.responseXML}),k}();(function(){var u=this,N=u._,q={},m=Array.prototype,r=Object.prototype,v=m.push,k=m.slice,s=m.concat,n=r.toString,O=r.hasOwnProperty,C=m.forEach,D=m.map,E=m.reduce,F=m.reduceRight,G=m.filter,H=m.every,I=m.some,t=m.indexOf,J=m.lastIndexOf,r=Array.isArray,P=Object.keys,w=Function.prototype.bind,b=function(a){return a instanceof b?a:this instanceof b?(this._wrapped=a,void 0):new b(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):u._=
b;b.VERSION="1.5.2";var l=b.each=b.forEach=function(a,c,d){if(null!=a)if(C&&a.forEach===C)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;f>e&&c.call(d,a[e],e,a)!==q;e++);else for(var g=b.keys(a),e=0,f=g.length;f>e&&c.call(d,a[g[e]],g[e],a)!==q;e++);};b.map=b.collect=function(a,c,b){var e=[];return null==a?e:D&&a.map===D?a.map(c,b):(l(a,function(a,g,h){e.push(c.call(b,a,g,h))}),e)};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=2<arguments.length;if(null==a&&(a=[]),E&&a.reduce===
E)return e&&(c=b.bind(c,e)),f?a.reduce(c,d):a.reduce(c);if(l(a,function(a,b,Q){f?d=c.call(e,d,a,b,Q):(d=a,f=!0)}),!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=2<arguments.length;if(null==a&&(a=[]),F&&a.reduceRight===F)return e&&(c=b.bind(c,e)),f?a.reduceRight(c,d):a.reduceRight(c);var g=a.length;if(g!==+g)var h=b.keys(a),g=h.length;if(l(a,function(b,k,l){k=h?h[--g]:--g;f?d=c.call(e,d,a[k],k,l):(d=a[k],f=!0)}),!f)throw new TypeError("Reduce of empty array with no initial value");
return d};b.find=b.detect=function(a,c,b){var e;return K(a,function(a,g,h){return c.call(b,a,g,h)?(e=a,!0):void 0}),e};b.filter=b.select=function(a,c,b){var e=[];return null==a?e:G&&a.filter===G?a.filter(c,b):(l(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)}),e)};b.reject=function(a,c,d){return b.filter(a,function(a,b,g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=!0;return null==a?e:H&&a.every===H?a.every(c,d):(l(a,function(a,b,h){return(e=e&&c.call(d,a,b,h))?
void 0:q}),!!e)};var K=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=!1;return null==a?e:I&&a.some===I?a.some(c,d):(l(a,function(a,b,h){return e||(e=c.call(d,a,b,h))?q:void 0}),!!e)};b.contains=b.include=function(a,c){return null==a?!1:t&&a.indexOf===t?-1!=a.indexOf(c):K(a,function(a){return a===c})};b.invoke=function(a,c){var d=k.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=
function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return!1;return!0})};b.findWhere=function(a,c){return b.where(a,c,!0)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-1/0;var e={computed:-1/0,value:-1/0};return l(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})}),e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&
65535>a.length)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return 1/0;var e={computed:1/0,value:1/0};return l(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})}),e.value};b.shuffle=function(a){var c,d=0,e=[];return l(a,function(a){c=b.random(d++);e[d-1]=e[c];e[c]=a}),e};b.sample=function(a,c,d){return 2>arguments.length||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var x=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,
c,d){var e=x(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||void 0===b)return 1;if(d>b||void 0===d)return-1}return a.index-c.index}),"value")};var y=function(a){return function(c,d,e){var f={},g=null==d?b.identity:x(d);return l(c,function(b,d){var k=g.call(e,b,d,c);a(f,k,b)}),f}};b.groupBy=y(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=y(function(a,c,b){a[c]=b});b.countBy=
y(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){d=null==d?b.identity:x(d);c=d.call(e,c);for(var f=0,g=a.length;g>f;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};b.toArray=function(a){return a?b.isArray(a)?k.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a):[]};b.size=function(a){return null==a?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return null==a?void 0:null==c||b?a[0]:k.call(a,0,c)};b.initial=function(a,
c,b){return k.call(a,0,a.length-(null==c||b?1:c))};b.last=function(a,c,b){return null==a?void 0:null==c||b?a[a.length-1]:k.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,c,b){return k.call(a,null==c||b?1:c)};b.compact=function(a){return b.filter(a,b.identity)};var L=function(a,c,d){return c&&b.every(a,b.isArray)?s.apply(d,a):(l(a,function(a){b.isArray(a)||b.isArguments(a)?c?v.apply(d,a):L(a,c,d):d.push(a)}),d)};b.flatten=function(a,b){return L(a,b,[])};b.without=function(a){return b.difference(a,
k.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){b.isFunction(c)&&(e=d,d=c,c=!1);d=d?b.map(a,d,e):a;var f=[],g=[];return l(d,function(d,e){(c?e&&g[g.length-1]===d:b.contains(g,d))||(g.push(d),f.push(a[e]))}),f};b.union=function(){return b.uniq(b.flatten(arguments,!0))};b.intersection=function(a){var c=k.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return 0<=b.indexOf(c,a)})})};b.difference=function(a){var c=s.apply(m,k.call(arguments,1));return b.filter(a,
function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;a>d;d++)c[d]=b.pluck(arguments,""+d);return c};b.object=function(a,b){if(null==a)return{};for(var d={},e=0,f=a.length;f>e;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(null==a)return-1;var e=0,f=a.length;if(d){if("number"!=typeof d)return e=b.sortedIndex(a,c),a[e]===c?e:-1;e=0>d?Math.max(0,f+d):d}if(t&&a.indexOf===t)return a.indexOf(c,d);for(;f>
e;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(null==a)return-1;var e=null!=d;if(J&&a.lastIndexOf===J)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){1>=arguments.length&&(b=a||0,a=0);d=arguments[2]||1;for(var e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);e>f;)g[f++]=a,a+=d;return g};var z=function(){};b.bind=function(a,c){var d,e;if(w&&a.bind===w)return w.apply(a,k.call(arguments,1));if(!b.isFunction(a))throw new TypeError;
return d=k.call(arguments,2),e=function(){if(!(this instanceof e))return a.apply(c,d.concat(k.call(arguments)));z.prototype=a.prototype;var b=new z;z.prototype=null;var g=a.apply(b,d.concat(k.call(arguments)));return Object(g)===g?g:b}};b.partial=function(a){var b=k.call(arguments,1);return function(){return a.apply(this,b.concat(k.call(arguments)))}};b.bindAll=function(a){var c=k.call(arguments,1);if(0===c.length)throw Error("bindAll must be passed function names");return l(c,function(c){a[c]=b.bind(a[c],
a)}),a};b.memoize=function(a,c){var d={};return c||(c=b.identity),function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=k.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(k.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,k=0;d||(d={});var l=function(){k=!1===d.leading?0:new Date;h=null;g=a.apply(e,f)};return function(){var m=new Date;
k||!1!==d.leading||(k=m);var M=b-(m-k);return e=this,f=arguments,0>=M?(clearTimeout(h),h=null,k=m,g=a.apply(e,f)):h||!1===d.trailing||(h=setTimeout(l,M)),g}};b.debounce=function(a,b,d){var e,f,g,h,k;return function(){g=this;f=arguments;h=new Date;var l=function(){var m=new Date-h;b>m?e=setTimeout(l,b-m):(e=null,d||(k=a.apply(g,f)))},m=d&&!e;return e||(e=setTimeout(l,b)),m&&(k=a.apply(g,f)),k}};b.once=function(a){var b,d=!1;return function(){return d?b:(d=!0,b=a.apply(this,arguments),a=null,b)}};b.wrap=
function(a,b){return function(){var d=[a];return v.apply(d,arguments),b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;0<=d;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){return 1>--a?b.apply(this,arguments):void 0}};b.keys=P||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),
f=0;d>f;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;d>f;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;f>e;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){return l(k.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]}),a};b.pick=function(a){var b={},d=s.apply(m,k.call(arguments,1));return l(d,
function(d){d in a&&(b[d]=a[d])}),b};b.omit=function(a){var c={},d=s.apply(m,k.call(arguments,1)),e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){return l(k.call(arguments,1),function(b){if(b)for(var d in b)void 0===a[d]&&(a[d]=b[d])}),a};b.clone=function(a){return b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a};b.tap=function(a,b){return b(a),a};var A=function(a,c,d,e){if(a===c)return 0!==a||1/a==1/c;if(null==a||null==c)return a===c;a instanceof b&&(a=a._wrapped);
c instanceof b&&(c=c._wrapped);var f=n.call(a);if(f!=n.call(c))return!1;switch(f){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;
if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return!1;d.push(a);e.push(c);g=0;h=!0;if("[object Array]"==f){if(g=a.length,h=g==c.length)for(;g--&&(h=A(a[g],c[g],d,e)););}else{for(var k in a)if(b.has(a,k)&&(g++,!(h=b.has(c,k)&&A(a[k],c[k],d,e))))break;if(h){for(k in c)if(b.has(c,k)&&!g--)break;h=!g}}return d.pop(),e.pop(),h};b.isEqual=function(a,b){return A(a,b,[],[])};b.isEmpty=function(a){if(null==a)return!0;if(b.isArray(a)||b.isString(a))return 0===a.length;for(var c in a)if(b.has(a,
c))return!1;return!0};b.isElement=function(a){return!(!a||1!==a.nodeType)};b.isArray=r||function(a){return"[object Array]"==n.call(a)};b.isObject=function(a){return a===Object(a)};l("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return n.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!=typeof/./&&(b.isFunction=function(a){return"function"==typeof a});b.isFinite=function(a){return isFinite(a)&&
!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==n.call(a)};b.isNull=function(a){return null===a};b.isUndefined=function(a){return void 0===a};b.has=function(a,b){return O.call(a,b)};b.noConflict=function(){return u._=N,this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;a>f;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*
(b-a+1))};var p={escape:{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}};p.unescape=b.invert(p.escape);var R={escape:RegExp("["+b.keys(p.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(p.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return null==b?"":(""+b).replace(R[a],function(b){return p[a][b]})}});b.result=function(a,c){if(null!=a){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){l(b.functions(a),
function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];v.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var S=0;b.uniqueId=function(a){var b=++S+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e;d=b.defaults({},d,b.templateSettings);
var f=RegExp([(d.escape||B).source,(d.interpolate||B).source,(d.evaluate||B).source].join("|")+"|$","g"),g=0,h="__p+\x3d'";a.replace(f,function(b,c,d,e,f){return h+=a.slice(g,f).replace(U,function(a){return"\\"+T[a]}),c&&(h+="'+\n((__t\x3d("+c+"))\x3d\x3dnull?'':_.escape(__t))+\n'"),d&&(h+="'+\n((__t\x3d("+d+"))\x3d\x3dnull?'':__t)+\n'"),e&&(h+="';\n"+e+"\n__p+\x3d'"),g=f+b.length,b});h+="';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+
h+"return __p;\n";try{e=new Function(d.variable||"obj","_",h)}catch(k){throw k.source=h,k;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};return c.source="function("+(d.variable||"obj")+"){\n"+h+"}",c};b.chain=function(a){return b(a).chain()};b.mixin(b);l("pop push reverse shift sort splice unshift".split(" "),function(a){var c=m[a];b.prototype[a]=function(){var d=this._wrapped;return c.apply(d,arguments),"shift"!=a&&"splice"!=a||0!==d.length||delete d[0],this._chain?b(d).chain():d}});
l(["concat","join","slice"],function(a){var c=m[a];b.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){var l=this,G=l.Backbone,p=[].slice,g;g="undefined"!==typeof exports?exports:l.Backbone={};g.VERSION="1.1.0";var e=l._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=l.jQuery||l.Zepto||l.ender||l.$;g.noConflict=function(){l.Backbone=G;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var k=g.Events={on:function(a,b,c){if(!u(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},
once:function(a,b,c){if(!u(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,h,g,m,y,k;if(!this._events||!u(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;h=a?[a]:e.keys(this._events);g=0;for(m=h.length;g<m;g++)if(a=h[g],v=this._events[a]){this._events[a]=d=[];if(b||c){y=0;for(k=v.length;y<k;y++)f=v[y],(b&&b!==f.callback&&b!==f.callback._callback||c&&
c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=p.call(arguments,1);if(!u(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,b,c){var d=this._listeningTo;if(!d)return this;var f=!b&&!c;!c&&"object"===typeof b&&(c=this);a&&((d={})[a._listenId]=a);for(var v in d)a=d[v],a.off(b,c,this),(f||e.isEmpty(a._events))&&delete this._listeningTo[v];
return this}},z=/\s+/,u=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(z.test(c)){c=c.split(z);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],h=b[1],g=b[2];switch(b.length){case 0:for(;++d<f;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,h);break;case 3:for(;++d<
f;)(c=a[d]).callback.call(c.ctx,e,h,g);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){k[b]=function(b,d,f){var g=this._listeningTo||(this._listeningTo={}),h=b._listenId||(b._listenId=e.uniqueId("l"));g[h]=b;!f&&"object"===typeof d&&(f=this);b[a](d,f,this);return this}});k.bind=k.on;k.unbind=k.off;e.extend(g,k);var w=g.Model=function(a,b){var c=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};b.collection&&(this.collection=
b.collection);b.parse&&(c=this.parse(c,b)||{});c=e.defaults({},c,e.result(this,"defaults"));this.set(c,b);this.changed={};this.initialize.apply(this,arguments)};e.extend(w.prototype,k,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return e.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,
b,c){var d,f,g,h,A,m,k;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;h=c.silent;a=[];A=this._changing;this._changing=!0;A||(this._previousAttributes=e.clone(this.attributes),this.changed={});k=this.attributes;m=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(k[d],b)||a.push(d),e.isEqual(m[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete k[d]:k[d]=b;if(!h){a.length&&
(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,k[a[b]],c)}if(A)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?
e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return!1;c&&c(b,d,a);b.trigger("sync",
b,d,a)};q(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;c=e.extend({validate:!0},c);if(d&&!c.wait){if(!this.set(d,c))return!1}else if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return!1;h&&h(g,a,c);g.trigger("sync",
g,a,c)};q(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){a=a?e.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;q(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,
"urlRoot")||e.result(this.collection,"url")||C();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=e.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;if(!c)return!0;
this.trigger("invalid",this,c,e.extend(b,{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){w.prototype[a]=function(){var b=p.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var t=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},H={add:!0,remove:!0,merge:!0},I={add:!0,
remove:!1};e.extend(t.prototype,k,{model:w,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.extend({merge:!1},b,I))},remove:function(a,b){var c=!e.isArray(a);a=c?[a]:e.clone(a);b||(b={});var d,f,g,h;d=0;for(f=a.length;d<f;d++)if(h=a[d]=this.get(a[d]))delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||
(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h);return c?a[0]:a},set:function(a,b){b=e.defaults({},b,H);b.parse&&(a=this.parse(a,b));var c=!e.isArray(a);a=c?a?[a]:[]:e.clone(a);var d,f,g,h,k,m,l=b.at,n=this.model,p=this.comparator&&null==l&&!1!==b.sort,u=e.isString(this.comparator)?this.comparator:null,r=[],q=[],t={},x=b.add,z=b.merge,B=b.remove,s=!p&&x&&B?[]:!1;d=0;for(f=a.length;d<f;d++){k=a[d];g=k instanceof w?h=k:k[n.prototype.idAttribute];if(g=this.get(g))B&&(t[g.cid]=!0),z&&
(k=k===h?h.attributes:k,b.parse&&(k=g.parse(k,b)),g.set(k,b),p&&(!m&&g.hasChanged(u))&&(m=!0)),a[d]=g;else if(x){h=a[d]=this._prepareModel(k,b);if(!h)continue;r.push(h);h.on("all",this._onModelEvent,this);this._byId[h.cid]=h;null!=h.id&&(this._byId[h.id]=h)}s&&s.push(g||h)}if(B){d=0;for(f=this.length;d<f;++d)t[(h=this.models[d]).cid]||q.push(h);q.length&&this.remove(q,b)}if(r.length||s&&s.length)if(p&&(m=!0),this.length+=r.length,null!=l){d=0;for(f=r.length;d<f;d++)this.models.splice(l+d,0,r[d])}else{s&&
(this.models.length=0);k=s||r;d=0;for(f=k.length;d<f;d++)this.models.push(k[d])}m&&this.sort({silent:!0});if(!b.silent){d=0;for(f=r.length;d<f;d++)(h=r[d]).trigger("add",h,this,b);(m||s&&s.length)&&this.trigger("sort",this,b)}return c?a[0]:a},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();a=this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,
e.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,e.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return p.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a.id]||this._byId[a.cid]||this._byId[a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==
b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return e.invoke(this.models,"get",a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);
var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};q(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(a,b,e){e.wait&&c.add(a,e);d&&d(a,b,e)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId=
{}},_prepareModel:function(a,b){if(a instanceof w)return a.collection||(a.collection=this),a;b=b?e.clone(b):{};b.collection=this;var c=new this.model(a,b);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,b);return!1},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],
null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){t.prototype[a]=function(){var b=p.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});e.each(["groupBy","countBy","sortBy"],
function(a){t.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var D=g.View=function(a){this.cid=e.uniqueId("view");a||(a={});e.extend(this,e.pick(a,J));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},K=/^(\S+)\s*(.*)$/,J="model collection el id attributes className tagName events".split(" ");e.extend(D.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},
remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(K),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);if(""===d)this.$el.on(f,c);else this.$el.on(f,
d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("\x3c"+e.result(this,"tagName")+"\x3e").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=L[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});
var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||C());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var k=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
d);if(k)return k.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);"PATCH"===f.type&&M&&(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var M="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),L={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var E=
g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,O=/(\(\?)?:\w+/g,P=/\*\w+/g,Q=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(E.prototype,k,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",
d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(Q,"\\$\x26").replace(N,"(?:$1)?").replace(O,function(a,c){return c?a:"([^/]+)"}).replace(P,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):
null})}});var n=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},F=/^[#\/]|\s+$/g,R=/^\/+|\/+$/g,S=/msie [\w.]+/,T=/\/$/,U=/[?#].*$/;n.started=!1;e.extend(n.prototype,k,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(T,
"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(F,"")},start:function(a){if(n.started)throw Error("Backbone.history has already been started");n.started=!0;this.options=e.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);a=this.getFragment();var b=document.documentMode,b=S.exec(navigator.userAgent.toLowerCase())&&
(!b||7>=b);this.root=("/"+this.root+"/").replace(R,"/");b&&this._wantsHashChange&&(this.iframe=g.$('\x3ciframe src\x3d"javascript:0" tabindex\x3d"-1" /\x3e').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;
b=a.pathname.replace(/[^\/]$/,"$\x26/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&(b&&a.hash)&&(this.fragment=this.getHash().replace(F,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",
this.checkUrl);clearInterval(this._checkUrlInterval);n.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return e.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!n.started)return!1;
if(!b||!0===b)b={trigger:!!b};var c=this.root+(a=this.getFragment(a||""));a=a.replace(U,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);
if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new n;w.extend=t.extend=E.extend=D.extend=n.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var C=function(){throw Error('A "url" property or function must be specified');
},q=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}}).call(this);Backbone.ChildViewContainer=function(p,e){var c=function(c){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();e.each(c,this.add,this)};e.extend(c.prototype,{add:function(c,b){var f=c.cid;this._views[f]=c;c.model&&(this._indexByModel[c.model.cid]=f);b&&(this._indexByCustom[b]=f);this._updateLength()},findByModel:function(c){return this.findByModelCid(c.cid)},findByModelCid:function(c){return this.findByCid(this._indexByModel[c])},findByCustom:function(c){return this.findByCid(this._indexByCustom[c])},
findByIndex:function(c){return e.values(this._views)[c]},findByCid:function(c){return this._views[c]},remove:function(c){var b=c.cid;c.model&&delete this._indexByModel[c.model.cid];e.any(this._indexByCustom,function(c,a){return c===b?(delete this._indexByCustom[a],!0):void 0},this);delete this._views[b];this._updateLength()},call:function(c){this.apply(c,e.tail(arguments))},apply:function(c,b){e.each(this._views,function(f){e.isFunction(f[c])&&f[c].apply(f,b||[])})},_updateLength:function(){this.length=
e.size(this._views)}});return e.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(m){c.prototype[m]=function(){var b=[e.values(this._views)].concat(e.toArray(arguments));return e[m].apply(e,b)}}),c}(Backbone,_);
Backbone.Wreqr=function(p,e,c){e={};return e.Handlers=function(c,b){var e=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&this.initialize(a)};return e.extend=c.Model.extend,b.extend(e.prototype,c.Events,{setHandlers:function(a){b.each(a,function(a,g){var c=null;b.isObject(a)&&!b.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(g,a,c)},this)},setHandler:function(a,d,b){this._wreqrHandlers[a]={callback:d,context:b};this.trigger("handler:add",a,d,b)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var d=this._wreqrHandlers[a];if(!d)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return d.callback.apply(d.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}}),e}(p,c),e.CommandStorage=function(){var e=function(b){this.options=b;this._commands={};c.isFunction(this.initialize)&&this.initialize(b)};return c.extend(e.prototype,p.Events,{getCommands:function(b){var c=
this._commands[b];return c||(c={command:b,instances:[]},this._commands[b]=c),c},addCommand:function(b,c){this.getCommands(b).instances.push(c)},clearCommands:function(b){this.getCommands(b).instances=[]}}),e}(),e.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var c=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,
c)},execute:function(b,c){b=arguments[0];c=Array.prototype.slice.call(arguments,1);this.hasHandler(b)?this.getHandler(b).apply(this,c):this.storage.addCommand(b,c)},_executeCommands:function(b,e,a){var d=this.storage.getCommands(b);c.each(d.instances,function(d){e.apply(a,d)});this.storage.clearCommands(b)},_initializeStorage:function(b){b=b.storageType||this.storageType;this.storage=c.isFunction(b)?new b:b}})}(e),e.RequestResponse=function(c){return c.Handlers.extend({request:function(){var b=arguments[0],
c=Array.prototype.slice.call(arguments,1);return this.getHandler(b).apply(this,c)}})}(e),e.EventAggregator=function(c,b){var e=function(){};return e.extend=c.Model.extend,b.extend(e.prototype,c.Events),e}(p,c),e}(Backbone,Backbone.Marionette,_);
var Marionette=function(p,e,c){function m(a,d){var b=Error(a);throw b.name=d||"Error",b;}var b={};e.Marionette=b;b.$=e.$;var f=Array.prototype.slice;return b.extend=e.Model.extend,b.getOption=function(a,d){if(a&&d)return a.options&&d in a.options&&void 0!==a.options[d]?a.options[d]:a[d]},b.triggerMethod=function(){function a(a,d,b){return b.toUpperCase()}var d=/(^|:)(\w)/gi;return function(b){var e=this["on"+b.replace(d,a)];return c.isFunction(this.trigger)&&this.trigger.apply(this,arguments),c.isFunction(e)?
e.apply(this,c.tail(arguments)):void 0}}(),b.MonitorDOMRefresh=function(){function a(a){a._isShown&&a._isRendered&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}return function(d){d.listenTo(d,"show",function(){d._isShown=!0;a(d)});d.listenTo(d,"render",function(){d._isRendered=!0;a(d)})}}(),function(a){function d(a,d,b,g){g=g.split(/\s+/);c.each(g,function(c){var g=a[c];g||m("Method '"+c+"' was configured as an event handler, but does not exist.");a.listenTo(d,b,g,a)})}function b(a,
d,c,g){a.listenTo(d,c,g,a)}function e(a,d,b,g){g=g.split(/\s+/);c.each(g,function(c){a.stopListening(d,b,a[c],a)})}function l(a,d,b,c){a.stopListening(d,b,c,a)}function k(a,d,b,g,e){d&&b&&(c.isFunction(b)&&(b=b.call(a)),c.each(b,function(b,h){c.isFunction(b)?g(a,d,h,b):e(a,d,h,b)}))}a.bindEntityEvents=function(a,c,e){k(a,c,e,b,d)};a.unbindEntityEvents=function(a,d,b){k(a,d,b,l,e)}}(b),b.Callbacks=function(){this._deferred=b.$.Deferred();this._callbacks=[]},c.extend(b.Callbacks.prototype,{add:function(a,
d){this._callbacks.push({cb:a,ctx:d});this._deferred.done(function(b,c){d&&(b=d);a.call(b,c)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=b.$.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,a.ctx)},this)}}),b.Controller=function(a){this.triggerMethod=b.triggerMethod;this.options=a||{};c.isFunction(this.initialize)&&this.initialize(this.options)},b.Controller.extend=b.extend,c.extend(b.Controller.prototype,e.Events,{close:function(){this.stopListening();
this.triggerMethod("close");this.unbind()}}),b.Region=function(a){if(this.options=a||{},this.el=b.getOption(this,"el"),!this.el){var d=Error("An 'el' must be specified for a region.");throw d.name="NoElError",d;}this.initialize&&(d=Array.prototype.slice.apply(arguments),this.initialize.apply(this,d))},c.extend(b.Region,{buildRegion:function(a,b){var g="string"==typeof a,e="string"==typeof a.selector,l="undefined"==typeof a.regionType,k="function"==typeof a;if(!k&&!g&&!e)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");
var f,n;g&&(f=a);a.selector&&(f=a.selector);k&&(n=a);!k&&l&&(n=b);a.regionType&&(n=a.regionType);g=new n({el:f});return a.parentEl&&(g.getEl=function(b){var d=a.parentEl;return c.isFunction(d)&&(d=d()),d.find(b)}),g}}),c.extend(b.Region.prototype,e.Events,{show:function(a){this.ensureEl();var d=a.isClosed||c.isUndefined(a.$el),g=a!==this.currentView;g&&this.close();a.render();(g||d)&&this.open(a);this.currentView=a;b.triggerMethod.call(this,"show",a);b.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&
0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return b.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),b.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}}),b.Region.extend=b.extend,b.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions=
{};a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var d={};return c.each(a,function(a,g){"string"==typeof a&&(a={selector:a});a.selector&&(a=c.defaults({},a,b));var e=this.addRegion(g,a);d[g]=e},this),d},addRegion:function(b,d){var e,f=c.isObject(d),q=c.isString(d),n=!!d.selector;return e=q||f&&n?a.Region.buildRegion(d,a.Region):c.isFunction(d)?a.Region.buildRegion(d,a.Region):d,this._store(b,e),this.triggerMethod("region:add",b,e),e},get:function(a){return this._regions[a]},
removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){c.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){c.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var b=Array.prototype.slice.call(arguments);a.Controller.prototype.close.apply(this,b)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",
a,b)},_setLength:function(){this.length=c.size(this._regions)}});return c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){b.prototype[a]=function(){var b=[c.values(this._regions)].concat(c.toArray(arguments));return c[a].apply(c,b)}}),b}(b),b.TemplateCache=function(a){this.templateId=a},c.extend(b.TemplateCache,{templateCaches:{},get:function(a){var d=this.templateCaches[a];
return d||(d=new b.TemplateCache(a),this.templateCaches[a]=d),d.load()},clear:function(){var a,b=f.call(arguments),c=b.length;if(0<c)for(a=0;c>a;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}}),c.extend(b.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a),this.compiledTemplate},loadTemplate:function(a){var d=b.$(a).html();return d&&0!==d.length||
m("Could not find template: '"+a+"'","NoTemplateError"),d},compileTemplate:function(a){return c.template(a)}}),b.Renderer={render:function(a,d){if(!a){var c=Error("Cannot render the template since it's false, null or undefined.");throw c.name="TemplateNotFoundError",c;}return c="function"==typeof a?a:b.TemplateCache.get(a),c(d)}},b.View=e.View.extend({constructor:function(a){c.bindAll(this,"render");var d=Array.prototype.slice.apply(arguments);e.View.prototype.constructor.apply(this,d);this.options=
a||{};b.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:b.triggerMethod,getTemplate:function(){return b.getOption(this,"template")},mixinTemplateHelpers:function(a){a=a||{};var d=b.getOption(this,"templateHelpers");return c.isFunction(d)&&(d=d.call(this)),c.extend(a,d)},configureTriggers:function(){if(this.triggers){var a={},b=c.result(this,"triggers");return c.each(b,function(b,d){var e=c.isObject(b),f=e?b.event:b;a[d]=function(a){if(a){var d=a.preventDefault,
c=a.stopPropagation,h=e?b.stopPropagation:c;(e?b.preventDefault:d)&&d&&d.apply(a);h&&c&&c.apply(a)}this.triggerMethod(f,{view:this,model:this.model,collection:this.collection})}},this),a}},delegateEvents:function(a){this._delegateDOMEvents(a);b.bindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.bindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;c.isFunction(a)&&(a=a.call(this));var b={},g=this.configureTriggers();
c.extend(b,a,g);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,a);b.unbindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.unbindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){this.isClosed||!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),
this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(c.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),b.ItemView=b.View.extend({constructor:function(){b.View.prototype.constructor.apply(this,f.call(arguments))},serializeData:function(){var a=
{};return this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()}),a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),d=this.getTemplate(),a=b.Renderer.render(d,a);return this.$el.html(a),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),
b.View.prototype.close.apply(this,f.call(arguments)),this.triggerMethod("item:closed"))}}),b.CollectionView=b.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage();b.View.prototype.constructor.apply(this,f.call(arguments));this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,
this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){b.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),
this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&
(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return b.getOption(this,"emptyView")},getItemView:function(){var a=b.getOption(this,"itemView");return a||m("An `itemView` must be specified","NoItemViewError"),a},addItemView:function(a,d,e){var h=b.getOption(this,"itemViewOptions");c.isFunction(h)&&(h=h.call(this,a,e));a=this.buildItemView(a,d,h);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,e);
this._isShown&&b.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var d=b.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var c=f.call(arguments);c[0]=d+":"+c[0];c.splice(1,0,a);b.triggerMethod.apply(this,c)},this)},renderItemView:function(a,b){a.render();this.appendHtml(this,a,b)},buildItemView:function(a,b,e){a=c.extend({model:a},e);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);
this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(a,b){a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),
b.View.prototype.close.apply(this,f.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}}),b.CompositeView=b.CollectionView.extend({constructor:function(){b.CollectionView.prototype.constructor.apply(this,f.call(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",
this._renderChildren,this))},getItemView:function(){var a=b.getOption(this,"itemView")||this.constructor;return a||m("An `itemView` must be specified","NoItemViewError"),a},serializeData:function(){var a={};return this.model&&(a=this.model.toJSON()),a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();return this.$el.html(a),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),
this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(b.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a),d=this.getTemplate();return b.Renderer.render(d,a)},appendHtml:function(a,b){this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;
var d;(d=b.getOption(a,"itemViewContainer"))?(d=c.isFunction(d)?d():d,d=a.$(d),0>=d.length&&m("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):d=a.$el;return a.$itemViewContainer=d,d},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),b.Layout=b.ItemView.extend({regionType:b.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);b.ItemView.prototype.constructor.call(this,
a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return b.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);b.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};return c[a]=b,this._buildRegions(c)[a]},addRegions:function(a){return this.regions=
c.extend({},this.regions,a),this._buildRegions(a)},removeRegion:function(a){return delete this.regions[a],this.regionManager.removeRegion(a)},_buildRegions:function(a){var c=this,e={regionType:b.getOption(this,"regionType"),parentEl:function(){return c.$el}};return this.regionManager.addRegions(a,e)},_initializeRegions:function(a){this._initRegionManager();a=c.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();
this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new b.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}}),b.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,f.call(arguments));this.options=a||{};var c=b.getOption(this,"appRoutes"),
g=this._getController();this.processAppRoutes(g,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var e=c.keys(b).reverse();c.each(e,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return b.getOption(this,"controller")},_addAppRoute:function(a,b,e){var f=a[e];if(!f)throw Error("Method '"+e+"' was not found on the controller");this.route(b,e,c.bind(f,a))}}),b.Application=function(a){this._initRegionManager();
this._initCallbacks=new b.Callbacks;this.vent=new e.Wreqr.EventAggregator;this.commands=new e.Wreqr.Commands;this.reqres=new e.Wreqr.RequestResponse;this.submodules={};c.extend(this,a);this.triggerMethod=b.triggerMethod},c.extend(b.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(){var a=f.call(arguments);return a.unshift(this),b.Module.create.apply(b.Module,
a)},_initRegionManager:function(){this._regionManager=new b.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}}),b.Application.extend=b.extend,b.Module=function(a,c){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=c;this.startWithParent=!0;this.triggerMethod=b.triggerMethod},c.extend(b.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},
addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,b.triggerMethod.call(this,"before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),
this._finalizerCallbacks.reset(),b.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,d){if(a){var g=c.flatten([this,this.app,e,b,b.$,c,d]);a.apply(this,g)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new b.Callbacks;this._finalizerCallbacks=new b.Callbacks}}),c.extend(b.Module,{create:function(a,b,e){var h=a,l=f.call(arguments);l.splice(0,3);b=b.split(".");var k=[];return k[b.length-1]=e,c.each(b,
function(b,c){var d=h;h=this._getModule(d,b,a);this._addModuleDefinition(d,h,k[c],l)},this),h},_getModule:function(a,c,e){var f=a[c];return f||(f=new b.Module(c,e),a[c]=f,a.submodules[c]=f),f},_addModuleDefinition:function(a,b,e,f){var l,k;c.isFunction(e)?(l=e,k=!0):c.isObject(e)?(l=e.define,k=e.startWithParent):k=!0;l&&b.addDefinition(l,f);b.startWithParent=b.startWithParent&&k;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&
b.start(a)}))}}),b}(this,Backbone,_);var Handlebars=function(){var w=function(){function e(e){this.string=e}e.prototype.toString=function(){return""+this.string};return e}(),p=function(e){function m(b){return g[b]||"\x26amp;"}var d={},g={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"},a=/[&<>"'`]/g,f=/[&<>"'`]/;d.extend=function(b,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a])};var l=Object.prototype.toString;d.toString=l;var c=function(b){return"function"===
typeof b};c(/x/)&&(c=function(b){return"function"===typeof b&&"[object Function]"===l.call(b)});d.isFunction=c;var h=Array.isArray||function(b){return b&&"object"===typeof b?"[object Array]"===l.call(b):!1};d.isArray=h;d.escapeExpression=function(b){if(b instanceof e)return b.toString();if(!b&&0!==b)return"";b=""+b;return!f.test(b)?b:b.replace(a,m)};d.isEmpty=function(b){return!b&&0!==b?!0:h(b)&&0===b.length?!0:!1};return d}(w),s=function(){function e(){for(var d=Error.prototype.constructor.apply(this,
arguments),g=0;g<m.length;g++)this[m[g]]=d[m[g]]}var m="description fileName lineNumber message name number stack".split(" ");e.prototype=Error();return e}(),u=function(e,m){function d(b,c){this.helpers=b||{};this.partials=c||{};g(this)}function g(b){b.registerHelper("helperMissing",function(b){if(2!==arguments.length)throw Error("Missing helper: '"+b+"'");});b.registerHelper("blockHelperMissing",function(a,k){var n=k.inverse||function(){},f=k.fn;h(a)&&(a=a.call(this));return!0===a?f(this):!1===a||
null==a?n(this):c(a)?0<a.length?b.helpers.each(a,k):n(this):f(a)});b.registerHelper("each",function(b,a){var k=a.fn,v=a.inverse,f=0,d="",g;h(b)&&(b=b.call(this));a.data&&(g=n(a.data));if(b&&"object"===typeof b)if(c(b))for(var l=b.length;f<l;f++)g&&(g.index=f,g.first=0===f,g.last=f===b.length-1),d+=k(b[f],{data:g});else for(l in b)b.hasOwnProperty(l)&&(g&&(g.key=l,g.index=f,g.first=0===f),d+=k(b[l],{data:g}),f++);0===f&&(d=v(this));return d});b.registerHelper("if",function(b,c){h(b)&&(b=b.call(this));
return!c.hash.includeZero&&!b||l.isEmpty(b)?c.inverse(this):c.fn(this)});b.registerHelper("unless",function(c,a){return b.helpers["if"].call(this,c,{fn:a.inverse,inverse:a.fn,hash:a.hash})});b.registerHelper("with",function(b,c){h(b)&&(b=b.call(this));if(!l.isEmpty(b))return c.fn(b)});b.registerHelper("log",function(c,a){var k=a.data&&null!=a.data.level?parseInt(a.data.level,10):1;b.log(k,c)})}function a(b,c){k.log(b,c)}var f={},l=e;f.VERSION="1.2.0";f.COMPILER_REVISION=4;f.REVISION_CHANGES={1:"\x3c\x3d 1.0.rc.2",
2:"\x3d\x3d 1.0.0-rc.3",3:"\x3d\x3d 1.0.0-rc.4",4:"\x3e\x3d 1.0.0"};var c=l.isArray,h=l.isFunction,b=l.toString;f.HandlebarsEnvironment=d;d.prototype={constructor:d,logger:k,log:a,registerHelper:function(c,a,k){if("[object Object]"===b.call(c)){if(k||a)throw new m("Arg not supported with multiple helpers");l.extend(this.helpers,c)}else k&&(a.not=k),this.helpers[c]=a},registerPartial:function(c,a){"[object Object]"===b.call(c)?l.extend(this.partials,c):this.partials[c]=a}};var k={methodMap:{0:"debug",
1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,c){if(k.level<=b){var a=k.methodMap[b];"undefined"!==typeof console&&console[a]&&console[a].call(console,c)}}};f.logger=k;f.log=a;var n=function(b){var c={};l.extend(c,b);return c};f.createFrame=n;return f}(p,s),x=function(e,m,d){function g(c,a,b){var k=function(c,k){k=k||{};return a(c,k.data||b)};k.program=c;k.depth=0;return k}var a={},f=d.COMPILER_REVISION,l=d.REVISION_CHANGES;a.checkRevision=function(c){var a=c&&
c[0]||1;if(a!==f){if(a<f)throw Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+l[f]+") or downgrade your runtime to an older version ("+l[a]+").");throw Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+c[1]+").");}};a.template=function(c,a){if(!a)throw Error("No environment passed to template");var b={escapeExpression:e.escapeExpression,
invokePartial:function(b,c,v,f,d,g){var l=a.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(a.compile)return l={helpers:f,partials:d,data:g},d[c]=a.compile(b,{data:void 0!==g},a),d[c](v,l);throw new m("The partial "+c+" could not be compiled when running in runtime-only mode");},programs:[],program:function(b,c,a){var h=this.programs[b];a?h=g(b,c,a):h||(h=this.programs[b]=g(b,c));return h},merge:function(b,c){var a=b||c;b&&(c&&b!==c)&&(a={},e.extend(a,c),e.extend(a,b));return a},programWithDepth:a.VM.programWithDepth,
noop:a.VM.noop,compilerInfo:null};return function(k,n){n=n||{};var f=n.partial?n:a,d,g;n.partial||(d=n.helpers,g=n.partials);f=c.call(b,f,k,d,g,n.data);n.partial||a.VM.checkRevision(b.compilerInfo);return f}};a.programWithDepth=function(c,a,b){var k=Array.prototype.slice.call(arguments,3),n=function(c,n){n=n||{};return a.apply(this,[c,n.data||b].concat(k))};n.program=c;n.depth=k.length;return n};a.program=g;a.invokePartial=function(c,a,b,k,n,f){k={partial:!0,helpers:k,partials:n,data:f};if(void 0===
c)throw new m("The partial "+a+" could not be found");if(c instanceof Function)return c(b,k)};a.noop=function(){return""};return a}(p,s,u),w=function(e,m,d,g,a){var f=function(){var c=new e.HandlebarsEnvironment;g.extend(c,e);c.SafeString=m;c.Exception=d;c.Utils=g;c.VM=a;c.template=function(h){return a.template(h,c)};return c},l=f();l.create=f;return l}(u,w,s,p,x),p=function(e){var m={ProgramNode:function(d,g,a){this.type="program";this.statements=d;this.strip={};a?(this.inverse=new m.ProgramNode(a,
g),this.strip.right=g.left):g&&(this.strip.left=g.right)},MustacheNode:function(d,g,a,f){this.type="mustache";this.hash=g;this.strip=f;null!=a&&a.charAt?(a=a.charAt(3)||a.charAt(2),this.escaped="{"!==a&&"\x26"!==a):this.escaped=!!a;a=this.id=d[0];d=this.params=d.slice(1);this.isHelper=(this.eligibleHelper=a.isSimple)&&(d.length||g)},PartialNode:function(d,g,a){this.type="partial";this.partialName=d;this.context=g;this.strip=a},BlockNode:function(d,g,a,f){if(d.id.original!==f.path.original)throw new e(d.id.original+
" doesn't match "+f.path.original);this.type="block";this.mustache=d;this.program=g;this.inverse=a;this.strip={left:d.strip.left,right:f.strip.right};(g||a).strip.left=d.strip.right;(a||g).strip.right=f.strip.left;a&&!g&&(this.isInverse=!0)},ContentNode:function(d){this.type="content";this.string=d},HashNode:function(d){this.type="hash";this.pairs=d},IdNode:function(d){this.type="ID";for(var g="",a=[],f=0,l=0,c=d.length;l<c;l++){var h=d[l].part,g=g+((d[l].separator||"")+h);if(".."===h||"."===h||"this"===
h){if(0<a.length)throw new e("Invalid path: "+g);".."===h?f++:this.isScoped=!0}else a.push(h)}this.original=g;this.parts=a;this.string=a.join(".");this.depth=f;this.isSimple=1===d.length&&!this.isScoped&&0===f;this.stringModeValue=this.string},PartialNameNode:function(d){this.type="PARTIAL_NAME";this.name=d.original},DataNode:function(d){this.type="DATA";this.id=d},StringNode:function(d){this.type="STRING";this.original=this.string=this.stringModeValue=d},IntegerNode:function(d){this.type="INTEGER";
this.original=this.integer=d;this.stringModeValue=Number(d)},BooleanNode:function(d){this.type="BOOLEAN";this.bool=d;this.stringModeValue="true"===d},CommentNode:function(d){this.type="comment";this.comment=d}};return m}(s),x=function(e,m){var d={};d.parser=e;d.parse=function(d){if(d.constructor===m.ProgramNode)return d;e.yy=m;return e.parse(d)};return d}(function(){return function(){function e(a,f){return{left:"~"===a.charAt(2),right:"~"===f.charAt(0)||"~"===f.charAt(1)}}function m(){this.yy={}}
var d={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,
hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,
2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(a,f,d,c,h,b,k){a=b.length-1;switch(h){case 1:return new c.ProgramNode(b[a-1]);case 2:return new c.ProgramNode([]);case 3:this.$=new c.ProgramNode([],b[a-1],b[a]);break;case 4:this.$=new c.ProgramNode(b[a-2],b[a-1],b[a]);break;case 5:this.$=new c.ProgramNode(b[a-1],b[a],[]);break;case 6:this.$=new c.ProgramNode(b[a]);
break;case 7:this.$=new c.ProgramNode([]);break;case 8:this.$=new c.ProgramNode([]);break;case 9:this.$=[b[a]];break;case 10:b[a-1].push(b[a]);this.$=b[a-1];break;case 11:this.$=new c.BlockNode(b[a-2],b[a-1].inverse,b[a-1],b[a]);break;case 12:this.$=new c.BlockNode(b[a-2],b[a-1],b[a-1].inverse,b[a]);break;case 13:this.$=b[a];break;case 14:this.$=b[a];break;case 15:this.$=new c.ContentNode(b[a]);break;case 16:this.$=new c.CommentNode(b[a]);break;case 17:this.$=new c.MustacheNode(b[a-1][0],b[a-1][1],
b[a-2],e(b[a-2],b[a]));break;case 18:this.$=new c.MustacheNode(b[a-1][0],b[a-1][1],b[a-2],e(b[a-2],b[a]));break;case 19:this.$={path:b[a-1],strip:e(b[a-2],b[a])};break;case 20:this.$=new c.MustacheNode(b[a-1][0],b[a-1][1],b[a-2],e(b[a-2],b[a]));break;case 21:this.$=new c.MustacheNode(b[a-1][0],b[a-1][1],b[a-2],e(b[a-2],b[a]));break;case 22:this.$=new c.PartialNode(b[a-2],b[a-1],e(b[a-3],b[a]));break;case 23:this.$=e(b[a-1],b[a]);break;case 24:this.$=[[b[a-2]].concat(b[a-1]),b[a]];break;case 25:this.$=
[[b[a]],null];break;case 26:this.$=b[a];break;case 27:this.$=new c.StringNode(b[a]);break;case 28:this.$=new c.IntegerNode(b[a]);break;case 29:this.$=new c.BooleanNode(b[a]);break;case 30:this.$=b[a];break;case 31:this.$=new c.HashNode(b[a]);break;case 32:this.$=[b[a-2],b[a]];break;case 33:this.$=new c.PartialNameNode(b[a]);break;case 34:this.$=new c.PartialNameNode(new c.StringNode(b[a]));break;case 35:this.$=new c.PartialNameNode(new c.IntegerNode(b[a]));break;case 36:this.$=new c.DataNode(b[a]);
break;case 37:this.$=new c.IdNode(b[a]);break;case 38:b[a-2].push({part:b[a],separator:b[a-1]});this.$=b[a-2];break;case 39:this.$=[{part:b[a]}];break;case 42:this.$=[];break;case 43:b[a-1].push(b[a]);break;case 46:this.$=[b[a]];break;case 47:b[a-1].push(b[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},
{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,
15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,
10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,
44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,
14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,
36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],
34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],
32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,
2],16:[2,1],50:[2,41]},parseError:function(a,f){throw Error(a);},parse:function(a){var f=[0],d=[null],c=[],h=this.table,b="",k=0,n=0,v=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;c.push(a);var g=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var e,m,t,q,p={},s,r;;){t=f[f.length-1];if(this.defaultActions[t])q=
this.defaultActions[t];else{if(null===e||"undefined"==typeof e)e=void 0,e=this.lexer.lex()||1,"number"!==typeof e&&(e=this.symbols_[e]||e);q=h[t]&&h[t][e]}if("undefined"===typeof q||!q.length||!q[0]){var u="";if(!v){r=[];for(s in h[t])this.terminals_[s]&&2<s&&r.push("'"+this.terminals_[s]+"'");u=this.lexer.showPosition?"Parse error on line "+(k+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+r.join(", ")+", got '"+(this.terminals_[e]||e)+"'":"Parse error on line "+(k+1)+": Unexpected "+(1==e?"end of input":
"'"+(this.terminals_[e]||e)+"'");this.parseError(u,{text:this.lexer.match,token:this.terminals_[e]||e,line:this.lexer.yylineno,loc:a,expected:r})}}if(q[0]instanceof Array&&1<q.length)throw Error("Parse Error: multiple actions possible at state: "+t+", token: "+e);switch(q[0]){case 1:f.push(e);d.push(this.lexer.yytext);c.push(this.lexer.yylloc);f.push(q[1]);e=null;m?(e=m,m=null):(n=this.lexer.yyleng,b=this.lexer.yytext,k=this.lexer.yylineno,a=this.lexer.yylloc,0<v&&v--);break;case 2:r=this.productions_[q[1]][1];
p.$=d[d.length-r];p._$={first_line:c[c.length-(r||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(r||1)].first_column,last_column:c[c.length-1].last_column};g&&(p._$.range=[c[c.length-(r||1)].range[0],c[c.length-1].range[1]]);t=this.performAction.call(p,b,n,k,this.yy,q[1],d,c);if("undefined"!==typeof t)return t;r&&(f=f.slice(0,-2*r),d=d.slice(0,-1*r),c=c.slice(0,-1*r));f.push(this.productions_[q[1]][0]);d.push(p.$);c.push(p._$);q=h[f[f.length-2]][f[f.length-1]];f.push(q);
break;case 3:return!0}}return!0}},g=function(){return{EOF:1,parseError:function(a,d){if(this.yy.parser)this.yy.parser.parseError(a,d);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];
this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var d=a.length,e=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-d-1);this.offset-=d;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);
this.matched=this.matched.substr(0,this.matched.length-1);e.length-1&&(this.yylineno-=e.length-1);var c=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?(e.length===a.length?this.yylloc.first_column:0)+a[a.length-e.length].length-e[0].length:this.yylloc.first_column-d};this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-d]);return this},more:function(){this._more=!0;return this},less:function(a){this.unput(this.match.slice(a))},
pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),d=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+d+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);
var a,d,e;this._more||(this.match=this.yytext="");for(var c=this._currentRules(),h=0;h<c.length;h++)if((d=this._input.match(this.rules[c[h]]))&&(!a||d[0].length>a[0].length))if(a=d,e=h,!this.options.flex)break;if(a){if(d=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=d.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=
a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,c[e],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),
{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,d,e,c){function h(b,c){return d.yytext=
d.yytext.substr(b,d.yyleng-c)}switch(e){case 0:"\\\\"===d.yytext.slice(-2)?(h(0,1),this.begin("mu")):"\\"===d.yytext.slice(-1)?(h(0,1),this.begin("emu")):this.begin("mu");if(d.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return h(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState();this.begin("com");break;case 12:return h(3,5),this.popState(),15;case 13:return 22;
case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return d.yytext=h(1,2).replace(/\\"/g,'"'),32;case 22:return d.yytext=h(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return d.yytext=h(1,2),38;case 29:return"INVALID";case 30:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,
/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,
/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}}}}();d.lexer=g;m.prototype=d;d.Parser=m;return new m}()}(),p),u=function(e){function m(b){this.value=b}function d(){}var g=e.COMPILER_REVISION,a=e.REVISION_CHANGES,f=e.log;d.prototype={nameLookup:function(b,c){var a,h;0===b.indexOf("depth")&&(a=!0);h=/^[0-9]+$/.test(c)?
b+"["+c+"]":d.isValidJavaScriptVariableName(c)?b+"."+c:b+"['"+c+"']";return a?"("+b+" \x26\x26 "+h+")":h},compilerInfo:function(){return"this.compilerInfo \x3d ["+g+",'"+a[g]+"'];\n"},appendToBuffer:function(b){return this.environment.isSimple?"return "+b+";":{appendToBuffer:!0,content:b,toString:function(){return"buffer +\x3d "+b+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(b,c,a,d){this.environment=b;this.options=c||{};f("debug",this.environment.disassemble()+
"\n\n");this.name=this.environment.name;this.isChild=!!a;this.context=a||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(b,c);b=b.opcodes;this.i=0;for(a=b.length;this.i<a;this.i++)c=b[this.i],"DECLARE"===c.opcode?this[c.name]=c.value:this[c.opcode].apply(this,c.args),c.opcode!==this.stripNext&&(this.stripNext=!1);this.pushSource("");return this.createFunctionContext(d)},
preamble:function(){var b=[];if(this.isChild)b.push("");else{var c=this.namespace,a="helpers \x3d this.merge(helpers, "+c+".helpers);";this.environment.usePartial&&(a=a+" partials \x3d this.merge(partials, "+c+".partials);");this.options.data&&(a+=" data \x3d data || {};");b.push(a)}this.environment.isSimple?b.push(""):b.push(", buffer \x3d "+this.initializeBuffer());this.lastContext=0;this.source=b},createFunctionContext:function(b){var c=this.stackVars.concat(this.registers.list);0<c.length&&(this.source[1]=
this.source[1]+", "+c.join(", "));if(!this.isChild)for(var a in this.context.aliases)this.context.aliases.hasOwnProperty(a)&&(this.source[1]=this.source[1]+", "+a+"\x3d"+this.context.aliases[a]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.pushSource("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];a=0;for(var d=
this.environment.depths.list.length;a<d;a++)c.push("depth"+this.environment.depths.list[a]);a=this.mergeSource();this.isChild||(a=this.compilerInfo()+a);if(b)return c.push(a),Function.apply(this,c);b="function "+(this.name||"")+"("+c.join(",")+") {\n  "+a+"}";f("debug",b+"\n\n");return b},mergeSource:function(){for(var b="",c,a=0,d=this.source.length;a<d;a++){var h=this.source[a];h.appendToBuffer?c=c?c+"\n    + "+h.content:h.content:(c&&(b+="buffer +\x3d "+c+";\n  ",c=void 0),b+=h+"\n  ")}return b},
blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);this.replaceStack(function(c){b.splice(1,0,c);return"blockHelperMissing.call("+b.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=["depth0"];this.setupParams(0,b);var c=this.topStack();b.splice(1,0,c);b[b.length-1]="options";this.pushSource("if (!"+this.lastHelper+") { "+c+" \x3d blockHelperMissing.call("+
b.join(", ")+"); }")},appendContent:function(b){this.pendingContent&&(b=this.pendingContent+b);this.stripNext&&(b=b.replace(/^\s+/,""));this.pendingContent=b},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,""));this.stripNext="strip"},append:function(){this.flushInline();var b=this.popStack();this.pushSource("if("+b+" || "+b+" \x3d\x3d\x3d 0) { "+this.appendToBuffer(b)+" }");this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+
" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(b){this.lastContext!==b&&(this.lastContext=b)},lookupOnContext:function(b){this.push(this.nameLookup("depth"+this.lastContext,b,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(b){return"typeof "+
b+" \x3d\x3d\x3d functionType ? "+b+".apply(depth0) : "+b})},lookup:function(b){this.replaceStack(function(c){return c+" \x3d\x3d null || "+c+" \x3d\x3d\x3d false ? "+c+" : "+this.nameLookup(c,b,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(b,c){this.pushStackLiteral("depth"+this.lastContext);this.pushString(c);"string"===typeof b?this.pushString(b):this.pushStackLiteral(b)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes",
"{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var b=this.hash;this.hash=void 0;this.options.stringParams&&(this.register("hashContexts","{"+b.contexts.join(",")+"}"),this.register("hashTypes","{"+b.types.join(",")+"}"));this.push("{\n    "+b.values.join(",\n    ")+"\n  }")},pushString:function(b){this.pushStackLiteral(this.quotedString(b))},push:function(b){this.inlineStack.push(b);return b},pushLiteral:function(b){this.pushStackLiteral(b)},
pushProgram:function(b){null!=b?this.pushStackLiteral(this.programExpression(b)):this.pushStackLiteral(null)},invokeHelper:function(b,c){this.context.aliases.helperMissing="helpers.helperMissing";var a=this.lastHelper=this.setupHelper(b,c,!0),d=this.nameLookup("depth"+this.lastContext,c,"context");this.push(a.name+" || "+d);this.replaceStack(function(b){return b+" ? "+b+".call("+a.callParams+") : helperMissing.call("+a.helperMissingParams+")"})},invokeKnownHelper:function(b,c){var a=this.setupHelper(b,
c);this.push(a.name+".call("+a.callParams+")")},invokeAmbiguous:function(b,c){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var a=this.setupHelper(0,b,c),d=this.lastHelper=this.nameLookup("helpers",b,"helper"),h=this.nameLookup("depth"+this.lastContext,b,"context"),e=this.nextStack();this.pushSource("if ("+e+" \x3d "+d+") { "+e+" \x3d "+e+".call("+a.callParams+"); }");this.pushSource("else { "+e+" \x3d "+h+"; "+e+" \x3d typeof "+e+" \x3d\x3d\x3d functionType ? "+e+".call("+
a.callParams+") : "+e+"; }")},invokePartial:function(b){b=[this.nameLookup("partials",b,"partial"),"'"+b+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(b){var c=this.popStack(),a,d;this.options.stringParams&&(d=this.popStack(),a=this.popStack());var h=this.hash;a&&h.contexts.push("'"+b+"': "+a);d&&h.types.push("'"+b+"': "+d);h.values.push("'"+b+"': ("+c+")")},compiler:d,
compileChildren:function(b,c){for(var a=b.children,d,h,e=0,f=a.length;e<f;e++){d=a[e];h=new this.compiler;var g=this.matchExistingProgram(d);null==g?(this.context.programs.push(""),g=this.context.programs.length,d.index=g,d.name="program"+g,this.context.programs[g]=h.compile(d,c,this.context),this.context.environments[g]=d):(d.index=g,d.name="program"+g)}},matchExistingProgram:function(b){for(var c=0,a=this.context.environments.length;c<a;c++){var d=this.context.environments[c];if(d&&d.equals(b))return c}},
programExpression:function(b){this.context.aliases.self="this";if(null==b)return"self.noop";var c=this.environment.children[b];b=c.depths.list;for(var a=[c.index,c.name,"data"],d=0,h=b.length;d<h;d++)c=b[d],1===c?a.push("depth0"):a.push("depth"+(c-1));return(0===b.length?"self.program(":"self.programWithDepth(")+a.join(", ")+")"},register:function(b,c){this.useRegister(b);this.pushSource(b+" \x3d "+c+";")},useRegister:function(b){this.registers[b]||(this.registers[b]=!0,this.registers.list.push(b))},
pushStackLiteral:function(b){return this.push(new m(b))},pushSource:function(b){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0);b&&this.source.push(b)},pushStack:function(b){this.flushInline();var c=this.incrStack();b&&this.pushSource(c+" \x3d "+b+";");this.compileStack.push(c);return c},replaceStack:function(b){var c="",a=this.isInline(),d;a?(d=this.popStack(!0),d instanceof m?d=d.value:(c=this.stackSlot?this.topStackName():
this.incrStack(),c="("+this.push(c)+" \x3d "+d+"),",d=this.topStack())):d=this.topStack();b=b.call(this,d);a?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+c+b+")")):(/^stack/.test(d)||(d=this.nextStack()),this.pushSource(d+" \x3d ("+c+b+");"));return d},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+
this.stackSlot},flushInline:function(){var b=this.inlineStack;if(b.length){this.inlineStack=[];for(var c=0,a=b.length;c<a;c++){var d=b[c];d instanceof m?this.compileStack.push(d):this.pushStack(d)}}},isInline:function(){return this.inlineStack.length},popStack:function(b){var c=this.isInline(),a=(c?this.inlineStack:this.compileStack).pop();if(!b&&a instanceof m)return a.value;c||this.stackSlot--;return a},topStack:function(b){var c=this.isInline()?this.inlineStack:this.compileStack,c=c[c.length-1];
return!b&&c instanceof m?c.value:c},quotedString:function(b){return'"'+b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(b,c,a){var d=[];this.setupParams(b,d,a);b=this.nameLookup("helpers",c,"helper");return{params:d,name:b,callParams:["depth0"].concat(d).join(", "),helperMissingParams:a&&["depth0",this.quotedString(c)].concat(d).join(", ")}},setupParams:function(b,c,a){var d=[],
h=[],e=[],f,g;d.push("hash:"+this.popStack());f=this.popStack();if((g=this.popStack())||f)g||(this.context.aliases.self="this",g="self.noop"),f||(this.context.aliases.self="this",f="self.noop"),d.push("inverse:"+f),d.push("fn:"+g);for(g=0;g<b;g++)f=this.popStack(),c.push(f),this.options.stringParams&&(e.push(this.popStack()),h.push(this.popStack()));this.options.stringParams&&(d.push("contexts:["+h.join(",")+"]"),d.push("types:["+e.join(",")+"]"),d.push("hashContexts:hashContexts"),d.push("hashTypes:hashTypes"));
this.options.data&&d.push("data:data");d="{"+d.join(",")+"}";a?(this.register("options",d),c.push("options")):c.push(d);return c.join(", ")}};e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" ");
for(var l=d.RESERVED_WORDS={},c=0,h=e.length;c<h;c++)l[e[c]]=!0;d.isValidJavaScriptVariableName=function(b){return!d.RESERVED_WORDS[b]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(b)?!0:!1};return d}(u),s=function(e,m,d,g){function a(){}var f={},l=m.parse;f.Compiler=a;a.prototype={compiler:a,disassemble:function(){for(var c=this.opcodes,a,b=[],d,e,f=0,g=c.length;f<g;f++)if(a=c[f],"DECLARE"===a.opcode)b.push("DECLARE "+a.name+"\x3d"+a.value);else{d=[];for(var l=0;l<a.args.length;l++)e=a.args[l],"string"===typeof e&&
(e='"'+e.replace("\n","\\n")+'"'),d.push(e);b.push(a.opcode+" "+d.join(" "))}return b.join("\n")},equals:function(c){var a=this.opcodes.length;if(c.opcodes.length!==a)return!1;for(var b=0;b<a;b++){var d=this.opcodes[b],e=c.opcodes[b];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}a=this.children.length;if(c.children.length!==a)return!1;for(b=0;b<a;b++)if(!this.children[b].equals(c.children[b]))return!1;return!0},guid:0,
compile:function(c,a){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=a;var b=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(b)for(var d in b)this.options.knownHelpers[d]=b[d];return this.accept(c)},accept:function(c){var a=c.strip||{};a.left&&this.opcode("strip");c=this[c.type](c);a.right&&this.opcode("strip");return c},program:function(c){c=c.statements;for(var a=0,b=c.length;a<b;a++)this.accept(c[a]);
this.isSimple=1===b;this.depths.list=this.depths.list.sort(function(b,c){return b-c});return this},compileProgram:function(c){c=(new this.compiler).compile(c,this.options);var a=this.guid++,b;this.usePartial=this.usePartial||c.usePartial;this.children[a]=c;for(var d=0,e=c.depths.list.length;d<e;d++)b=c.depths.list[d],2>b||this.addDepth(b-1);return a},block:function(c){var a=c.mustache,b=c.program;c=c.inverse;b&&(b=this.compileProgram(b));c&&(c=this.compileProgram(c));var d=this.classifyMustache(a);
"helper"===d?this.helperMustache(a,b,c):"simple"===d?(this.simpleMustache(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(c){c=c.pairs;var a,b;this.opcode("pushHash");for(var d=0,e=c.length;d<e;d++)a=c[d],b=a[1],this.options.stringParams?(b.depth&&this.addDepth(b.depth),
this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type)):this.accept(b),this.opcode("assignToHash",a[0]);this.opcode("popHash")},partial:function(c){var a=c.partialName;this.usePartial=!0;c.context?this.ID(c.context):this.opcode("push","depth0");this.opcode("invokePartial",a.name);this.opcode("append")},content:function(c){this.opcode("appendContent",c.string)},mustache:function(c){var a=this.options,b=this.classifyMustache(c);"simple"===b?this.simpleMustache(c):
"helper"===b?this.helperMustache(c):this.ambiguousMustache(c);c.escaped&&!a.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(c,a,b){c=c.id;var d=c.parts[0],e=null!=a||null!=b;this.opcode("getContext",c.depth);this.opcode("pushProgram",a);this.opcode("pushProgram",b);this.opcode("invokeAmbiguous",d,e)},simpleMustache:function(c){c=c.id;"DATA"===c.type?this.DATA(c):c.parts.length?this.ID(c):(this.addDepth(c.depth),this.opcode("getContext",c.depth),this.opcode("pushContext"));
this.opcode("resolvePossibleLambda")},helperMustache:function(c,a,b){a=this.setupFullMustacheParams(c,a,b);c=c.id.parts[0];if(this.options.knownHelpers[c])this.opcode("invokeKnownHelper",a.length,c);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+c);this.opcode("invokeHelper",a.length,c)}},ID:function(c){this.addDepth(c.depth);this.opcode("getContext",c.depth);c.parts[0]?this.opcode("lookupOnContext",c.parts[0]):this.opcode("pushContext");
for(var a=1,b=c.parts.length;a<b;a++)this.opcode("lookup",c.parts[a])},DATA:function(a){this.options.data=!0;if(a.id.isScoped||a.id.depth)throw new e("Scoped data references are not supported: "+a.original);this.opcode("lookupData");a=a.id.parts;for(var d=0,b=a.length;d<b;d++)this.opcode("lookup",a[d])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,
args:[].slice.call(arguments,1)})},declare:function(a,d){this.opcodes.push({opcode:"DECLARE",name:a,value:d})},addDepth:function(a){if(isNaN(a))throw Error("EWOT");0!==a&&!this.depths[a]&&(this.depths[a]=!0,this.depths.list.push(a))},classifyMustache:function(a){var d=a.isHelper,b=a.eligibleHelper,e=this.options;b&&!d&&(e.knownHelpers[a.id.parts[0]]?d=!0:e.knownHelpersOnly&&(b=!1));return d?"helper":b?"ambiguous":"simple"},pushParams:function(a){for(var d=a.length,b;d--;)if(b=a[d],this.options.stringParams)b.depth&&
this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type);else this[b.type](b)},setupMustacheParams:function(a){var d=a.params;this.pushParams(d);a.hash?this.hash(a.hash):this.opcode("emptyHash");return d},setupFullMustacheParams:function(a,d,b){var e=a.params;this.pushParams(e);this.opcode("pushProgram",d);this.opcode("pushProgram",b);a.hash?this.hash(a.hash):this.opcode("emptyHash");return e}};f.precompile=function(c,f){if(null==c||"string"!==
typeof c&&c.constructor!==g.ProgramNode)throw new e("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+c);f=f||{};"data"in f||(f.data=!0);var b=l(c),b=(new a).compile(b,f);return(new d).compile(b,f)};f.compile=function(c,f,b){if(null==c||"string"!==typeof c&&c.constructor!==g.ProgramNode)throw new e("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+c);f=f||{};"data"in f||(f.data=!0);var k;return function(e,g){if(!k){var m=l(c),m=(new a).compile(m,
f),m=(new d).compile(m,f,void 0,!0);k=b.template(m)}return k.call(this,e,g)}};return f}(s,x,u,p);return function(e,m,d,g,a){var f=d.parser,l=d.parse,c=g.Compiler,h=g.compile,b=g.precompile,k=e.create;d=function(){var d=k();d.compile=function(a,b){return h(a,b,d)};d.precompile=b;d.AST=m;d.Compiler=c;d.JavaScriptCompiler=a;d.Parser=f;d.parse=l;return d};e=d();e.create=d;return e}(w,p,x,s,u)}();(function(d,f){var a=d.jQuery||d.Cowboy||(d.Cowboy={}),e;a.throttle=e=function(k,c,b,g){function d(){function a(){e=+new Date;b.apply(m,n)}function p(){h=f}var m=this,l=+new Date-e,n=arguments;g&&!h&&a();h&&clearTimeout(h);g===f&&l>k?a():!0!==c&&(h=setTimeout(g?p:a,g===f?k-l:k))}var h,e=0;"boolean"!==typeof c&&(g=b,b=c,c=f);a.guid&&(d.guid=b.guid=b.guid||a.guid++);return d};a.debounce=function(a,c,b){return b===f?e(a,c,!1):e(a,b,!1!==c)}})(this);(function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(g){for(var k=e([0]),p=-1,v=this.length;++p<v&&(k.context=k[0]=this[p])&&!1!==g.call(k[0],p,k););return this}})})(jQuery);
(function(e,g){function k(a,b){var c=0,d=b.length,l;if("undefined"===typeof a)return-1;if(a.constructor===String)for(;c<d;c+=1){if(0===a.localeCompare(b[c]))return c}else for(;c<d;c+=1)if(l=b[c],l.constructor===String){if(0===l.localeCompare(a))return c}else if(l===a)return c;return-1}function p(a,b){return a===b?!0:a===g||b===g||null===a||null===b?!1:a.constructor===String?0===a.localeCompare(b):b.constructor===String?0===b.localeCompare(a):!1}function v(a,b){var c,d,l;if(null===a||1>a.length)return[];
c=a.split(b);d=0;for(l=c.length;d<l;d+=1)c[d]=e.trim(c[d]);return c}function D(a,b,c){c=c||g;var d;return function(){var l=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,l)},a)}}function n(a){a.preventDefault();a.stopPropagation()}function E(a,b,c){var d=a.toUpperCase().indexOf(b.toUpperCase());b=b.length;0>d?c.push(a):(c.push(a.substring(0,d)),c.push("\x3cspan class\x3d'select2-match'\x3e"),c.push(a.substring(d,d+b)),c.push("\x3c/span\x3e"),c.push(a.substring(d+b,a.length)))}
function F(a){var b,c=0,d=null,l=a.quietMillis||100;return function(h){window.clearTimeout(b);b=window.setTimeout(function(){var b=c+=1,l=a.data,q=a.transport||e.ajax,f=a.traditional||!1,g=a.type||"GET",l=l.call(this,h.term,h.page,h.context);null!==d&&d.abort();d=q.call(null,{url:a.url,dataType:a.dataType,data:l,type:g,traditional:f,success:function(d){b<c||(d=a.results(d,h.page),h.callback(d))}})},l)}}function G(a){var b=a,c,d=function(a){return""+a.text};e.isArray(b)||(d=b.text,e.isFunction(d)||
(c=b.text,d=function(a){return a[c]}),b=b.results);return function(a){var c=a.term,f={results:[]},m;""===c?a.callback({results:b}):(m=function(b,f){var g,w;b=b[0];if(b.children){g={};for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);g.children=[];e(b.children).each2(function(a,b){m(b,g.children)});g.children.length&&f.push(g)}else a.matcher(c,d(b))&&f.push(b)},e(b).each2(function(a,b){m(b,f.results)}),a.callback(f))}}function H(a){return e.isFunction(a)?a:function(b){var c=b.term,d={results:[]};e(a).each(function(){var a=
this.text!==g,e=a?this.text:this;if(""===c||b.matcher(c,e))d.results.push(a?this:{id:this,text:this})});b.callback(d)}}function x(a){if(e.isFunction(a))return!0;if(!a)return!1;throw Error("formatterName must be a function or a falsy value");}function y(a){return e.isFunction(a)?a():a}function I(a){var b=0;e.each(a,function(a,d){d.children?b+=I(d.children):b++});return b}function K(a,b,c,d){var e=a,h=!1,f,m,q,r;if(!d.createSearchChoice||!d.tokenSeparators||1>d.tokenSeparators.length)return g;for(;;){h=
-1;m=0;for(q=d.tokenSeparators.length;m<q&&!(r=d.tokenSeparators[m],h=a.indexOf(r),0<=h);m++);if(0>h)break;f=a.substring(0,h);a=a.substring(h+r.length);if(0<f.length&&(f=d.createSearchChoice(f,b),f!==g&&null!==f&&d.id(f)!==g&&null!==d.id(f))){h=!1;m=0;for(q=b.length;m<q;m++)if(p(d.id(f),d.id(b[m]))){h=!0;break}h||c(f)}}if(0!=e.localeCompare(a))return a}function A(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);
return c}if(window.Select2===g){var f,z,B,C,J,t;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};var L=1;J=
function(){return L++};e(document).delegate("body","mousemove",function(a){e.data(document,"select2-lastpos",{x:a.pageX,y:a.pageY})});e(document).ready(function(){e(document).delegate("body","mousedown touchend",function(a){var b=e(a.target).closest("div.select2-container").get(0),c;b?e(document).find("div.select2-container-active").each(function(){this!==b&&e(this).data("select2").blur()}):(b=e(a.target).closest("div.select2-drop").get(0),e(document).find("div.select2-drop-active").each(function(){this!==
b&&e(this).data("select2").blur()}));b=e(a.target);c=b.attr("for");"LABEL"===a.target.tagName&&c&&0<c.length&&(b=e("#"+c),b=b.data("select2"),b!==g&&(b.focus(),a.preventDefault()))})});z=A(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);this.id=a.id;a.element.data("select2")!==g&&null!==a.element.data("select2")&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||
"autogen"+J());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,l;this.body=function(){!1===d&&(l=a.element.closest("body"),d=!0);return l};a.element.attr("class")!==g&&this.container.addClass(a.element.attr("class").replace(/validate\[[\S ]+] ?/,""));this.container.css(y(a.containerCss));this.container.addClass(y(a.containerCssClass));this.opts.element.data("select2",this).hide().before(this.container);
this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(y(a.dropdownCssClass));this.dropdown.data("select2",this);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");c.attr("tabIndex",this.opts.element.attr("tabIndex"));this.resultsPage=0;this.context=null;this.initContainer();this.initContainerWidth();this.results.bind("mousemove",function(a){var b=e.data(document,"select2-lastpos");
(b===g||b.x!==a.pageX||b.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.delegate(".select2-results","mousemove-filtered",this.bind(this.highlightUnderEvent));var h=this.results,f=D(80,function(a){h.trigger("scroll-debounced",a)});h.bind("scroll",function(a){0<=k(a.target,h.get())&&f(a)});this.dropdown.delegate(".select2-results","scroll-debounced",this.bind(this.loadMoreIfNeeded));e.fn.mousewheel&&b.mousewheel(function(a,c,d,e){c=b.scrollTop();0<e&&0>=c-e?(b.scrollTop(0),
n(a)):0>e&&b.get(0).scrollHeight-b.scrollTop()+e<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),n(a))});c.bind("keydown",function(){e.data(c,"keyup-change-value")===g&&e.data(c,"keyup-change-value",c.val())});c.bind("keyup",function(){var a=e.data(c,"keyup-change-value");a!==g&&c.val()!==a&&(e.removeData(c,"keyup-change-value"),c.trigger("keyup-change"))});c.bind("keyup-change",this.bind(this.updateResults));c.bind("focus",function(){c.addClass("select2-focused");" "===c.val()&&c.val("")});
c.bind("blur",function(){c.removeClass("select2-focused")});this.dropdown.delegate(".select2-results","mouseup",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable:not(.select2-disabled)").length?(this.highlightUnderEvent(a),this.selectHighlighted(a)):this.focusSearch();n(a)}));this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()});e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());(a.element.is(":disabled")||a.element.is("[readonly\x3d'readonly']"))&&
this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==g&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(a){var b,c,d;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a \x3cselect\x3e element.");
});a=e.extend({},{populateResults:function(b,c,d){var f,q=this.opts.id,r=this;f=function(b,c,l){var h,n,k,p,u,s,t;h=0;for(n=b.length;h<n;h+=1)k=b[h],p=q(k)!==g,u=k.children&&0<k.children.length,s=e("\x3cli\x3e\x3c/li\x3e"),s.addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),u&&s.addClass("select2-result-with-children"),s.addClass(r.opts.formatResultCssClass(k)),p=e("\x3cdiv\x3e\x3c/div\x3e"),p.addClass("select2-result-label"),
t=a.formatResult(k,p,d),t!==g&&p.html(r.opts.escapeMarkup(t)),s.append(p),u&&(u=e("\x3cul\x3e\x3c/ul\x3e"),u.addClass("select2-result-sub"),f(k.children,u,l+1),s.append(u)),s.data("select2-data",k),c.append(s)};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(c)a.query=this.bind(function(a){var c={results:[],more:!1},d=a.term,f,q,r;r=function(b,c){var e;b.is("option")?a.matcher(d,b.text(),b)&&c.push({id:b.attr("value"),text:b.text(),element:b.get(),
css:b.attr("class")}):b.is("optgroup")&&(e={text:b.attr("label"),children:[],element:b.get(),css:b.attr("class")},b.children().each2(function(a,b){r(b,e.children)}),0<e.children.length&&c.push(e))};f=b.children();this.getPlaceholder()!==g&&0<f.length&&(q=f[0],""===e(q).text()&&(f=f.not(q)));f.each2(function(a,b){r(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<
c.length)a.ajax.url=c;a.query=F(a.ajax)}else"data"in a?a.query=G(a.data):"tags"in a&&(a.query=H(a.tags),a.createSearchChoice=function(a){return{id:a,text:a}},a.initSelection=function(b,c){var d=[];e(v(b.val(),a.separator)).each(function(){var b=this,c=this,l=a.tags;e.isFunction(l)&&(l=l());e(l).each(function(){if(p(this.id,b))return c=this.text,!1});d.push({id:b,text:c})});c(d)});if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){this.opts.element.bind("change.select2",
this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},
disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.container.offset(),b=this.container.outerHeight(),c=this.container.outerWidth(),d=this.dropdown.outerHeight(),l=e(window).scrollTop()+document.documentElement.clientHeight,b=a.top+b,f=a.left,l=b+d<=l,g=a.top-d>=this.body().scrollTop(),m=this.dropdown.hasClass("select2-drop-above"),
q;"static"!==this.body().css("position")&&(q=this.body().offset(),b-=q.top,f-=q.left);m?(m=!0,!g&&l&&(m=!1)):(m=!1,!l&&g&&(m=!0));m?(b=a.top-d,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above"));a=e.extend({top:b,left:f,width:c},y(this.opts.dropdownCss));this.dropdown.css(a)},shouldOpen:function(){var a;if(this.opened())return!1;a=e.Event("open");this.opts.element.trigger(a);
return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;window.setTimeout(this.bind(this.opening),1);return!0},opening:function(){var a=this.containerId,b=this.containerSelector,c="scroll."+a,d="resize."+a;this.container.parents().each(function(){e(this).bind(c,function(){var a=e(b);0==a.length&&e(this).unbind(c);a.select2("close")})});
e(window).bind(d,function(){var a=e(b);0==a.length&&e(window).unbind(d);a.select2("close")});this.clearDropdownAlignmentPreference();" "===this.search.val()&&this.search.val("");this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.updateResults(!0);this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");this.ensureHighlightVisible();
this.focusSearch()},close:function(){if(this.opened()){var a=this;this.container.parents().each(function(){e(this).unbind("scroll."+a.containerId)});e(window).unbind("resize."+this.containerId);this.clearDropdownAlignmentPreference();this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var a=this.results,
b,c,d,f;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=a.find(".select2-result-selectable"),d=e(b[c]),f=d.offset().top+d.outerHeight(),c===b.length-1&&(b=a.find("li.select2-more-results"),0<b.length&&(f=b.offset().top+b.outerHeight())),b=a.offset().top+a.outerHeight(),f>b&&a.scrollTop(a.scrollTop()+(f-b)),d=d.offset().top-a.offset().top,0>d&&a.scrollTop(a.scrollTop()+d)))},moveHighlight:function(a){for(var b=this.results.find(".select2-result-selectable"),c=this.highlight();-1<c&&c<b.length;){var c=
c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&!d.hasClass("select2-disabled")){this.highlight(c);break}}},highlight:function(a){var b=this.results.find(".select2-result-selectable").not(".select2-disabled");if(0===arguments.length)return k(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);b.removeClass("select2-highlighted");e(b[a]).addClass("select2-highlighted");this.ensureHighlightVisible()},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},
highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.results.find(".select2-result-selectable");this.highlight(b.index(a))}else 0==a.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-
a.height(),0>=c&&(b.addClass("select2-active"),this.opts.query({term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d)})})))},tokenize:function(){},updateResults:function(a){function b(){f.scrollTop(0);d.removeClass("select2-active");
m.positionDropdown()}function c(a){f.html(m.opts.escapeMarkup(a));b()}var d=this.search,f=this.results,h=this.opts,k,m=this;!0!==a&&(!1===this.showSearchInput||!this.opened())||(d.addClass("select2-active"),1<=h.maximumSelectionSize&&(k=this.data(),e.isArray(k)&&k.length>=h.maximumSelectionSize&&x(h.formatSelectionTooBig,"formatSelectionTooBig"))?c("\x3cli class\x3d'select2-selection-limit'\x3e"+h.formatSelectionTooBig(h.maximumSelectionSize)+"\x3c/li\x3e"):d.val().length<h.minimumInputLength&&x(h.formatInputTooShort,
"formatInputTooShort")?c("\x3cli class\x3d'select2-no-results'\x3e"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"\x3c/li\x3e"):(c("\x3cli class\x3d'select2-searching'\x3e"+h.formatSearching()+"\x3c/li\x3e"),k=this.tokenize(),k!=g&&null!=k&&d.val(k),this.resultsPage=1,h.query({term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(k){var n;this.opened()&&((this.context=k.context===g?null:k.context,this.opts.createSearchChoice&&""!==d.val()&&(n=this.opts.createSearchChoice.call(null,
d.val(),k.results),n!==g&&null!==n&&m.id(n)!==g&&null!==m.id(n)&&0===e(k.results).filter(function(){return p(m.id(this),m.id(n))}).length&&k.results.unshift(n)),0===k.results.length&&x(h.formatNoMatches,"formatNoMatches"))?c("\x3cli class\x3d'select2-no-results'\x3e"+h.formatNoMatches(d.val())+"\x3c/li\x3e"):(f.empty(),m.opts.populateResults.call(this,f,k.results,{term:d.val(),page:this.resultsPage,context:null}),!0===k.more&&x(h.formatLoadMore,"formatLoadMore")&&(f.append("\x3cli class\x3d'select2-more-results'\x3e"+
m.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"\x3c/li\x3e"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(k,a),b()))})})))},cancel:function(){this.close()},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},
focusSearch:function(){this.search.show();this.search.focus();window.setTimeout(this.bind(function(){this.search.show();this.search.focus();this.search.val(this.search.val())}),10)},selectHighlighted:function(){var a=this.highlight(),b=this.results.find(".select2-highlighted").not(".select2-disabled"),c=b.closest(".select2-result-selectable").data("select2-data");c&&(b.addClass("select2-disabled"),this.highlight(a),this.onSelect(c))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||
this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){var a=function(){var a,c,d,f;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){a=this.opts.element.attr("style");if(a!==g){a=a.split(";");d=0;for(f=a.length;d<f;d+=1)if(c=a[d].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),
null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==a&&this.container.attr("style","width: "+a)}});B=A(z,{createContainer:function(){return e("\x3cdiv\x3e\x3c/div\x3e",{"class":"select2-container"}).html("    \x3ca href\x3d'#' onclick\x3d'return false;' class\x3d'select2-choice'\x3e   \x3cspan\x3e\x3c/span\x3e\x3cabbr class\x3d'select2-search-choice-close' style\x3d'display:none;'\x3e\x3c/abbr\x3e   \x3cdiv\x3e\x3cb\x3e\x3c/b\x3e\x3c/div\x3e\x3c/a\x3e    \x3cdiv class\x3d'select2-drop select2-offscreen'\x3e   \x3cdiv class\x3d'select2-search'\x3e       \x3cinput type\x3d'text' autocomplete\x3d'off' class\x3d'select2-input'/\x3e   \x3c/div\x3e   \x3cul class\x3d'select2-results'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
opening:function(){this.search.show();this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close();this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},
initContainer:function(){var a,b=this.dropdown;this.selection=a=this.container.find(".select2-choice");this.search.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)n(a);else if(this.opened())switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);n(a);break;case f.TAB:case f.ENTER:this.selectHighlighted();n(a);break;case f.ESC:this.cancel(a),n(a)}else a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC||!1===
this.opts.openOnEnter&&a.which===f.ENTER||this.open()}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")}));this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex")||0)}),10)}));a.bind("mousedown",this.bind(function(){this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open()}));b.bind("mousedown",
this.bind(function(){this.search.focus()}));a.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1")}));a.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active");window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex")||0)}),10)}));a.bind("keydown",this.bind(function(a){if(this.enabled)if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)n(a);else if(!(a.which===
f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC)&&!(!1===this.opts.openOnEnter&&a.which===f.ENTER))if(a.which==f.DELETE)this.opts.allowClear&&this.clear();else{this.open();if(a.which!==f.ENTER&&!(48>a.which)){var b=String.fromCharCode(a.which).toLowerCase();a.shiftKey&&(b=b.toUpperCase());this.search.focus();this.search.val(b)}n(a)}}));a.delegate("abbr","mousedown",this.bind(function(a){this.enabled&&(this.clear(),n(a),this.close(),this.triggerChange(),this.selection.focus())}));this.setPlaceholder();
this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val())this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==g&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},prepareOpts:function(){var a=
this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()&&(a.initSelection=function(a,c){var d=a.find(":selected");e.isFunction(c)&&c({id:d.attr("value"),text:d.text()})});return a},setPlaceholder:function(){var a=this.getPlaceholder();""===this.opts.element.val()&&a!==g&&!(this.select&&""!==this.select.find("option:first").text())&&(this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide())},
postprocessResults:function(a,b){var c=0,d=this,f=!0;this.results.find(".select2-result-selectable").each2(function(a,b){if(p(d.id(b.data("select2-data")),d.opts.element.val()))return c=a,!1});this.highlight(c);!0===b&&(f=this.showSearchInput=I(a.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[f?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[f?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(a){var b=this.opts.element.val();
this.opts.element.val(this.id(a));this.updateSelection(a);this.close();this.selection.focus();p(b,this.id(a))||this.triggerChange()},updateSelection:function(a){var b=this.selection.find("span");this.selection.data("select2-data",a);b.empty();a=this.opts.formatSelection(a,b);a!==g&&b.append(this.opts.escapeMarkup(a));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==g&&this.selection.find("abbr").show()},val:function(){var a,b=null,c=this;if(0===arguments.length)return this.opts.element.val();
a=arguments[0];if(this.select)this.select.val(a).find(":selected").each2(function(a,c){b={id:c.attr("value"),text:c.text()};return!1}),this.updateSelection(b),this.setPlaceholder();else{if(this.opts.initSelection===g)throw Error("cannot call val() if initSelection() is not defined");a?(this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){c.opts.element.val(!a?"":c.id(a));c.updateSelection(a);c.setPlaceholder()})):this.clear()}},clearSearch:function(){this.search.val("")},
data:function(a){var b;if(0===arguments.length)return b=this.selection.data("select2-data"),b==g&&(b=null),b;!a||""===a?this.clear():(this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a))}});C=A(z,{createContainer:function(){return e("\x3cdiv\x3e\x3c/div\x3e",{"class":"select2-container select2-container-multi"}).html("    \x3cul class\x3d'select2-choices'\x3e  \x3cli class\x3d'select2-search-field'\x3e    \x3cinput type\x3d'text' autocomplete\x3d'off' class\x3d'select2-input'\x3e  \x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'select2-drop select2-drop-multi' style\x3d'display:none;'\x3e   \x3cul class\x3d'select2-results'\x3e   \x3c/ul\x3e\x3c/div\x3e")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments);"select"===a.element.get(0).tagName.toLowerCase()&&(a.initSelection=function(a,c){var d=[];a.find(":selected").each2(function(a,b){d.push({id:b.attr("value"),text:b.text()})});e.isFunction(c)&&c(d)});return a},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");this.search.bind("keydown",this.bind(function(b){if(this.enabled){if(b.which===
f.BACKSPACE&&""===this.search.val()){this.close();var c;c=a.find(".select2-search-choice-focus");if(0<c.length){this.unselect(c.first());this.search.width(10);n(b);return}c=a.find(".select2-search-choice");0<c.length&&c.last().addClass("select2-search-choice-focus")}else a.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);n(b);return;case f.ENTER:case f.TAB:this.selectHighlighted();
n(b);return;case f.ESC:this.cancel(b);n(b);return}if(!(b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC)&&!(!1===this.opts.openOnEnter&&b.which===f.ENTER))this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&n(b)}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.clearSearch();a.stopImmediatePropagation()}));
this.container.delegate(".select2-choices","mousedown",this.bind(function(a){this.enabled&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.clearPlaceholder(),this.open(),this.focusSearch(),a.preventDefault())}));this.container.delegate(".select2-choices","focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,
arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){""===this.opts.element.val()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){b!==g&&null!==b&&(a.updateSelection(b),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();
a!==g&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch()},close:function(){this.opened()&&
this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>k(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),
this.opts);null!=a&&a!=g&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a){this.addSelectedChoice(a);this.select&&this.postprocessResults();this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close();this.triggerChange({added:a});this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=e("\x3cli class\x3d'select2-search-choice'\x3e    \x3cdiv\x3e\x3c/div\x3e    \x3ca href\x3d'#' onclick\x3d'return false;' class\x3d'select2-search-choice-close' tabindex\x3d'-1'\x3e\x3c/a\x3e\x3c/li\x3e"),
c=this.id(a),d=this.getVal(),f;f=this.opts.formatSelection(a,b);b.find("div").replaceWith("\x3cdiv\x3e"+this.opts.escapeMarkup(f)+"\x3c/div\x3e");b.find(".select2-search-choice-close").bind("mousedown",n).bind("click dblclick",this.bind(function(a){this.enabled&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue(),
n(a))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));b.data("select2-data",a);b.insertBefore(this.searchContainer);d.push(c);this.setVal(d)},unselect:function(a){var b=this.getVal(),c,d;a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";c=a.data("select2-data");d=k(this.id(c),b);0<=d&&(b.splice(d,1),this.setVal(b),this.select&&
this.postprocessResults());a.remove();this.triggerChange({removed:c})},postprocessResults:function(){var a=this.getVal(),b=this.results.find(".select2-result-selectable"),c=this.results.find(".select2-result-with-children"),d=this;b.each2(function(b,c){var e=d.id(c.data("select2-data"));0<=k(e,a)?c.addClass("select2-disabled").removeClass("select2-result-selectable"):c.removeClass("select2-disabled").addClass("select2-result-selectable")});c.each2(function(a,b){0==b.find(".select2-result-selectable").length?
b.addClass("select2-disabled"):b.removeClass("select2-disabled")});b.each2(function(a,b){if(!b.hasClass("select2-disabled")&&b.hasClass("select2-result-selectable"))return d.highlight(0),!1})},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth()-this.search.width();a=this.search;t||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),t=e("\x3cdiv\x3e\x3c/div\x3e").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,
fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),e("body").append(t));t.text(a.val());a=t.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);this.search.width(b)},getVal:function(){var a;if(this.select)return a=this.select.val(),null===a?[]:a;a=this.opts.element.val();return v(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=
[],e(a).each(function(){0>k(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},val:function(){var a,b=[],c=this;if(0===arguments.length)return this.getVal();if(a=arguments[0])if(this.setVal(a),this.select)this.select.find(":selected").each(function(){b.push({id:e(this).attr("value"),text:e(this).text()})}),this.updateSelection(b);else{if(this.opts.initSelection===g)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var b=e(a).map(c.id);c.setVal(b);c.updateSelection(a);c.clearSearch()})}else this.opts.element.val(""),this.updateSelection([]);this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to \x3cselect\x3e. Attach to \x3cinput type\x3d'hidden'/\x3e instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());
this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a){var b=this,c;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();a||(a=[]);c=e.map(a,function(a){return b.opts.id(a)});this.setVal(c);this.updateSelection(a);this.clearSearch()}});e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,
0),b,c,d,f,h="val destroy opened open close focus isFocused container onSortStart onSortEnd enable disable positionDropdown data".split(" ");this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?f=b.element.attr("multiple"):(f=b.multiple||!1,"tags"in b&&(b.multiple=f=!0)),c=f?new C:new B,c.init(b);else if("string"===typeof a[0]){if(0>k(a[0],h))throw"Unknown method: "+a[0];d=g;c=e(this).data("select2");
if(c!==g&&(d="container"===a[0]?c.container:c[a[0]].apply(c,a.slice(1)),d!==g))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return d===g?this:d};e.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c){b=[];E(a.text,c.term,b);return b.join("")},formatSelection:function(a){return a?a.text:g},formatResultCssClass:function(){return g},formatNoMatches:function(){return"No matches found"},
formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=b.toUpperCase().indexOf(a.toUpperCase())},separator:",",tokenSeparators:[],tokenizer:K,
escapeMarkup:function(a){return a&&"string"===typeof a?a.replace(/&/g,"\x26amp;"):a},blurOnChange:!1};window.Select2={query:{ajax:F,local:G,tags:H},util:{debounce:D,markMatch:E},"class":{"abstract":z,single:B,multi:C}}}})(jQuery);window.SonarWidgets=null==window.SonarWidgets?{}:window.SonarWidgets;
(function(){function c(a,b){if(null==b)return this[a];this[a]=b;return this}window.SonarWidgets.Widget=function(){this._height=this._metricsPriority=this._source=this._type=null;this._options={};this.type=function(a){return c.call(this,"_type",a)};this.source=function(a){return c.call(this,"_source",a)};this.metricsPriority=function(a){return c.call(this,"_metricsPriority",a)};this.height=function(a){return c.call(this,"_height",a)};this.options=function(a){return c.call(this,"_options",a)}};window.SonarWidgets.Widget.prototype.render=
function(a){var b=this;d3.json(this.source(),function(c,d){d&&!c&&(0<d.components.length?(b.widget=new (SonarWidgets[b.type()]),b.widget.metrics(d.metrics).metricsPriority(b.metricsPriority()).components(d.components).options(b.options()),"function"===typeof b.widget.maxResultsReached&&b.widget.maxResultsReached(1<d.paging.pages),b.height()&&b.widget.height(b.height()),b.widget.render(a)):d3.select(a).html(b.options().noData))})};window.SonarWidgets.Widget.prototype.update=function(a){return this.widget&&
this.widget.update(a)}})();window.SonarWidgets=null==window.SonarWidgets?{}:window.SonarWidgets;
(function(){function c(a,b){if(null==b)return this[a];this[a]=b;return this}function e(a,b){return"translate("+a+", "+b+")"}window.SonarWidgets.BubbleChart=function(){this._components=[];this._metrics=[];this._metricsPriority=[];this._width=window.SonarWidgets.BubbleChart.defaults.width;this._height=window.SonarWidgets.BubbleChart.defaults.height;this._margin=window.SonarWidgets.BubbleChart.defaults.margin;this._xLog=window.SonarWidgets.BubbleChart.defaults.xLog;this._yLog=window.SonarWidgets.BubbleChart.defaults.yLog;
this._bubbleColor=window.SonarWidgets.BubbleChart.defaults.bubbleColor;this._bubbleColorUndefined=window.SonarWidgets.BubbleChart.defaults.bubbleColorUndefined;this._options={};this.metrics=function(a){return c.call(this,"_metrics",a)};this.metricsPriority=function(a){return c.call(this,"_metricsPriority",a)};this.components=function(a){return c.call(this,"_components",a)};this.width=function(a){return c.call(this,"_width",a)};this.height=function(a){return c.call(this,"_height",a)};this.margin=function(a){return c.call(this,
"_margin",a)};this.xLog=function(a){return c.call(this,"_xLog",a)};this.yLog=function(a){return c.call(this,"_yLog",a)};this.bubbleColor=function(a){return c.call(this,"_bubbleColor",a)};this.bubbleColorUndefined=function(a){return c.call(this,"_bubbleColorUndefined",a)};this.options=function(a){return c.call(this,"_options",a)}};window.SonarWidgets.BubbleChart.prototype.render=function(a){var b=this,c=a;a=d3.select(a);if(this.components().reduce(function(d,a){return d&&!!a.measures[b.metricsPriority()[0]]&&
!!a.measures[b.metricsPriority()[1]]},!0))return this.width(a.property("offsetWidth")),this.svg=a.append("svg").attr("class","sonar-d3"),this.gWrap=this.svg.append("g"),this.gxAxis=this.gWrap.append("g"),this.gyAxis=this.gWrap.append("g"),this.gGrid=this.gWrap.append("g"),this.gxGrid=this.gGrid.append("g"),this.gyGrid=this.gGrid.append("g"),this.plotWrap=this.gWrap.append("g"),this.infoWrap=this.gWrap.append("g"),this.infoDate=this.infoWrap.append("text"),this.gWrap.attr("transform",e(this.margin().left,
this.margin().top)),this.xMetric=this.metricsPriority()[0],this.getXMetric=function(d){return d.measures[b.xMetric].val},this.yMetric=this.metricsPriority()[1],this.getYMetric=function(d){return d.measures[b.yMetric].val},this.sizeMetric=this.metricsPriority()[2],this.getSizeMetric=function(d){return d.measures[b.sizeMetric]?d.measures[b.sizeMetric].val:0},this.xLog(this.options().xLog).yLog(this.options().yLog),this.x=this.xLog()?d3.scale.log():d3.scale.linear(),this.y=this.yLog()?d3.scale.log():
d3.scale.linear(),this.size=d3.scale.linear(),this.x.domain(d3.extent(this.components(),function(d){return b.getXMetric(d)})).range([0,this.availableWidth]),this.y.domain(d3.extent(this.components(),function(d){return b.getYMetric(d)})).range([this.availableHeight,0]),this.size.domain(d3.extent(this.components(),function(d){return b.getSizeMetric(d)})).range([5,45]),this.items=this.plotWrap.selectAll(".item").data(this.components()),this.items.enter().append("g").attr("class","item").attr("name",
function(b){return b.longName}).style("cursor","pointer").append("circle").attr("r",function(d){return b.size(b.getSizeMetric(d))}).style("fill",function(d){return b.bubbleColor()}).style("fill-opacity",0.2).style("stroke",function(d){return b.bubbleColor()}).style("transition","all 0.2s ease"),this.items.exit().remove(),this.items.sort(function(d,a){return b.getSizeMetric(a)-b.getSizeMetric(d)}),this.items.on("click",function(a){switch(a.qualifier){case "CLA":case "FIL":window.location=b.options().baseUrl+
encodeURIComponent(a.key)+"?metric\x3d"+encodeURIComponent(b.sizeMetric);break;default:window.location=b.options().baseUrl+encodeURIComponent(a.key)}}).on("mouseenter",function(a){d3.select(this).select("circle").style("fill-opacity",0.8);b.infoDate.text(a.longName);a=[{metric:b.metrics()[b.xMetric].name,value:a.measures[b.xMetric].fval},{metric:b.metrics()[b.yMetric].name,value:a.measures[b.yMetric].fval},{metric:b.metrics()[b.sizeMetric].name,value:a.measures[b.sizeMetric]?a.measures[b.sizeMetric].fval:
"–"}];var c=0;b.infoMetrics.data(a).text(function(b){return b.metric+": "+b.value}).attr("transform",function(a,d){var f=c;c+=b.infoMetricWidth[d];return e(f,20)})}).on("mouseleave",function(){d3.select(this).select("circle").style("fill-opacity",0.2);b.infoDate.text("");b.infoMetrics.text("")}),this.xAxis=d3.svg.axis().scale(b.x).orient("bottom"),this.gxAxisLabel=this.gxAxis.append("text").text(this.metrics()[this.xMetric].name).style("font-weight","bold").style("text-anchor","middle"),this.yAxis=
d3.svg.axis().scale(b.y).orient("left"),this.gyAxis.attr("transform",e(60-this.margin().left,0)),this.gyAxisLabel=this.gyAxis.append("text").text(this.metrics()[this.yMetric].name).style("font-weight","bold").style("text-anchor","middle"),this.gxGridLines=this.gxGrid.selectAll("line").data(b.x.ticks()).enter().append("line"),this.gyGridLines=this.gyGrid.selectAll("line").data(b.y.ticks()).enter().append("line"),this.gGrid.selectAll("line").style("stroke","#000").style("stroke-opacity",0.25),this.infoWrap.attr("transform",
e(-this.margin().left,-this.margin().top+20)),this.infoDate.style("text-anchor","start").style("font-weight","bold"),a=[b.metrics().x,b.metrics().y,b.metrics().size],b.infoMetrics=b.infoWrap.selectAll(".metric").data(a),b.infoMetrics.enter().append("text").attr("class","metric info-text-small").text(function(b){return b}),b.infoMetricWidth=[],b.infoMetrics.each(function(){b.infoMetricWidth.push(this.getComputedTextLength()+140)}),b.infoMetrics.text(""),this.update(c),this;a.text(this.options().noMainMetric)};
window.SonarWidgets.BubbleChart.prototype.update=function(a){a=d3.select(a);var b=this;a=a.property("offsetWidth");this.width(100<a?a:100);this.svg.attr("width",this.width()).attr("height",this.height());this.availableWidth=this.width()-this.margin().left-this.margin().right;this.availableHeight=this.height()-this.margin().top-this.margin().bottom;this.x.domain(d3.extent(this.components(),function(a){return b.getXMetric(a)})).range([0,this.availableWidth]);this.y.domain(d3.extent(this.components(),
function(a){return b.getYMetric(a)})).range([this.availableHeight,0]);0===this.x.domain()[0]&&0===this.x.domain()[1]&&this.x.domain([0,1]);0===this.y.domain()[0]&&0===this.y.domain()[1]&&this.y.domain([0,1]);this.xLog&&(a=this.x.domain(),this.x.domain([0<a[0]?a[0]:0.1,a[1]]).clamp(!0));this.yLog&&(a=this.y.domain(),this.y.domain([0<a[0]?a[0]:0.1,a[1]]).clamp(!0));var c=d3.min(this.components(),function(a){return b.x(b.getXMetric(a))-b.size(b.getSizeMetric(a))});a=d3.max(this.components(),function(a){return b.x(b.getXMetric(a))+
b.size(b.getSizeMetric(a))});c=0>c?this.x.range()[0]-c:this.x.range()[0];a=a>this.x.range()[1]?a-this.x.range()[1]:0;this.x.range([c,this.availableWidth-a]);c=d3.min(this.components(),function(a){return b.y(b.getYMetric(a))-b.size(b.getSizeMetric(a))});a=d3.max(this.components(),function(a){return b.y(b.getYMetric(a))+b.size(b.getSizeMetric(a))});c=0>c?this.y.range()[1]-c:this.y.range()[1];a=a>this.y.range()[0]?a-this.y.range()[0]:0;this.y.range([this.availableHeight-a,c]);this.xLog()&&this.xAxis.tickFormat(function(a){return b.x.tickFormat(b.availableWidth/
50,d3.format(",d"))(a)});this.yLog()&&this.yAxis.tickFormat(function(a){return b.y.tickFormat(b.availableHeight/30,d3.format(",d"))(a)});this.x.nice();this.y.nice();this.items.transition().attr("transform",function(a){return e(b.x(b.getXMetric(a)),b.y(b.getYMetric(a)))});this.gxAxis.attr("transform",e(0,this.availableHeight+this.margin().bottom-40));this.gxAxis.transition().call(this.xAxis);this.gxAxis.selectAll("path").style("fill","none").style("stroke","#444");this.gxAxis.selectAll("text").style("fill",
"#444");this.gxAxisLabel.attr("transform",e(this.availableWidth/2,35));this.gyAxis.transition().call(this.yAxis);this.gyAxis.selectAll("path").style("fill","none").style("stroke","#444");this.gyAxis.selectAll("text").style("fill","#444");this.gyAxisLabel.attr("transform",e(-45,this.availableHeight/2)+" rotate(-90)");this.gxGridLines.transition().attr({x1:function(a){return b.x(a)},x2:function(a){return b.x(a)},y1:b.y.range()[0],y2:b.y.range()[1]});this.gyGridLines.transition().attr({x1:b.x.range()[0],
x2:b.x.range()[1],y1:function(a){return b.y(a)},y2:function(a){return b.y(a)}})};window.SonarWidgets.BubbleChart.defaults={width:350,height:150,margin:{top:60,right:10,bottom:50,left:70},xLog:!1,yLog:!1,bubbleColor:"#4b9fd5",bubbleColorUndefined:"#b3b3b3"}})();window.SonarWidgets=null==window.SonarWidgets?{}:window.SonarWidgets;
(function(){function h(a,e){if(null==e)return this[a];this[a]=e;return this}function f(a,e){return"translate("+a+", "+e+")"}function k(a,e,b){var c=null;a.forEach(function(d,g){if(null==c||Math.abs(b(d)-e)<Math.abs(b(a[c])-e))c=g});return c}window.SonarWidgets.Timeline=function(a){0!==a.indexOf("#")&&(a="#"+a);this.container=d3.select(a);this._data=[];this._metrics=[];this._snapshots=[];this._events=[];this._width=window.SonarWidgets.Timeline.defaults.width;this._height=window.SonarWidgets.Timeline.defaults.height;
this._margin=window.SonarWidgets.Timeline.defaults.margin;this.data=function(a){return h.call(this,"_data",a)};this.metrics=function(a){return h.call(this,"_metrics",a)};this.snapshots=function(a){return h.call(this,"_snapshots",a)};this.events=function(a){return h.call(this,"_events",a)};this.width=function(a){return h.call(this,"_width",a)};this.height=function(a){return h.call(this,"_height",a)};this.margin=function(a){return h.call(this,"_margin",a)}};window.SonarWidgets.Timeline.prototype.render=
function(){var a=this;this.svg=this.container.append("svg").attr("class","sonar-d3");this.gWrap=this.svg.append("g");this.gtimeAxis=this.gWrap.append("g").attr("class","axis x");this.plotWrap=this.gWrap.append("g").attr("class","plot");this.scanner=this.plotWrap.append("line");this.infoWrap=this.gWrap.append("g").attr("class","info");this.infoDate=this.infoWrap.append("text").attr("class","info-text info-text-bold");this.infoEvent=this.infoWrap.append("text").attr("class","info-text info-text-small");
this.gWrap.attr("transform",f(this.margin().left,this.margin().top));var e=this.data().map(function(a){return d3.extent(a,function(a){return a.x})}).reduce(function(a,c){return a.concat(c)},d3.extent(this.events(),function(a){return a.d}));this.time=d3.time.scale().domain(d3.extent(e));this.y=this.data().map(function(a){return d3.scale.linear().domain(d3.extent(a,function(a){return a.y}))});this.color=d3.scale.category10();this.timeAxis=d3.svg.axis().scale(this.time).orient("bottom").ticks(5);this.lines=
[];this.glines=[];this.markers=[];this.data().forEach(function(b,c){var d=d3.svg.line().x(function(b){return a.time(b.x)}).y(function(b){return a.y[c](b.y)}).interpolate("linear"),g=a.plotWrap.append("path").attr("class","line").style("stroke",function(){return a.color(c)});a.lines.push(d);a.glines.push(g);d=a.plotWrap.selectAll(".marker").data(b);d.enter().append("circle").attr("class","line-marker").attr("r",3).style("stroke",function(){return a.color(c)});d.exit().remove();a.markers.push(d)});
this.scanner.attr("class","scanner").attr("y1",0);this.infoWrap.attr("transform",f(0,-30));this.infoDate.attr("transform",f(0,0));this.infoMetrics=[];this.metrics().forEach(function(b,c){var d=a.infoWrap.append("g").attr("class","metric-legend").attr("transform",function(){return f(110+150*c,-1)});d.append("text").attr("class","info-text-small").attr("transform",f(10,0));d.append("circle").attr("class","metric-legend-line").attr("transform",f(0,-4)).attr("r",4).style("fill",function(){return a.color(c)});
a.infoMetrics.push(d)});this.gevents=this.gWrap.append("g").attr("class","axis events").selectAll(".event-tick").data(this.events());this.gevents.enter().append("line").attr("class","event-tick").attr("y2",-8);this.gevents.exit().remove();this.selectSnapshot=function(b){var c=a.time(a.data()[0][b].x);a.markers.forEach(function(a){a.style("opacity",0);d3.select(a[0][b]).style("opacity",1)});a.scanner.attr("x1",c).attr("x2",c);a.infoDate.text(d3.time.format("%b %d, %Y")(a.data()[0][b].x));a.data().map(function(c,
g){return a.metrics()[g]+": "+c[b].yl}).forEach(function(b,c){a.infoMetrics[c].select("text").text(b)});a.gevents.attr("y2",-8);a.infoEvent.text("");a.events().forEach(function(c,g){0===c.d-a.data()[0][b].x&&(d3.select(a.gevents[0][g]).attr("y2",-12),a.infoEvent.text(a.events()[g].l.map(function(a){return a.n}).join(", ")))})};this.svg.on("mousemove",function(){var b=d3.mouse(a.plotWrap.node())[0],b=k(a.data()[0],b,function(b){return a.time(b.x)});a.selectSnapshot(b)});this.update();return this};
window.SonarWidgets.Timeline.prototype.update=function(){var a=this,e=this.container.property("offsetWidth");this.width(100<e?e:100);this.svg.attr("width",this.width()).attr("height",this.height());this.availableWidth=this.width()-this.margin().left-this.margin().right;var b=-1;this.infoMetrics.forEach(function(c,d){var g=110+170*d;g+170>a.availableWidth&&(b+=18,g=110);c.transition().attr("transform",function(){return f(g,b)})});-1<b&&(b+=17);this.availableHeight=this.height()-this.margin().top-this.margin().bottom-
b;this.time.range([0,this.availableWidth]);this.y.forEach(function(b){b.range([a.availableHeight,0])});this.plotWrap.transition().attr("transform",f(0,b));this.gtimeAxis.attr("transform",f(0,this.availableHeight+this.margin().bottom-30+b));this.gtimeAxis.transition().call(this.timeAxis);this.data().forEach(function(b,d){a.glines[d].transition().attr("d",a.lines[d](b));a.markers[d].data(b).transition().attr("transform",function(b){return f(a.time(b.x),a.y[d](b.y))})});this.scanner.attr("y2",this.availableHeight+
10);this.infoEvent.attr("transform",f(0,-1<b?b:18));this.gevents.transition().attr("transform",function(c){return f(a.time(c.d),a.availableHeight+10+b)});this.firstUpdate||(this.selectSnapshot(a.data()[0].length-1),this.firstUpdate=!0)};window.SonarWidgets.Timeline.defaults={width:350,height:150,margin:{top:50,right:10,bottom:40,left:10}}})();window.SonarWidgets=null==window.SonarWidgets?{}:window.SonarWidgets;
(function(){function e(a,c){if(null==c)return this[a];this[a]=c;return this}function d(a,c){return"translate("+a+", "+c+")"}function g(a,c,f){var d=null;a.forEach(function(b,h){if(null==d||Math.abs(f(b)-c)<Math.abs(f(a[d])-c))d=h});return d}window.SonarWidgets.StackArea=function(a){0!==a.indexOf("#")&&(a="#"+a);this.container=d3.select(a);this._data=[];this._metrics=[];this._snapshots=[];this._colors=[];this._width=window.SonarWidgets.StackArea.defaults.width;this._height=window.SonarWidgets.StackArea.defaults.height;
this._margin=window.SonarWidgets.StackArea.defaults.margin;this.data=function(a){return e.call(this,"_data",a)};this.metrics=function(a){return e.call(this,"_metrics",a)};this.snapshots=function(a){return e.call(this,"_snapshots",a)};this.colors=function(a){return e.call(this,"_colors",a)};this.width=function(a){return e.call(this,"_width",a)};this.height=function(a){return e.call(this,"_height",a)};this.margin=function(a){return e.call(this,"_margin",a)}};window.SonarWidgets.StackArea.prototype.render=
function(){var a=this,c=a.colors().length;this.svg=this.container.append("svg").attr("class","sonar-d3");this.gWrap=this.svg.append("g");this.gtimeAxis=this.gWrap.append("g").attr("class","axis x");this.plotWrap=this.gWrap.append("g").attr("class","plot");this.scanner=this.plotWrap.append("line");this.infoWrap=this.gWrap.append("g");this.infoDate=this.infoWrap.append("text");this.infoSnapshot=this.infoWrap.append("text");this.infoTotal=this.infoWrap.append("text");this.gWrap.attr("transform",d(this.margin().left,
this.margin().top));this.stack=d3.layout.stack();this.stackData=this.stack(this.data());this.stackDataTop=this.stackData[this.stackData.length-1];var f=this.data().map(function(a){return d3.extent(a,function(a){return a.x})}).reduce(function(a,d){return a.concat(d)},[]);this.time=d3.time.scale().domain(d3.extent(f));this.y=d3.scale.linear().domain([0,d3.max(this.stackDataTop,function(a){return a.y0+a.y})]).nice();this.color=function(b){return a.colors()[b%c][0]};this.timeAxis=d3.svg.axis().scale(this.time).orient("bottom").ticks(5);
this.area=d3.svg.area().x(function(b){return a.time(b.x)}).y0(function(b){return a.y(b.y0)}).y1(function(b){return a.y(b.y0+b.y)});this.areaLine=d3.svg.line().x(function(b){return a.time(b.x)}).y(function(b){return a.y(b.y0+b.y)});this.scanner.attr("class","scanner").attr("y1",0);this.infoWrap.attr("class","info").attr("transform",d(0,-60));this.infoDate.attr("class","info-text info-text-bold").attr("transform",d(0,0));this.infoTotal.attr("class","info-text info-text-small").attr("transform",d(0,
18));this.infoSnapshot.attr("class","info-text info-text-small").attr("transform",d(0,54));this.infoMetrics=[];var e=110;this.metrics().forEach(function(b,c){var f=a.infoWrap.append("g"),k=f.append("text").attr("class","info-text-small").attr("transform",d(10,0)).text(a.metrics()[c]);f.append("circle").attr("transform",d(0,-4)).attr("r",4).style("fill",function(){return a.color(c)});f.attr("transform",function(){return d(e,-1+18*(c%3))});a.infoMetrics.push(f);2===c%3&&(e+=k.node().getComputedTextLength()+
60)});this.events=a.snapshots().filter(function(a){return 0<a.e.length});this.gevents=this.gWrap.append("g").attr("class","axis events").selectAll(".event-tick").data(this.events);this.gevents.enter().append("line").attr("class","event-tick").attr("y2",-8);this.selectSnapshot=function(b){var c=a.data()[0][b].x,d=a.time(c),f=null,e=null;a.scanner.attr("x1",d).attr("x2",d);a.infoDate.text(d3.time.format("%b %d, %Y")(a.data()[0][b].x));a.infoTotal.text("Total: "+d3.format(".1f")(a.stackDataTop[b].y0+
a.stackDataTop[b].y));a.data().map(function(c,d){return a.metrics()[d]+": "+c[b].y}).forEach(function(b,c){a.infoMetrics[c].select("text").text(b)});this.snapshots().forEach(function(a,b){0===a.d-c&&(f=b)});null!=f&&a.infoSnapshot.text(this.snapshots()[f].e.join(", "));this.events.forEach(function(a,b){0===a.d-c&&(e=b)});a.gevents.attr("y2",-8);d3.select(a.gevents[0][e]).attr("y2",-12)};this.svg.on("mousemove",function(){var b=d3.mouse(a.plotWrap.node())[0],b=g(a.data()[0],b,function(b){return a.time(b.x)});
a.selectSnapshot(b)});this.update();return this};window.SonarWidgets.StackArea.prototype.update=function(){var a=this,c=this.container.property("offsetWidth");this.width(100<c?c:100);this.svg.attr("width",this.width()).attr("height",this.height());this.availableWidth=this.width()-this.margin().left-this.margin().right;this.availableHeight=this.height()-this.margin().top-this.margin().bottom;this.time.range([0,this.availableWidth]);this.y.range([a.availableHeight,0]);this.gtimeAxis.attr("transform",
d(0,this.availableHeight+this.margin().bottom-30));this.gtimeAxis.transition().call(this.timeAxis);this.garea=this.plotWrap.selectAll(".area").data(this.stackData).enter().insert("path",":first-child").attr("class","area").attr("d",function(c){return a.area(c)}).style("fill",function(c,d){return a.color(d)});this.gareaLine=this.plotWrap.selectAll(".area-line").data(this.stackData).enter().insert("path").attr("class","area-line").attr("d",function(c){return a.areaLine(c)}).style("fill","none").style("stroke",
"#808080");this.scanner.attr("y2",this.availableHeight+10);this.gevents.transition().attr("transform",function(c){return d(a.time(c.d),a.availableHeight+10)});this.firstUpdate||(this.selectSnapshot(a.data()[0].length-1),this.firstUpdate=!0)};window.SonarWidgets.StackArea.defaults={width:350,height:150,margin:{top:80,right:10,bottom:40,left:40}}})();window.SonarWidgets=null==window.SonarWidgets?{}:window.SonarWidgets;
(function(){function c(a,b){if(null==b)return this[a];this[a]=b;return this}function e(a,b){return"translate("+a+", "+b+")"}window.SonarWidgets.PieChart=function(){this._components=[];this._metrics=[];this._metricsPriority=[];this._width=window.SonarWidgets.PieChart.defaults.width;this._height=window.SonarWidgets.PieChart.defaults.height;this._margin=window.SonarWidgets.PieChart.defaults.margin;this._legendWidth=window.SonarWidgets.PieChart.defaults.legendWidth;this._legendMargin=window.SonarWidgets.PieChart.defaults.legendMargin;
this._detailsWidth=window.SonarWidgets.PieChart.defaults.detailsWidth;this._options={};this._lineHeight=20;this.metrics=function(a){return c.call(this,"_metrics",a)};this.metricsPriority=function(a){return c.call(this,"_metricsPriority",a)};this.components=function(a){return c.call(this,"_components",a)};this.width=function(a){return c.call(this,"_width",a)};this.height=function(a){return c.call(this,"_height",a)};this.margin=function(a){return c.call(this,"_margin",a)};this.legendWidth=function(a){return c.call(this,
"_legendWidth",a)};this.legendMargin=function(a){return c.call(this,"_legendMargin",a)};this.detailsWidth=function(a){return c.call(this,"_detailsWidth",a)};this.options=function(a){return c.call(this,"_options",a)}};window.SonarWidgets.PieChart.prototype.render=function(a){var b=this,c=a;a=d3.select(a);if(this.components().reduce(function(a,c){return a&&!!c.measures[b.metricsPriority()[0]]},!0))return this.width(a.property("offsetWidth")),this.svg=a.append("svg").attr("class","sonar-d3"),this.gWrap=
this.svg.append("g"),this.plotWrap=this.gWrap.append("g").classed("plot",!0),this.gWrap.attr("transform",e(this.margin().left,this.margin().top)),this.mainMetric=this.metricsPriority()[0],this.getMainMetric=function(a){return a.measures[b.mainMetric].val},this.color=d3.scale.category10(),this.arc=d3.svg.arc().innerRadius(0),this.pie=d3.layout.pie().sort(null).value(function(a){return b.getMainMetric(a)}),this.legendWrap=this.gWrap.append("g"),this._metricsCount=Object.keys(this.metrics()).length+
1,this._detailsHeight=this._lineHeight*this._metricsCount,this.detailsWrap=this.gWrap.append("g").attr("width",this.legendWidth()).style("display","none"),this.detailsColorIndicator=this.detailsWrap.append("rect").classed("details-color-indicator",!0).attr("transform",e(-1,0)).attr("x",0).attr("y",0).attr("width",3).attr("height",this._detailsHeight).style("opacity",0),this.donutLabel=this.plotWrap.append("text").style("text-anchor","middle").style("opacity",0),this.donutLabel2=this.plotWrap.append("text").style("text-anchor",
"middle").text(this.metrics()[this.mainMetric].name),this.update(c),this;a.text(this.options().noMainMetric)};window.SonarWidgets.PieChart.prototype.update=function(a){a=d3.select(a);var b=this;a=a.property("offsetWidth");this.width(100<a?a:100);this.svg.attr("width",this.width()).attr("height",this.height());this.availableWidth=this.width()-this.margin().left-this.margin().right-this.legendWidth()-this.legendMargin();this.availableHeight=this.height()-this.margin().top-this.margin().bottom;this.radius=
Math.min(this.availableWidth,this.availableHeight)/2;this._legendSize=Math.floor(this.availableHeight/this._lineHeight);this._legendSymbols=Math.floor((this.width()-this.margin().left-this.margin().right-this.legendMargin()-2*this.radius)/6.2);this.plotWrap.attr("transform",e(this.radius,this.radius));this.arc.innerRadius(this.radius/2).outerRadius(this.radius);this.sectors=this.plotWrap.selectAll(".arc").data(this.pie(this.components()));this.sectors.enter().append("path").classed("arc",!0).style("fill",
function(a,d){return b.color(d)});this.sectors.transition().attr("d",this.arc);this.sectors.exit().remove();this.legendWrap.attr("transform",e(this.legendMargin()+2*this.radius,(this.availableHeight-this._legendSize*this._lineHeight)/2));this.legends=this.legendWrap.selectAll(".legend").data(this.components().slice(0,this._legendSize));this.legendsEnter=this.legends.enter().append("g").classed("legend pie-legend",!0).attr("transform",function(a,d){return e(0,10+d*b._lineHeight)});this.legendsEnter.append("circle").attr("class",
"legend-bullet").attr("r",4).style("fill",function(a,d){return b.color(d)});this.legendsEnter.append("text").attr("class","legend-text").attr("dy","0.1em").attr("transform",e(10,3));this.legends.selectAll("text").text(function(a){return a.name.length>b._legendSymbols?a.name.substr(0,b._legendSymbols)+"...":a.name});this.detailsWrap.attr("width",this.legendWidth()).attr("transform",e(this.legendMargin()+2*this.radius,this.radius-this._detailsHeight/2));this.donutLabel.transition().style("font-size",
this.radius/6+"px");a=Math.min(12,this.radius/10,1.5*this.radius/this.metrics()[this.mainMetric].name.length);this.donutLabel2.attr("transform",e(0,b.radius/6)).style("font-size",a+"px");var c=function(a,d,c,e){e&&(e=b.metricsPriority().map(function(a){return{name:b.metrics()[a].name,value:d.measures[a]?d.measures[a].fval:"–"}}),e.unshift({name:d.name.length>b._legendSymbols?d.name.substr(0,b._legendSymbols)+"...":d.name}),h(e),b.legendWrap.style("opacity",0),b.detailsColorIndicator.style("opacity",
1).style("fill",b.color(c)),b.detailsWrap.style("display","block"));b.donutLabel.style("opacity",1).text(d.measures[b.mainMetric].fval);b.donutLabel.style("opacity",1);b.plotWrap.classed("hover",!0);a.classed("hover",!0)},f=function(a){b.legendWrap.style("opacity",1);b.detailsColorIndicator.style("opacity",0);b.detailsMetrics&&b.detailsMetrics.style("opacity",0);b.donutLabel.style("opacity",0).text("");b.plotWrap.classed("hover",!1);a.classed("hover",!1);b.detailsWrap.style("display","none")},g=function(a){switch(a.qualifier){case "CLA":case "FIL":window.location=
b.options().baseUrl+encodeURIComponent(a.key)+"?metric\x3d"+encodeURIComponent(b.mainMetric);break;default:window.location=b.options().baseUrl+encodeURIComponent(a.key)}},h=function(a){b.detailsMetrics=b.detailsWrap.selectAll(".details-metric").data(a);b.detailsMetrics.enter().append("text").classed("details-metric",!0).classed("details-metric-main",function(a,b){return 0===b}).attr("transform",function(a,c){return e(10,c*b._lineHeight)}).attr("dy","1.2em");b.detailsMetrics.text(function(a){return a.name+
(a.value?": "+a.value:"")}).style("opacity",1);b.detailsMetrics.exit().remove()};this.sectors.on("mouseenter",function(a,b){return c(d3.select(this),a.data,b,!0)}).on("mouseleave",function(a,b){return f(d3.select(this),a.data,b,!0)}).on("click",function(a){return g(a.data)});this.legends.on("mouseenter",function(a,d){return c(d3.select(b.sectors[0][d]),a,d,!1)}).on("mouseleave",function(a,c){return f(d3.select(b.sectors[0][c]),a,c,!1)}).on("click",function(a){return g(a)})};window.SonarWidgets.PieChart.defaults=
{width:350,height:300,margin:{top:10,right:10,bottom:10,left:10},legendWidth:160,legendMargin:30}})();window.SonarWidgets=null==window.SonarWidgets?{}:window.SonarWidgets;
(function(){function c(a,b){if(null==b)return this[a];this[a]=b;return this}function e(a,b){return"translate("+a+", "+b+")"}window.SonarWidgets.Histogram=function(){this._components=[];this._metrics=[];this._metricsPriority=[];this._width=window.SonarWidgets.Histogram.defaults.width;this._height=window.SonarWidgets.Histogram.defaults.height;this._margin=window.SonarWidgets.Histogram.defaults.margin;this._legendWidth=window.SonarWidgets.Histogram.defaults.legendWidth;this._maxResultsReached=!1;this._options=
{};this._lineHeight=20;this.metrics=function(a){return c.call(this,"_metrics",a)};this.metricsPriority=function(a){return c.call(this,"_metricsPriority",a)};this.components=function(a){return c.call(this,"_components",a)};this.width=function(a){return c.call(this,"_width",a)};this.height=function(a){return c.call(this,"_height",a)};this.margin=function(a){return c.call(this,"_margin",a)};this.legendWidth=function(a){return c.call(this,"_legendWidth",a)};this.maxResultsReached=function(a){return c.call(this,
"_maxResultsReached",a)};this.options=function(a){return c.call(this,"_options",a)}};window.SonarWidgets.Histogram.prototype.render=function(a){var b=this,d=a;a=d3.select(a);if(this.components().reduce(function(a,d){return a&&!!d.measures[b.metricsPriority()[0]]},!0))return this.width(a.property("offsetWidth")),this.svg=a.append("svg").attr("class","sonar-d3"),this.gWrap=this.svg.append("g"),this.plotWrap=this.gWrap.append("g").classed("plot",!0),this.gWrap.attr("transform",e(this.margin().left,this.margin().top)),
this.mainMetric=this.metricsPriority()[0],this.getMainMetric=function(a){return a.measures[b.mainMetric].val},this.x=d3.scale.linear(),this.y=d3.scale.ordinal(),this.truncate=function(a,b){switch(b){case "FIL":case "CLA":var d=a.length;if(40<d){var d=a.substr(d-40+2,d-1),c=d.indexOf(".");return"..."+d.substr(c+1)}return a;default:return 40<a.length?a.substr(0,37)+"...":a}},this.metricLabel=this.gWrap.append("text").text(this.metrics()[this.mainMetric].name).attr("dy","9px").style("font-size","12px"),
this.maxResultsReached()&&(this.maxResultsReachedLabel=this.gWrap.append("text").classed("max-results-reached",!0).style("font-size","12px").style("fill","#777").text(this.options().maxItemsReachedMessage)),this.update(d),this;a.text(this.options().noMainMetric)};window.SonarWidgets.Histogram.prototype.update=function(a){a=d3.select(a);var b=this;a=a.property("offsetWidth");this.width(100<a?a:100);this.availableWidth=this.width()-this.margin().left-this.margin().right-this.legendWidth();this.availableHeight=
16*this.components().length+this._lineHeight;a=this.availableHeight+this.margin().top+this.margin().bottom;this.maxResultsReached()&&(a+=this._lineHeight);this.height(a);this.svg.attr("width",this.width()).attr("height",this.height());this.plotWrap.attr("transform",e(0,this._lineHeight));a=d3.extent(this.components(),function(a){return b.getMainMetric(a)});this.metrics();this.options().relativeScale||("PERCENT"===this.metrics()[this.mainMetric].type?a=[0,100]:a[0]=0);this.x.domain(a).range([0,this.availableWidth]);
this.y.domain(this.components().map(function(a,b){return b})).rangeRoundBands([0,this.availableHeight],0);this.bars=this.plotWrap.selectAll(".bar").data(this.components());this.barsEnter=this.bars.enter().append("g").classed("bar",!0).attr("transform",function(a,b){return e(0,16*b)});this.barsEnter.append("rect").style("fill","#1f77b4");this.barsEnter.append("text").classed("legend-text component",!0).style("text-anchor","end").attr("dy","-0.35em").text(function(a){return b.truncate(a.longName,a.qualifier)}).attr("transform",
function(){return e(b.legendWidth()-10,16)});this.barsEnter.append("text").classed("legend-text value",!0).attr("dy","-0.35em").text(function(a){return a.measures[b.mainMetric].fval}).attr("transform",function(a){return e(b.legendWidth()+b.x(b.getMainMetric(a))+5,16)});this.bars.selectAll("rect").transition().attr("x",this.legendWidth()).attr("y",0).attr("width",function(a){return Math.max(2,b.x(b.getMainMetric(a)))}).attr("height",16);this.bars.selectAll(".component").transition().attr("transform",
function(){return e(b.legendWidth()-10,16)});this.bars.selectAll(".value").transition().attr("transform",function(a){return e(b.legendWidth()+b.x(b.getMainMetric(a))+5,16)});this.bars.exit().remove();this.bars.on("click",function(a){switch(a.qualifier){case "CLA":case "FIL":window.location=b.options().baseUrl+encodeURIComponent(a.key)+"?metric\x3d"+encodeURIComponent(b.mainMetric);break;default:window.location=b.options().baseUrl+encodeURIComponent(a.key)}});this.metricLabel.attr("transform",e(this.legendWidth(),
0));this.maxResultsReached()&&this.maxResultsReachedLabel.attr("transform",e(this.legendWidth(),this.height()-this.margin().bottom-3))};window.SonarWidgets.Histogram.defaults={width:350,height:300,margin:{top:4,right:50,bottom:4,left:10},legendWidth:220}})();(function(c){var d=null,f=Backbone.Collection.extend({parse:function(a){this.more=a.more;return a.results},fetch:function(a){var b=c.extend({page:1,pageSize:100},a.data||{});a=c.extend({},a,{data:b});this.settings={url:a.url,data:b};Backbone.Collection.prototype.fetch.call(this,a)},fetchNextPage:function(a){if(this.more){var b=this.settings.data.page+1;a=c.extend(this.settings,a);a.data.page=b;this.fetch(a)}}}),h=Backbone.View.extend({tagName:"li",template:function(a){return'\x3cinput class\x3d"select-list-list-checkbox" type\x3d"checkbox"\x3e\x3cdiv class\x3d"select-list-list-item"\x3e'+
a+"\x3c/div\x3e"},events:{"change .select-list-list-checkbox":"toggle"},initialize:function(a){this.listenTo(this.model,"change",this.render);this.settings=a.settings},render:function(){this.$el.html(this.template(this.settings.format(this.model.toJSON())));this.$("input").prop("name",this.model.get("name"));this.$el.toggleClass("selected",this.model.get("selected"));this.$(".select-list-list-checkbox").prop("title",this.model.get("selected")?this.settings.tooltips.deselect:this.settings.tooltips.select).prop("checked",
this.model.get("selected"))},remove:function(a){if(a){var b=this;b.$el.addClass(this.model.get("selected")?"added":"removed");setTimeout(function(){Backbone.View.prototype.remove.call(b,arguments)},500)}else Backbone.View.prototype.remove.call(this,arguments)},toggle:function(){var a=this.model.get("selected"),b=this,g=a?this.settings.deselectUrl:this.settings.selectUrl,e=c.extend({},this.settings.extra||{});e[this.settings.selectParameter]=this.model.get(this.settings.selectParameterValue);b.$el.addClass("progress");
c.ajax({url:g,type:"POST",data:e}).done(function(){b.model.set("selected",!a)}).fail(d).always(function(){b.$el.removeClass("progress")})}}),k=Backbone.View.extend({template:function(a){return'\x3cdiv class\x3d"select-list-container"\x3e\x3cdiv class\x3d"select-list-control"\x3e\x3cdiv class\x3d"select-list-check-control"\x3e\x3ca class\x3d"select-list-control-button" name\x3d"selected"\x3e'+a.selected+'\x3c/a\x3e\x3ca class\x3d"select-list-control-button" name\x3d"deselected"\x3e'+a.deselected+'\x3c/a\x3e\x3ca class\x3d"select-list-control-button" name\x3d"all"\x3e'+
a.all+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"select-list-search-control"\x3e\x3cinput type\x3d"text" placeholder\x3d"Search"\x3e\x3ca class\x3d"select-list-search-control-clear"\x3e\x26times;\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"select-list-list-container"\x3e\x3cul class\x3d"select-list-list"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e'},events:{"click .select-list-control-button[name\x3dselected]":"showSelected","click .select-list-control-button[name\x3ddeselected]":"showDeselected",
"click .select-list-control-button[name\x3dall]":"showAll","click .select-list-search-control-clear":"clearSearch"},initialize:function(a){this.listenTo(this.collection,"add",this.renderListItem);this.listenTo(this.collection,"reset",this.renderList);this.listenTo(this.collection,"remove",this.removeModel);this.listenTo(this.collection,"change:selected",this.confirmFilter);this.settings=a.settings},render:function(){var a=this;this.$el.html(this.template(this.settings.labels)).width(this.settings.width);
this.$listContainer=this.$(".select-list-list-container").height(this.settings.height).css("overflow","auto").on("scroll",function(){a.scroll()});this.$list=this.$(".select-list-list");var b=this.$(".select-list-search-control input").on("keyup",c.debounce(250,function(){a.search()}));setTimeout(function(){b.focus()},250);this.listItemViews=[];d=function(){c("\x3cdiv\x3e").addClass("error").text(a.settings.errorMessage).insertBefore(a.$el)}},renderList:function(){this.listItemViews.forEach(function(a){a.remove()});
this.listItemViews=[];this.collection.each(this.renderListItem,this);this.$listContainer.scrollTop(0)},renderListItem:function(a){a=new h({model:a,settings:this.settings});this.listItemViews.push(a);this.$list.append(a.el);a.render()},confirmFilter:function(a){"all"!==this.currentFilter&&this.collection.remove(a)},removeModel:function(a,b,c){this.listItemViews[c.index].remove(!0);this.listItemViews.splice(c.index,1)},filterBySelection:function(a){var b=this;a=this.currentFilter=a||this.currentFilter;
null!=a&&(this.$(".select-list-check-control").toggleClass("disabled",!1),this.$(".select-list-search-control").toggleClass("disabled",!0),this.$(".select-list-search-control input").val(""),this.$(".select-list-control-button").removeClass("active").filter("[name\x3d"+a+"]").addClass("active"),this.showFetchSpinner(),this.collection.fetch({url:this.settings.searchUrl,reset:!0,data:{selected:a},success:function(){b.hideFetchSpinner()},error:d}))},showSelected:function(){this.filterBySelection("selected")},
showDeselected:function(){this.filterBySelection("deselected")},showAll:function(){this.filterBySelection("all")},search:function(){var a=this.$(".select-list-search-control input").val(),b=0<a.length,c=this;this.$(".select-list-check-control").toggleClass("disabled",b);this.$(".select-list-search-control").toggleClass("disabled",!b);b?(this.showFetchSpinner(),this.currentFilter="all",this.collection.fetch({url:this.settings.searchUrl,reset:!0,data:{query:a},success:function(){c.hideFetchSpinner()},
error:d})):this.filterBySelection()},searchByQuery:function(a){this.$(".select-list-search-control input").val(a);this.search()},clearSearch:function(){this.filterBySelection()},showFetchSpinner:function(){this.$listContainer.addClass("loading")},hideFetchSpinner:function(){this.$listContainer.removeClass("loading")},scroll:function(){var a=this;this.$listContainer.scrollTop()>=this.$list[0].scrollHeight-this.$listContainer.outerHeight()&&this.collection.more&&c.throttle(250,function(){a.showFetchSpinner();
a.collection.fetchNextPage({success:function(){a.hideFetchSpinner()}})})()}});window.SelectList=function(a){this.settings=c.extend(window.SelectList.defaults,a);this.collection=new f;this.view=new k({el:this.settings.el,collection:this.collection,settings:this.settings});this.view.render();this.filter("selected");return this};window.SelectList.prototype.filter=function(a){this.view.filterBySelection(a);return this};window.SelectList.prototype.search=function(a){this.view.searchByQuery(a);return this};
window.SelectList.defaults={width:"50%",height:400,format:function(a){return a.value},labels:{selected:"Selected",deselected:"Deselected",all:"All"},tooltips:{select:"Click this to select item",deselect:"Click this to deselect item"},errorMessage:"Something gone wrong, try to reload the page and try again."}})(jQuery);(function(a){a.fn.topSearch=function(m){var c=a(this),d=a(m.results),q=a(m.spinner),b,n,e,g,p,f=!1,k=function(){e&&e.removeClass("selected");e=g.eq(b);e.addClass("selected")},r=function(){if(e){var a=e.data("key");window.location=baseUrl+"/dashboard/index/"+a+dashboardParameters();console.log(baseUrl+"/dashboard/index/"+a+dashboardParameters())}},s=function(h){d.empty();var c=a("\x3cul\x3e\x3c/ul\x3e").appendTo(d);h.results.forEach(function(b){b.items.forEach(function(h,d){var e=a("\x3cli\x3e\x3c/li\x3e").data("key",
h.id),g=a("\x3cdiv\x3e\x3c/div\x3e").addClass("q").appendTo(e),f=h.name.replace(RegExp(p,"gi"),"\x3cstrong\x3e$\x26\x3c/strong\x3e"),f=a("\x3cspan\x3e\x3c/span\x3e").html(" "+f).appendTo(e);a("\x3cimg\x3e").prop("src",baseUrl+b.icon).prop("width",16).prop("height",16).prependTo(f);0===d&&g.text(b.name);e.appendTo(c)})});d.append('\x3cdiv class\x3d"autocompleteNote"\x3e'+h.total+" "+d.data("results")+"\x3c/div\x3e");d.show();0===h.total?c.append("\x3cli\x3e"+d.data("no-results")+"\x3c/li\x3e"):(g=
d.find("li"),b=-1,n=g.length,b<n-1&&b++,k(),g.on("mouseover",function(){b=g.index(a(this));k()}).on("click",function(){b=g.index(a(this));k();r()}))},l=function(){d.fadeOut()},t=_.debounce(function(){f&&(c.val().length>=m.minLength?(p=c.val(),q.show(),a.ajax({url:baseUrl+"/api/components/suggestions",data:{s:p}}).done(function(a){s(a)}).fail(l).always(function(){q.hide()})):l())},250);c.on("keydown",function(a){switch(a.keyCode){case 13:a.preventDefault();f=!1;r();break;case 38:a.preventDefault();
f=!1;0<b&&b--;k();break;case 40:a.preventDefault();f=!1;b<n-1&&b++;k();break;case 37:case 39:case 16:case 17:case 18:case 91:case 20:case 27:f=!1;break;default:f=!0}}).on("keyup",t).on("focus",function(){c.data("placeholder",c.val());c.val("")}).on("focusout",function(){0===c.val().length&&c.val(c.data("placeholder")||"");l()});a("body").on("mousedown",function(){l()})}})(jQuery);(function(d){function h(a){a.each(function(b){d(this).toggleClass("rowodd",0===b%2);d(this).toggleClass("roweven",0!==b%2)})}function k(a,b,c,e){var f=b.map(function(b){var a=d(this).find("td").eq(c);return{index:b,value:a.attr("x")||d.trim(a.text())||""}}).get();Array.prototype.sort.call(f,function(a,b){return isNaN(a.value)||isNaN(a.value)?e*(a.value>b.value?1:-1):e*(a.value-b.value)});b.detach();var g=jQuery();f.forEach(function(c){c=b.eq(c.index);c.appendTo(a);g=g.add(c)});h(g)}function l(a,b,
c){a.removeClass("sortasc sortdesc");b.toggleClass("sortasc",c);b.toggleClass("sortdesc",!c)}d.fn.sortable=function(){return d(this).each(function(){var a=d(this).find("thead"),b=d(this).find("tbody"),c=a.find("tr:last th"),e=b.find("tr");c.filter(":not(.nosort)").addClass("sortcol");c.filter(":not(.nosort)").on("click",function(){var a=!d(this).is(".sortasc");l(c,d(this),a);k(b,e,c.index(d(this)),a?1:-1)});a=c.filter("[class^\x3dsortfirst],[class*\x3dsortfirst]");if(0<a.length){var f=a.is(".sortfirstasc");
l(c,a,f);k(b,e,c.index(a),f?1:-1)}else h(e)})}})(jQuery);(function(){var d=["comment","assign","assign_to_me","plan","set_severity"];Handlebars.registerHelper("capitalize",function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()});Handlebars.registerHelper("severityIcon",function(a){return new Handlebars.SafeString('\x3ci class\x3d"icon-severity-'+a.toLowerCase()+'"\x3e\x3c/i\x3e')});Handlebars.registerHelper("statusIcon",function(a){return new Handlebars.SafeString('\x3ci class\x3d"icon-status-'+a.toLowerCase()+'"\x3e\x3c/i\x3e')});Handlebars.registerHelper("resolutionIcon",
function(a){return new Handlebars.SafeString('\x3ci class\x3d"icon-resolution-'+a.toLowerCase()+'"\x3e\x3c/i\x3e')});Handlebars.registerHelper("eq",function(a,b,c){return a==b?c.fn(this):c.inverse(this)});Handlebars.registerHelper("notEq",function(a,b,c){return a!=b?c.fn(this):c.inverse(this)});Handlebars.registerHelper("all",function(){var a=Array.prototype.slice.call(arguments,0,-1),b=arguments[arguments.length-1];return a.reduce(function(a,b){return a&&b},!0)?b.fn(this):b.inverse(this)});Handlebars.registerHelper("any",
function(){var a=Array.prototype.slice.call(arguments,0,-1),b=arguments[arguments.length-1];return a.reduce(function(a,b){return a||b},!0)?b.fn(this):b.inverse(this)});Handlebars.registerHelper("inArray",function(a,b,c){return-1!==a.indexOf(b)?c.fn(this):c.inverse(this)});Handlebars.registerHelper("ifNotEmpty",function(){var a=Array.prototype.slice.call(arguments,0,-1),b=arguments[arguments.length-1];return a.reduce(function(a,b){return a||b&&0<b.length},!1)?b.fn(this):""});Handlebars.registerHelper("dashboardUrl",
function(a,b){var c="/dashboard/index/"+decodeURIComponent(a);if("FIL"===b||"CLA"===b)c+="?metric\x3dsqale_index";return c});Handlebars.registerHelper("translate",function(a,b){return Array.prototype.slice.call(arguments,0,-1).reduce(function(a,b){return a.concat(b.split("."))},[]).reduce(function(a,b){return b?a[b]:a},window.SS.phrases)});Handlebars.registerHelper("pluginActions",function(a,b){return _.difference(a,d).reduce(function(a,e){return a+b.fn(e)},"")});Handlebars.registerHelper("ifHasExtraTransitions",
function(a,b){return a&&1<a.length?b.fn(this):""});Handlebars.registerHelper("ifHasExtraActions",function(a,b){return 0<_.difference(a,_.without(d,"set_severity")).length?b.fn(this):""});Handlebars.registerHelper("withFirst",function(a,b){return a&&0<a.length?b.fn(a[0]):""});Handlebars.registerHelper("withoutFirst",function(a,b){return a&&1<a.length?a.slice(1).reduce(function(a,e){return a+b.fn(e)},""):""});Handlebars.registerHelper("sources",function(a,b,c){return _.map(a,function(a,c){return{lineNumber:c,
code:a,scm:b&&b[c]?{author:b[c][0],date:b[c][1]}:void 0}}).reduce(function(a,b,d){return a+c.fn(_.extend({first:0===d},b))},"")})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var c=Backbone.Model.extend({defaults:{multiple:!0,placeholder:""}}),f=Backbone.Collection.extend({model:c}),d=Backbone.Marionette.ItemView.extend({template:"#detailsFilterTemplate",className:"navigator-filter-details",initialize:function(){this.$el.on("click",function(a){a.stopPropagation()})},onShow:function(){},onHide:function(){}}),e=Backbone.Marionette.ItemView.extend({template:"#baseFilterTemplate",className:"navigator-filter",events:function(){return{click:"toggleDetails","click .navigator-filter-disable":"disable"}},
modelEvents:{"change:enabled":"focus","change:value":"renderBase","change:filters":"render"},initialize:function(a){Backbone.Marionette.ItemView.prototype.initialize.apply(this,arguments);this.detailsView=new (a.detailsView||d)({model:this.model,filterView:this});this.model.view=this},attachDetailsView:function(){this.detailsView.$el.detach().appendTo($j("body"))},render:function(){this.renderBase();this.attachDetailsView();this.detailsView.render();this.$el.toggleClass("navigator-filter-disabled",
!this.model.get("enabled"));this.$el.toggleClass("navigator-filter-optional",this.model.get("optional"))},renderBase:function(){Backbone.Marionette.ItemView.prototype.render.apply(this,arguments);this.renderInput()},renderInput:function(){},focus:function(){this.render()},toggleDetails:function(a){a.stopPropagation();this.$el.hasClass("active")?this.hideDetails():this.showDetails()},showDetails:function(){this.registerShowedDetails();var a=this.$el.offset().top+this.$el.outerHeight()-1,b=this.$el.offset().left;
this.detailsView.$el.css({top:a,left:b}).addClass("active");this.$el.addClass("active");this.detailsView.onShow()},registerShowedDetails:function(){this.options.filterBarView.hideDetails();this.options.filterBarView.showedView=this},hideDetails:function(){this.detailsView.$el.removeClass("active");this.$el.removeClass("active");this.detailsView.onHide()},isActive:function(){return this.$el.is(".active")},renderValue:function(){return this.model.get("value")||"unset"},isDefaultValue:function(){return!0},
restoreFromQuery:function(a){(a=_.findWhere(a,{key:this.model.get("property")}))&&a.value?(this.model.set("enabled",!0),this.restore(a.value,a)):this.clear()},restore:function(a){this.model.set({value:a},{silent:!0});this.renderBase()},clear:function(){this.model.unset("value")},disable:function(a){a.stopPropagation();this.hideDetails();this.options.filterBarView.hideDetails();this.model.set({enabled:!1,value:null})},formatValue:function(){var a={};this.model.has("property")&&(this.model.has("value")&&
this.model.get("value"))&&(a[this.model.get("property")]=this.model.get("value"));return a},serializeData:function(){return _.extend({},this.model.toJSON(),{value:this.renderValue(),defaultValue:this.isDefaultValue()})}}),g=Backbone.Marionette.CompositeView.extend({template:"#filterBarTemplate",itemViewContainer:".navigator-filters-list",collectionEvents:{"change:enabled":"changeEnabled"},getItemView:function(a){return a.get("type")||e},itemViewOptions:function(){return{filterBarView:this,app:this.options.app}},
initialize:function(){Backbone.Marionette.CompositeView.prototype.initialize.apply(this,arguments);var a=this;$j("body").on("click",function(){a.hideDetails()});var b=this.collection.where({enabled:!1});this.moreCriteriaFilter=new window.SS.Filter({type:window.SS.MoreCriteriaFilterView,enabled:!0,optional:!1,filters:b});this.collection.add(this.moreCriteriaFilter)},onAfterItemAdded:function(a){(a.model.get("type")===window.SS.FavoriteFilterView||a.model.get("type")===window.SS.IssuesFavoriteFilterView)&&
this.$el.addClass("navigator-filter-list-favorite")},restoreFromQuery:function(a){this.collection.each(function(b){b.set("enabled",!b.get("optional"));b.view.clear();b.view.restoreFromQuery(a)})},hideDetails:function(){_.isObject(this.showedView)&&this.showedView.hideDetails()},enableFilter:function(a){a=this.collection.get(a);var b=a.view;b.$el.detach().insertBefore(this.$(".navigator-filter-more-criteria"));a.set("enabled",!0);b.showDetails()},changeEnabled:function(){var a=this.collection.where({enabled:!1}).reject(function(a){return a.get("type")===
window.SS.MoreCriteriaFilterView});0===a.length?this.moreCriteriaFilter.set({enabled:!1},{silent:!0}):this.moreCriteriaFilter.set({enabled:!0},{silent:!0});this.moreCriteriaFilter.set("filters",a)}});_.extend(window.SS,{Filter:c,Filters:f,BaseFilterView:e,DetailsFilterView:d,FilterBarView:g})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var e=window.SS.DetailsFilterView.extend({template:"#selectFilterTemplate",itemTemplate:"#selectFilterItemTemplate",events:function(){return{"change .choices input[type\x3dcheckbox]":"addToSelection","change .selection input[type\x3dcheckbox]":"removeFromSelection"}},render:function(){window.SS.DetailsFilterView.prototype.render.apply(this,arguments);this.updateLists()},renderList:function(a,b,f){var c=this,d=this.$(b),e=_.template($j(this.itemTemplate).html());d.empty().toggleClass("hidden",
0===a.length);a.each(function(a){d.append(e(_.extend({item:a.toJSON(),checked:f},c.model.toJSON())))})},updateLists:function(){this.renderList(this.options.filterView.selection,".selection",!0);this.renderList(this.options.filterView.choices,".choices",!1);this.updateCurrent(this.currentChoice||0)},addToSelection:function(a){a=$j(a.target).val();a=this.options.filterView.choices.findWhere({id:a});this.model.get("multiple")?(this.options.filterView.selection.add(a),this.options.filterView.choices.remove(a)):
(this.options.filterView.choices.add(this.options.filterView.selection.models),this.options.filterView.choices.remove(a),this.options.filterView.selection.reset([a]));this.updateValue();this.updateLists()},removeFromSelection:function(a){a=$j(a.target).val();a=this.options.filterView.selection.findWhere({id:a});this.options.filterView.choices.add(a);this.options.filterView.selection.remove(a);this.updateValue();this.updateLists()},updateValue:function(){this.model.set("value",this.options.filterView.selection.map(function(a){return a.get("id")}))},
updateCurrent:function(a){this.currentChoice=a;this.$("label").removeClass("current").eq(this.currentChoice).addClass("current")},onShow:function(){this.bindedOnKeyDown=_.bind(this.onKeyDown,this);$j("body").on("keydown",this.bindedOnKeyDown)},onHide:function(){$j("body").off("keydown",this.bindedOnKeyDown)},onKeyDown:function(a){switch(a.keyCode){case 38:a.preventDefault();this.selectPrevChoice();break;case 40:a.preventDefault();this.selectNextChoice();break;case 13:a.preventDefault(),this.selectCurrent()}},
selectNextChoice:function(){this.$("label").length>this.currentChoice+1&&(this.updateCurrent(this.currentChoice+1),this.scrollNext())},scrollNext:function(){var a=this.$("label").eq(this.currentChoice);if(0<a.length){var b=a.closest("ul"),a=a.offset().top-b.offset().top+b.scrollTop()-b.height()+a.outerHeight();0<a&&b.scrollTop(a)}},selectPrevChoice:function(){0<this.currentChoice&&(this.updateCurrent(this.currentChoice-1),this.scrollPrev())},scrollPrev:function(){var a=this.$("label").eq(this.currentChoice);
if(0<a.length){var b=a.closest("ul"),a=a.offset().top-b.offset().top;0>a&&b.scrollTop(b.scrollTop()+a)}},selectCurrent:function(){this.$("label").eq(this.currentChoice).click()},serializeData:function(){return _.extend({},this.model.toJSON(),{selection:this.options.filterView.selection.toJSON(),choices:this.options.filterView.choices.toJSON()})}}),g=window.SS.BaseFilterView.extend({className:"navigator-filter",initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:e});
this.selection=new Backbone.Collection([],{comparator:"index"});var a=0,b=this.model.get("choiceIcons");this.choices=new Backbone.Collection(_.map(this.model.get("choices"),function(f,c){var d=new Backbone.Model({id:c,text:f,index:a++});b&&b[c]&&d.set("icon",b[c]);return d}),{comparator:"index"})},renderInput:function(){var a=$j("\x3cselect\x3e").prop("name",this.model.get("property")).prop("multiple",!0).css("display","none");this.selection.each(function(b){$j("\x3coption\x3e").prop("value",b.get("id")).prop("selected",
!0).text(b.get("text")).appendTo(a)});this.choices.each(function(b){$j("\x3coption\x3e").prop("value",b.get("id")).text(b.get("text")).appendTo(a)});a.appendTo(this.$el)},renderValue:function(){var a=this.selection.map(function(a){return a.get("text")}),b=this.model.has("defaultValue")?this.model.get("defaultValue"):this.model.get("multiple")?window.SS.phrases.all:window.SS.phrases.any;return this.isDefaultValue()?b:a.join(", ")},isDefaultValue:function(){return 0===this.selection.length||0===this.choices.length},
disable:function(){this.choices.add(this.selection.models);this.selection.reset([]);window.SS.BaseFilterView.prototype.disable.apply(this,arguments)},restore:function(a){_.isString(a)&&(a=a.split(","));if(this.choices&&this.selection&&0<a.length){var b=this;this.choices.add(this.selection.models);this.selection.reset([]);_.each(a,function(a){if(a=b.choices.findWhere({id:a}))b.selection.add(a),b.choices.remove(a)});this.detailsView.updateLists();this.model.set({value:a,enabled:!0},{silent:!0});this.renderBase()}else this.clear()},
clear:function(){var a=this;this.selection&&this.choices&&(this.selection.each(function(b){a.choices.add(b)}),this.selection.reset([]));this.model.unset("value");this.detailsView.render();this.detailsView.updateCurrent&&this.detailsView.updateCurrent(0)},formatValue:function(){var a={};this.model.has("property")&&(this.model.has("value")&&0<this.model.get("value").length)&&(a[this.model.get("property")]=this.model.get("value").join(","));return a}});_.extend(window.SS,{DetailsSelectFilterView:e,SelectFilterView:g})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var d=Backbone.Collection.extend({initialize:function(){this.more=!1;this.page=0},parse:function(a){this.more=a.more;return a.results},fetch:function(a){this.data=_.extend({p:1,ps:100},a.data||{});a=_.extend({},a,{data:this.data});Backbone.Collection.prototype.fetch.call(this,a)},fetchNextPage:function(a){this.more&&(this.data.p+=1,a=_.extend({remove:!1},a,{data:this.data}),this.fetch(a))}}),g=d.extend({url:function(){return baseUrl+"/api/users/search?f\x3ds2"}}),h=d.extend({url:function(){return baseUrl+
"/api/resources/search?f\x3ds2\x26q\x3dTRK\x26display_key\x3dtrue"}}),l=d.extend({url:function(){return baseUrl+"/api/resources/search?f\x3ds2\x26qp\x3dsupportsGlobalDashboards\x26display_key\x3dtrue"},parse:function(a){this.more=a.more;if(0<a.results.length&&a.results[0].children){var b=[];_.each(a.results,function(a){_.each(a.children,function(k){k.category=a.text;b.push(k)})});return b}return a.results}}),f=window.SS.DetailsSelectFilterView.extend({template:"#ajaxSelectFilterTemplate",initialize:function(){window.SS.DetailsSelectFilterView.prototype.initialize.apply(this,
arguments)},onRender:function(){this.resetChoices();var a=this,b=_.debounce(function(b){38!==b.keyCode&&40!==b.keyCode&&a.search()},250),e=_.throttle(function(){a.scroll()},1E3);this.$(".navigator-filter-search input").off("keyup keydown").on("keyup",b).on("keydown",this.keydown);this.$(".choices").off("scroll").on("scroll",e)},search:function(){var a=this;this.query=this.$(".navigator-filter-search input").val();1<this.query.length?(this.$el.addClass("fetching"),this.options.filterView.choices.fetch({data:{s:this.query,
ps:100},success:function(){var b=a.options.filterView.choices.reject(function(b){return a.options.filterView.selection.findWhere({id:b.get("id")})});a.options.filterView.choices.reset(b);a.updateLists();a.$el.removeClass("fetching")}})):(this.resetChoices(),this.updateLists())},scroll:function(){var a=this.$(".choices");a.scrollTop()>=a[0].scrollHeight-a.outerHeight()&&this.options.filterView.selection.fetchNextPage()},keydown:function(a){-1!==_([37,38,39,40,13]).indexOf(a.keyCode)&&a.preventDefault()},
resetChoices:function(){this.options.filterView.choices.reset([])},onShow:function(){window.SS.DetailsSelectFilterView.prototype.onShow.apply(this,arguments);this.$(".navigator-filter-search input").focus()}}),c=window.SS.SelectFilterView.extend({isDefaultValue:function(){return 0===this.selection.length},renderInput:function(){var a=this.model.get("value")||[];$j("\x3cinput\x3e").prop("name",this.model.get("property")).prop("type","hidden").css("display","none").val(a.join()).appendTo(this.$el)},
restore:function(a,b){_.isString(a)&&(a=a.split(","));this.choices&&this.selection&&0<a.length?(this.selection.reset([]),this.model.set({value:a,enabled:!0},{silent:!0}),_.isArray(b.text)&&b.text.length===a.length?this.restoreFromText(a,b.text):this.restoreByRequests(a)):this.clear()},restoreFromText:function(a,b){var e=this;_.each(a,function(a,c){e.selection.add(new Backbone.Model({id:a,text:b[c]}))});this.onRestore(a)},restoreByRequests:function(a){var b=this,e=_.map(a,function(a){return b.createRequest(a)});
$j.when.apply($j,e).done(function(){b.onRestore(a)})},onRestore:function(){this.detailsView.updateLists();this.renderBase()},clear:function(){this.model.unset("value");this.selection&&this.choices&&(this.choices.reset([]),this.selection.reset([]),this.detailsView.updateLists());this.renderBase()},createRequest:function(){}}),d=c.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:f});this.selection=new l;this.choices=new l},createRequest:function(a){var b=
this;return $j.ajax({url:baseUrl+"/api/resources",type:"GET",data:{resource:a}}).done(function(a){b.selection.add(new Backbone.Model({id:a[0].key,text:a[0].name}))})}}),m=c.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:f});this.selection=new h;this.choices=new h},createRequest:function(a){var b=this;return $j.ajax({url:baseUrl+"/api/resources",type:"GET",data:{resource:a}}).done(function(a){b.selection.add(new Backbone.Model({id:a[0].key,text:a[0].name}))})}}),
n=f.extend({resetChoices:function(){this.options.filterView.selection.findWhere({id:"\x3cunassigned\x3e"})?this.options.filterView.choices.reset([]):this.options.filterView.choices.reset([{id:"\x3cunassigned\x3e",text:window.SS.phrases.unassigned}])},onShow:function(){f.prototype.onShow.apply(this,arguments);this.$(".navigator-filter-search input").focus()}}),p=c.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:n});this.selection=new g;this.choices=
new g},restoreFromQuery:function(a){var b=_.findWhere(a,{key:this.model.get("property")});_.findWhere(a,{key:"assigned"})&&(b?b.value+=",\x3cunassigned\x3e":b={value:"\x3cunassigned\x3e"});b&&b.value?(this.model.set("enabled",!0),this.restore(b.value,b)):this.clear()},restoreFromText:function(a){-1!==_.indexOf(a,"\x3cunassigned\x3e")&&this.choices.reset([]);c.prototype.restoreFromText.apply(this,arguments)},restoreByRequests:function(a){-1!==_.indexOf(a,"\x3cunassigned\x3e")&&(this.selection.add(new Backbone.Model({id:"\x3cunassigned\x3e",
text:window.SS.phrases.unassigned})),this.choices.reset([]),a=_.reject(a,function(a){return"\x3cunassigned\x3e"===a}));c.prototype.restoreByRequests.call(this,a)},createRequest:function(a){var b=this;return $j.ajax({url:baseUrl+"/api/users/search",type:"GET",data:{logins:a}}).done(function(a){b.selection.add(new Backbone.Model({id:a.users[0].login,text:a.users[0].name+" ("+a.users[0].login+")"}))})},clear:function(){this.model.unset("value");this.selection&&this.choices&&(this.detailsView.resetChoices(),
this.selection.reset([]));this.renderBase();this.detailsView.updateLists()},formatValue:function(){var a={};if(this.model.has("property")&&this.model.has("value")&&0<this.model.get("value").length){var b=_.without(this.model.get("value"),"\x3cunassigned\x3e");0<b.length&&(a[this.model.get("property")]=b.join(","));this.model.get("value").length>b.length&&(a.assigned=!1)}return a}}),q=c.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:f});this.selection=
new g;this.choices=new g},createRequest:function(a){var b=this;return $j.ajax({url:baseUrl+"/api/users/search",type:"GET",data:{logins:a}}).done(function(a){b.selection.add(new Backbone.Model({id:a.users[0].login,text:a.users[0].name+" ("+a.users[0].login+")"}))})}});_.extend(window.SS,{ProjectFilterView:m,ComponentFilterView:d,AssigneeFilterView:p,ReporterFilterView:q})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var e=window.SS.DetailsFilterView.extend({template:"#rangeFilterTemplate",events:{"change input":"change"},change:function(){var a={},b=this.$("input").eq(0).val(),c=this.$("input").eq(1).val();0<b.length&&(a[this.model.get("propertyFrom")]=b);0<c.length&&(a[this.model.get("propertyTo")]=c);this.model.set("value",a)},populateInputs:function(){var a=this.model.get("value"),b=this.model.get("propertyFrom"),c=this.model.get("propertyTo"),b=_.isObject(a)&&a[b],a=_.isObject(a)&&a[c];this.$("input").eq(0).val(b||
"");this.$("input").eq(1).val(a||"")},onShow:function(){this.$(":input:first").focus()}}),d=window.SS.BaseFilterView.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:e})},renderValue:function(){return this.isDefaultValue()?window.SS.phrases.any:_.values(this.model.get("value")).join(" — ")},renderInput:function(){var a=this.model.get("value"),b=this.model.get("propertyFrom"),c=this.model.get("propertyTo"),d=_.isObject(a)&&a[b],a=_.isObject(a)&&a[c];
$j("\x3cinput\x3e").prop("name",b).prop("type","hidden").css("display","none").val(d||"").appendTo(this.$el);$j("\x3cinput\x3e").prop("name",c).prop("type","hidden").css("display","none").val(a||"").appendTo(this.$el)},isDefaultValue:function(){var a=this.model.get("value"),b=this.model.get("propertyFrom"),c=this.model.get("propertyTo"),b=_.isObject(a)&&a[b],a=_.isObject(a)&&a[c];return!b&&!a},restoreFromQuery:function(a){var b=_.findWhere(a,{key:this.model.get("propertyFrom")});a=_.findWhere(a,{key:this.model.get("propertyTo")});
var c={};if(b&&b.value||a&&a.value)b&&b.value&&(c[this.model.get("propertyFrom")]=b.value),a&&a.value&&(c[this.model.get("propertyTo")]=a.value),this.model.set({value:c,enabled:!0}),this.detailsView.populateInputs()},restore:function(a){if(this.choices&&this.selection&&0<a.length){var b=this;this.choices.add(this.selection.models);this.selection.reset([]);_.each(a,function(a){if(a=b.choices.findWhere({id:a}))b.selection.add(a),b.choices.remove(a)});this.detailsView.updateLists();this.model.set({value:a,
enabled:!0})}},formatValue:function(){return this.model.get("value")},clear:function(){this.model.unset("value");this.detailsView.render()}}),f=d.extend({render:function(){d.prototype.render.apply(this,arguments);this.detailsView.$("input").prop("placeholder","1970-01-01")},renderValue:function(){return this.isDefaultValue()?window.SS.phrases.anytime:_.values(this.model.get("value")).join(" — ")}});_.extend(window.SS,{RangeFilterView:d,DateRangeFilterView:f})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var a=window.SS.BaseFilterView.extend({template:"#checkboxFilterTemplate",className:"navigator-filter navigator-filter-inline",events:function(){return{"click .navigator-filter-disable":"disable"}},showDetails:function(){},renderInput:function(){this.model.get("enabled")&&$j("\x3cinput\x3e").prop("name",this.model.get("property")).prop("type","checkbox").prop("value","true").prop("checked",!0).css("display","none").appendTo(this.$el)},renderValue:function(){return this.model.get("value")||
!1},isDefaultValue:function(){return!1},restore:function(a){this.model.set({value:a,enabled:!0})}});_.extend(window.SS,{CheckboxFilterView:a})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var b=window.SS.DetailsFilterView.extend({template:"#stringFilterTemplate",events:{"change input":"change"},change:function(a){this.model.set("value",$j(a.target).val())},onShow:function(){window.SS.DetailsFilterView.prototype.onShow.apply(this,arguments);this.$(":input").focus()},serializeData:function(){return _.extend({},this.model.toJSON(),{value:this.model.get("value")||""})}}),c=window.SS.BaseFilterView.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:b})},
renderValue:function(){return this.isDefaultValue()?"—":this.model.get("value")},renderInput:function(){$j("\x3cinput\x3e").prop("name",this.model.get("property")).prop("type","hidden").css("display","none").val(this.model.get("value")||"").appendTo(this.$el)},isDefaultValue:function(){return!this.model.get("value")},restore:function(a){this.model.set({value:a,enabled:!0})},clear:function(){this.model.unset("value");this.detailsView.render()}});_.extend(window.SS,{StringFilterView:c})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var f=window.SS.DetailsFilterView.extend({template:"#metricFilterTemplate",events:{"change :input":"inputChanged"},inputChanged:function(){var a={metric:this.$("[name\x3dmetric]").val(),metricText:this.$("[name\x3dmetric] option:selected").text(),period:this.$("[name\x3dperiod]").val(),periodText:this.$("[name\x3dperiod] option:selected").text(),op:this.$("[name\x3dop]").val(),opText:this.$("[name\x3dop] option:selected").text(),val:this.$("[name\x3dval]").val()};this.model.set("value",
a)},onRender:function(){var a=this.model.get("value")||{};this.$("[name\x3dmetric]").val(a.metric).select2({width:"100%",placeholder:window.SS.phrases.metric});this.$("[name\x3dperiod]").val(a.period||0).select2({width:"100%",minimumResultsForSearch:100});this.$("[name\x3dop]").val(a.op||"eq").select2({width:"60px",placeholder:"\x3d",minimumResultsForSearch:100});this.$("[name\x3dval]").val(a.val);this.inputChanged()},onShow:function(){var a=this.$("[name\x3dmetric]");a.val()||a.select2("open")}}),
g=window.SS.BaseFilterView.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:f});this.groupMetrics()},groupMetrics:function(){var a=_.map(this.model.get("metrics"),function(a){return a.metric}),a=_.sortBy(_.map(_.groupBy(a,"domain"),function(a,b){return{domain:b,metrics:_.sortBy(a,"short_name")}}),"domain");this.model.set("groupedMetrics",a)},renderValue:function(){return this.isDefaultValue()?window.SS.phrases.notSet:this.model.get("value").metricText+
" "+this.model.get("value").opText+" "+this.model.get("value").val},renderInput:function(){var a=this,c=this.model.get("value");_.isObject(c)&&(c.metric&&c.op&&c.val)&&_.each(["metric","period","op","val"],function(b){var d=c[b];"period"===b&&"0"===d&&(d="");$j("\x3cinput\x3e").prop("name",a.model.get("property")+"_"+b).prop("type","hidden").css("display","none").val(d).appendTo(a.$el)})},isDefaultValue:function(){var a=this.model.get("value");return!_.isObject(a)?!0:!(a.metric&&a.op&&a.val)},restoreFromQuery:function(a){var c=
this,b={};_.each(["metric","period","op","val"],function(d){var e=c.model.get("property")+"_"+d;if((e=_.findWhere(a,{key:e}))&&e.value)b[d]=e.value});b&&(b.metric&&b.op&&b.val)&&this.model.set({value:b,enabled:!0})}});_.extend(window.SS,{MetricFilterView:g})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var b=window.SS.DetailsFilterView.extend({template:"#detailsFavoriteFilterTemplate",events:{"click label[data-id]":"applyFavorite","click .manage label":"manage"},applyFavorite:function(a){a=$j(a.target).data("id");window.location=baseUrl+this.model.get("favoriteUrl")+"/"+a},manage:function(){window.location=baseUrl+this.model.get("manageUrl")},serializeData:function(){var a=this.model.get("choices"),a=_.sortBy(_.map(a,function(a,b){return{v:a,k:b}}),"v");return _.extend({},this.model.toJSON(),
{choicesArray:a})}}),c=window.SS.SelectFilterView.extend({template:"#favoriteFilterTemplate",className:"navigator-filter navigator-filter-favorite",initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:b})},renderValue:function(){return""},renderInput:function(){},isDefaultValue:function(){return!1}});_.extend(window.SS,{DetailsFavoriteFilterView:b,FavoriteFilterView:c})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var b=window.SS.DetailsFilterView.extend({template:"#detailsMoreCriteriaFilterTemplate",events:{"click label[data-id]":"enableFilter"},enableFilter:function(a){a=$j(a.target).data("id");this.model.view.options.filterBarView.enableFilter(a);this.model.view.hideDetails()}}),c=window.SS.SelectFilterView.extend({template:"#moreCriteriaFilterTemplate",className:"navigator-filter navigator-filter-more-criteria",initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:b})},
renderValue:function(){return""},renderInput:function(){},isDefaultValue:function(){return!1}});_.extend(window.SS,{MoreCriteriaFilterView:c})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var b=Backbone.View.extend({initialize:function(){this.model.view=this},render:function(){this.$el.hide()},renderBase:function(){},renderInput:function(){},focus:function(){},showDetails:function(){},registerShowedDetails:function(){},hideDetails:function(){},isActive:function(){},renderValue:function(){},isDefaultValue:function(){},restoreFromQuery:function(a){(a=_.findWhere(a,{key:this.model.get("property")}))&&a.value?this.restore(a.value):this.clear()},restore:function(a){this.model.set({value:a})},
clear:function(){this.model.unset("value")},disable:function(a){a.stopPropagation();this.hideDetails();this.options.filterBarView.hideDetails();this.model.set({enabled:!1,value:null})},formatValue:function(){var a={};this.model.has("property")&&(this.model.has("value")&&this.model.get("value"))&&(a[this.model.get("property")]=this.model.get("value"));return a}});_.extend(window.SS,{ContextFilterView:b})})();window.SS="object"===typeof window.SS?window.SS:{};
jQuery(function(){var n=Backbone.Model.extend({defaults:{canManageFilters:!1,canBulkChange:!1},url:function(){return baseUrl+"/api/issue_filters/page"}}),h=Backbone.Model.extend({url:function(){return baseUrl+"/api/issues/show?key\x3d"+this.get("key")},parse:function(a){return a.issue?a.issue:a}}),p=Backbone.Collection.extend({model:h,url:function(){return baseUrl+"/api/issues/search"},parse:function(a){function b(a,b,f){var e={};e[f||"key"]=b;return _.findWhere(a,e)||b}this.paging=a.paging;this.maxResultsReached=
a.maxResultsReached;return a.issues.map(function(c){var d=b(a.components,c.component),f=b(a.projects,c.project),e=b(a.rules,c.rule);d&&_.extend(c,{componentLongName:d.longName,componentQualifier:d.qualifier});f&&_.extend(c,{projectLongName:f.longName});e&&_.extend(c,{ruleName:e.name});return c})}}),k=Backbone.Model.extend({url:function(){return baseUrl+"/api/issue_filters/show/"+this.get("id")},parse:function(a){return a.filter?a.filter:a}}),q=Backbone.Collection.extend({model:k,url:function(){return baseUrl+
"/api/issue_filters/favorites"},parse:function(a){return a.favoriteFilters}}),r=Backbone.Model.extend({url:function(){return baseUrl+"/api/rules/show/?key\x3d"+this.get("key")},parse:function(a){return a.rule?a.rule:a}}),s=Backbone.Collection.extend({url:function(){return baseUrl+"/api/action_plans/search"},parse:function(a){return a.actionPlans}}),l=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issue-template").html()||""),tagName:"li",ui:{component:".component"},events:{click:"showDetails"},
modelEvents:{change:"render"},showDetails:function(){this.$el.parent().children().removeClass("active");this.$el.addClass("active");var a=this,b=this.options.app,c=new window.SS.IssueDetailView({model:this.model}),d=function(){jQuery(".navigator-details").removeClass("navigator-fetching");b.detailsRegion.show(c)};jQuery(".navigator-details").empty().addClass("navigator-fetching");jQuery.when(c.model.fetch()).done(function(){"CLOSED"!==a.model.get("status")?a.fetchSource(c,d):d()})},fetchSource:function(a,
b){var c=this.model.get("line")||0,d=10<=c?c-10:0,c=c+30;return jQuery.ajax({type:"GET",url:baseUrl+"/api/sources/show",data:{key:this.model.get("component"),from:d,to:c,format:"json"}}).done(function(b){_.isObject(b)&&b.source&&(a.source=b.source);_.isObject(b)&&b.scm&&(a.scm=b.scm)}).always(b)},serializeData:function(){var a=this.options.app.filters.findWhere({property:"componentRoots"}),a=_.isArray(a.get("value"))&&1===a.get("value").length;return _.extend({singleProject:a},this.model.toJSON())}}),
g=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#no-issues-template").html()||"")}),g=Backbone.Marionette.CollectionView.extend({tagName:"ol",className:"navigator-results-list",itemView:l,emptyView:g,itemViewOptions:function(){return{issuesView:this,app:this.options.app}},onRender:function(){var a=jQuery(".navigator-results"),b=a.get(0),c=_.throttle(function(){b.offsetHeight+b.scrollTop>=b.scrollHeight&&window.SS.IssuesNavigatorApp.fetchNextPage()},300);a.off("scroll").on("scroll",
c)},onAfterItemAdded:function(){var a=null!=this.collection.maxResultsReached&&this.collection.maxResultsReached;jQuery(".navigator").toggleClass("navigator-with-notes",a);jQuery(".navigator-notes").toggle(a)},close:function(){jQuery(".navigator-results").off("scroll");Backbone.Marionette.CollectionView.prototype.close.call(this)}}),t=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issues-actions-template").html()||""),collectionEvents:{sync:"render"},events:{"click .navigator-actions-order":"toggleOrderChoices",
"click .navigator-actions-order-choices":"sort","click .navigator-actions-bulk":"bulkChange"},ui:{orderChoices:".navigator-actions-order-choices"},onRender:function(){this.collection.sorting.sortText||(this.collection.sorting.sortText=this.$("[data-sort\x3d"+this.collection.sorting.sort+"]:first").text(),this.$(".navigator-actions-ordered-by").text(this.collection.sorting.sortText))},toggleOrderChoices:function(a){a.stopPropagation();this.ui.orderChoices.toggleClass("open");if(this.ui.orderChoices.is(".open")){var b=
this;jQuery("body").on("click.issues_actions",function(){b.ui.orderChoices.removeClass("open")})}},sort:function(a){a.stopPropagation();this.ui.orderChoices.removeClass("open");jQuery("body").off("click.issues_actions");a=jQuery(a.target);var b=a.data("sort"),c=a.data("asc");null!=b&&null!=c&&(this.collection.sorting={sort:b,sortText:a.text(),asc:c},this.options.app.fetchFirstPage())},bulkChange:function(a){a.preventDefault();openModalWindow(jQuery(a.currentTarget).prop("href"),{})},serializeData:function(){var a=
Backbone.Marionette.ItemView.prototype.serializeData.apply(this,arguments);return _.extend(a||{},{paging:this.collection.paging,sorting:this.collection.sorting,maxResultsReached:this.collection.maxResultsReached,appState:window.SS.appState.toJSON(),query:(Backbone.history.fragment||"").replace(/\|/g,"\x26")})}}),u=window.SS.FilterBarView.extend({collectionEvents:{"change:enabled":"changeEnabled"},events:{"click .navigator-filter-submit":"search"},getQuery:function(){var a={};this.collection.each(function(b){_.extend(a,
b.view.formatValue())});return a},onAfterItemAdded:function(a){(a.model.get("type")===window.SS.FavoriteFilterView||a.model.get("type")===window.SS.IssuesFavoriteFilterView)&&jQuery(".navigator-header").addClass("navigator-header-favorite")},search:function(){this.options.app.state.set({query:this.options.app.getQuery(),search:!0});this.options.app.fetchFirstPage()},fetchNextPage:function(){this.options.app.fetchNextPage()}}),v=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issues-header-template").html()||
""),modelEvents:{change:"render"},events:{"click #issues-new-search":"newSearch","click #issues-filter-save-as":"saveAs","click #issues-filter-save":"save","click #issues-filter-copy":"copy","click #issues-filter-edit":"edit"},initialize:function(a){Backbone.Marionette.ItemView.prototype.initialize.apply(this,arguments);this.listenTo(a.app.state,"change",this.render)},newSearch:function(){this.model.clear();this.options.app.router.navigate("statuses\x3dOPEN,REOPENED",{trigger:!0,replace:!0})},saveAs:function(){var a=
baseUrl+"/issues/save_as_form?"+(Backbone.history.fragment||"").replace(/\|/g,"\x26");openModalWindow(a,{})},save:function(){var a=this;url=baseUrl+"/issues/save/"+this.model.id+"?"+(Backbone.history.fragment||"").replace(/\|/g,"\x26");jQuery.ajax({type:"POST",url:url}).done(function(){a.options.app.state.set("search",!1)})},copy:function(){openModalWindow(baseUrl+"/issues/copy_form/"+this.model.id,{})},edit:function(){openModalWindow(baseUrl+"/issues/edit_form/"+this.model.id,{})},serializeData:function(){return _.extend({canSave:this.model.id&&
this.options.app.state.get("search"),appState:window.SS.appState.toJSON()},this.model.toJSON())}}),m=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issue-detail-comment-form-template").html()||""),ui:{textarea:"#issue-comment-text",cancelButton:"#issue-comment-cancel",submitButton:"#issue-comment-submit"},events:{"keyup #issue-comment-text":"toggleSubmit","click #issue-comment-cancel":"cancel","click #issue-comment-submit":"submit"},onDomRefresh:function(){this.ui.textarea.focus()},
toggleSubmit:function(){this.ui.submitButton.prop("disabled",0===this.ui.textarea.val().length)},cancel:function(){this.options.detailView.updateAfterAction(!1)},submit:function(){var a=this,b=this.ui.textarea.val(),c=this.model&&this.model.has("key"),d=baseUrl+"/api/issues/"+(c?"edit_comment":"add_comment"),b={text:b};c?b.key=this.model.get("key"):b.issue=this.options.issue.get("key");this.options.detailView.showActionSpinner();jQuery.ajax({type:"POST",url:d,data:b}).done(function(){a.options.detailView.updateAfterAction(!0)}).fail(function(b){alert(b.responseJSON.errors?
_.pluck(b.responseJSON.errors,"msg").join(" "):b);a.options.detailView.hideActionSpinner()})}}),w=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issue-detail-set-severity-form-template").html()||""),ui:{select:"#issue-set-severity-select"},events:{"click #issue-set-severity-cancel":"cancel","click #issue-set-severity-submit":"submit"},onRender:function(){var a=function(a){return!a.id?a.text:'\x3ci class\x3d"icon-severity-'+a.id.toLowerCase()+'"\x3e\x3c/i\x3e '+a.text};this.ui.select.select2({minimumResultsForSearch:100,
formatResult:a,formatSelection:a,escapeMarkup:function(a){return a}})},cancel:function(){this.options.detailView.updateAfterAction(!1)},submit:function(){var a=this;this.options.detailView.showActionSpinner();jQuery.ajax({type:"POST",url:baseUrl+"/api/issues/set_severity",data:{issue:this.options.issue.get("key"),severity:this.ui.select.val()}}).done(function(){a.options.detailView.updateAfterAction(!0)}).fail(function(b){alert(b.responseJSON.errors?_.pluck(b.responseJSON.errors,"msg").join(" "):
b);a.options.detailView.hideActionSpinner()})}}),x=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issue-detail-assign-form-template").html()||""),ui:{select:"#issue-assignee-select"},events:{"click #issue-assign-cancel":"cancel","click #issue-assign-submit":"submit"},onRender:function(){var a=window.SS.currentUser,b=this.options.issue.get("assignee"),c=[];(!b||a!==b)&&c.push({id:a,text:window.SS.phrases.assignedToMe});b&&c.push({id:"",text:window.SS.phrases.unassigned});
a={allowClear:!1,width:"250px",formatNoMatches:function(){return window.SS.phrases.select2.noMatches},formatSearching:function(){return window.SS.phrases.select2.searching},formatInputTooShort:function(){return window.SS.phrases.select2.tooShort}};0<c.length?(a.minimumInputLength=0,a.query=function(a){0==a.term.length?a.callback({results:c}):2<=a.term.length&&jQuery.ajax({url:baseUrl+"/api/users/search?f\x3ds2",data:{s:a.term},dataType:"jsonp"}).done(function(b){a.callback(b)})}):(a.minimumInputLength=
2,a.ajax={quietMillis:300,url:baseUrl+"/api/users/search?f\x3ds2",data:function(a,b){return{s:a,p:b}},results:function(a){return{more:a.more,results:a.results}}});this.ui.select.select2(a).select2("open")},cancel:function(){this.options.detailView.updateAfterAction(!1)},submit:function(){var a=this;this.options.detailView.showActionSpinner();jQuery.ajax({type:"POST",url:baseUrl+"/api/issues/assign",data:{issue:this.options.issue.get("key"),assignee:this.ui.select.val()}}).done(function(){a.options.detailView.updateAfterAction(!0)}).fail(function(b){alert(b.responseJSON.errors?
_.pluck(b.responseJSON.errors,"msg").join(" "):b);a.options.detailView.hideActionSpinner()})}}),y=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issue-detail-plan-form-template").html()||""),collectionEvents:{reset:"render"},ui:{select:"#issue-detail-plan-select"},events:{"click #issue-plan-cancel":"cancel","click #issue-plan-submit":"submit"},onRender:function(){this.ui.select.select2({width:"250px",minimumResultsForSearch:100});this.$(".error a").prop("href",baseUrl+"/action_plans/index/"+
this.options.issue.get("project"))},cancel:function(){this.options.detailView.updateAfterAction(!1)},submit:function(){var a=this,b=this.ui.select.val();this.options.detailView.showActionSpinner();jQuery.ajax({type:"POST",url:baseUrl+"/api/issues/plan",data:{issue:this.options.issue.get("key"),plan:"#unplan"===b?"":b}}).done(function(){a.options.detailView.updateAfterAction(!0)}).fail(function(b){alert(b.responseJSON.errors?_.pluck(b.responseJSON.errors,"msg").join(" "):b);a.options.detailView.hideActionSpinner()})},
serializeData:function(){return{items:this.collection.toJSON(),issue:this.options.issue.toJSON()}}}),z=Backbone.Marionette.ItemView.extend({template:Handlebars.compile(jQuery("#issue-detail-rule-template").html()||""),className:"rule-desc",modelEvents:{change:"render"},serializeData:function(){return _.extend({characteristic:this.options.issue.get("characteristic"),subCharacteristic:this.options.issue.get("subCharacteristic")},this.model.toJSON())}}),A=Backbone.Marionette.Layout.extend({template:Handlebars.compile(jQuery("#issue-detail-template").html()||
""),regions:{formRegion:".code-issue-form",ruleRegion:"#tab-issue-rule"},events:{"click .code-issue-toggle":"toggleCollapsed","click [href\x3d#tab-issue-rule]":"fetchRule","click #issue-comment":"comment","click .issue-comment-edit":"editComment","click .issue-comment-delete":"deleteComment","click .issue-transition":"transition","click #issue-set-severity":"setSeverity","click #issue-assign":"assign","click #issue-assign-to-me":"assignToMe","click #issue-plan":"plan","click .issue-action":"action"},
modelEvents:{change:"render"},onRender:function(){this.$(".code-issue-details").tabs();this.$(".code-issue-form").hide();this.rule=new r({key:this.model.get("rule")});this.ruleRegion.show(new z({model:this.rule,issue:this.model}));this.initReferenceLinks()},initReferenceLinks:function(){var a="sources_"+this.model.get("key");this.$("#"+a).on("click","span.sym",{id:a},highlight_usages)},onDomRefresh:function(){var a=this.$(".source_title").outerHeight();jQuery(".navigator-details").css("padding-top",
a+10+"px")},onClose:function(){this.ruleRegion&&this.ruleRegion.reset()},resetIssue:function(a){var b=this.model.get("key");this.model.clear({silent:!0});this.model.set({key:b},{silent:!0});return this.model.fetch(a)},toggleCollapsed:function(){this.$(".code-issue").toggleClass("code-issue-collapsed");this.fetchRule()},fetchRule:function(){var a=this;this.rule.has("name")||(this.$("#tab-issue-rule").addClass("navigator-fetching"),this.rule.fetch({success:function(){a.$("#tab-issue-rule").removeClass("navigator-fetching")}}))},
showActionView:function(a){this.$(".code-issue-actions").hide();this.$(".code-issue-form").show();this.formRegion.show(a)},showActionSpinner:function(){this.$(".code-issue-actions").addClass("navigator-fetching")},hideActionSpinner:function(){this.$(".code-issue-actions").removeClass("navigator-fetching")},updateAfterAction:function(a){var b=this;b.formRegion.reset();b.$(".code-issue-actions").show();b.$(".code-issue-form").hide();b.$("[data-comment-key]").show();a&&jQuery.when(this.resetIssue()).done(function(){b.hideActionSpinner()})},
comment:function(){var a=new m({issue:this.model,detailView:this});this.showActionView(a)},editComment:function(a){a=jQuery(a.target).closest("[data-comment-key]");var b=a.data("comment-key"),b=_.findWhere(this.model.get("comments"),{key:b});a.hide();a=new m({model:new Backbone.Model(b),issue:this.model,detailView:this});this.showActionView(a)},deleteComment:function(a){var b=this,c=jQuery(a.target).closest("[data-comment-key]").data("comment-key");a=jQuery(a.target).data("confirm-msg");confirm(a)&&
(this.showActionSpinner(),jQuery.ajax({type:"POST",url:baseUrl+"/issue/delete_comment?id\x3d"+c}).done(function(){b.updateAfterAction(!0)}).fail(function(a){alert(a.responseJSON.errors?_.pluck(a.responseJSON.errors,"msg").join(" "):a);b.hideActionSpinner()}))},transition:function(a){var b=this;this.showActionSpinner();jQuery.ajax({type:"POST",url:baseUrl+"/api/issues/do_transition",data:{issue:this.model.get("key"),transition:jQuery(a.target).data("transition")}}).done(function(){b.resetIssue()}).fail(function(a){alert(a.responseJSON.errors?
_.pluck(a.responseJSON.errors,"msg").join(" "):a);b.hideActionSpinner()})},setSeverity:function(){var a=new w({issue:this.model,detailView:this});this.showActionView(a)},assign:function(){var a=new x({issue:this.model,detailView:this});this.showActionView(a)},assignToMe:function(){var a=this;this.showActionSpinner();jQuery.ajax({type:"POST",url:baseUrl+"/api/issues/assign",data:{issue:this.model.get("key"),assignee:window.SS.currentUser}}).done(function(){a.resetIssue()}).fail(function(b){alert(b.responseJSON.errors?
_.pluck(b.responseJSON.errors,"msg").join(" "):b);a.hideActionSpinner()})},plan:function(){var a=this,b=new s,c=new y({collection:b,issue:this.model,detailView:this});this.showActionSpinner();b.fetch({reset:!0,data:{project:this.model.get("project")},success:function(){a.hideActionSpinner();a.showActionView(c)}})},action:function(a){var b=this;a=jQuery(a.target).data("action");this.showActionSpinner();jQuery.ajax({type:"POST",url:baseUrl+"/api/issues/do_action",data:{issue:this.model.get("key"),actionKey:a}}).done(function(){b.resetIssue()}).fail(function(a){alert(a.responseJSON.errors?
_.pluck(a.responseJSON.errors,"msg").join(" "):a);b.hideActionSpinner()})},serializeData:function(){return _.extend({source:this.source,scm:this.scm},this.model.toJSON())}}),B=window.SS.DetailsFavoriteFilterView.extend({template:Handlebars.compile(jQuery("#issues-details-favorite-filter-template").html()||""),applyFavorite:function(a){a=$j(a.target).data("id");var b=new window.SS.FavoriteFilter({id:a}),c=this.options.filterView.options.app;b.fetch({success:function(){c.state.set("search",!1);c.favoriteFilter.clear({silent:!0});
c.favoriteFilter.set(b.toJSON())}});this.options.filterView.hideDetails()},serializeData:function(){return _.extend({},this.model.toJSON(),{items:this.model.get("choices")})}}),C=window.SS.FavoriteFilterView.extend({initialize:function(){window.SS.BaseFilterView.prototype.initialize.call(this,{detailsView:B});this.listenTo(window.SS.appState,"change:favorites",this.updateFavorites)},updateFavorites:function(){this.model.set("choices",window.SS.appState.get("favorites"));this.render()}}),D=Backbone.Router.extend({routes:{"":"emptyQuery",
":query":"index"},initialize:function(a){this.app=a.app},parseQuery:function(a,b){return(a||"").split(b||"|").map(function(a){a=a.split("\x3d");return{key:a[0],value:decodeURIComponent(a[1])}})},emptyQuery:function(){this.navigate("statuses\x3dOPEN,REOPENED",{trigger:!0,replace:!0})},index:function(a){var b=this.parseQuery(a);if(a=_.findWhere(b,{key:"id"})){var c=this,d=this.app.favoriteFilter;this.app.canSave=!1;d.set("id",a.value);d.fetch({success:function(){b=_.extend({},c.parseQuery(d.get("query")),
b);c.loadResults(b)}})}else this.loadResults(b)},loadResults:function(a){this.app.filterBarView.restoreFromQuery(a);this.app.restoreSorting(a);this.app.fetchFirstPage()}});_.extend(window.SS,{AppState:n,Issue:h,Issues:p,FavoriteFilter:k,FavoriteFilters:q,IssueView:l,IssuesView:g,IssuesActionsView:t,IssuesFilterBarView:u,IssuesHeaderView:v,IssuesFavoriteFilterView:C,IssueDetailView:A,IssuesRouter:D})});window.SS="object"===typeof window.SS?window.SS:{};
jQuery(function(){var a=new Backbone.Marionette.Application;window.SS.IssuesNavigatorApp=a;a.addRegions({headerRegion:".navigator-header",filtersRegion:".navigator-filters",resultsRegion:".navigator-results",actionsRegion:".navigator-actions",detailsRegion:".navigator-details"});a.addInitializer(function(){jQuery("html").addClass("issues-page");this.appState=new window.SS.AppState;window.SS.appState=this.appState;this.state=new Backbone.Model({query:""});this.issues=new window.SS.Issues;this.issues.sorting=
{sort:"UPDATE_DATE",asc:!1};this.issuesPage=1;this.filters=new window.SS.Filters;this.favoriteFilter=new window.SS.FavoriteFilter;this.issuesHeaderView=new window.SS.IssuesHeaderView({app:this,model:this.favoriteFilter});this.headerRegion.show(this.issuesHeaderView);this.issuesView=new window.SS.IssuesView({app:this,collection:this.issues});this.resultsRegion.show(this.issuesView);this.issuesActionsView=new window.SS.IssuesActionsView({app:this,collection:this.issues});this.actionsRegion.show(this.issuesActionsView)});
a.addInitializer(function(){this.filters.add([new window.SS.Filter({name:window.SS.phrases.project,property:"componentRoots",type:window.SS.ProjectFilterView,enabled:!0,optional:!1}),new window.SS.Filter({name:window.SS.phrases.severity,property:"severities",type:window.SS.SelectFilterView,enabled:!0,optional:!1,choices:{BLOCKER:window.SS.phrases.severities.BLOCKER,CRITICAL:window.SS.phrases.severities.CRITICAL,MAJOR:window.SS.phrases.severities.MAJOR,MINOR:window.SS.phrases.severities.MINOR,INFO:window.SS.phrases.severities.INFO},
choiceIcons:{BLOCKER:"severity-blocker",CRITICAL:"severity-critical",MAJOR:"severity-major",MINOR:"severity-minor",INFO:"severity-info"}}),new window.SS.Filter({name:window.SS.phrases.status,property:"statuses",type:window.SS.SelectFilterView,enabled:!0,optional:!1,choices:{OPEN:window.SS.phrases.statuses.OPEN,CONFIRMED:window.SS.phrases.statuses.CONFIRMED,REOPENED:window.SS.phrases.statuses.REOPENED,RESOLVED:window.SS.phrases.statuses.RESOLVED,CLOSED:window.SS.phrases.statuses.CLOSED},choiceIcons:{OPEN:"status-open",
CONFIRMED:"status-confirmed",REOPENED:"status-reopened",RESOLVED:"status-resolved",CLOSED:"status-closed"}}),new window.SS.Filter({name:window.SS.phrases.assignee,property:"assignees",type:window.SS.AssigneeFilterView,enabled:!0,optional:!1}),new window.SS.Filter({name:window.SS.phrases.resolution,property:"resolutions",type:window.SS.SelectFilterView,enabled:!1,optional:!0,choices:{"FALSE-POSITIVE":window.SS.phrases.resolutions["FALSE-POSITIVE"],FIXED:window.SS.phrases.resolutions.FIXED,REMOVED:window.SS.phrases.resolutions.REMOVED}}),
new window.SS.Filter({name:window.SS.phrases.reporter,property:"reporters",type:window.SS.ReporterFilterView,enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.created,propertyFrom:"createdAfter",propertyTo:"createdBefore",type:window.SS.DateRangeFilterView,enabled:!1,optional:!0}),new window.SS.Filter({property:"resolved",type:window.SS.ContextFilterView,enabled:!0,optional:!1}),new window.SS.Filter({property:"actionPlans",type:window.SS.ContextFilterView,enabled:!0,optional:!1}),
new window.SS.Filter({property:"createdAt",type:window.SS.ContextFilterView,enabled:!0,optional:!1})]);this.filterBarView=new window.SS.IssuesFilterBarView({app:this,collection:this.filters,extra:{sort:"",asc:!1}});this.filtersRegion.show(this.filterBarView)});a.addInitializer(function(){var b=this;jQuery.when(this.appState.fetch()).done(function(){b.appState.get("favorites")&&b.filters.unshift(new window.SS.Filter({type:window.SS.IssuesFavoriteFilterView,enabled:!0,optional:!1,choices:b.appState.get("favorites"),
manageUrl:"/issues/manage"}));b.router=new window.SS.IssuesRouter({app:b});Backbone.history.start();b.favoriteFilter.on("change:query",function(d,a){b.router.navigate(a,{trigger:!0,replace:!0})})})});a.addInitializer(function(){var b=this;window.onBulkIssues=function(){b.fetchFirstPage();jQuery(".ui-dialog, .ui-widget-overlay").remove()};window.onSaveAs=window.onCopy=window.onEdit=function(d){jQuery("#modal").dialog("close");b.appState.fetch();var a=new window.SS.FavoriteFilter({id:d});a.fetch({success:function(){b.state.set("search",
!1);b.favoriteFilter.set(a.toJSON());b.fetchFirstPage()}})}});a.getQuery=function(b){var a=this.filterBarView.getQuery();!b&&this.favoriteFilter.id&&(a.id=this.favoriteFilter.id);return a};a.storeQuery=function(b,a){a&&_.extend(b,{sort:a.sort,asc:""+a.asc});var c=_.map(b,function(b,a){return[a,encodeURIComponent(b)].join("\x3d")}).join("|");this.router.navigate(c,{replace:!0})};a.restoreSorting=function(b){var a=_.findWhere(b,{key:"sort"});b=_.findWhere(b,{key:"asc"});a&&b&&(this.issues.sorting={sort:a.value,
sortText:jQuery("[data-sort\x3d"+a.value+"]:first").text(),asc:"true"===b.value})};a.fetchIssues=function(a){var d=this.getQuery(),c=_.extend({pageIndex:this.issuesPage},d);this.issues.sorting&&_.extend(c,{sort:this.issues.sorting.sort,asc:this.issues.sorting.asc});_.extend(c,{hideRules:!0});this.favoriteFilter.id&&(d.id=this.favoriteFilter.id,c.id=this.favoriteFilter.id);this.storeQuery(d,this.issues.sorting);var e=this;this.issuesView.$el.addClass("navigator-fetching");a?(this.issues.fetch({data:c,
success:function(){e.issuesView.$el.removeClass("navigator-fetching")}}),this.detailsRegion.reset()):this.issues.fetch({data:c,remove:!1,success:function(){e.issuesView.$el.removeClass("navigator-fetching")}})};a.fetchFirstPage=function(){this.issuesPage=1;this.fetchIssues(!0)};a.fetchNextPage=function(){this.issuesPage<this.issues.paging.pages&&(this.issuesPage++,this.fetchIssues(!1))}});window.SS="object"===typeof window.SS?window.SS:{};
(function(){var a=new Backbone.Marionette.Application;window.SS.IssuesNavigatorAppOld=a;a.addRegions({filtersRegion:".navigator-filters"});a.addInitializer(function(){this.filters=new window.SS.Filters;_.isObject(window.SS.favorites)&&this.filters.add([new window.SS.Filter({type:window.SS.FavoriteFilterView,enabled:!0,optional:!1,choices:window.SS.favorites,favoriteUrl:"/issues/filter",manageUrl:"/issues/manage"})]);this.filters.add([new window.SS.Filter({name:window.SS.phrases.project,property:"componentRoots",
type:window.SS.ProjectFilterView,enabled:!0,optional:!1}),new window.SS.Filter({name:window.SS.phrases.severity,property:"severities[]",type:window.SS.SelectFilterView,enabled:!0,optional:!1,choices:{BLOCKER:window.SS.phrases.severities.blocker,CRITICAL:window.SS.phrases.severities.critical,MAJOR:window.SS.phrases.severities.major,MINOR:window.SS.phrases.severities.minor,INFO:window.SS.phrases.severities.info},choiceIcons:{BLOCKER:"/images/priority/BLOCKER.png",CRITICAL:"/images/priority/CRITICAL.png",
MAJOR:"/images/priority/MAJOR.png",MINOR:"/images/priority/MINOR.png",INFO:"/images/priority/INFO.png"}}),new window.SS.Filter({name:window.SS.phrases.status,property:"statuses[]",type:window.SS.SelectFilterView,enabled:!0,optional:!1,choices:{OPEN:window.SS.phrases.statuses.open,CONFIRMED:window.SS.phrases.statuses.confirmed,REOPENED:window.SS.phrases.statuses.reopened,RESOLVED:window.SS.phrases.statuses.resolved,CLOSED:window.SS.phrases.statuses.closed}}),new window.SS.Filter({name:window.SS.phrases.assignee,
property:"assignees",type:window.SS.AssigneeFilterView,enabled:!0,optional:!1}),new window.SS.Filter({name:window.SS.phrases.resolution,property:"resolutions[]",type:window.SS.SelectFilterView,enabled:!1,optional:!0,choices:{"FALSE-POSITIVE":window.SS.phrases.resolutions.falsePositive,FIXED:window.SS.phrases.resolutions.fixed,REMOVED:window.SS.phrases.resolutions.removed}}),new window.SS.Filter({name:window.SS.phrases.reporter,property:"reporters",type:window.SS.ReporterFilterView,enabled:!1,optional:!0}),
new window.SS.Filter({name:window.SS.phrases.created,propertyFrom:"createdAfter",propertyTo:"createdBefore",type:window.SS.DateRangeFilterView,enabled:!1,optional:!0})]);this.filterBarView=new window.SS.FilterBarView({collection:this.filters,extra:{sort:"",asc:!1}});this.filtersRegion.show(this.filterBarView)})})();window.SS="object"===typeof window.SS?window.SS:{};
(function(){var a=new Backbone.Marionette.Application;window.SS.MeasuresNavigatorApp=a;a.addRegions({filtersRegion:".navigator-filters"});a.addInitializer(function(){this.filters=new window.SS.Filters;_.isObject(window.SS.favorites)&&this.filters.add([new window.SS.Filter({type:window.SS.FavoriteFilterView,enabled:!0,optional:!1,choices:window.SS.favorites,favoriteUrl:"/measures/filter",manageUrl:"/measures/manage"})]);this.filters.add([new window.SS.Filter({name:window.SS.phrases.components,property:"qualifiers[]",
type:window.SS.SelectFilterView,enabled:!0,optional:!1,choices:window.SS.qualifiers,defaultValue:window.SS.phrases.any}),new window.SS.Filter({name:window.SS.phrases.alert,property:"alertLevels[]",type:window.SS.SelectFilterView,enabled:!1,optional:!0,choices:{error:window.SS.phrases.error,warn:window.SS.phrases.warning,ok:window.SS.phrases.ok}}),new window.SS.Filter({name:window.SS.phrases.componentsOf,property:"base",type:window.SS.ComponentFilterView,multiple:!1,enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.favoritesOnly,
property:"onFavourites",type:window.SS.CheckboxFilterView,enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.date,propertyFrom:"fromDate",propertyTo:"toDate",type:window.SS.DateRangeFilterView,enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.keyContains,property:"keySearch",type:window.SS.StringFilterView,enabled:!1,optional:!0})]);this.filters.add([new window.SS.Filter({name:window.SS.phrases.lastAnalysis,propertyFrom:"ageMinDays",propertyTo:"ageMaxDays",type:window.SS.RangeFilterView,
placeholder:window.SS.phrases.days,enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.metric,property:"c3",type:window.SS.MetricFilterView,metrics:window.SS.metrics,periods:window.SS.metricPeriods,operations:{eq:"\x3d",lt:"\x3c",lte:"≤",gt:"\x3e",gte:"≥"},enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.metric,property:"c2",type:window.SS.MetricFilterView,metrics:window.SS.metrics,periods:window.SS.metricPeriods,operations:{eq:"\x3d",lt:"\x3c",lte:"≤",gt:"\x3e",
gte:"≥"},enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.metric,property:"c1",type:window.SS.MetricFilterView,metrics:window.SS.metrics,periods:window.SS.metricPeriods,operations:{eq:"\x3d",lt:"\x3c",lte:"≤",gt:"\x3e",gte:"≥"},enabled:!1,optional:!0}),new window.SS.Filter({name:window.SS.phrases.nameContains,property:"nameSearch",type:window.SS.StringFilterView,enabled:!1,optional:!0})]);this.filterBarView=new window.SS.FilterBarView({collection:this.filters,extra:{sort:"",asc:!1}});
this.filtersRegion.show(this.filterBarView)})})();function showMessage(a,b){$j("#"+a+"msg").html(b);$j("#"+a).show()}function error(a){showMessage("error",a)}function warning(a){showMessage("warning",a)}function info(a){showMessage("info",a)}function toggleFav(a,b){$j.ajax({type:"POST",dataType:"json",url:baseUrl+"/favourites/toggle/"+a,success:function(a){var c=$j(b);c.removeClass("fav notfav");c.addClass(a.css);c.attr("title",a.title)}})}
function dashboardParameters(){var a=window.location.search,b="",d=a.match(/did=\d+/);d&&1===$j("#is-project-dashboard").length&&(b+=d[0]+"\x26");(d=a.match(/period=\d+/))&&3>=parseInt(/period=(\d+)/.exec(a)[1])&&(b+=d[0]+"\x26");""!==b&&(b="?"+b);return b}
function resourceViewerOnBulkIssues(){0<=window.location.search.indexOf("tab\x3d")?0<=window.location.search.indexOf("tab\x3dissues")?window.location.reload():window.location.search=window.location.search.replace(/tab=\w+/,"tab\x3dissues"):window.location.search.startsWith("?")?window.location.search+="\x26tab\x3dissues":window.location.search+="?tab\x3dissues"}
var SelectBox={cache:{},init:function(a){var b=document.getElementById(a);SelectBox.cache[a]=[];for(var d=SelectBox.cache[a],c=0;a=b.options[c];c++)d.push({value:a.value,text:a.text,displayed:1})},redisplay:function(a){for(var b=document.getElementById(a),d=b.options.length=0,c=SelectBox.cache[a].length;d<c;d++){var e=SelectBox.cache[a][d];e.displayed&&(b.options[b.options.length]=new Option(e.text,e.value,!1,!1))}},filter:function(a,b){for(var d=b.toLowerCase().split(/\s+/),c,e,f=0;c=SelectBox.cache[a][f];f++){c.displayed=
1;for(var g=0;e=d[g];g++)-1==c.text.toLowerCase().indexOf(e)&&(c.displayed=0)}SelectBox.redisplay(a)},delete_from_cache:function(a,b){for(var d,c=null,e=0;d=SelectBox.cache[a][e];e++)if(d.value==b){c=e;break}d=SelectBox.cache[a].length-1;for(e=c;e<d;e++)SelectBox.cache[a][e]=SelectBox.cache[a][e+1];SelectBox.cache[a].length--},add_to_cache:function(a,b){SelectBox.cache[a].push({value:b.value,text:b.text,displayed:1})},cache_contains:function(a,b){for(var d,c=0;d=SelectBox.cache[a][c];c++)if(d.value==
b)return!0;return!1},move:function(a,b){for(var d=document.getElementById(a),c,e=0;c=d.options[e];e++)c.selected&&SelectBox.cache_contains(a,c.value)&&(SelectBox.add_to_cache(b,{value:c.value,text:c.text,displayed:1}),SelectBox.delete_from_cache(a,c.value));SelectBox.redisplay(a);SelectBox.redisplay(b)},move_all:function(a,b){for(var d=document.getElementById(a),c,e=0;c=d.options[e];e++)SelectBox.cache_contains(a,c.value)&&(SelectBox.add_to_cache(b,{value:c.value,text:c.text,displayed:1}),SelectBox.delete_from_cache(a,
c.value));SelectBox.redisplay(a);SelectBox.redisplay(b)},sort:function(a){SelectBox.cache[a].sort(function(a,d){a=a.text.toLowerCase();d=d.text.toLowerCase();return a>d?1:a<d?-1:0})},select_all:function(a){a=document.getElementById(a);for(var b=0;b<a.options.length;b++)a.options[b].selected="selected"}},treemaps={};function treemapById(a){return treemaps[a]}
var TreemapContext=function(a,b){this.rid=a;this.label=b},Treemap=function(a,b,d,c){this.id=a;this.sizeMetric=b;this.colorMetric=d;this.breadcrumb=[];treemaps[a]=this;this.rootNode().height(this.rootNode().width()*c/100);this.initNodes()};Treemap.prototype.currentContext=function(){return 0<this.breadcrumb.length?this.breadcrumb[this.breadcrumb.length-1]:null};
Treemap.prototype.load=function(){var a=this.currentContext(),b="";this.breadcrumb.each(function(a){b+=a.label+"\x26nbsp;/\x26nbsp;"});$j("#tm-bc-"+this.id).html(b);$j("#tm-loading-"+this.id).show();var d=this;$j.ajax({type:"GET",url:baseUrl+"/treemap/index?html_id\x3d"+this.id+"\x26size_metric\x3d"+this.sizeMetric+"\x26color_metric\x3d"+this.colorMetric+"\x26resource\x3d"+a.rid,dataType:"html",success:function(a){1<a.length?(d.rootNode().html(a),d.initNodes()):(d.breadcrumb.pop(),$j("#tm-bottom-level-reached-msg-"+
d.id).show());$j("#tm-loading-"+d.id).hide()}})};Treemap.prototype.rootNode=function(){return $j("#tm-"+this.id)};
Treemap.prototype.initNodes=function(){var a=this;$j("#tm-"+this.id).find("a").each(function(a){$j(this).on("click",function(a){a.stopPropagation()})});$j("#tm-"+this.id).find("[rid]").each(function(b){$j(this).on("contextmenu",function(b){b.stopPropagation();b.preventDefault();$j("#tm-bottom-level-reached-msg-"+a.id).hide();1<a.breadcrumb.length?(a.breadcrumb.pop(),a.load()):1==a.breadcrumb.length&&($j("#tm-loading-"+a.id).show(),location.reload());return!1});$j(this).on("click",function(b){b=$j(this);
var c=b.attr("rid");b=new TreemapContext(c,b.text());a.breadcrumb.push(b);a.load()})})};
function openModalWindow(a,b){var d=b.width||540,c=$j("#modal");c.length||(c=$j('\x3cdiv id\x3d"modal" class\x3d"ui-widget-overlay"\x3e\x3c/div\x3e').appendTo("body"));$j.get(a,function(a){c.removeClass("ui-widget-overlay");c.html(a);c.dialog({dialogClass:"no-close",width:d,draggable:!1,autoOpen:!1,modal:!0,minHeight:50,resizable:!1,title:null,close:function(){$j("#modal").remove()}});c.dialog("open")}).fail(function(){alert("Server error. Please contact your administrator.")}).always(function(){c.removeClass("ui-widget-overlay")});return!1}
(function(a){a.fn.extend({openModal:function(){return this.each(function(){var b=a(this),d=b.attr("modal-url")||b.attr("href");return openModalWindow(d,{width:b.attr("modal-width")})})},modal:function(){return this.each(function(){var b=a(this);b.unbind("click");var d=b.bind("click",function(){d.openModal();return!1})})},modalForm:function(b){return this.each(function(){var d=a(this);d.submit(function(c){a("input[type\x3dsubmit]",this).attr("disabled","disabled");a.ajax(a.extend({type:"POST",url:d.attr("action"),
data:d.serialize(),success:function(a){window.location.reload()},error:function(b,c,g){c=d.find(".modal-error");c.length?(a(".loading-image").addClass("hidden"),a("input[type\x3dsubmit]",d).removeAttr("disabled"),c.show(),c.html(b.responseText)):a("#modal").html(b.responseText)}},b));return!1})})}})})(jQuery);function closeModalWindow(){$j("#modal").dialog("close");return!1}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}
function openAccordionItem(a,b,d){var c=$j(b).closest(".accordion-item"),e=new Image;e.src=baseUrl+"/images/loading.gif";e.className="accordion-loading";var f=$j(e),e=c.find(".accordion-loading");d&&e.length&&(e.show(),f.hide());c.length?(e=c.nextAll(".accordion-item"),e.height()&&$j("#accordion-panel").height($j("#accordion-panel").height()+e.height()),e.remove(),0==c.next(".accordion-loading").length&&f.insertAfter(c)):($j(".accordion-item").remove(),0==$j("#accordion-panel").next(".accordion-loading").length&&
f.insertAfter($j("#accordion-panel")));return $j.ajax({url:a}).fail(function(a,b){var c="Server error. Please contact your administrator. The status of the error is : "+a.status+", textStatus is : "+b;console.log(c);$j("#accordion-panel").append($j('\x3cdiv class\x3d"error"\x3e').append(c))}).done(function(a){if(c.length){var e=c.find(".accordion-item-body");!d&&!e.hasClass("accordion-item-body-medium")&&(e.addClass("accordion-item-body-medium"),b.scrollIntoView(!1))}else $j("#accordion-panel").height("auto"),
$j(".accordion-item").remove();d?(e=$j("#accordion-panel").height(),c.html(a),$j("#accordion-panel").height("auto"),a=$j("#accordion-panel").height(),e>a?$j("#accordion-panel").height(e):$j("#accordion-panel").height(a)):(e=$j(".accordion-item").size(),e=$j('\x3cdiv id\x3d"accordion-item'+e+'" class\x3d"accordion-item"\x3e'),$j("#accordion-panel").append(e),e.append(a),$j("#accordion-panel").height("auto"),c.length&&$j("html, body").animate({scrollTop:c.offset().top},500));f.remove()})}
function expandAccordionItem(a){$j(a).closest(".accordion-item").find(".accordion-item-body").removeClass("accordion-item-body-medium")}var currentlyDisplayedDropdownMenu,hideCurrentDropdownMenu=function(){currentlyDisplayedDropdownMenu&&currentlyDisplayedDropdownMenu.hide();$j(document).unbind("mouseup",hideCurrentDropdownMenu)},clickOnDropdownMenuLink=function(a){if(a=$j(a.target).children("a")){var b=a.attr("href");b&&1<b.length?window.location=b:a.click()}};
function showDropdownMenu(a){showDropdownMenuOnElement($j("#"+a))}function showDropdownMenuOnElement(a){a=$j(a);if(a==currentlyDisplayedDropdownMenu)currentlyDisplayedDropdownMenu="";else{currentlyDisplayedDropdownMenu=a;$j(document).mouseup(hideCurrentDropdownMenu);var b=a.find("li");b.unbind("click");b.click(clickOnDropdownMenuLink);a.show()}}function openPopup(a,b){window.open(a,b,"height\x3d800,width\x3d900,scrollbars\x3d1,resizable\x3d1");return!1}
jQuery(function(){jQuery("#searchInput").topSearch({minLength:2,results:"#searchResourcesResults",spinner:"#searchingResources"});jQuery("#login-link").on("click",function(a){a.preventDefault();a=jQuery(this).prop("href");var b=window.location.hash;0<b.length&&(a+=decodeURIComponent(b));window.location=a})});(function(b){window.Portal=function(a){this.initialize(a)};window.Portal.prototype={initialize:function(a){this.options=a;this.options.editorEnabled&&(this.createAllSortables(),this.lastSaveString="",this.saveDashboardsState())},createAllSortables:function(){var a=this,c=b("."+this.options.block),d=b("."+this.options.columnHandle),f,g=function(e){b(e.currentTarget).removeClass(a.options.hoverClass)},h=function(e){e.preventDefault();f.detach().insertBefore(b(e.currentTarget));g(e);a.saveDashboardsState()};
c.prop("draggable",!0).on("dragstart",function(a){a.originalEvent.dataTransfer.setData("text/plain","drag");f=b(this);d.show()}).on("dragover",function(c){f.prop("id")!==b(this).prop("id")&&(c.preventDefault(),b(c.currentTarget).addClass(a.options.hoverClass))}).on("drop",h).on("dragleave",g);d.on("dragover",function(c){c.preventDefault();b(c.currentTarget).addClass(a.options.hoverClass)}).on("drop",h).on("dragleave",g)},highlightWidget:function(a){var c=b("#block_"+a),d=this.options;c.css("background-color",
d.highlightStartColor);setTimeout(function(){c.css("background-color",d.highlightEndColor)},this.options.highlightDuration)},saveDashboardsState:function(){var a=this.options,c=b("."+this.options.column).map(function(){var c=b(this).find("."+a.block);b(this).find("."+a.columnHandle).toggle(0===c.length);return c.map(function(){return b(this).prop("id").substring(a.block.length+1)}).get().join(",")}).get().join(";");if(c!==this.lastSaveString){var d=""===this.lastSaveString;this.lastSaveString=c;!d&&
this.options.saveUrl&&(c=this.options.dashboardState+"\x3d"+escape(c),b.ajax({url:this.options.saveUrl,type:"POST",data:c}))}},editWidget:function(a){b("#widget_title_"+a).hide();b("#widget_"+a).hide();b("#widget_props_"+a).show()},cancelEditWidget:function(a){b("widget_title_"+a).show();b("#widget_"+a).show();b("#widget_props_"+a).hide()},deleteWidget:function(a){b(a).closest("."+this.options.block).remove();this.saveDashboardsState()}};window.autoResize=function(a,c){var d=_.debounce(c,a);b(window).on("resize",
d)}})(jQuery);function updateDuplicationLines(f,a,b,c,d,e){$j("#duplGroup_"+a+" p.selected").removeClass("selected");$j("#duplCount-"+a+"-"+b).addClass("selected");$j("#duplFrom-"+a+"-"+b).addClass("selected");$j("#duplName-"+a+"-"+b).addClass("selected");$j("#duplLoading-"+a).addClass("loading");$j("#source-"+a+" :first-child").hasClass("expanded")&&(e=d+c-1);$j.ajax({url:f+"\x26to_line\x3d"+e+"\x26from_line\x3d"+d+"\x26lines_count\x3d"+c+"\x26group_index\x3d"+a,success:function(b){$j("#source-"+a).html(b)},type:"get"});
return!1};function loadResourceViewer(a,c,b,d,e){void 0==b&&(b=!0);openAccordionItem(baseUrl+"/resource/index/"+a+"?tab\x3d"+c+"\x26display_title\x3d"+b+"\x26period\x3d"+d,e,!0);return!1}function loadGWT(a,c,b,d,e,f,g){config.resource=[{id:c,key:b,name:d,scope:e,qualifier:f,lang:g}];config.resource_key=c;modules[a]()}
function expandTests(a,c){expandAccordionItem(c);var b=$j(c).closest(".test_name_"+a);b.find(".test_expandLink_"+a).hide();b.find(".test_collapseLink_"+a).show();b.next(".tests_viewer .test_message_"+a).show()}function collapseTests(a,c){expandAccordionItem(c);var b=$j(c).closest(".test_name_"+a);b.find(".test_collapseLink_"+a).hide();b.find(".test_expandLink_"+a).show();b.next(".tests_viewer .test_message_"+a).hide()}
function highlight_usages(a){var c=!1,b=$j(this).attr("class").split(" ");-1!==b.indexOf("highlighted")&&(c=!0);$j("#"+a.data.id+" span.highlighted").removeClass("highlighted");c||$j("#"+a.data.id+" span."+b[0]).addClass("highlighted")};function issueForm(a,b){var c=$j(b).closest("[data-issue-key]"),d=c.attr("data-issue-key"),e=c.find(".code-issue-actions"),f=c.find(".code-issue-form");e.addClass("hidden");f.html("\x3cimg src\x3d'"+baseUrl+"/images/loading-small.gif'\x3e").removeClass("hidden");$j.ajax(baseUrl+"/issue/action_form/"+a+"?issue\x3d"+d).done(function(a){f.html(a);a=f.find("[autofocus]");null!=a&&a.focus()}).fail(function(a,b){alert(b)});return!1}
function closeIssueForm(a){a=$j(a).closest("[data-issue-key]");var b=a.find(".code-issue-actions");a.find(".code-issue-form").addClass("hidden");b.removeClass("hidden");return!1}function notifyIssueChange(a){$j(document).trigger("sonar.issue.updated",[a])}
function submitIssueForm(a){var b=$j(a).closest("form");b.find(".loading").removeClass("hidden");b.find(":submit").prop("disabled",!0);var c=b.closest("[data-issue-key]"),d=c.attr("data-issue-key");$j.ajax({type:"POST",url:baseUrl+"/issue/do_action",data:b.serialize()}).success(function(a){a=$j(a);c.replaceWith(a);notifyIssueChange(d)}).fail(function(b,d){closeIssueForm(a);c.find(".code-issue-actions").replaceWith(b.responseText)});return!1}
function doIssueAction(a,b,c){var d=$j(a).closest("[data-issue-key]"),e=d.attr("data-issue-key");d.find(".code-issue-actions").html("\x3cimg src\x3d'"+baseUrl+"/images/loading.gif'\x3e");c.issue=e;$j.ajax({type:"POST",url:baseUrl+"/issue/do_action/"+b,data:c}).success(function(a){a=$j(a);d.replaceWith(a);notifyIssueChange(e)}).fail(function(a,b){d.find(".code-issue-actions").replaceWith(a.responseText)});return!1}function doPluginIssueAction(a,b){return doIssueAction(a,b,{})}
function assignIssueToMe(a){return doIssueAction(a,"assign",{me:!0})}function doIssueTransition(a,b){return doIssueAction(a,"transition",{transition:b})}function deleteIssueComment(a,b){var c=$j(a).closest("[data-comment-key]"),d=c.attr("data-comment-key"),e=c.closest("[data-issue-key]");confirm(b)&&$j.ajax({type:"POST",url:baseUrl+"/issue/delete_comment?id\x3d"+d,success:function(a){e.replaceWith($j(a))}});return!1}
function formEditIssueComment(a){var b=$j(a).closest("[data-comment-key]");a=b.attr("data-comment-key");b.closest("[data-issue-key]").find(".code-issue-actions").addClass("hidden");b.html("\x3cimg src\x3d'"+baseUrl+"/images/loading.gif'\x3e");$j.get(baseUrl+"/issue/edit_comment_form/"+a,function(a){b.html(a)});return!1}
function doEditIssueComment(a){var b=$j(a).closest("form"),c=b.closest("[data-issue-key]"),d=c.attr("data-issue-key");$j.ajax({type:"POST",url:baseUrl+"/issue/edit_comment",data:b.serialize(),success:function(a){a=$j(a);c.replaceWith(a);notifyIssueChange(d)},error:function(c,d){closeIssueForm(a);b.closest("[data-comment-key]").replaceWith(c.responseText)}});return!1}
function refreshIssue(a){var b=$j(a).closest("[data-issue-key]");a=b.attr("data-issue-key");$j.get(baseUrl+"/issue/show/"+a+"?only_detail\x3dtrue",function(a){a=$j(a);b.replaceWith(a)});return!1}function openCIF(a,b,c){$j.get(baseUrl+"/issue/create_form?component\x3d"+b+"\x26line\x3d"+c,function(b){$j(a).closest("tr").find("td.line").append($j(b))});return!1}function closeCreateIssueForm(a){$j(a).closest(".code-issue-create-form").remove();return!1}
function submitCreateIssueForm(a){var b=$j(a).closest("form"),c=b.find(".loading");c.removeClass("hidden");$j.ajax({type:"POST",url:baseUrl+"/issue/create",data:b.serialize()}).success(function(a){a=$j(a);b.replaceWith(a)}).error(function(a,c,f){c=b.find(".code-issue-errors");c.html(a.responseText);c.removeClass("hidden")}).always(function(){c.addClass("hidden")});return!1}
function toggleIssueCollapsed(a){a=$j(a).closest("[data-issue-rule]");a.toggleClass("code-issue-collapsed");if(!a.hasClass("code-issue-collapsed")){var b=a.find(".rule-loading");b.removeClass("hidden");var c=a.find(".issue-rule");c.addClass("hidden");var d=a.attr("data-issue-rule");$j.get(baseUrl+"/issue/rule/"+d,function(a){c.html(a);c.find(".open-modal").modal()}).always(function(){b.addClass("hidden");c.removeClass("hidden")});var e=a.find(".changelog-loading");e.removeClass("hidden");var f=a.find(".issue-changelog");
f.addClass("hidden");a=a.attr("data-issue-key");$j.get(baseUrl+"/issue/changelog/"+a,function(a){f.html(a)}).always(function(){e.addClass("hidden");f.removeClass("hidden")})}return!1}function openIssuePopup(a){a=$j(a).closest("[data-issue-key]").attr("data-issue-key");openPopup(baseUrl+"/issue/show/"+a+"?layout\x3dfalse","issue");return!1};window.Sonar={};Sonar.RecentHistory=function(){};Sonar.RecentHistory.prototype.getRecentHistory=function(){var a=localStorage.getItem("sonar_recent_history");return a=null==a?[]:JSON.parse(a)};Sonar.RecentHistory.prototype.clear=function(){localStorage.clear()};
Sonar.RecentHistory.prototype.add=function(a,d,b){var c=this.getRecentHistory();if(""!==a){d={key:a,name:d,iconPath:b};for(b=0;b<c.length;b++)if(c[b].key===a){c.splice(b,1);break}c.unshift(d);c=c.slice(0,10);localStorage.setItem("sonar_recent_history",JSON.stringify(c))}};
Sonar.RecentHistory.prototype.populateRecentHistoryPanel=function(){var a=$j("#recent-history-list");a.empty();var d=this.getRecentHistory();0===d.length?$j("#recent-history").hide():(d.forEach(function(b){a.append('\x3cli\x3e\x3cimg width\x3d"16" height\x3d"16" src\x3d"'+baseUrl+b.iconPath+'"\x3e\x3ca href\x3d"'+baseUrl+"/dashboard/index/"+b.key+dashboardParameters()+'"\x3e '+b.name+"\x3c/a\x3e\x3c/li\x3e")}),$j("#recent-history").show())};